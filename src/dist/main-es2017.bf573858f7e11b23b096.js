(self.webpackChunkaddressio=self.webpackChunkaddressio||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},7716:function(e,t,n){"use strict";n.d(t,{deG:function(){return tn},tb:function(){return Nl},AFp:function(){return Al},ip1:function(){return xl},CZH:function(){return Il},hGG:function(){return xc},z2F:function(){return _c},sBO:function(){return Ta},Sil:function(){return Gl},_Vd:function(){return Wo},EJc:function(){return Ml},SBq:function(){return Xo},qLn:function(){return gi},vpe:function(){return ll},gxx:function(){return ns},tBr:function(){return Cn},XFs:function(){return A},OlP:function(){return en},zs3:function(){return _s},ZZ4:function(){return ya},aQg:function(){return ba},soG:function(){return Ll},YKP:function(){return Fa},v3s:function(){return vc},h0i:function(){return Na},PXZ:function(){return dc},R0b:function(){return $l},FiY:function(){return Sn},Lbi:function(){return Pl},g9A:function(){return Ol},n_E:function(){return ul},Qsj:function(){return na},FYo:function(){return ta},JOm:function(){return vi},Tiy:function(){return ra},q3G:function(){return ui},tp0:function(){return kn},EAV:function(){return Cc},Rgc:function(){return Da},dDg:function(){return tc},DyG:function(){return nn},q4F:function(){return oa},GfV:function(){return sa},s_b:function(){return Ma},ifc:function(){return F},eFA:function(){return pc},G48:function(){return uc},Gpc:function(){return p},f3M:function(){return vn},X6Q:function(){return cc},_c5:function(){return Tc},VLi:function(){return rc},c2e:function(){return Fl},zSh:function(){return rs},wAp:function(){return Lo},vHH:function(){return g},EiD:function(){return li},mCW:function(){return Gn},qzn:function(){return Nn},JVY:function(){return Ln},pB0:function(){return qn},eBb:function(){return Vn},L6k:function(){return Mn},LAX:function(){return Un},cg1:function(){return Po},Tjo:function(){return kc},kL8:function(){return No},yhl:function(){return Fn},dqk:function(){return q},sIi:function(){return xs},CqO:function(){return $s},QGY:function(){return Hs},F4k:function(){return Ys},RDi:function(){return Ce},AaK:function(){return u},z3N:function(){return Pn},qOj:function(){return vs},TTD:function(){return ge},_Bn:function(){return Ho},xp6:function(){return sr},uIk:function(){return Os},Gre:function(){return xo},ekj:function(){return ho},Suo:function(){return Cl},Xpm:function(){return Q},lG2:function(){return re},Yz7:function(){return b},cJS:function(){return w},oAB:function(){return te},Yjl:function(){return se},Y36:function(){return Ls},_UZ:function(){return Bs},GkF:function(){return zs},BQk:function(){return Zs},ynx:function(){return js},qZA:function(){return qs},TgZ:function(){return Us},EpF:function(){return Gs},n5z:function(){return Kt},Ikx:function(){return Io},LFG:function(){return yn},$8M:function(){return Jt},NdJ:function(){return Ws},CRH:function(){return Sl},kcU:function(){return mt},O4$:function(){return ft},oxw:function(){return eo},ALo:function(){return nl},lcZ:function(){return il},xi3:function(){return rl},Hsn:function(){return io},F$t:function(){return no},Q6J:function(){return Ms},DdM:function(){return Ja},VKq:function(){return Xa},iGM:function(){return bl},MAs:function(){return Fs},CHM:function(){return qe},LSH:function(){return hi},kYT:function(){return ne},Udp:function(){return uo},WFA:function(){return Ks},d8E:function(){return Ao},YNc:function(){return Ns},_uU:function(){return So},Oqu:function(){return ko},hij:function(){return To},AsE:function(){return Eo},Gf:function(){return wl}});var i=n(9765),r=n(5319),s=n(7574),o=n(6682),a=n(8819);function l(e){for(let t in e)if(e[t]===l)return t;throw Error("Could not find renamed property on target object.")}function c(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function u(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(u).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function h(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const d=l({__forward_ref__:l});function p(e){return e.__forward_ref__=p,e.toString=function(){return u(this())},e}function f(e){return m(e)?e():e}function m(e){return"function"==typeof e&&e.hasOwnProperty(d)&&e.__forward_ref__===p}class g extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function _(e){return"string"==typeof e?e:null==e?"":String(e)}function y(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():_(e)}function v(e,t){const n=t?` in ${t}`:"";throw new g("201",`No provider for ${y(e)} found${n}`)}function b(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function w(e){return{providers:e.providers||[],imports:e.imports||[]}}function C(e){return S(e,T)||S(e,x)}function S(e,t){return e.hasOwnProperty(t)?e[t]:null}function k(e){return e&&(e.hasOwnProperty(E)||e.hasOwnProperty(I))?e[E]:null}const T=l({"\u0275prov":l}),E=l({"\u0275inj":l}),x=l({ngInjectableDef:l}),I=l({ngInjectorDef:l});var A=(()=>((A=A||{})[A.Default=0]="Default",A[A.Host=1]="Host",A[A.Self=2]="Self",A[A.SkipSelf=4]="SkipSelf",A[A.Optional=8]="Optional",A))();let D;function R(e){const t=D;return D=e,t}function O(e,t,n){const i=C(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&A.Optional?null:void 0!==t?t:void v(u(e),"Injector")}function P(e){return{toString:e}.toString()}var N=(()=>((N=N||{})[N.OnPush=0]="OnPush",N[N.Default=1]="Default",N))(),F=(()=>((F=F||{})[F.Emulated=0]="Emulated",F[F.None=2]="None",F[F.ShadowDom=3]="ShadowDom",F))();const L="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,q=L||U||M||V,B={},j=[],Z=l({"\u0275cmp":l}),z=l({"\u0275dir":l}),G=l({"\u0275pipe":l}),H=l({"\u0275mod":l}),Y=l({"\u0275loc":l}),$=l({"\u0275fac":l}),W=l({__NG_ELEMENT_ID__:l});let K=0;function Q(e){return P(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===N.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||j,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||F.Emulated,id:"c",styles:e.styles||j,_:null,setInput:null,schemas:e.schemas||null,tView:null},i=e.directives,r=e.features,s=e.pipes;return n.id+=K++,n.inputs=ie(e.inputs,t),n.outputs=ie(e.outputs),r&&r.forEach(e=>e(n)),n.directiveDefs=i?()=>("function"==typeof i?i():i).map(J):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(X):null,n})}function J(e){return oe(e)||function(e){return e[z]||null}(e)}function X(e){return function(e){return e[G]||null}(e)}const ee={};function te(e){return P(()=>{const t={type:e.type,bootstrap:e.bootstrap||j,declarations:e.declarations||j,imports:e.imports||j,exports:e.exports||j,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ee[e.id]=e.type),t})}function ne(e,t){return P(()=>{const n=ae(e,!0);n.declarations=t.declarations||j,n.imports=t.imports||j,n.exports=t.exports||j})}function ie(e,t){if(null==e)return B;const n={};for(const i in e)if(e.hasOwnProperty(i)){let r=e[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,t&&(t[r]=s)}return n}const re=Q;function se(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function oe(e){return e[Z]||null}function ae(e,t){const n=e[H]||null;if(!n&&!0===t)throw new Error(`Type ${u(e)} does not have '\u0275mod' property.`);return n}function le(e){return Array.isArray(e)&&"object"==typeof e[1]}function ce(e){return Array.isArray(e)&&!0===e[1]}function ue(e){return 0!=(8&e.flags)}function he(e){return 2==(2&e.flags)}function de(e){return 1==(1&e.flags)}function pe(e){return null!==e.template}function fe(e,t){return e.hasOwnProperty($)?e[$]:null}class me{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ge(){return _e}function _e(e){return e.type.prototype.ngOnChanges&&(e.setInput=ve),ye}function ye(){const e=be(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===B)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function ve(e,t,n,i){const r=be(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:B,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[n],l=o[a];s[a]=new me(l&&l.currentValue,t,o===B),e[i]=t}function be(e){return e.__ngSimpleChanges__||null}let we;function Ce(e){we=e}function Se(e){return!!e.listen}ge.ngInherit=!0;const ke={createRenderer:(e,t)=>void 0!==we?we:"undefined"!=typeof document?document:void 0};function Te(e){for(;Array.isArray(e);)e=e[0];return e}function Ee(e,t){return Te(t[e])}function xe(e,t){return Te(t[e.index])}function Ie(e,t){return e.data[t]}function Ae(e,t){return e[t]}function De(e,t){const n=t[e];return le(n)?n:n[0]}function Re(e){return 4==(4&e[2])}function Oe(e){return 128==(128&e[2])}function Pe(e,t){return null==t?null:e[t]}function Ne(e){e[18]=0}function Fe(e,t){e[5]+=t;let n=e,i=e[3];for(;null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}const Le={lFrame:at(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Me(){return Le.bindingsEnabled}function Ve(){return Le.lFrame.lView}function Ue(){return Le.lFrame.tView}function qe(e){return Le.lFrame.contextLView=e,e[8]}function Be(){let e=je();for(;null!==e&&64===e.type;)e=e.parent;return e}function je(){return Le.lFrame.currentTNode}function Ze(e,t){const n=Le.lFrame;n.currentTNode=e,n.isParent=t}function ze(){return Le.lFrame.isParent}function Ge(){Le.lFrame.isParent=!1}function He(){return Le.isInCheckNoChangesMode}function Ye(e){Le.isInCheckNoChangesMode=e}function $e(){const e=Le.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function We(){return Le.lFrame.bindingIndex}function Ke(){return Le.lFrame.bindingIndex++}function Qe(e){const t=Le.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Je(e,t){const n=Le.lFrame;n.bindingIndex=n.bindingRootIndex=e,Xe(t)}function Xe(e){Le.lFrame.currentDirectiveIndex=e}function et(e){const t=Le.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function tt(){return Le.lFrame.currentQueryIndex}function nt(e){Le.lFrame.currentQueryIndex=e}function it(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function rt(e,t,n){if(n&A.SkipSelf){let i=t,r=e;for(;i=i.parent,!(null!==i||n&A.Host||(i=it(r),null===i)||(r=r[15],10&i.type)););if(null===i)return!1;t=i,e=r}const i=Le.lFrame=ot();return i.currentTNode=t,i.lView=e,!0}function st(e){const t=ot(),n=e[1];Le.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function ot(){const e=Le.lFrame,t=null===e?null:e.child;return null===t?at(e):t}function at(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function lt(){const e=Le.lFrame;return Le.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const ct=lt;function ut(){const e=lt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ht(){return Le.lFrame.selectedIndex}function dt(e){Le.lFrame.selectedIndex=e}function pt(){const e=Le.lFrame;return Ie(e.tView,e.selectedIndex)}function ft(){Le.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function mt(){Le.lFrame.currentNamespace=null}function gt(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:r,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;i&&(e.contentHooks||(e.contentHooks=[])).push(-n,i),r&&((e.contentHooks||(e.contentHooks=[])).push(n,r),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,r)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function _t(e,t,n){bt(e,t,3,n)}function yt(e,t,n,i){(3&e[2])===n&&bt(e,t,n,i)}function vt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function bt(e,t,n,i){const r=null!=i?i:-1,s=t.length-1;let o=0;for(let a=void 0!==i?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=i&&o>=i)break}else t[a]<0&&(e[18]+=65536),(o<r||-1==r)&&(wt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function wt(e,t,n,i){const r=n[i]<0,s=n[i+1],o=e[r?-n[i]:n[i]];if(r){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}class Ct{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function St(e,t,n){const i=Se(e);let r=0;for(;r<n.length;){const s=n[r];if("number"==typeof s){if(0!==s)break;r++;const o=n[r++],a=n[r++],l=n[r++];i?e.setAttribute(t,a,l,o):t.setAttributeNS(o,a,l)}else{const o=s,a=n[++r];Tt(o)?i&&e.setProperty(t,o,a):i?e.setAttribute(t,o,a):t.setAttribute(o,a),r++}}return r}function kt(e){return 3===e||4===e||6===e}function Tt(e){return 64===e.charCodeAt(0)}function Et(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?n=r:0===n||xt(e,n,r,null,-1===n||2===n?t[++i]:null)}}return e}function xt(e,t,n,i,r){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===i)return void(null!==r&&(e[s+1]=r));if(i===e[s+1])return void(e[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==i&&e.splice(s++,0,i),null!==r&&e.splice(s++,0,r)}function It(e){return-1!==e}function At(e){return 32767&e}function Dt(e,t){let n=e>>16,i=t;for(;n>0;)i=i[15],n--;return i}let Rt=!0;function Ot(e){const t=Rt;return Rt=e,t}let Pt=0;function Nt(e,t){const n=Lt(e,t);if(-1!==n)return n;const i=t[1];i.firstCreatePass&&(e.injectorIndex=t.length,Ft(i.data,e),Ft(t,null),Ft(i.blueprint,null));const r=Mt(e,t),s=e.injectorIndex;if(It(r)){const e=At(r),n=Dt(r,t),i=n[1].data;for(let r=0;r<8;r++)t[s+r]=n[e+r]|i[e+r]}return t[s+8]=r,s}function Ft(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Lt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Mt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;null!==r;){const e=r[1],t=e.type;if(i=2===t?e.declTNode:1===t?r[6]:null,null===i)return-1;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function Vt(e,t,n){!function(e,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(W)&&(i=n[W]),null==i&&(i=n[W]=Pt++);const r=255&i;t.data[e+(r>>5)]|=1<<r}(e,t,n)}function Ut(e,t,n){if(n&A.Optional)return e;v(t,"NodeInjector")}function qt(e,t,n,i){if(n&A.Optional&&void 0===i&&(i=null),0==(n&(A.Self|A.Host))){const r=e[9],s=R(void 0);try{return r?r.get(t,i,n&A.Optional):O(t,i,n&A.Optional)}finally{R(s)}}return Ut(i,t,n)}function Bt(e,t,n,i=A.Default,r){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(W)?e[W]:void 0;return"number"==typeof t?t>=0?255&t:Zt:t}(n);if("function"==typeof s){if(!rt(t,e,i))return i&A.Host?Ut(r,n,i):qt(t,n,i,r);try{const e=s(i);if(null!=e||i&A.Optional)return e;v(n)}finally{ct()}}else if("number"==typeof s){let r=null,o=Lt(e,t),a=-1,l=i&A.Host?t[16][6]:null;for((-1===o||i&A.SkipSelf)&&(a=-1===o?Mt(e,t):t[o+8],-1!==a&&$t(i,!1)?(r=t[1],o=At(a),t=Dt(a,t)):o=-1);-1!==o;){const e=t[1];if(Yt(s,o,e.data)){const e=zt(o,t,n,r,i,l);if(e!==jt)return e}a=t[o+8],-1!==a&&$t(i,t[1].data[o+8]===l)&&Yt(s,o,t)?(r=e,o=At(a),t=Dt(a,t)):o=-1}}}return qt(t,n,i,r)}const jt={};function Zt(){return new Wt(Be(),Ve())}function zt(e,t,n,i,r,s){const o=t[1],a=o.data[e+8],l=Gt(a,o,n,null==i?he(a)&&Rt:i!=o&&0!=(3&a.type),r&A.Host&&s===a);return null!==l?Ht(t,o,l,a):jt}function Gt(e,t,n,i,r){const s=e.providerIndexes,o=t.data,a=1048575&s,l=e.directiveStart,c=s>>20,u=r?a+c:e.directiveEnd;for(let h=i?a:a+c;h<u;h++){const e=o[h];if(h<l&&n===e||h>=l&&e.type===n)return h}if(r){const e=o[l];if(e&&pe(e)&&e.type===n)return l}return null}function Ht(e,t,n,i){let r=e[n];const s=t.data;if(r instanceof Ct){const o=r;o.resolving&&function(e,t){throw new g("200",`Circular dependency in DI detected for ${e}`)}(y(s[n]));const a=Ot(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?R(o.injectImpl):null;rt(e,i,A.Default);try{r=e[n]=o.factory(void 0,s,e,i),t.firstCreatePass&&n>=i.directiveStart&&function(e,t,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){const i=_e(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,i)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,r),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==l&&R(l),Ot(a),o.resolving=!1,ct()}}return r}function Yt(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function $t(e,t){return!(e&A.Self||e&A.Host&&t)}class Wt{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Bt(this._tNode,this._lView,e,void 0,t)}}function Kt(e){return P(()=>{const t=e.prototype.constructor,n=t[$]||Qt(t),i=Object.prototype;let r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){const e=r[$]||Qt(r);if(e&&e!==n)return e;r=Object.getPrototypeOf(r)}return e=>new e})}function Qt(e){return m(e)?()=>{const t=Qt(f(e));return t&&t()}:fe(e)}function Jt(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let i=0;for(;i<e;){const r=n[i];if(kt(r))break;if(0===r)i+=2;else if("number"==typeof r)for(i++;i<e&&"string"==typeof n[i];)i++;else{if(r===t)return n[i+1];i+=2}}}return null}(Be(),e)}function Xt(e,t,n){return P(()=>{const i=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function r(...e){if(this instanceof r)return i.apply(this,e),this;const t=new r(...e);return n.annotation=t,n;function n(e,n,i){const r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(t),e}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}class en{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=b({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const tn=new en("AnalyzeForEntryComponents"),nn=Function;function rn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?(t===e&&(t=e.slice(0,n)),rn(i,t)):t!==e&&t.push(i)}return t}function sn(e,t){e.forEach(e=>Array.isArray(e)?sn(e,t):t(e))}function on(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function an(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function ln(e,t){const n=[];for(let i=0;i<e;i++)n.push(t);return n}function cn(e,t,n){let i=hn(e,t);return i>=0?e[1|i]=n:(i=~i,function(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(1===r)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=i}}(e,i,t,n)),i}function un(e,t){const n=hn(e,t);if(n>=0)return e[1|n]}function hn(e,t){return function(e,t,n){let i=0,r=e.length>>1;for(;r!==i;){const n=i+(r-i>>1),s=e[n<<1];if(t===s)return n<<1;s>t?r=n:i=n+1}return~(r<<1)}(e,t)}const dn={},pn=/\n/gm,fn=l({provide:String,useValue:l});let mn;function gn(e){const t=mn;return mn=e,t}function _n(e,t=A.Default){if(void 0===mn)throw new Error("inject() must be called from an injection context");return null===mn?O(e,void 0,t):mn.get(e,t&A.Optional?null:void 0,t)}function yn(e,t=A.Default){return(D||_n)(f(e),t)}const vn=yn;function bn(e){const t=[];for(let n=0;n<e.length;n++){const i=f(e[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let e,n=A.Default;for(let t=0;t<i.length;t++){const r=i[t],s=r.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=r.token:n|=s:e=r}t.push(yn(e,n))}else t.push(yn(i))}return t}function wn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const Cn=wn(Xt("Inject",e=>({token:e})),-1),Sn=wn(Xt("Optional"),8),kn=wn(Xt("SkipSelf"),4);let Tn;function En(e){var t;return(null===(t=function(){if(void 0===Tn&&(Tn=null,q.trustedTypes))try{Tn=q.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return Tn}())||void 0===t?void 0:t.createHTML(e))||e}class xn{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class In extends xn{getTypeName(){return"HTML"}}class An extends xn{getTypeName(){return"Style"}}class Dn extends xn{getTypeName(){return"Script"}}class Rn extends xn{getTypeName(){return"URL"}}class On extends xn{getTypeName(){return"ResourceURL"}}function Pn(e){return e instanceof xn?e.changingThisBreaksApplicationSecurity:e}function Nn(e,t){const n=Fn(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Fn(e){return e instanceof xn&&e.getTypeName()||null}function Ln(e){return new In(e)}function Mn(e){return new An(e)}function Vn(e){return new Dn(e)}function Un(e){return new Rn(e)}function qn(e){return new On(e)}class Bn{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(En(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class jn{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=En(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=En(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const n=t.item(i).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Zn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,zn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Gn(e){return(e=String(e)).match(Zn)||e.match(zn)?e:"unsafe:"+e}function Hn(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Yn(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const $n=Hn("area,br,col,hr,img,wbr"),Wn=Hn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Kn=Hn("rp,rt"),Qn=Yn(Kn,Wn),Jn=Yn($n,Yn(Wn,Hn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yn(Kn,Hn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Qn),Xn=Hn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ei=Hn("srcset"),ti=Yn(Xn,ei,Hn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Hn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ni=Hn("script,style,template");class ii{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Jn.hasOwnProperty(t))return this.sanitizedSomething=!0,!ni.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r),t=e.name,s=t.toLowerCase();if(!ti.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=e.value;Xn[s]&&(o=Gn(o)),ei[s]&&(i=o,o=(i=String(i)).split(",").map(e=>Gn(e.trim())).join(", ")),this.buf.push(" ",t,'="',oi(o),'"')}var i;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Jn.hasOwnProperty(t)&&!$n.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(oi(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const ri=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,si=/([^\#-~ |!])/g;function oi(e){return e.replace(/&/g,"&amp;").replace(ri,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(si,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ai;function li(e,t){let n=null;try{ai=ai||function(e){const t=new jn(e);return function(){try{return!!(new window.DOMParser).parseFromString(En(""),"text/html")}catch(e){return!1}}()?new Bn(t):t}(e);let i=t?String(t):"";n=ai.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=ai.getInertBodyElement(i)}while(i!==s);return En((new ii).sanitizeChildren(ci(n)||n))}finally{if(n){const e=ci(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function ci(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var ui=(()=>((ui=ui||{})[ui.NONE=0]="NONE",ui[ui.HTML=1]="HTML",ui[ui.STYLE=2]="STYLE",ui[ui.SCRIPT=3]="SCRIPT",ui[ui.URL=4]="URL",ui[ui.RESOURCE_URL=5]="RESOURCE_URL",ui))();function hi(e){const t=function(){const e=Ve();return e&&e[12]}();return t?t.sanitize(ui.URL,e)||"":Nn(e,"URL")?Pn(e):Gn(_(e))}function di(e,t){e.__ngContext__=t}function pi(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function fi(e){return e.ngOriginalError}function mi(e,...t){e.error(...t)}class gi{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),i=function(e){return e&&e.ngErrorLogger||mi}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?function(e){return e.ngDebugContext}(e)||this._findContext(fi(e)):null}_findOriginalError(e){let t=e&&fi(e);for(;t&&fi(t);)t=fi(t);return t||null}}const _i=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(q))();function yi(e){return e instanceof Function?e():e}var vi=(()=>((vi=vi||{})[vi.Important=1]="Important",vi[vi.DashCase=2]="DashCase",vi))();function bi(e,t){return(void 0)(e,t)}function wi(e){const t=e[3];return ce(t)?t[3]:t}function Ci(e){return ki(e[13])}function Si(e){return ki(e[4])}function ki(e){for(;null!==e&&!ce(e);)e=e[4];return e}function Ti(e,t,n,i,r){if(null!=i){let s,o=!1;ce(i)?s=i:le(i)&&(o=!0,i=i[0]);const a=Te(i);0===e&&null!==n?null==r?Pi(t,n,a):Oi(t,n,a,r||null,!0):1===e&&null!==n?Oi(t,n,a,r||null,!0):2===e?function(e,t,n){const i=Fi(e,t);i&&function(e,t,n,i){Se(e)?e.removeChild(t,n,i):t.removeChild(n)}(e,i,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,i,r){const s=n[7];s!==Te(n)&&Ti(t,e,i,s,r);for(let o=10;o<n.length;o++){const r=n[o];Zi(r[1],r,e,t,i,s)}}(t,e,s,n,r)}}function Ei(e,t,n){return Se(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function xi(e,t){const n=e[9],i=n.indexOf(t),r=t[3];1024&t[2]&&(t[2]&=-1025,Fe(r,-1)),n.splice(i,1)}function Ii(e,t){if(e.length<=10)return;const n=10+t,i=e[n];if(i){const s=i[17];null!==s&&s!==e&&xi(s,i),t>0&&(e[n-1][4]=i[4]);const o=an(e,10+t);Zi(i[1],r=i,r[11],2,null,null),r[0]=null,r[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}var r;return i}function Ai(e,t){if(!(256&t[2])){const n=t[11];Se(n)&&n.destroyNode&&Zi(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Di(e[1],e);for(;t;){let n=null;if(le(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)le(t)&&Di(t[1],t),t=t[3];null===t&&(t=e),le(t)&&Di(t[1],t),n=t&&t[4]}t=n}}(t)}}function Di(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let i=0;i<n.length;i+=2){const e=t[n[i]];if(!(e instanceof Ct)){const t=n[i+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const i=e[t[n]],r=t[n+1];try{r.call(i)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,i=t[7];let r=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):Te(t[e]),a=i[r=n[s+2]],l=n[s+3];"boolean"==typeof l?o.removeEventListener(n[s],a,l):l>=0?i[r=l]():i[r=-l].unsubscribe(),s+=2}else{const e=i[r=n[s+1]];n[s].call(e)}if(null!==i){for(let e=r+1;e<i.length;e++)(0,i[e])();t[7]=null}}(e,t),1===t[1].type&&Se(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&ce(t[3])){n!==t[3]&&xi(n,t);const i=t[19];null!==i&&i.detachView(e)}}}function Ri(e,t,n){return function(e,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[0];if(2&i.flags){const t=e.data[i.directiveStart].encapsulation;if(t===F.None||t===F.Emulated)return null}return xe(i,n)}(e,t.parent,n)}function Oi(e,t,n,i,r){Se(e)?e.insertBefore(t,n,i,r):t.insertBefore(n,i,r)}function Pi(e,t,n){Se(e)?e.appendChild(t,n):t.appendChild(n)}function Ni(e,t,n,i,r){null!==i?Oi(e,t,n,i,r):Pi(e,t,n)}function Fi(e,t){return Se(e)?e.parentNode(t):t.parentNode}function Li(e,t,n){return Mi(e,t,n)}let Mi=function(e,t,n){return 40&e.type?xe(e,n):null};function Vi(e,t,n,i){const r=Ri(e,i,t),s=t[11],o=Li(i.parent||t[6],i,t);if(null!=r)if(Array.isArray(n))for(let a=0;a<n.length;a++)Ni(s,r,n[a],o,!1);else Ni(s,r,n,o,!1)}function Ui(e,t){if(null!==t){const n=t.type;if(3&n)return xe(t,e);if(4&n)return Bi(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Ui(e,n);{const n=e[t.index];return ce(n)?Bi(-1,n):Te(n)}}if(32&n)return bi(t,e)()||Te(e[t.index]);{const n=qi(e,t);return null!==n?Array.isArray(n)?n[0]:Ui(wi(e[16]),n):Ui(e,t.next)}}return null}function qi(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Bi(e,t){const n=10+e+1;if(n<t.length){const e=t[n],i=e[1].firstChild;if(null!==i)return Ui(e,i)}return t[7]}function ji(e,t,n,i,r,s,o){for(;null!=n;){const a=i[n.index],l=n.type;if(o&&0===t&&(a&&di(Te(a),i),n.flags|=4),64!=(64&n.flags))if(8&l)ji(e,t,n.child,i,r,s,!1),Ti(t,e,r,a,s);else if(32&l){const o=bi(n,i);let l;for(;l=o();)Ti(t,e,r,l,s);Ti(t,e,r,a,s)}else 16&l?zi(e,t,i,n,r,s):Ti(t,e,r,a,s);n=o?n.projectionNext:n.next}}function Zi(e,t,n,i,r,s){ji(n,i,e.firstChild,t,r,s,!1)}function zi(e,t,n,i,r,s){const o=n[16],a=o[6].projection[i.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)Ti(t,e,r,a[l],s);else ji(e,t,a,o[3],r,s,!0)}function Gi(e,t,n){Se(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Hi(e,t,n){Se(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Yi(e,t,n){let i=e.length;for(;;){const r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const n=t.length;if(r+n===i||e.charCodeAt(r+n)<=32)return r}n=r+1}}function $i(e,t,n){let i=0;for(;i<e.length;){let r=e[i++];if(n&&"class"===r){if(r=e[i],-1!==Yi(r.toLowerCase(),t,0))return!0}else if(1===r){for(;i<e.length&&"string"==typeof(r=e[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function Wi(e){return 4===e.type&&"ng-template"!==e.value}function Ki(e,t,n){return t===(4!==e.type||n?e.value:"ng-template")}function Qi(e,t,n){let i=4;const r=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(kt(e[t]))return t;return e.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!Ki(e,l,n)||""===l&&1===t.length){if(Ji(i))return!1;o=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==e.attrs){if(!$i(e.attrs,c,n)){if(Ji(i))return!1;o=!0}continue}const u=Xi(8&i?"class":l,r,Wi(e),n);if(-1===u){if(Ji(i))return!1;o=!0;continue}if(""!==c){let e;e=u>s?"":r[u+1].toLowerCase();const t=8&i?e:null;if(t&&-1!==Yi(t,c,0)||2&i&&c!==e){if(Ji(i))return!1;o=!0}}}}else{if(!o&&!Ji(i)&&!Ji(l))return!1;if(o&&Ji(l))continue;o=!1,i=l|1&i}}return Ji(i)||o}function Ji(e){return 0==(1&e)}function Xi(e,t,n,i){if(null===t)return-1;let r=0;if(i||!n){let n=!1;for(;r<t.length;){const i=t[r];if(i===e)return r;if(3===i||6===i)n=!0;else{if(1===i||2===i){let e=t[++r];for(;"string"==typeof e;)e=t[++r];continue}if(4===i)break;if(0===i){r+=4;continue}}r+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function er(e,t,n=!1){for(let i=0;i<t.length;i++)if(Qi(e,t[i],n))return!0;return!1}function tr(e,t){e:for(let n=0;n<t.length;n++){const i=t[n];if(e.length===i.length){for(let t=0;t<e.length;t++)if(e[t]!==i[t])continue e;return!0}}return!1}function nr(e,t){return e?":not("+t.trim()+")":t}function ir(e){let t=e[0],n=1,i=2,r="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&i){const t=e[++n];r+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""===r||Ji(o)||(t+=nr(s,r),r=""),i=o,s=s||!Ji(i);n++}return""!==r&&(t+=nr(s,r)),t}const rr={};function sr(e){or(Ue(),Ve(),ht()+e,He())}function or(e,t,n,i){if(!i)if(3==(3&t[2])){const i=e.preOrderCheckHooks;null!==i&&_t(t,i,n)}else{const i=e.preOrderHooks;null!==i&&yt(t,i,0,n)}dt(n)}function ar(e,t){return e<<17|t<<2}function lr(e){return e>>17&32767}function cr(e){return 2|e}function ur(e){return(131068&e)>>2}function hr(e,t){return-131069&e|t<<2}function dr(e){return 1|e}function pr(e,t){const n=e.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],s=n[i+1];if(-1!==s){const n=e.data[s];nt(r),n.contentQueries(2,t[s],s)}}}function fr(e,t,n,i,r,s,o,a,l,c){const u=t.blueprint.slice();return u[0]=r,u[2]=140|i,Ne(u),u[3]=u[15]=e,u[8]=n,u[10]=o||e&&e[10],u[11]=a||e&&e[11],u[12]=l||e&&e[12]||null,u[9]=c||e&&e[9]||null,u[6]=s,u[16]=2==t.type?e[16]:u,u}function mr(e,t,n,i,r){let s=e.data[t];if(null===s)s=function(e,t,n,i,r){const s=je(),o=ze(),a=e.data[t]=function(e,t,n,i,r,s){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,i,r);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(e,t,n,i,r),Le.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const e=function(){const e=Le.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===e?-1:e.injectorIndex}return Ze(s,!0),s}function gr(e,t,n,i){if(0===n)return-1;const r=t.length;for(let s=0;s<n;s++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function _r(e,t,n){st(t);try{const i=e.viewQuery;null!==i&&Yr(1,i,n);const r=e.template;null!==r&&br(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&pr(e,t),e.staticViewQueries&&Yr(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)jr(e,t[n])}(t,s)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),i}finally{t[2]&=-5,ut()}}function yr(e,t,n,i){const r=t[2];if(256==(256&r))return;st(t);const s=He();try{Ne(t),Le.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&br(e,t,n,2,i);const o=3==(3&r);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&_t(t,n,null)}else{const n=e.preOrderHooks;null!==n&&yt(t,n,0,null),vt(t,0)}if(function(e){for(let t=Ci(e);null!==t;t=Si(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],i=n[3];0==(1024&n[2])&&Fe(i,1),n[2]|=1024}}}(t),function(e){for(let t=Ci(e);null!==t;t=Si(t))for(let e=10;e<t.length;e++){const n=t[e],i=n[1];Oe(n)&&yr(i,n,i.template,n[8])}}(t),null!==e.contentQueries&&pr(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&_t(t,n)}else{const n=e.contentHooks;null!==n&&yt(t,n,1),vt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const i=n[e];if(i<0)dt(~i);else{const r=i,s=n[++e],o=n[++e];Je(s,r),o(2,t[r])}}}finally{dt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)qr(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&Yr(2,l,i),!s)if(o){const n=e.viewCheckHooks;null!==n&&_t(t,n)}else{const n=e.viewHooks;null!==n&&yt(t,n,2),vt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Fe(t[3],-1))}finally{ut()}}function vr(e,t,n,i){const r=t[10],s=!He(),o=Re(t);try{s&&!o&&r.begin&&r.begin(),o&&_r(e,t,i),yr(e,t,n,i)}finally{s&&!o&&r.end&&r.end()}}function br(e,t,n,i,r){const s=ht(),o=2&i;try{dt(-1),o&&t.length>20&&or(e,t,20,He()),n(i,r)}finally{dt(s)}}function wr(e,t,n){if(ue(t)){const i=t.directiveEnd;for(let r=t.directiveStart;r<i;r++){const t=e.data[r];t.contentQueries&&t.contentQueries(1,n[r],r)}}}function Cr(e,t,n){Me()&&(function(e,t,n,i){const r=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Nt(n,t),di(i,t);const o=n.initialInputs;for(let a=r;a<s;a++){const i=e.data[a],s=pe(i);s&&Lr(t,n,i);const l=Ht(t,e,a,n);di(l,t),null!==o&&Mr(0,a-r,l,i,0,o),s&&(De(n.index,t)[8]=l)}}(e,t,n,xe(n,t)),128==(128&n.flags)&&function(e,t,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=Le.lFrame.currentDirectiveIndex;try{dt(s);for(let n=i;n<r;n++){const i=e.data[n],r=t[n];Xe(n),null===i.hostBindings&&0===i.hostVars&&null===i.hostAttrs||Rr(i,r)}}finally{dt(-1),Xe(o)}}(e,t,n))}function Sr(e,t,n=xe){const i=t.localNames;if(null!==i){let r=t.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(t,e):e[o];e[r++]=a}}}function kr(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Tr(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Tr(e,t,n,i,r,s,o,a,l,c){const u=20+i,h=u+r,d=function(e,t){const n=[];for(let i=0;i<t;i++)n.push(i<e?null:rr);return n}(u,h),p="function"==typeof c?c():c;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function Er(e,t,n,i){const r=Wr(t);null===n?r.push(i):(r.push(n),e.firstCreatePass&&Kr(e).push(i,r.length-1))}function xr(e,t,n){for(let i in e)if(e.hasOwnProperty(i)){const r=e[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,r):n[i]=[t,r]}return n}function Ir(e,t,n,i,r,s,o,a){const l=xe(t,n);let c,u=t.inputs;var h;!a&&null!=u&&(c=u[i])?(Xr(e,n,c,i,r),he(t)&&function(e,t){const n=De(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(i="class"===(h=i)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,r=null!=o?o(r,t.value||"",i):r,Se(s)?s.setProperty(l,i,r):Tt(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function Ar(e,t,n,i){let r=!1;if(Me()){const s=function(e,t,n){const i=e.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];er(n,o.selectors,!1)&&(r||(r=[]),Vt(Nt(n,t),e,o.type),pe(o)?(Or(e,n),r.unshift(o)):r.push(o))}return r}(e,t,n),o=null===i?null:{"":-1};if(null!==s){r=!0,Nr(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let i=!1,a=!1,l=gr(e,t,s.length,null);for(let r=0;r<s.length;r++){const c=s[r];n.mergedAttrs=Et(n.mergedAttrs,c.hostAttrs),Fr(e,n,t,l,c),Pr(l,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const u=c.type.prototype;!i&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),i=!0),a||!u.ngOnChanges&&!u.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(e,t){const n=t.directiveEnd,i=e.data,r=t.attrs,s=[];let o=null,a=null;for(let l=t.directiveStart;l<n;l++){const e=i[l],n=e.inputs,c=null===r||Wi(t)?null:Vr(n,r);s.push(c),o=xr(n,l,o),a=xr(e.outputs,l,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const i=e.localNames=[];for(let e=0;e<t.length;e+=2){const r=n[t[e+1]];if(null==r)throw new g("301",`Export of name '${t[e+1]}' not found!`);i.push(t[e],r)}}}(n,i,o)}return n.mergedAttrs=Et(n.mergedAttrs,n.attrs),r}function Dr(e,t,n,i,r,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(i,r,o)}}function Rr(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Or(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Pr(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;pe(t)&&(n[""]=e)}}function Nr(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Fr(e,t,n,i,r){e.data[i]=r;const s=r.factory||(r.factory=fe(r.type)),o=new Ct(s,pe(r),null);e.blueprint[i]=o,n[i]=o,Dr(e,t,0,i,gr(e,n,r.hostVars,rr),r)}function Lr(e,t,n){const i=xe(t,e),r=kr(n),s=e[10],o=Zr(e,fr(e,r,null,n.onPush?64:16,i,t,s,s.createRenderer(i,n),null,null));e[t.index]=o}function Mr(e,t,n,i,r,s){const o=s[t];if(null!==o){const e=i.setInput;for(let t=0;t<o.length;){const r=o[t++],s=o[t++],a=o[t++];null!==e?i.setInput(n,a,r,s):n[s]=a}}}function Vr(e,t){let n=null,i=0;for(;i<t.length;){const r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;e.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,e[r],t[i+1])),i+=2}else i+=2;else i+=4}return n}function Ur(e,t,n,i){return new Array(e,!0,!1,t,null,0,i,n,null,null)}function qr(e,t){const n=De(t,e);if(Oe(n)){const e=n[1];80&n[2]?yr(e,n,e.template,n[8]):n[5]>0&&Br(n)}}function Br(e){for(let n=Ci(e);null!==n;n=Si(n))for(let e=10;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];yr(e,t,e.template,t[8])}else t[5]>0&&Br(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const i=De(t[n],e);Oe(i)&&i[5]>0&&Br(i)}}function jr(e,t){const n=De(t,e),i=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(i,n),_r(i,n,n[8])}function Zr(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function zr(e){for(;e;){e[2]|=64;const t=wi(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function Gr(e,t,n){const i=t[10];i.begin&&i.begin();try{yr(e,t,e.template,n)}catch(r){throw Jr(t,r),r}finally{i.end&&i.end()}}function Hr(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],i=pi(n),r=i[1];vr(r,i,r.template,n)}}(e[8])}function Yr(e,t,n){nt(0),t(e,n)}const $r=(()=>Promise.resolve(null))();function Wr(e){return e[7]||(e[7]=[])}function Kr(e){return e.cleanup||(e.cleanup=[])}function Qr(e,t,n){return(null===e||pe(e))&&(n=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(n[t.index])),n[11]}function Jr(e,t){const n=e[9],i=n?n.get(gi,null):null;i&&i.handleError(t)}function Xr(e,t,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=t[o],c=e.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function es(e,t,n){const i=Ee(t,e);!function(e,t,n){Se(e)?e.setValue(t,n):t.textContent=n}(e[11],i,n)}function ts(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?r=h(r,e):2==s&&(i=h(i,e+": "+t[++o]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}const ns=new en("INJECTOR",-1);class is{get(e,t=dn){if(t===dn){const t=new Error(`NullInjectorError: No provider for ${u(e)}!`);throw t.name="NullInjectorError",t}return t}}const rs=new en("Set Injector scope."),ss={},os={};let as;function ls(){return void 0===as&&(as=new is),as}function cs(e,t=null,n=null,i){return new us(e,n,t||ls(),i)}class us{constructor(e,t,n,i=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];t&&sn(t,n=>this.processProvider(n,e,t)),sn([e],e=>this.processInjectorType(e,[],r)),this.records.set(ns,ps(void 0,this));const s=this.records.get(rs);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof e?null:u(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=dn,n=A.Default){this.assertNotDestroyed();const i=gn(this),r=R(void 0);try{if(!(n&A.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(s=e)||"object"==typeof s&&s instanceof en)&&C(e);t=n&&this.injectableDefInScope(n)?ps(hs(e),ss):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&A.Self?ls():this.parent).get(e,t=n&A.Optional&&t===dn?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(u(e)),i)throw o;return function(e,t,n,i){const r=e.ngTempTokenPath;throw t.__source&&r.unshift(t.__source),e.message=function(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let r=u(t);if(Array.isArray(t))r=t.map(u).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let i=t[n];e.push(n+":"+("string"==typeof i?JSON.stringify(i):u(i)))}r=`{${e.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(pn,"\n  ")}`}("\n"+e.message,r,n,i),e.ngTokenPath=r,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{R(r),gn(i)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(u(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=f(e)))return!1;let i=k(e);const r=null==i&&e.ngModule||void 0,s=void 0===r?e:r,o=-1!==n.indexOf(s);if(void 0!==r&&(i=k(r)),null==i)return!1;if(null!=i.imports&&!o){let e;n.push(s);try{sn(i.imports,i=>{this.processInjectorType(i,t,n)&&(void 0===e&&(e=[]),e.push(i))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:i}=e[t];sn(i,e=>this.processProvider(e,n,i||j))}}this.injectorDefTypes.add(s);const a=fe(s)||(()=>new s);this.records.set(s,ps(a,ss));const l=i.providers;if(null!=l&&!o){const t=e;sn(l,e=>this.processProvider(e,t,l))}return void 0!==r&&void 0!==e.providers}processProvider(e,t,n){let i=ms(e=f(e))?e:f(e&&e.provide);const r=function(e,t,n){return fs(e)?ps(void 0,e.useValue):ps(ds(e),ss)}(e);if(ms(e)||!0!==e.multi)this.records.get(i);else{let t=this.records.get(i);t||(t=ps(void 0,ss,!0),t.factory=()=>bn(t.multi),this.records.set(i,t)),i=e,t.multi.push(e)}this.records.set(i,r)}hydrate(e,t){var n;return t.value===ss&&(t.value=os,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=f(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function hs(e){const t=C(e),n=null!==t?t.factory:fe(e);if(null!==n)return n;if(e instanceof en)throw new Error(`Token ${u(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=ln(t,"?");throw new Error(`Can't resolve all parameters for ${u(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[T]||e[x]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function ds(e,t,n){let i;if(ms(e)){const t=f(e);return fe(t)||hs(t)}if(fs(e))i=()=>f(e.useValue);else if((r=e)&&r.useFactory)i=()=>e.useFactory(...bn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))i=()=>yn(f(e.useExisting));else{const t=f(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return fe(t)||hs(t);i=()=>new t(...bn(e.deps))}var r;return i}function ps(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function fs(e){return null!==e&&"object"==typeof e&&fn in e}function ms(e){return"function"==typeof e}const gs=function(e,t,n){return function(e,t=null,n=null,i){const r=cs(e,t,n,i);return r._resolveInjectorDefTypes(),r}({name:n},t,e,n)};class _s{static create(e,t){return Array.isArray(e)?gs(e,t,""):gs(e.providers,e.parent,e.name||"")}}function ys(e,t){gt(pi(e)[1],Be())}function vs(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const i=[e];for(;t;){let r;if(pe(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");r=t.\u0275dir}if(r){if(n){i.push(r);const t=e;t.inputs=bs(e.inputs),t.declaredInputs=bs(e.declaredInputs),t.outputs=bs(e.outputs);const n=r.hostBindings;n&&Ss(e,n);const s=r.viewQuery,o=r.contentQueries;if(s&&ws(e,s),o&&Cs(e,o),c(e.inputs,r.inputs),c(e.declaredInputs,r.declaredInputs),c(e.outputs,r.outputs),pe(r)&&r.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(r.data.animation)}}const t=r.features;if(t)for(let i=0;i<t.length;i++){const r=t[i];r&&r.ngInherit&&r(e),r===vs&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){const r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Et(r.hostAttrs,n=Et(n,r.hostAttrs))}}(i)}function bs(e){return e===B?{}:e===j?[]:e}function ws(e,t){const n=e.viewQuery;e.viewQuery=n?(e,i)=>{t(e,i),n(e,i)}:t}function Cs(e,t){const n=e.contentQueries;e.contentQueries=n?(e,i,r)=>{t(e,i,r),n(e,i,r)}:t}function Ss(e,t){const n=e.hostBindings;e.hostBindings=n?(e,i)=>{t(e,i),n(e,i)}:t}_s.THROW_IF_NOT_FOUND=dn,_s.NULL=new is,_s.\u0275prov=b({token:_s,providedIn:"any",factory:()=>yn(ns)}),_s.__NG_ELEMENT_ID__=-1;let ks=null;function Ts(){if(!ks){const e=q.Symbol;if(e&&e.iterator)ks=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ks=n)}}}return ks}class Es{constructor(e){this.wrapped=e}static wrap(e){return new Es(e)}static unwrap(e){return Es.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Es}}function xs(e){return!!Is(e)&&(Array.isArray(e)||!(e instanceof Map)&&Ts()in e)}function Is(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function As(e,t,n){return e[t]=n}function Ds(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Rs(e,t,n,i){const r=Ds(e,t,n);return Ds(e,t+1,i)||r}function Os(e,t,n,i){const r=Ve();return Ds(r,Ke(),t)&&(Ue(),function(e,t,n,i,r,s){const o=xe(e,t);!function(e,t,n,i,r,s,o){if(null==s)Se(e)?e.removeAttribute(t,r,n):t.removeAttribute(r);else{const a=null==o?_(s):o(s,i||"",r);Se(e)?e.setAttribute(t,r,a,n):n?t.setAttributeNS(n,r,a):t.setAttribute(r,a)}}(t[11],o,s,e.value,n,i,r)}(pt(),r,e,t,n,i)),Os}function Ps(e,t,n,i){return Ds(e,Ke(),n)?t+_(n)+i:rr}function Ns(e,t,n,i,r,s,o,a){const l=Ve(),c=Ue(),u=e+20,h=c.firstCreatePass?function(e,t,n,i,r,s,o,a,l){const c=t.consts,u=mr(t,e,4,o||null,Pe(c,a));Ar(t,n,u,Pe(c,l)),gt(t,u);const h=u.tViews=Tr(2,u,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),h.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,n,i,r,s,o):c.data[u];Ze(h,!1);const d=l[11].createComment("");Vi(c,l,d,h),di(d,l),Zr(l,l[u]=Ur(d,l,d,h)),de(h)&&Cr(c,l,h),null!=o&&Sr(l,h,a)}function Fs(e){return Ae(Le.lFrame.contextLView,20+e)}function Ls(e,t=A.Default){const n=Ve();return null===n?yn(e,t):Bt(Be(),n,f(e),t)}function Ms(e,t,n){const i=Ve();return Ds(i,Ke(),t)&&Ir(Ue(),pt(),i,e,t,i[11],n,!1),Ms}function Vs(e,t,n,i,r){const s=r?"class":"style";Xr(e,n,t.inputs[s],s,i)}function Us(e,t,n,i){const r=Ve(),s=Ue(),o=20+e,a=r[11],l=r[o]=Ei(a,t,Le.lFrame.currentNamespace),c=s.firstCreatePass?function(e,t,n,i,r,s,o){const a=t.consts,l=mr(t,e,2,r,Pe(a,s));return Ar(t,n,l,Pe(a,o)),null!==l.attrs&&ts(l,l.attrs,!1),null!==l.mergedAttrs&&ts(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,r,0,t,n,i):s.data[o];Ze(c,!0);const u=c.mergedAttrs;null!==u&&St(a,l,u);const h=c.classes;null!==h&&Hi(a,l,h);const d=c.styles;null!==d&&Gi(a,l,d),64!=(64&c.flags)&&Vi(s,r,l,c),0===Le.lFrame.elementDepthCount&&di(l,r),Le.lFrame.elementDepthCount++,de(c)&&(Cr(s,r,c),wr(s,c,r)),null!==i&&Sr(r,c)}function qs(){let e=Be();ze()?Ge():(e=e.parent,Ze(e,!1));const t=e;Le.lFrame.elementDepthCount--;const n=Ue();n.firstCreatePass&&(gt(n,e),ue(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Vs(n,t,Ve(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Vs(n,t,Ve(),t.stylesWithoutHost,!1)}function Bs(e,t,n,i){Us(e,t,n,i),qs()}function js(e,t,n){const i=Ve(),r=Ue(),s=e+20,o=r.firstCreatePass?function(e,t,n,i,r){const s=t.consts,o=Pe(s,i),a=mr(t,e,8,"ng-container",o);return null!==o&&ts(a,o,!0),Ar(t,n,a,Pe(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,i,t,n):r.data[s];Ze(o,!0);const a=i[s]=i[11].createComment("");Vi(r,i,a,o),di(a,i),de(o)&&(Cr(r,i,o),wr(r,o,i)),null!=n&&Sr(i,o)}function Zs(){let e=Be();const t=Ue();ze()?Ge():(e=e.parent,Ze(e,!1)),t.firstCreatePass&&(gt(t,e),ue(e)&&t.queries.elementEnd(e))}function zs(e,t,n){js(e,t,n),Zs()}function Gs(){return Ve()}function Hs(e){return!!e&&"function"==typeof e.then}function Ys(e){return!!e&&"function"==typeof e.subscribe}const $s=Ys;function Ws(e,t,n,i){const r=Ve(),s=Ue(),o=Be();return Qs(s,r,r[11],o,e,t,!!n,i),Ws}function Ks(e,t){const n=Be(),i=Ve(),r=Ue();return Qs(r,i,Qr(et(r.data),n,i),n,e,t,!1),Ks}function Qs(e,t,n,i,r,s,o,a){const l=de(i),c=e.firstCreatePass&&Kr(e),u=Wr(t);let h=!0;if(3&i.type||a){const d=xe(i,t),p=a?a(d):d,f=u.length,m=a?e=>a(Te(e[i.index])):i.index;if(Se(n)){let o=null;if(!a&&l&&(o=function(e,t,n,i){const r=e.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const e=r[s];if(e===n&&r[s+1]===i){const e=t[7],n=r[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,r,i.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Xs(i,t,0,s,!1);const e=n.listen(p,r,s);u.push(s,e),c&&c.push(r,m,f,f+1)}}else s=Xs(i,t,0,s,!0),p.addEventListener(r,s,o),u.push(s),c&&c.push(r,m,f,o)}else s=Xs(i,t,0,s,!1);const d=i.outputs;let p;if(h&&null!==d&&(p=d[r])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(s),o=u.length;u.push(s,e),c&&c.push(r,i.index,o,-(o+1))}}}function Js(e,t,n,i){try{return!1!==n(i)}catch(r){return Jr(e,r),!1}}function Xs(e,t,n,i,r){return function n(s){if(s===Function)return i;const o=2&e.flags?De(e.index,t):t;0==(32&t[2])&&zr(o);let a=Js(t,0,i,s),l=n.__ngNextListenerFn__;for(;l;)a=Js(t,0,l,s)&&a,l=l.__ngNextListenerFn__;return r&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function eo(e=1){return function(e){return(Le.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Le.lFrame.contextLView))[8]}(e)}function to(e,t){let n=null;const i=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===i?er(e,s,!0):tr(i,s))return r}else n=r}return n}function no(e){const t=Ve()[16][6];if(!t.projection){const n=t.projection=ln(e?e.length:1,null),i=n.slice();let r=t.child;for(;null!==r;){const t=e?to(r,e):0;null!==t&&(i[t]?i[t].projectionNext=r:n[t]=r,i[t]=r),r=r.next}}}function io(e,t=0,n){const i=Ve(),r=Ue(),s=mr(r,20+e,16,null,n||null);null===s.projection&&(s.projection=t),Ge(),64!=(64&s.flags)&&function(e,t,n){zi(t[11],0,t,n,Ri(e,n,t),Li(n.parent||t[6],n,t))}(r,i,s)}function ro(e,t,n,i,r){const s=e[n+1],o=null===t;let a=i?lr(s):ur(s),l=!1;for(;0!==a&&(!1===l||o);){const n=e[a+1];so(e[a],t)&&(l=!0,e[a+1]=i?dr(n):cr(n)),a=i?lr(n):ur(n)}l&&(e[n+1]=i?cr(s):dr(s))}function so(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&hn(e,t)>=0}const oo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ao(e){return e.substring(oo.key,oo.keyEnd)}function lo(e,t){const n=oo.textEnd;return n===t?-1:(t=oo.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,oo.key=t,n),co(e,t,n))}function co(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function uo(e,t,n){return fo(e,t,n,!1),uo}function ho(e,t){return fo(e,t,null,!0),ho}function po(e,t){for(let n=function(e){return function(e){oo.key=0,oo.keyEnd=0,oo.value=0,oo.valueEnd=0,oo.textEnd=e.length}(e),lo(e,co(e,0,oo.textEnd))}(t);n>=0;n=lo(t,n))cn(e,ao(t),!0)}function fo(e,t,n,i){const r=Ve(),s=Ue(),o=Qe(2);s.firstUpdatePass&&go(s,e,o,i),t!==rr&&Ds(r,o,t)&&vo(s,s.data[ht()],r,r[11],e,r[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=u(Pn(e)))),e}(t,n),i,o)}function mo(e,t){return t>=e.expandoStartIndex}function go(e,t,n,i){const r=e.data;if(null===r[n+1]){const s=r[ht()],o=mo(e,n);Co(s,i)&&null===t&&!o&&(t=!1),t=function(e,t,n,i){const r=et(e);let s=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(n=yo(n=_o(null,e,t,n,i),t.attrs,i),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==r)if(n=_o(r,e,t,n,i),null===s){let n=function(e,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==ur(i))return e[lr(i)]}(e,t,i);void 0!==n&&Array.isArray(n)&&(n=_o(null,e,t,n[1],i),n=yo(n,t.attrs,i),function(e,t,n,i){e[lr(n?t.classBindings:t.styleBindings)]=i}(e,t,i,n))}else s=function(e,t,n){let i;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)i=yo(i,e[s].hostAttrs,n);return yo(i,t.attrs,n)}(e,t,i)}return void 0!==s&&(i?t.residualClasses=s:t.residualStyles=s),n}(r,s,t,i),function(e,t,n,i,r,s){let o=s?t.classBindings:t.styleBindings,a=lr(o),l=ur(o);e[i]=n;let c,u=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||hn(e,c)>0)&&(u=!0)}else c=n;if(r)if(0!==l){const t=lr(e[a+1]);e[i+1]=ar(t,a),0!==t&&(e[t+1]=hr(e[t+1],i)),e[a+1]=131071&e[a+1]|i<<17}else e[i+1]=ar(a,0),0!==a&&(e[a+1]=hr(e[a+1],i)),a=i;else e[i+1]=ar(l,0),0===a?a=i:e[l+1]=hr(e[l+1],i),l=i;u&&(e[i+1]=cr(e[i+1])),ro(e,c,i,!0),ro(e,c,i,!1),function(e,t,n,i,r){const s=r?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&hn(s,t)>=0&&(n[i+1]=dr(n[i+1]))}(t,c,e,i,s),o=ar(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,n,o,i)}}function _o(e,t,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],i=yo(i,s.hostAttrs,r),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),i}function yo(e,t,n){const i=n?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),cn(e,o,!!n||t[++s]))}return void 0===e?null:e}function vo(e,t,n,i,r,s,o,a){if(!(3&t.type))return;const l=e.data,c=l[a+1];wo(1==(1&c)?bo(l,t,n,r,ur(c),o):void 0)||(wo(s)||2==(2&c)&&(s=bo(l,null,n,r,a,o)),function(e,t,n,i,r){const s=Se(e);if(t)r?s?e.addClass(n,i):n.classList.add(i):s?e.removeClass(n,i):n.classList.remove(i);else{let t=-1===i.indexOf("-")?void 0:vi.DashCase;if(null==r)s?e.removeStyle(n,i,t):n.style.removeProperty(i);else{const o="string"==typeof r&&r.endsWith("!important");o&&(r=r.slice(0,-10),t|=vi.Important),s?e.setStyle(n,i,r,t):n.style.setProperty(i,r,o?"important":"")}}}(i,o,Ee(ht(),n),r,s))}function bo(e,t,n,i,r,s){const o=null===t;let a;for(;r>0;){const t=e[r],s=Array.isArray(t),l=s?t[1]:t,c=null===l;let u=n[r+1];u===rr&&(u=c?j:void 0);let h=c?un(u,i):l===i?u:void 0;if(s&&!wo(h)&&(h=un(t,i)),wo(h)&&(a=h,o))return a;const d=e[r+1];r=o?lr(d):ur(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=un(e,i))}return a}function wo(e){return void 0!==e}function Co(e,t){return 0!=(e.flags&(t?16:32))}function So(e,t=""){const n=Ve(),i=Ue(),r=e+20,s=i.firstCreatePass?mr(i,r,1,t,null):i.data[r],o=n[r]=function(e,t){return Se(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Vi(i,n,o,s),Ze(s,!1)}function ko(e){return To("",e,""),ko}function To(e,t,n){const i=Ve(),r=Ps(i,e,t,n);return r!==rr&&es(i,ht(),r),To}function Eo(e,t,n,i,r){const s=Ve(),o=function(e,t,n,i,r,s){const o=Rs(e,We(),n,r);return Qe(2),o?t+_(n)+i+_(r)+s:rr}(s,e,t,n,i,r);return o!==rr&&es(s,ht(),o),Eo}function xo(e,t,n){!function(e,t,n,i){const r=Ue(),s=Qe(2);r.firstUpdatePass&&go(r,null,s,true);const o=Ve();if(n!==rr&&Ds(o,s,n)){const i=r.data[ht()];if(Co(i,true)&&!mo(r,s)){let e=i.classesWithoutHost;null!==e&&(n=h(e,n||"")),Vs(r,i,o,n,true)}else!function(e,t,n,i,r,s,o,a){r===rr&&(r=j);let l=0,c=0,u=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const o=l<r.length?r[l+1]:void 0,d=c<s.length?s[c+1]:void 0;let p,f=null;u===h?(l+=2,c+=2,o!==d&&(f=h,p=d)):null===h||null!==u&&u<h?(l+=2,f=u):(c+=2,f=h,p=d),null!==f&&vo(e,t,n,i,f,p,true,a),u=l<r.length?r[l]:null,h=c<s.length?s[c]:null}}(r,i,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return j;const i=[],r=Pn(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)e(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&e(i,s,r[s]);else"string"==typeof r&&t(i,r);return i}(e,t,n),0,s)}}(cn,po,Ps(Ve(),e,t,n))}function Io(e,t,n){const i=Ve();return Ds(i,Ke(),t)&&Ir(Ue(),pt(),i,e,t,i[11],n,!0),Io}function Ao(e,t,n){const i=Ve();if(Ds(i,Ke(),t)){const r=Ue(),s=pt();Ir(r,s,i,e,t,Qr(et(r.data),s,i),n,!0)}return Ao}const Do=void 0;var Ro=["en",[["a","p"],["AM","PM"],Do],[["AM","PM"],Do,Do],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Do,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Do,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Do,"{1} 'at' {0}",Do],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Oo={};function Po(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Fo(t);if(n)return n;const i=t.split("-")[0];if(n=Fo(i),n)return n;if("en"===i)return Ro;throw new Error(`Missing locale data for the locale "${e}".`)}function No(e){return Po(e)[Lo.PluralCase]}function Fo(e){return e in Oo||(Oo[e]=q.ng&&q.ng.common&&q.ng.common.locales&&q.ng.common.locales[e]),Oo[e]}var Lo=(()=>((Lo=Lo||{})[Lo.LocaleId=0]="LocaleId",Lo[Lo.DayPeriodsFormat=1]="DayPeriodsFormat",Lo[Lo.DayPeriodsStandalone=2]="DayPeriodsStandalone",Lo[Lo.DaysFormat=3]="DaysFormat",Lo[Lo.DaysStandalone=4]="DaysStandalone",Lo[Lo.MonthsFormat=5]="MonthsFormat",Lo[Lo.MonthsStandalone=6]="MonthsStandalone",Lo[Lo.Eras=7]="Eras",Lo[Lo.FirstDayOfWeek=8]="FirstDayOfWeek",Lo[Lo.WeekendRange=9]="WeekendRange",Lo[Lo.DateFormat=10]="DateFormat",Lo[Lo.TimeFormat=11]="TimeFormat",Lo[Lo.DateTimeFormat=12]="DateTimeFormat",Lo[Lo.NumberSymbols=13]="NumberSymbols",Lo[Lo.NumberFormats=14]="NumberFormats",Lo[Lo.CurrencyCode=15]="CurrencyCode",Lo[Lo.CurrencySymbol=16]="CurrencySymbol",Lo[Lo.CurrencyName=17]="CurrencyName",Lo[Lo.Currencies=18]="Currencies",Lo[Lo.Directionality=19]="Directionality",Lo[Lo.PluralCase=20]="PluralCase",Lo[Lo.ExtraData=21]="ExtraData",Lo))();let Mo="en-US";function Vo(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,i){throw new Error(`ASSERTION ERROR: ${e} [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(Mo=e.toLowerCase().replace(/_/g,"-"))}function Uo(e,t,n,i,r){if(e=f(e),Array.isArray(e))for(let s=0;s<e.length;s++)Uo(e[s],t,n,i,r);else{const s=Ue(),o=Ve();let a=ms(e)?e:f(e.provide),l=ds(e);const c=Be(),u=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(ms(e)||!e.multi){const i=new Ct(l,r,Ls),p=jo(a,t,r?u:u+d,h);-1===p?(Vt(Nt(c,o),s,a),qo(s,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(i),o.push(i)):(n[p]=i,o[p]=i)}else{const p=jo(a,t,u+d,h),f=jo(a,t,u,u+d),m=p>=0&&n[p],g=f>=0&&n[f];if(r&&!g||!r&&!m){Vt(Nt(c,o),s,a);const u=function(e,t,n,i,r){const s=new Ct(e,n,Ls);return s.multi=[],s.index=t,s.componentProviders=0,Bo(s,r,i&&!n),s}(r?zo:Zo,n.length,r,i,l);!r&&g&&(n[f].providerFactory=u),qo(s,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(u),o.push(u)}else qo(s,e,p>-1?p:f,Bo(n[r?f:p],l,!r&&i));!r&&i&&g&&n[f].componentProviders++}}}function qo(e,t,n,i){const r=ms(t);if(r||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[i,s]):o[e+1].push(i,s)}else o.push(n,s)}}}function Bo(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function jo(e,t,n,i){for(let r=n;r<i;r++)if(t[r]===e)return r;return-1}function Zo(e,t,n,i){return Go(this.multi,[])}function zo(e,t,n,i){const r=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Ht(n,n[1],this.providerFactory.index,i);s=t.slice(0,e),Go(r,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],Go(r,s);return s}function Go(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Ho(e,t=[]){return n=>{n.providersResolver=(n,i)=>function(e,t,n){const i=Ue();if(i.firstCreatePass){const r=pe(e);Uo(n,i.data,i.blueprint,r,!0),Uo(t,i.data,i.blueprint,r,!1)}}(n,i?i(e):e,t)}}class Yo{}class $o{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${u(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}class Wo{}function Ko(...e){}function Qo(e,t){return new Xo(xe(e,t))}Wo.NULL=new $o;const Jo=function(){return Qo(Be(),Ve())};let Xo=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=Jo,e})();function ea(e){return e instanceof Xo?e.nativeElement:e}class ta{}let na=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>ia(),e})();const ia=function(){const e=Ve(),t=De(Be().index,e);return function(e){return e[11]}(le(t)?t:e)};let ra=(()=>{class e{}return e.\u0275prov=b({token:e,providedIn:"root",factory:()=>null}),e})();class sa{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const oa=new sa("12.1.5");class aa{constructor(){}supports(e){return xs(e)}create(e){return new ca(e)}}const la=(e,t)=>t;class ca{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||la}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,i=0,r=null;for(;t||n;){const s=!n||t&&t.currentIndex<pa(n,i,r)?t:n,o=pa(s,i,r),a=s.currentIndex;if(s===n)i--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{r||(r=[]);const e=o-i,t=a-i;if(e!=t){for(let n=0;n<e;n++){const i=n<r.length?r[n]:r[n]=0,s=i+n;t<=s&&s<e&&(r[n]=i+1)}r[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!xs(e))throw new Error(`Error trying to diff '${u(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,i,r=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],i=this._trackByFn(t,n),null!==r&&Object.is(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,n,i,t)),Object.is(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,t),s=!0),r=r._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Ts()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(e,e=>{i=this._trackByFn(t,e),null!==r&&Object.is(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,e,i,t)),Object.is(r.item,e)||this._addIdentityChange(r,e)):(r=this._mismatch(r,e,i,t),s=!0),r=r._next,t++}),this.length=t;return this._truncate(r),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,i){let r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,i)):e=this._addAfter(new ua(t,n),r,i),e}_verifyReinsertion(e,t,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?e=this._reinsertAfter(r,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,r=e._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new da),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new da),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class ua{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ha{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class da{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new ha,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pa(e,t,n){const i=e.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}class fa{constructor(){}supports(e){return e instanceof Map||Is(e)}create(){return new ma}}class ma{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Is(e)))throw new Error(`Error trying to diff '${u(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const i=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new ga(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class ga{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function _a(){return new ya([new aa])}let ya=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||_a()),deps:[[e,new kn,new Sn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=b({token:e,providedIn:"root",factory:_a}),e})();function va(){return new ba([new fa])}let ba=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||va()),deps:[[e,new kn,new Sn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=b({token:e,providedIn:"root",factory:va}),e})();function wa(e,t,n,i,r=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&i.push(Te(s)),ce(s))for(let e=10;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&wa(t[1],t,n,i)}const o=n.type;if(8&o)wa(e,t,n.child,i);else if(32&o){const e=bi(n,t);let r;for(;r=e();)i.push(r)}else if(16&o){const e=qi(t,n);if(Array.isArray(e))i.push(...e);else{const n=wi(t[16]);wa(n[1],n,e,i,!0)}}n=r?n.projectionNext:n.next}return i}class Ca{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return wa(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ce(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Ii(e,n),an(t,n))}this._attachedToViewContainer=!1}Ai(this._lView[1],this._lView)}onDestroy(e){Er(this._lView[1],this._lView,null,e)}markForCheck(){zr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Gr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Ye(!0);try{Gr(e,t,n)}finally{Ye(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Zi(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Sa extends Ca{constructor(e){super(e),this._view=e}detectChanges(){Hr(this._view)}checkNoChanges(){!function(e){Ye(!0);try{Hr(e)}finally{Ye(!1)}}(this._view)}get context(){return null}}const ka=function(e){return function(e,t,n){if(he(e)&&!n){const n=De(e.index,t);return new Ca(n,n)}return 47&e.type?new Ca(t[16],t):null}(Be(),Ve(),16==(16&e))};let Ta=(()=>{class e{}return e.__NG_ELEMENT_ID__=ka,e})();const Ea=[new fa],xa=new ya([new aa]),Ia=new ba(Ea),Aa=function(){return Pa(Be(),Ve())};let Da=(()=>{class e{}return e.__NG_ELEMENT_ID__=Aa,e})();const Ra=Da,Oa=class extends Ra{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=fr(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const i=this._declarationLView[19];return null!==i&&(n[19]=i.createEmbeddedView(t)),_r(t,n,e),new Ca(n)}};function Pa(e,t){return 4&e.type?new Oa(t,e,Qo(e,t)):null}class Na{}class Fa{}const La=function(){return ja(Be(),Ve())};let Ma=(()=>{class e{}return e.__NG_ELEMENT_ID__=La,e})();const Va=Ma,Ua=class extends Va{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Qo(this._hostTNode,this._hostLView)}get injector(){return new Wt(this._hostTNode,this._hostLView)}get parentInjector(){const e=Mt(this._hostTNode,this._hostLView);if(It(e)){const t=Dt(e,this._hostLView),n=At(e);return new Wt(t[1].data[n+8],t)}return new Wt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=qa(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){const i=e.createEmbeddedView(t||{});return this.insert(i,n),i}createComponent(e,t,n,i,r){const s=n||this.parentInjector;if(!r&&null==e.ngModule&&s){const e=s.get(Na,null);e&&(r=e)}const o=e.create(s,i,void 0,r);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,i=n[1];if(ce(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],i=new Ua(t,t[6],t[3]);i.detach(i.indexOf(e))}}const r=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,i){const r=10+i,s=n.length;i>0&&(n[r-1][4]=t),i<s-10?(t[4]=n[r],on(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(i,n,s,r);const o=Bi(r,s),a=n[11],l=Fi(a,s[7]);return null!==l&&function(e,t,n,i,r,s){i[0]=r,i[6]=t,Zi(e,i,n,1,r,s)}(i,s[6],a,n,l,o),e.attachToViewContainerRef(),on(Ba(s),r,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=qa(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Ii(this._lContainer,t);n&&(an(Ba(this._lContainer),t),Ai(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Ii(this._lContainer,t);return n&&null!=an(Ba(this._lContainer),t)?new Ca(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function qa(e){return e[8]}function Ba(e){return e[8]||(e[8]=[])}function ja(e,t){let n;const i=t[e.index];if(ce(i))n=i;else{let r;if(8&e.type)r=Te(i);else{const n=t[11];r=n.createComment("");const i=xe(e,t);Oi(n,Fi(n,i),r,function(e,t){return Se(e)?e.nextSibling(t):t.nextSibling}(n,i),!1)}t[e.index]=n=Ur(i,t,r,e),Zr(t,n)}return new Ua(n,e,t)}const Za={};class za extends Wo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=oe(e);return new Ya(t,this.ngModule)}}function Ga(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Ha=new en("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>_i});class Ya extends Yo{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(ir).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Ga(this.componentDef.inputs)}get outputs(){return Ga(this.componentDef.outputs)}create(e,t,n,i){const r=(i=i||this.ngModule)?function(e,t){return{get:(n,i,r)=>{const s=e.get(n,Za,r);return s!==Za||i===Za?s:t.get(n,i,r)}}}(e,i.injector):e,s=r.get(ta,ke),o=r.get(ra,null),a=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(Se(e))return e.selectRootElement(t,n===F.ShadowDom);let i="string"==typeof t?e.querySelector(t):t;return i.textContent="",i}(a,n,this.componentDef.encapsulation):Ei(s.createRenderer(null,this.componentDef),l,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,h={components:[],scheduler:_i,clean:$r,playerHandler:null,flags:0},d=Tr(0,null,null,1,0,null,null,null,null,null),p=fr(null,d,h,u,null,null,s,a,o,r);let f,m;st(p);try{const e=function(e,t,n,i,r,s){const o=n[1];n[20]=e;const a=mr(o,20,2,"#host",null),l=a.mergedAttrs=t.hostAttrs;null!==l&&(ts(a,l,!0),null!==e&&(St(r,e,l),null!==a.classes&&Hi(r,e,a.classes),null!==a.styles&&Gi(r,e,a.styles)));const c=i.createRenderer(e,t),u=fr(n,kr(t),null,t.onPush?64:16,n[20],a,i,c,null,null);return o.firstCreatePass&&(Vt(Nt(a,n),o,t.type),Or(o,a),Nr(a,n.length,1)),Zr(n,u),n[20]=u}(c,this.componentDef,p,s,a);if(c)if(n)St(a,c,["ng-version",oa.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let i=1,r=2;for(;i<e.length;){let s=e[i];if("string"==typeof s)2===r?""!==s&&t.push(s,e[++i]):8===r&&n.push(s);else{if(!Ji(r))break;r=s}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&St(a,c,e),t&&t.length>0&&Hi(a,c,t.join(" "))}if(m=Ie(d,20),void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const i=t[n];e.push(null!=i?Array.from(i):null)}}f=function(e,t,n,i,r){const s=n[1],o=function(e,t,n){const i=Be();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Fr(e,i,t,gr(e,t,1,null),n));const r=Ht(t,e,i.directiveStart,i);di(r,t);const s=xe(i,t);return s&&di(s,t),r}(s,n,t);if(i.components.push(o),e[8]=o,r&&r.forEach(e=>e(o,t)),t.contentQueries){const e=Be();t.contentQueries(1,o,e.directiveStart)}const a=Be();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(dt(a.index),Dr(n[1],a,0,a.directiveStart,a.directiveEnd,t),Rr(t,o)),o}(e,this.componentDef,p,h,[ys]),_r(d,p,null)}finally{ut()}return new $a(this.componentType,f,Qo(m,p),p,m)}}class $a extends class{}{constructor(e,t,n,i,r){super(),this.location=n,this._rootLView=i,this._tNode=r,this.instance=t,this.hostView=this.changeDetectorRef=new Sa(i),this.componentType=e}get injector(){return new Wt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Wa=new Map;class Ka extends Na{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new za(this);const n=ae(e),i=e[Y]||null;i&&Vo(i),this._bootstrapComponents=yi(n.bootstrap),this._r3Injector=cs(e,t,[{provide:Na,useValue:this},{provide:Wo,useValue:this.componentFactoryResolver}],u(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=_s.THROW_IF_NOT_FOUND,n=A.Default){return e===_s||e===Na||e===ns?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Qa extends Fa{constructor(e){super(),this.moduleType=e,null!==ae(e)&&function(e){const t=new Set;!function e(n){const i=ae(n,!0),r=i.id;null!==r&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${u(t)} vs ${u(t.name)}`)}(r,Wa.get(r),n),Wa.set(r,n));const s=yi(i.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new Ka(this.moduleType,e)}}function Ja(e,t,n){const i=$e()+e,r=Ve();return r[i]===rr?As(r,i,n?t.call(n):t()):function(e,t){return e[t]}(r,i)}function Xa(e,t,n,i){return tl(Ve(),$e(),e,t,n,i)}function el(e,t){const n=e[t];return n===rr?void 0:n}function tl(e,t,n,i,r,s){const o=t+n;return Ds(e,o,r)?As(e,o+1,s?i.call(s,r):i(r)):el(e,o+1)}function nl(e,t){const n=Ue();let i;const r=e+20;n.firstCreatePass?(i=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const i=t[n];if(e===i.name)return i}throw new g("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const s=i.factory||(i.factory=fe(i.type)),o=R(Ls);try{const e=Ot(!1),t=s();return Ot(e),function(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}(n,Ve(),r,t),t}finally{R(o)}}function il(e,t,n){const i=e+20,r=Ve(),s=Ae(r,i);return ol(r,sl(r,i)?tl(r,$e(),t,s.transform,n,s):s.transform(n))}function rl(e,t,n,i){const r=e+20,s=Ve(),o=Ae(s,r);return ol(s,sl(s,r)?function(e,t,n,i,r,s,o){const a=t+n;return Rs(e,a,r,s)?As(e,a+2,o?i.call(o,r,s):i(r,s)):el(e,a+2)}(s,$e(),t,o.transform,n,i,o):o.transform(n,i))}function sl(e,t){return e[1].data[t].pure}function ol(e,t){return Es.isWrapped(t)&&(t=Es.unwrap(t),e[We()]=rr),t}function al(e){return t=>{setTimeout(e,void 0,t)}}const ll=class extends i.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var i,s,o;let a=e,l=t||(()=>null),c=n;if(e&&"object"==typeof e){const t=e;a=null===(i=t.next)||void 0===i?void 0:i.bind(t),l=null===(s=t.error)||void 0===s?void 0:s.bind(t),c=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(l=al(l),a&&(a=al(a)),c&&(c=al(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof r.w&&e.add(u),u}};function cl(){return this._results[Ts()]()}class ul{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Ts(),n=ul.prototype;n[t]||(n[t]=cl)}get changes(){return this._changes||(this._changes=new ll)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const n=rn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=t[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class hl{constructor(e){this.queryList=e,this.matches=null}clone(){return new hl(this.queryList)}setDirty(){this.queryList.setDirty()}}class dl{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);i.push(this.queries[n.indexInDeclarationView].clone())}return new dl(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==El(e,t).matches&&this.queries[t].setDirty()}}class pl{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class fl{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const i=null!==t?t.length:0,r=this.getByIndex(n).embeddedTView(e,i);r&&(r.indexInDeclarationView=n,null!==t?t.push(r):t=[r])}return null!==t?new fl(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class ml{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new ml(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let i=0;i<n.length;i++){const r=n[i];this.matchTNodeWithReadOption(e,t,gl(t,r)),this.matchTNodeWithReadOption(e,t,Gt(t,e,r,!1,!1))}else n===Da?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Gt(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const i=this.metadata.read;if(null!==i)if(i===Xo||i===Ma||i===Da&&4&t.type)this.addMatch(t.index,-2);else{const n=Gt(t,e,i,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function gl(e,t){const n=e.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function _l(e,t,n,i){return-1===n?function(e,t){return 11&e.type?Qo(e,t):4&e.type?Pa(e,t):null}(t,e):-2===n?function(e,t,n){return n===Xo?Qo(t,e):n===Da?Pa(t,e):n===Ma?ja(t,e):void 0}(e,t,i):Ht(e,e[1],n,t)}function yl(e,t,n,i){const r=t[19].queries[i];if(null===r.matches){const i=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const r=s[e];o.push(r<0?null:_l(t,i[r],s[e+1],n.metadata.read))}r.matches=o}return r.matches}function vl(e,t,n,i){const r=e.queries.getByIndex(n),s=r.matches;if(null!==s){const o=yl(e,t,r,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)i.push(o[e/2]);else{const r=s[e+1],o=t[-n];for(let e=10;e<o.length;e++){const t=o[e];t[17]===t[3]&&vl(t[1],t,r,i)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];vl(n[1],n,r,i)}}}}}return i}function bl(e){const t=Ve(),n=Ue(),i=tt();nt(i+1);const r=El(n,i);if(e.dirty&&Re(t)===(2==(2&r.metadata.flags))){if(null===r.matches)e.reset([]);else{const s=r.crossesNgTemplate?vl(n,t,i,[]):yl(n,t,r,i);e.reset(s,ea),e.notifyOnChanges()}return!0}return!1}function wl(e,t,n){const i=Ue();i.firstCreatePass&&(Tl(i,new pl(e,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),kl(i,Ve(),t)}function Cl(e,t,n,i){const r=Ue();if(r.firstCreatePass){const s=Be();Tl(r,new pl(t,n,i),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(r,e),2==(2&n)&&(r.staticContentQueries=!0)}kl(r,Ve(),n)}function Sl(){return e=Ve(),t=tt(),e[19].queries[t].queryList;var e,t}function kl(e,t,n){const i=new ul(4==(4&n));Er(e,t,i,i.destroy),null===t[19]&&(t[19]=new dl),t[19].queries.push(new hl(i))}function Tl(e,t,n){null===e.queries&&(e.queries=new fl),e.queries.track(new ml(t,n))}function El(e,t){return e.queries.getByIndex(t)}const xl=new en("Application Initializer");let Il=(()=>{class e{constructor(e){this.appInits=e,this.resolve=Ko,this.reject=Ko,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(Hs(t))e.push(t);else if($s(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(yn(xl,8))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();const Al=new en("AppId"),Dl={provide:Al,useFactory:function(){return`${Rl()}${Rl()}${Rl()}`},deps:[]};function Rl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ol=new en("Platform Initializer"),Pl=new en("Platform ID"),Nl=new en("appBootstrapListener");let Fl=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();const Ll=new en("LocaleId"),Ml=new en("DefaultCurrencyCode");class Vl{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Ul=function(e){return new Qa(e)},ql=Ul,Bl=function(e){return Promise.resolve(Ul(e))},jl=function(e){const t=Ul(e),n=yi(ae(e).declarations).reduce((e,t)=>{const n=oe(t);return n&&e.push(new Ya(n)),e},[]);return new Vl(t,n)},Zl=jl,zl=function(e){return Promise.resolve(jl(e))};let Gl=(()=>{class e{constructor(){this.compileModuleSync=ql,this.compileModuleAsync=Bl,this.compileModuleAndAllComponentsSync=Zl,this.compileModuleAndAllComponentsAsync=zl}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();const Hl=(()=>Promise.resolve(0))();function Yl(e){"undefined"==typeof Zone?Hl.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class $l{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ll(!1),this.onMicrotaskEmpty=new ll(!1),this.onStable=new ll(!1),this.onError=new ll(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!n&&t,this.shouldCoalesceRunChangeDetection=n,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let e=q.requestAnimationFrame,t=q.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(q,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Ql(e),e.isCheckStableRunning=!0,Kl(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Ql(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{try{return Jl(e),n.invokeTask(r,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),Xl(e)}},onInvoke:(n,i,r,s,o,a,l)=>{try{return Jl(e),n.invoke(r,s,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),Xl(e)}},onHasTask:(t,n,i,r)=>{t.hasTask(i,r),n===i&&("microTask"==r.change?(e._hasPendingMicrotasks=r.microTask,Ql(e),Kl(e)):"macroTask"==r.change&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:(t,n,i,r)=>(t.handleError(i,r),e.runOutsideAngular(()=>e.onError.emit(r)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$l.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if($l.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,i){const r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+i,e,Wl,Ko,Ko);try{return r.runTask(s,t,n)}finally{r.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Wl={};function Kl(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Ql(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Jl(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Xl(e){e._nesting--,Kl(e)}class ec{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ll,this.onMicrotaskEmpty=new ll,this.onStable=new ll,this.onError=new ll}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,i){return e.apply(t,n)}}let tc=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$l.assertNotInAngularZone(),Yl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yl(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let i=-1;t&&t>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==i),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(yn($l))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})(),nc=(()=>{class e{constructor(){this._applications=new Map,oc.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return oc.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();class ic{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function rc(e){oc=e}let sc,oc=new ic,ac=!0,lc=!1;function cc(){return lc=!0,ac}function uc(){if(lc)throw new Error("Cannot enable prod mode after platform setup.");ac=!1}const hc=new en("AllowMultipleToken");class dc{constructor(e,t){this.name=e,this.token=t}}function pc(e,t,n=[]){const i=`Platform: ${t}`,r=new en(i);return(t=[])=>{let s=fc();if(!s||s.injector.get(hc,!1))if(e)e(n.concat(t).concat({provide:r,useValue:!0}));else{const e=n.concat(t).concat({provide:r,useValue:!0},{provide:rs,useValue:"platform"});!function(e){if(sc&&!sc.destroyed&&!sc.injector.get(hc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");sc=e.get(mc);const t=e.get(Ol,null);t&&t.forEach(e=>e())}(_s.create({providers:e,name:i}))}return function(e){const t=fc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(r)}}function fc(){return sc&&!sc.destroyed?sc:null}let mc=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new ec:("zone.js"===e?void 0:e)||new $l({enableLongStackTrace:cc(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),i=[{provide:$l,useValue:n}];return n.run(()=>{const t=_s.create({providers:i,parent:this.injector,name:e.moduleType.name}),r=e.create(t),s=r.injector.get(gi,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});r.onDestroy(()=>{yc(this._modules,r),e.unsubscribe()})}),function(e,t,n){try{const i=n();return Hs(i)?i.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(s,n,()=>{const e=r.injector.get(Il);return e.runInitializers(),e.donePromise.then(()=>(Vo(r.injector.get(Ll,"en-US")||"en-US"),this._moduleDoBootstrap(r),r))})})}bootstrapModule(e,t=[]){const n=gc({},t);return function(e,t,n){const i=new Qa(n);return Promise.resolve(i)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(_c);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${u(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(yn(_s))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();function gc(e,t){return Array.isArray(t)?t.reduce(gc,e):Object.assign(Object.assign({},e),t)}let _c=(()=>{class e{constructor(e,t,n,i,r){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=i,this._initStatus=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),c=new s.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{$l.assertNotInAngularZone(),Yl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{$l.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,c.pipe((0,a.B)()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Yo?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const i=n.isBoundToModule?void 0:this._injector.get(Na),r=n.create(_s.NULL,[],t||n.selector,i),s=r.location.nativeElement,o=r.injector.get(tc,null),a=o&&r.injector.get(nc);return o&&a&&a.registerApplication(s,o),r.onDestroy(()=>{this.detachView(r.hostView),yc(this.components,r),a&&a.unregisterApplication(s)}),this._loadComponent(r),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;yc(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Nl,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(yn($l),yn(_s),yn(gi),yn(Wo),yn(Il))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();function yc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class vc{}class bc{}const wc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Cc=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||wc}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,i]=e.split("#");return void 0===i&&(i="default"),n(8255)(t).then(e=>e[i]).then(e=>Sc(e,t,i)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,i]=e.split("#"),r="NgFactory";return void 0===i&&(i="default",r=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[i+r]).then(e=>Sc(e,t,i))}}return e.\u0275fac=function(t){return new(t||e)(yn(Gl),yn(bc,8))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();function Sc(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const kc=function(e){return null},Tc=pc(null,"core",[{provide:Pl,useValue:"unknown"},{provide:mc,deps:[_s]},{provide:nc,deps:[]},{provide:Fl,deps:[]}]),Ec=[{provide:_c,useClass:_c,deps:[$l,_s,gi,Wo,Il]},{provide:Ha,deps:[$l],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Il,useClass:Il,deps:[[new Sn,xl]]},{provide:Gl,useClass:Gl,deps:[]},Dl,{provide:ya,useFactory:function(){return xa},deps:[]},{provide:ba,useFactory:function(){return Ia},deps:[]},{provide:Ll,useFactory:function(e){return Vo(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new Cn(Ll),new Sn,new kn]]},{provide:Ml,useValue:"USD"}];let xc=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(yn(_c))},e.\u0275mod=te({type:e}),e.\u0275inj=w({providers:Ec}),e})()},8939:function(e,t,n){"use strict";n.d(t,{hO:function(){return m},xv:function(){return h},Dh:function(){return u},GT:function(){return l},cc:function(){return g},on:function(){return d},pX:function(){return a}});var i=n(7716),r=n(7841),s=n(4459);e=n.hmd(e);const o=["ngOnDestroy"],a=(e,t,n,i={})=>new Proxy(e,{get:(r,s)=>n.runOutsideAngular(()=>{var r;if(e[s])return(null===(r=null==i?void 0:i.spy)||void 0===r?void 0:r.get)&&i.spy.get(s,e[s]),e[s];if(o.indexOf(s)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[s];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const r=e&&e(...n);return(null===(t=null==i?void 0:i.spy)||void 0===t?void 0:t.apply)&&i.spy.apply(s,n,r),r})})})}),l=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class c{constructor(e){return e}}const u=new i.OlP("angularfire2.app.options"),h=new i.OlP("angularfire2.app.name");function d(t,n,i){const s="object"==typeof i&&i||{};s.name=s.name||"string"==typeof i&&i||"[DEFAULT]";const o=r.Z.apps.filter(e=>e&&e.name===s.name)[0]||n.runOutsideAngular(()=>r.Z.initializeApp(t,s));try{JSON.stringify(t)!==JSON.stringify(o.options)&&p("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new c(o)}const p=(e,...t)=>{(0,i.X6Q)()&&"undefined"!=typeof console&&console[e](...t)},f={provide:c,useFactory:d,deps:[u,i.R0b,[new i.FiY,h]]};let m=(()=>{class e{constructor(e){r.Z.registerVersion("angularfire",s.q4.full,"core"),r.Z.registerVersion("angularfire",s.q4.full,"app-compat"),r.Z.registerVersion("angular",i.q4F.full,e.toString())}static initializeApp(t,n){return{ngModule:e,providers:[{provide:u,useValue:t},{provide:h,useValue:n}]}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.Lbi))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[f]}),e})();function g(e,t,n,i,r){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(r,o)||(y("error",`${t} was already initialized on the ${n} Firebase App with different settings.${_?" You may need to reload as Firebase is not HMR aware.":""}`),y("warn",{is:r,was:o})),s;{const t=i();return globalThis.\u0275AngularfireInstanceCache.push([e,t,r]),t}}const _=!!e.hot,y=(e,...t)=>{(0,i.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4459:function(e,t,n){"use strict";n.d(t,{q4:function(){return pn},iC:function(){return Cn},fc:function(){return wn},HU:function(){return vn},vb:function(){return mn},JM:function(){return fn}});var i=n(7716),r=n(2329),s=n(6304),o=n(279),a=n(3854),l=n(8604),c=n(9306);const u=new a.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function h(e){return e instanceof a.ZR&&e.code.includes("request-failed")}function d({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function p(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function f(e,t){return m.apply(this,arguments)}function m(){return(m=(0,s.Z)(function*(e,t){const n=(yield t.json()).error;return u.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})).apply(this,arguments)}function g({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function _(e,{refreshToken:t}){const n=g(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}function y(e){return v.apply(this,arguments)}function v(){return(v=(0,s.Z)(function*(e){const t=yield e();return t.status>=500&&t.status<600?e():t})).apply(this,arguments)}function b(e,t){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)(function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=d(e),r=g(e),s=t.getImmediate({optional:!0});if(s){const e=yield s.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const o={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:"w:0.5.7"})},a=yield y(()=>fetch(i,o));if(a.ok){const e=yield a.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:p(e.authToken)}}throw yield f("Create Installation",a)})).apply(this,arguments)}function C(e){return new Promise(t=>{setTimeout(t,e)})}const S=/^[cdef][\w-]{21}$/;function k(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return S.test(t)?t:""}catch(e){return""}}function T(e){return`${e.appName}!${e.appId}`}const E=new Map;function x(e,t){const n=T(e);I(n,t),function(e,t){const n=(!A&&"BroadcastChannel"in self&&(A=new BroadcastChannel("[Firebase] FID Change"),A.onmessage=e=>{I(e.data.key,e.data.fid)}),A);n&&n.postMessage({key:e,fid:t}),0===E.size&&A&&(A.close(),A=null)}(n,t)}function I(e,t){const n=E.get(e);if(n)for(const i of n)i(t)}let A=null;const D="firebase-installations-store";let R=null;function O(){return R||(R=(0,a.X3)("firebase-installations-database",1,(e,t)=>{switch(t){case 0:e.createObjectStore(D)}})),R}function P(e,t){return N.apply(this,arguments)}function N(){return(N=(0,s.Z)(function*(e,t){const n=T(e),i=(yield O()).transaction(D,"readwrite"),r=i.objectStore(D),s=yield r.get(n);return yield r.put(t,n),yield i.complete,s&&s.fid===t.fid||x(e,t.fid),t})).apply(this,arguments)}function F(e){return L.apply(this,arguments)}function L(){return(L=(0,s.Z)(function*(e){const t=T(e),n=(yield O()).transaction(D,"readwrite");yield n.objectStore(D).delete(t),yield n.complete})).apply(this,arguments)}function M(e,t){return V.apply(this,arguments)}function V(){return(V=(0,s.Z)(function*(e,t){const n=T(e),i=(yield O()).transaction(D,"readwrite"),r=i.objectStore(D),s=yield r.get(n),o=t(s);return void 0===o?yield r.delete(n):yield r.put(o,n),yield i.complete,!o||s&&s.fid===o.fid||x(e,o.fid),o})).apply(this,arguments)}function U(e){return q.apply(this,arguments)}function q(){return(q=(0,s.Z)(function*(e){let t;const n=yield M(e.appConfig,n=>{const i=B(n),r=j(e,i);return t=r.registrationPromise,r.installationEntry});return""===n.fid?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})).apply(this,arguments)}function B(e){return Y(e||{fid:k(),registrationStatus:0})}function j(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(u.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return Z.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:z(e)}:{installationEntry:t}}function Z(){return(Z=(0,s.Z)(function*(e,t){try{const n=yield b(e,t);return P(e.appConfig,n)}catch(n){throw h(n)&&409===n.customData.serverCode?yield F(e.appConfig):yield P(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})).apply(this,arguments)}function z(e){return G.apply(this,arguments)}function G(){return(G=(0,s.Z)(function*(e){let t=yield H(e.appConfig);for(;1===t.registrationStatus;)yield C(100),t=yield H(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=yield U(e);return n||t}return t})).apply(this,arguments)}function H(e){return M(e,e=>{if(!e)throw u.create("installation-not-found");return Y(e)})}function Y(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function $(e,t){return W.apply(this,arguments)}function W(){return(W=(0,s.Z)(function*({appConfig:e,heartbeatServiceProvider:t},n){const i=K(e,n),r=_(e,n),s=t.getImmediate({optional:!0});if(s){const e=yield s.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const o={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:"w:0.5.7",appId:e.appId}})},a=yield y(()=>fetch(i,o));if(a.ok)return p(yield a.json());throw yield f("Generate Auth Token",a)})).apply(this,arguments)}function K(e,{fid:t}){return`${d(e)}/${t}/authTokens:generate`}function Q(e){return J.apply(this,arguments)}function J(){return(J=(0,s.Z)(function*(e,t=!1){let n;const i=yield M(e.appConfig,i=>{if(!re(i))throw u.create("not-registered");const r=i.authToken;if(!t&&se(r))return i;if(1===r.requestStatus)return n=X(e,t),i;{if(!navigator.onLine)throw u.create("app-offline");const t=oe(i);return n=ne(e,t),t}});return n?yield n:i.authToken})).apply(this,arguments)}function X(e,t){return ee.apply(this,arguments)}function ee(){return(ee=(0,s.Z)(function*(e,t){let n=yield te(e.appConfig);for(;1===n.authToken.requestStatus;)yield C(100),n=yield te(e.appConfig);const i=n.authToken;return 0===i.requestStatus?Q(e,t):i})).apply(this,arguments)}function te(e){return M(e,e=>{if(!re(e))throw u.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t})}function ne(e,t){return ie.apply(this,arguments)}function ie(){return(ie=(0,s.Z)(function*(e,t){try{const n=yield $(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return yield P(e.appConfig,i),n}catch(n){if(!h(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield P(e.appConfig,n)}else yield F(e.appConfig);throw n}})).apply(this,arguments)}function re(e){return void 0!==e&&2===e.registrationStatus}function se(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function oe(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function ae(){return(ae=(0,s.Z)(function*(e){const t=e,{installationEntry:n,registrationPromise:i}=yield U(t);return i?i.catch(console.error):Q(t).catch(console.error),n.fid})).apply(this,arguments)}function le(){return(le=(0,s.Z)(function*(e,t=!1){const n=e;return yield ce(n),(yield Q(n,t)).token})).apply(this,arguments)}function ce(e){return ue.apply(this,arguments)}function ue(){return(ue=(0,s.Z)(function*(e){const{registrationPromise:t}=yield U(e);t&&(yield t)})).apply(this,arguments)}function he(e){return u.create("missing-app-config-values",{valueName:e})}(0,o._registerComponent)(new l.wA("installations",e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw he("App Configuration");if(!e.name)throw he("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw he(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),heartbeatServiceProvider:(0,o._getProvider)(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,o._registerComponent)(new l.wA("installations-internal",e=>{const t=e.getProvider("app").getImmediate(),n=(0,o._getProvider)(t,"installations").getImmediate();return{getId:()=>function(e){return ae.apply(this,arguments)}(n),getToken:e=>function(e){return le.apply(this,arguments)}(n,e)}},"PRIVATE")),(0,o.registerVersion)("@firebase/installations","0.5.7"),(0,o.registerVersion)("@firebase/installations","0.5.7","esm2017");const de=new a.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class pe{constructor(e,t,n,i){this.client=e,this.storage=t,this.storageCache=n,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,i=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,s.Z)(function*(){const[n,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,n))return i;e.eTag=i&&i.eTag;const r=yield t.client.fetch(e),s=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===r.status&&s.push(t.storage.setLastSuccessfulFetchResponse(r)),yield Promise.all(s),r})()}}function fe(e=navigator){return e.languages&&e.languages[0]||e.language}class me{constructor(e,t,n,i,r,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=i,this.apiKey=r,this.appId=s}fetch(e){var t=this;return(0,s.Z)(function*(){const[n,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),r=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},o={sdk_version:t.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:t.appId,language_code:fe()},a={method:"POST",headers:s,body:JSON.stringify(o)},l=fetch(r,a),c=new Promise((t,n)=>{e.signal.addEventListener(()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)})});let u;try{yield Promise.race([l,c]),u=yield l}catch(m){let e="fetch-client-network";throw"AbortError"===m.name&&(e="fetch-timeout"),de.create(e,{originalErrorMessage:m.message})}let h=u.status;const d=u.headers.get("ETag")||void 0;let p,f;if(200===u.status){let e;try{e=yield u.json()}catch(m){throw de.create("fetch-client-parse",{originalErrorMessage:m.message})}p=e.entries,f=e.state}if("INSTANCE_STATE_UNSPECIFIED"===f?h=500:"NO_CHANGE"===f?h=304:"NO_TEMPLATE"!==f&&"EMPTY_CONFIG"!==f||(p={}),304!==h&&200!==h)throw de.create("fetch-status",{httpStatus:h});return{status:h,eTag:d,config:p}})()}}class ge{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,s.Z)(function*(){const n=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,n)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:n}){var i=this;return(0,s.Z)(function*(){yield function(e,t){return new Promise((n,i)=>{const r=Math.max(t-Date.now(),0),s=setTimeout(n,r);e.addEventListener(()=>{clearTimeout(s),i(de.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,t);try{const t=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),t}catch(r){if(!function(e){if(!(e instanceof a.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r))throw r;const t={throttleEndTimeMillis:Date.now()+(0,a.$s)(n),backoffCount:n+1};return yield i.storage.setThrottleMetadata(t),i.attemptFetch(e,t)}})()}}class _e{constructor(e,t,n,i,r){this.app=e,this._client=t,this._storageCache=n,this._storage=i,this._logger=r,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ye(e,t){const n=e.target.error||void 0;return de.create(t,{originalErrorMessage:n&&n.message})}class ve{constructor(e,t,n,i=function(){return new Promise((e,t)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=e=>{t(ye(e,"storage-open"))},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}catch(n){t(de.create("storage-open",{originalErrorMessage:n}))}})}()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,s.Z)(function*(){const n=yield t.openDbPromise;return new Promise((i,r)=>{const s=n.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),o=t.createCompositeKey(e);try{const e=s.get(o);e.onerror=e=>{r(ye(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;i(t?t.value:void 0)}}catch(a){r(de.create("storage-get",{originalErrorMessage:a&&a.message}))}})})()}set(e,t){var n=this;return(0,s.Z)(function*(){const i=yield n.openDbPromise;return new Promise((r,s)=>{const o=i.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=n.createCompositeKey(e);try{const e=o.put({compositeKey:a,value:t});e.onerror=e=>{s(ye(e,"storage-set"))},e.onsuccess=()=>{r()}}catch(l){s(de.create("storage-set",{originalErrorMessage:l&&l.message}))}})})()}delete(e){var t=this;return(0,s.Z)(function*(){const n=yield t.openDbPromise;return new Promise((i,r)=>{const s=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),o=t.createCompositeKey(e);try{const e=s.delete(o);e.onerror=e=>{r(ye(e,"storage-delete"))},e.onsuccess=()=>{i()}}catch(a){r(de.create("storage-delete",{originalErrorMessage:a&&a.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class be{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,s.Z)(function*(){const t=e.storage.getLastFetchStatus(),n=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),r=yield t;r&&(e.lastFetchStatus=r);const s=yield n;s&&(e.lastSuccessfulFetchTimestampMillis=s);const o=yield i;o&&(e.activeConfig=o)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function we(){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,s.Z)(function*(){if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(e){return!1}})).apply(this,arguments)}(0,o._registerComponent)(new l.wA("remote-config",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw de.create("registration-window");if(!(0,a.hl)())throw de.create("indexed-db-unavailable");const{projectId:r,apiKey:s,appId:l}=n.options;if(!r)throw de.create("registration-project-id");if(!s)throw de.create("registration-api-key");if(!l)throw de.create("registration-app-id");const u=new ve(l,n.name,t=t||"firebase"),h=new be(u),d=new c.Yd("@firebase/remote-config");d.logLevel=c.in.ERROR;const p=new me(i,o.SDK_VERSION,t,r,s,l),f=new ge(p,u),m=new pe(f,u,h,d),g=new _e(n,m,h,u,d);return function(e){const t=(0,a.m9)(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0}))}(g),g},"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)("@firebase/remote-config","0.3.6"),(0,o.registerVersion)("@firebase/remote-config","0.3.6","esm2017");const Se="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";var ke=(()=>(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(ke||(ke={})),ke))();function Te(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ee(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length);for(let r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}const xe="fcm_token_details_db";function Ie(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,s.Z)(function*(e){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(e=>e.name).includes(xe))return null;let t=null;return(yield(0,a.X3)(xe,5,function(){var n=(0,s.Z)(function*(n,i,r,s){var o;if(i<2)return;if(!n.objectStoreNames.contains("fcm_token_object_Store"))return;const a=s.objectStore("fcm_token_object_Store"),l=yield a.index("fcmSenderId").get(e);if(yield a.clear(),l)if(2===i){const e=l;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(o=e.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:Te(e.vapidKey)}}}else if(3===i){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Te(e.auth),p256dh:Te(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Te(e.vapidKey)}}}else if(4===i){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Te(e.auth),p256dh:Te(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Te(e.vapidKey)}}}});return function(e,t,i,r){return n.apply(this,arguments)}}())).close(),yield(0,a.Lj)(xe),yield(0,a.Lj)("fcm_vapid_details_db"),yield(0,a.Lj)("undefined"),De(t)?t:null})).apply(this,arguments)}function De(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}let Re=null;function Oe(){return Re||(Re=(0,a.X3)("firebase-messaging-database",1,(e,t)=>{switch(t){case 0:e.createObjectStore("firebase-messaging-store")}})),Re}function Pe(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,s.Z)(function*(e){const t=Ue(e),n=yield Oe(),i=yield n.transaction("firebase-messaging-store").objectStore("firebase-messaging-store").get(t);if(i)return i;{const t=yield Ie(e.appConfig.senderId);if(t)return yield Fe(e,t),t}})).apply(this,arguments)}function Fe(e,t){return Le.apply(this,arguments)}function Le(){return(Le=(0,s.Z)(function*(e,t){const n=Ue(e),i=(yield Oe()).transaction("firebase-messaging-store","readwrite");return yield i.objectStore("firebase-messaging-store").put(t,n),yield i.complete,t})).apply(this,arguments)}function Me(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,s.Z)(function*(e){const t=Ue(e),n=(yield Oe()).transaction("firebase-messaging-store","readwrite");yield n.objectStore("firebase-messaging-store").delete(t),yield n.complete})).apply(this,arguments)}function Ue({appConfig:e}){return e.appId}const qe=new a.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Be(e,t){return je.apply(this,arguments)}function je(){return(je=(0,s.Z)(function*(e,t){const n=yield $e(e),i=Ke(t),r={method:"POST",headers:n,body:JSON.stringify(i)};let s;try{const t=yield fetch(Ye(e.appConfig),r);s=yield t.json()}catch(o){throw qe.create("token-subscribe-failed",{errorInfo:o})}if(s.error)throw qe.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw qe.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function Ze(e,t){return ze.apply(this,arguments)}function ze(){return(ze=(0,s.Z)(function*(e,t){const n=yield $e(e),i=Ke(t.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)};let s;try{const n=yield fetch(`${Ye(e.appConfig)}/${t.token}`,r);s=yield n.json()}catch(o){throw qe.create("token-update-failed",{errorInfo:o})}if(s.error)throw qe.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw qe.create("token-update-no-token");return s.token})).apply(this,arguments)}function Ge(e,t){return He.apply(this,arguments)}function He(){return(He=(0,s.Z)(function*(e,t){const n={method:"DELETE",headers:yield $e(e)};try{const i=yield fetch(`${Ye(e.appConfig)}/${t}`,n),r=yield i.json();if(r.error)throw qe.create("token-unsubscribe-failed",{errorInfo:r.error.message})}catch(i){throw qe.create("token-unsubscribe-failed",{errorInfo:i})}})).apply(this,arguments)}function Ye({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}function $e(e){return We.apply(this,arguments)}function We(){return(We=(0,s.Z)(function*({appConfig:e,installations:t}){const n=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function Ke({p256dh:e,auth:t,endpoint:n,vapidKey:i}){const r={web:{endpoint:n,auth:t,p256dh:e}};return i!==Se&&(r.web.applicationPubKey=i),r}function Qe(e){return Je.apply(this,arguments)}function Je(){return(Je=(0,s.Z)(function*(e){const t=yield st(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Te(t.getKey("auth")),p256dh:Te(t.getKey("p256dh"))},i=yield Pe(e.firebaseDependencies);if(i){if(at(i.subscriptionOptions,n))return Date.now()>=i.createTime+6048e5?tt(e,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield Ge(e.firebaseDependencies,i.token)}catch(r){console.warn(r)}return it(e.firebaseDependencies,n)}return it(e.firebaseDependencies,n)})).apply(this,arguments)}function Xe(e){return et.apply(this,arguments)}function et(){return(et=(0,s.Z)(function*(e){const t=yield Pe(e.firebaseDependencies);t&&(yield Ge(e.firebaseDependencies,t.token),yield Me(e.firebaseDependencies));const n=yield e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function tt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=(0,s.Z)(function*(e,t){try{const n=yield Ze(e.firebaseDependencies,t),i=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield Fe(e.firebaseDependencies,i),n}catch(n){throw yield Xe(e),n}})).apply(this,arguments)}function it(e,t){return rt.apply(this,arguments)}function rt(){return(rt=(0,s.Z)(function*(e,t){const n={token:yield Be(e,t),createTime:Date.now(),subscriptionOptions:t};return yield Fe(e,n),n.token})).apply(this,arguments)}function st(e,t){return ot.apply(this,arguments)}function ot(){return(ot=(0,s.Z)(function*(e,t){return(yield e.pushManager.getSubscription())||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ee(t)})})).apply(this,arguments)}function at(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function lt(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const i=t.notification.body;i&&(e.notification.body=i);const r=t.notification.image;r&&(e.notification.image=r)}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};const n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);const i=t.fcmOptions.analytics_label;i&&(e.fcmOptions.analyticsLabel=i)}(t,e),t}function ct(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}function ut(e,t){const n=[];for(let i=0;i<e.length;i++)n.push(e.charAt(i)),i<t.length&&n.push(t.charAt(i));return n.join("")}function ht(e){return qe.create("missing-app-config-values",{valueName:e})}ut("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ut("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class dt{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function(e){if(!e||!e.options)throw ht("App Configuration Object");if(!e.name)throw ht("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const i of t)if(!n[i])throw ht(i);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}function pt(e){return ft.apply(this,arguments)}function ft(){return(ft=(0,s.Z)(function*(e){try{e.swRegistration=yield navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch(()=>{})}catch(t){throw qe.create("failed-service-worker-registration",{browserErrorMessage:t.message})}})).apply(this,arguments)}function mt(e,t){return gt.apply(this,arguments)}function gt(){return(gt=(0,s.Z)(function*(e,t){if(t||e.swRegistration||(yield pt(e)),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw qe.create("invalid-sw-registration");e.swRegistration=t}})).apply(this,arguments)}function _t(e,t){return yt.apply(this,arguments)}function yt(){return(yt=(0,s.Z)(function*(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Se)})).apply(this,arguments)}function vt(){return(vt=(0,s.Z)(function*(e,t){if(!navigator)throw qe.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qe.create("permission-blocked");return yield _t(e,null==t?void 0:t.vapidKey),yield mt(e,null==t?void 0:t.serviceWorkerRegistration),Qe(e)})).apply(this,arguments)}function bt(e,t,n){return wt.apply(this,arguments)}function wt(){return(wt=(0,s.Z)(function*(e,t,n){const i=Ct(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ct(e){switch(e){case ke.NOTIFICATION_CLICKED:return"notification_open";case ke.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function St(){return(St=(0,s.Z)(function*(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===ke.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(lt(n)):e.onMessageHandler.next(lt(n)));const i=n.data;ct(i)&&"1"===i["google.c.a.e"]&&(yield bt(e,n.messageType,i))})).apply(this,arguments)}function kt(){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,s.Z)(function*(){try{yield(0,a.eu)()}catch(e){return!1}return"undefined"!=typeof window&&(0,a.hl)()&&(0,a.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,o._registerComponent)(new l.wA("messaging",e=>{const t=new dt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>function(e,t){return St.apply(this,arguments)}(t,e)),t},"PUBLIC")),(0,o._registerComponent)(new l.wA("messaging-internal",e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>function(e,t){return vt.apply(this,arguments)}(t,e)}},"PRIVATE")),(0,o.registerVersion)("@firebase/messaging","0.9.11"),(0,o.registerVersion)("@firebase/messaging","0.9.11","esm2017");const Et="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xt="https://www.googletagmanager.com/gtag/js",It=new c.Yd("@firebase/analytics");function At(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Dt(e,t){const n=document.createElement("script");n.src=`${xt}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}function Rt(e,t,n,i,r,s){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,s.Z)(function*(e,t,n,i,r,s){const o=i[r];try{if(o)yield t[o];else{const e=(yield At(n)).find(e=>e.measurementId===r);e&&(yield t[e.appId])}}catch(a){It.error(a)}e("config",r,s)})).apply(this,arguments)}function Pt(e,t,n,i,r){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,s.Z)(function*(e,t,n,i,r){try{let s=[];if(r&&r.send_to){let e=r.send_to;Array.isArray(e)||(e=[e]);const i=yield At(n);for(const n of e){const e=i.find(e=>e.measurementId===n),r=e&&t[e.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(t)),yield Promise.all(s),e("event",i,r||{})}catch(s){It.error(s)}})).apply(this,arguments)}function Ft(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(xt))return t;return null}const Lt=new a.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Mt=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Vt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Ut(e){return qt.apply(this,arguments)}function qt(){return(qt=(0,s.Z)(function*(e){var t;const{appId:n,apiKey:i}=e,r={method:"GET",headers:Vt(i)},s=Et.replace("{app-id}",n),o=yield fetch(s,r);if(200!==o.status&&304!==o.status){let e="";try{const n=yield o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw Lt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()})).apply(this,arguments)}function Bt(e){return jt.apply(this,arguments)}function jt(){return(jt=(0,s.Z)(function*(e,t=Mt,n){const{appId:i,apiKey:r,measurementId:o}=e.options;if(!i)throw Lt.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw Lt.create("no-api-key")}const a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Yt;return setTimeout((0,s.Z)(function*(){l.abort()}),void 0!==n?n:6e4),Zt({appId:i,apiKey:r,measurementId:o},a,l,t)})).apply(this,arguments)}function Zt(e,t,n){return zt.apply(this,arguments)}function zt(){return(zt=(0,s.Z)(function*(e,{throttleEndTimeMillis:t,backoffCount:n},i,r=Mt){const{appId:s,measurementId:o}=e;try{yield Gt(i,t)}catch(l){if(o)return It.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l.message}]`),{appId:s,measurementId:o};throw l}try{const t=yield Ut(e);return r.deleteThrottleMetadata(s),t}catch(l){if(!Ht(l)){if(r.deleteThrottleMetadata(s),o)return It.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l.message}]`),{appId:s,measurementId:o};throw l}const t=503===Number(l.customData.httpStatus)?(0,a.$s)(n,r.intervalMillis,30):(0,a.$s)(n,r.intervalMillis),c={throttleEndTimeMillis:Date.now()+t,backoffCount:n+1};return r.setThrottleMetadata(s,c),It.debug(`Calling attemptFetch again in ${t} millis`),Zt(e,c,i,r)}})).apply(this,arguments)}function Gt(e,t){return new Promise((n,i)=>{const r=Math.max(t-Date.now(),0),s=setTimeout(n,r);e.addEventListener(()=>{clearTimeout(s),i(Lt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Ht(e){if(!(e instanceof a.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class Yt{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function $t(){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,s.Z)(function*(){if(!(0,a.hl)())return It.warn(Lt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,a.eu)()}catch(e){return It.warn(Lt.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0})).apply(this,arguments)}function Kt(){return(Kt=(0,s.Z)(function*(e,t,n,i,r,s,o){var a;const l=Bt(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&It.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>It.error(e)),t.push(l);const c=$t().then(e=>e?i.getId():void 0),[u,h]=yield Promise.all([l,c]);Ft()||Dt(s,u.measurementId),r("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),r("config",u.measurementId,d),u.measurementId})).apply(this,arguments)}class Qt{constructor(e){this.app=e}_delete(){return delete Jt[this.app.options.appId],Promise.resolve()}}let Jt={},Xt=[];const en={};let tn,nn,rn=!1;function sn(){return(sn=(0,s.Z)(function*(e,t,n,i,r){if(r&&r.global)e("event",n,i);else{const r=yield t;e("event",n,Object.assign(Object.assign({},i),{send_to:r}))}})).apply(this,arguments)}function on(){return an.apply(this,arguments)}function an(){return(an=(0,s.Z)(function*(){if((0,a.ru)())return!1;if(!(0,a.zI)())return!1;if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(e){return!1}})).apply(this,arguments)}(0,o._registerComponent)(new l.wA("analytics",(e,{options:t})=>function(e,t,n){!function(){const e=[];if((0,a.ru)()&&e.push("This is a browser extension environment."),(0,a.zI)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=Lt.create("invalid-analytics-context",{errorInfo:t});It.warn(n.message)}}();const i=e.options.appId;if(!i)throw Lt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Lt.create("no-api-key");It.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Jt[i])throw Lt.create("already-exists",{id:i});if(!rn){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,r){let o=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(o=window.gtag),window.gtag=function(e,t,n,i){function r(){return(r=(0,s.Z)(function*(r,s,o){try{"event"===r?yield Pt(e,t,n,s,o):"config"===r?yield Rt(e,t,n,i,s,o):e("set",s)}catch(a){It.error(a)}})).apply(this,arguments)}return function(e,t,n){return r.apply(this,arguments)}}(o,e,t,n),{gtagCore:o,wrappedGtag:window.gtag}}(Jt,Xt,en);nn=e,tn=t,rn=!0}return Jt[i]=function(e,t,n,i,r,s,o){return Kt.apply(this,arguments)}(e,Xt,en,t,tn,"dataLayer",n),new Qt(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,o._registerComponent)(new l.wA("analytics-internal",function(e){try{const t=e.getProvider("analytics").getImmediate();return{logEvent:(e,n,i)=>function(e,t,n,i){e=(0,a.m9)(e),function(e,t,n,i,r){return sn.apply(this,arguments)}(nn,Jt[e.app.options.appId],t,n,i).catch(e=>It.error(e))}(t,e,n,i)}}catch(t){throw Lt.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,o.registerVersion)("@firebase/analytics","0.7.7"),(0,o.registerVersion)("@firebase/analytics","0.7.7","esm2017");var ln=n(7771),cn=n(3637),un=n(3342),hn=n(6136),dn=n(9673);const pn=new i.GfV("7.3.0");function fn(e,t,n){if(t){if(1===t.length)return t[0];const e=t.filter(e=>e.app===n);if(1===e.length)return e[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis.__angularfire_symbol__analyticsIsSupported||(globalThis.__angularfire_symbol__analyticsIsSupported=on().then(e=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=e).catch(()=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=!1)),globalThis.__angularfire_symbol__messagingIsSupported||(globalThis.__angularfire_symbol__messagingIsSupported=kt().then(e=>globalThis.__angularfire_symbol__messagingIsSupportedValue=e).catch(()=>globalThis.__angularfire_symbol__messagingIsSupportedValue=!1)),globalThis.__angularfire_symbol__remoteConfigIsSupported||(globalThis.__angularfire_symbol__remoteConfigIsSupported=we().then(e=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=e).catch(()=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=!1));const mn=(e,t)=>{const n=t?[t]:(0,r.C6)(),i=[];return n.forEach(t=>{t.container.getProvider(e).instances.forEach(e=>{i.includes(e)||i.push(e)})}),i};function gn(){}class _n{constructor(e,t=ln.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const i=this.zone;return this.delegate.schedule(function(t){i.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class yn{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gn,{},gn,gn)),t.pipe((0,un.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vn=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new _n(Zone.current)),this.insideAngular=e.run(()=>new _n(Zone.current,cn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function bn(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function wn(e){return e.pipe((0,hn.QV)(bn().outsideAngular))}function Cn(e){return bn(),(t=bn(),function(e){return(e=e.lift(new yn(t.ngZone))).pipe((0,dn.R)(t.outsideAngular),(0,hn.QV)(t.insideAngular))})(e);var t}},156:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var i=n(3854),r=n(8604),s=n(279),o=n(9306);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new r.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return i.isInitialized()||"EXPLICIT"!==(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)||i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const l=new i.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(r,o={}){const a=s.initializeApp(r,o);if((0,i.r3)(t,a.name))return t[a.name];const l=new e(a,n);return t[a.name]=l,l},app:r,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=r())=>{if("function"!=typeof e[a])throw l.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,i.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function r(e){if(!(0,i.r3)(t,e=e||s._DEFAULT_ENTRY_NAME))throw l.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),r.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,i.ZB)(t,e)},createSubscribe:i.ne,ErrorFactory:i.LL,deepExtend:i.ZB}),t}(),u=new o.Yd("@firebase/app-compat");if((0,i.jU)()&&void 0!==self.firebase){u.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&u.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=c;(0,s.registerVersion)("@firebase/app-compat","0.1.21",void 0)},279:function(e,t,n){"use strict";n.r(t),n.d(t,{FirebaseError:function(){return o.ZR},SDK_VERSION:function(){return C},_DEFAULT_ENTRY_NAME:function(){return u},_addComponent:function(){return f},_addOrOverwriteComponent:function(){return m},_apps:function(){return d},_clearComponents:function(){return v},_components:function(){return p},_getProvider:function(){return _},_registerComponent:function(){return g},_removeServiceInstance:function(){return y},deleteApp:function(){return E},getApp:function(){return k},getApps:function(){return T},initializeApp:function(){return S},onLog:function(){return A},registerVersion:function(){return I},setLogLevel:function(){return D}});var i=n(6304),r=n(8604),s=n(9306),o=n(3854);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const l="@firebase/app",c=new s.Yd("@firebase/app"),u="[DEFAULT]",h={[l]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},d=new Map,p=new Map;function f(e,t){try{e.container.addComponent(t)}catch(n){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m(e,t){e.container.addOrOverwriteComponent(t)}function g(e){const t=e.name;if(p.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;p.set(t,e);for(const n of d.values())f(n,e);return!0}function _(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function y(e,t,n=u){_(e,t).clearInstance(n)}function v(){p.clear()}const b=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class w{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw b.create("app-deleted",{appName:this._name})}}const C="9.6.10";function S(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:u,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw b.create("bad-app-name",{appName:String(i)});const s=d.get(i);if(s){if((0,o.vZ)(e,s.options)&&(0,o.vZ)(n,s.config))return s;throw b.create("duplicate-app",{appName:i})}const a=new r.H0(i);for(const r of p.values())a.addComponent(r);const l=new w(e,n,a);return d.set(i,l),l}function k(e=u){const t=d.get(e);if(!t)throw b.create("no-app",{appName:e});return t}function T(){return Array.from(d.values())}function E(e){return x.apply(this,arguments)}function x(){return(x=(0,i.Z)(function*(e){const t=e.name;d.has(t)&&(d.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function I(e,t,n){var i;let s=null!==(i=h[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}g(new r.wA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}function A(e,t){if(null!==e&&"function"!=typeof e)throw b.create("invalid-log-argument");(0,s.Am)(e,t)}function D(e){(0,s.Ub)(e)}const R="firebase-heartbeat-store";let O=null;function P(){return O||(O=(0,o.X3)("firebase-heartbeat-database",1,(e,t)=>{switch(t){case 0:e.createObjectStore(R)}}).catch(e=>{throw b.create("storage-open",{originalErrorMessage:e.message})})),O}function N(){return(N=(0,i.Z)(function*(e){try{return(yield P()).transaction(R).objectStore(R).get(M(e))}catch(t){throw b.create("storage-get",{originalErrorMessage:t.message})}})).apply(this,arguments)}function F(e,t){return L.apply(this,arguments)}function L(){return(L=(0,i.Z)(function*(e,t){try{const n=(yield P()).transaction(R,"readwrite"),i=n.objectStore(R);return yield i.put(t,M(e)),n.complete}catch(n){throw b.create("storage-set",{originalErrorMessage:n.message})}})).apply(this,arguments)}function M(e){return`${e.name}!${e.options.appId}`}class V{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new q(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}triggerHeartbeat(){var e=this;return(0,i.Z)(function*(){const t=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=U();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==n&&!e._heartbeatsCache.heartbeats.some(e=>e.date===n))return e._heartbeatsCache.heartbeats.push({date:n,agent:t}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,i.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=U(),{heartbeatsToSend:n,unsentEntries:i}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),B(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),B(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(e._heartbeatsCache.heartbeats),r=(0,o.L)(JSON.stringify({version:2,heartbeats:n}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),r})()}}function U(){return(new Date).toISOString().substring(0,10)}class q{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,i.Z)(function*(){return!!(0,o.hl)()&&(0,o.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,i.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function(e){return N.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,i.Z)(function*(){var n;if(yield t._canUseIndexedDBPromise){const i=yield t.read();return F(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,i.Z)(function*(){var n;if(yield t._canUseIndexedDBPromise){const i=yield t.read();return F(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}})()}}function B(e){return(0,o.L)(JSON.stringify({version:2,heartbeats:e})).length}g(new r.wA("platform-logger",e=>new a(e),"PRIVATE")),g(new r.wA("heartbeat",e=>new V(e),"PRIVATE")),I(l,"0.7.20",""),I(l,"0.7.20","esm2017"),I("fire-js","")},7415:function(e,t,n){"use strict";n.d(t,{$:function(){return Xt},A:function(){return u},E:function(){return De},G:function(){return Pe},I:function(){return nt},K:function(){return de},L:function(){return ht},M:function(){return mt},N:function(){return gt},P:function(){return Fi},Q:function(){return _t},R:function(){return Si},T:function(){return ft},U:function(){return vt},V:function(){return bt},W:function(){return Tt},X:function(){return qt},Y:function(){return jt},Z:function(){return zt},_:function(){return $t},a:function(){return Kn},a0:function(){return tn},a1:function(){return rn},a2:function(){return on},a3:function(){return ln},a4:function(){return un},a5:function(){return dn},a6:function(){return pn},a7:function(){return mn},a8:function(){return gn},a9:function(){return bn},aA:function(){return pr},aB:function(){return nr},aC:function(){return Ie},aG:function(){return Jn},aJ:function(){return yt},aa:function(){return Cn},ab:function(){return kn},ae:function(){return In},af:function(){return Dn},ag:function(){return Rn},aj:function(){return Dt},ak:function(){return qn},am:function(){return Zn},an:function(){return Yn},ao:function(){return ke},ap:function(){return C},aq:function(){return Se},ar:function(){return be},as:function(){return m},at:function(){return Mr},au:function(){return br},av:function(){return g},aw:function(){return b},ax:function(){return k},ay:function(){return pe},az:function(){return _r},b:function(){return Wn},c:function(){return zi},d:function(){return $i},e:function(){return Hi},f:function(){return sr},g:function(){return cr},h:function(){return ar},i:function(){return hi},j:function(){return hr},k:function(){return Vr},l:function(){return xi},m:function(){return qr},o:function(){return c},r:function(){return Ai},s:function(){return Ti},u:function(){return Pi},z:function(){return h}});var i=n(6304),r=n(3854),s=n(279);function o(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}var a=n(9306),l=n(8604);const c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},u={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},h=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},d=new r.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),p=new a.Yd("@firebase/auth");function f(e,...t){p.logLevel<=a.in.ERROR&&p.error(`Auth (${s.SDK_VERSION}): ${e}`,...t)}function m(e,...t){throw v(e,...t)}function g(e,...t){return v(e,...t)}function _(e,t,n){const i=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[t]:n});return new r.LL("auth","Firebase",i).create(t,{appName:e.name})}function y(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&m(e,"argument-error"),_(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function v(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return d.create(e,...t)}function b(e,t,...n){if(!e)throw v(t,...n)}function w(e){const t="INTERNAL ASSERTION FAILED: "+e;throw f(t),new Error(t)}function C(e,t){e||w(t)}const S=new Map;function k(e){C(e instanceof Function,"Expected a class definition");let t=S.get(e);return t?(C(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,S.set(e,t),t)}function T(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function E(){return"http:"===x()||"https:"===x()}function x(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class I{constructor(e,t){this.shortDelay=e,this.longDelay=t,C(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,r.uI)()||(0,r.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(E()||(0,r.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function A(e,t){C(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class D{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const R={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},O=new I(3e4,6e4);function P(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function N(e,t,n,i){return F.apply(this,arguments)}function F(){return(F=(0,i.Z)(function*(e,t,n,s,o={}){return L(e,o,(0,i.Z)(function*(){let i={},o={};s&&("GET"===t?o=s:i={body:JSON.stringify(s)});const a=(0,r.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),l=yield e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),D.fetch()(q(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},i))}))})).apply(this,arguments)}function L(e,t,n){return M.apply(this,arguments)}function M(){return(M=(0,i.Z)(function*(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},R),t);try{const t=new B(e),r=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=yield r.json();if("needConfirmation"in s)throw j(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw j(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw j(e,"email-already-in-use",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw _(e,a,o);m(e,a)}}catch(s){if(s instanceof r.ZR)throw s;m(e,"network-request-failed")}})).apply(this,arguments)}function V(e,t,n,i){return U.apply(this,arguments)}function U(){return(U=(0,i.Z)(function*(e,t,n,i,r={}){const s=yield N(e,t,n,i,r);return"mfaPendingCredential"in s&&m(e,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function q(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?A(e.config,r):`${e.config.apiScheme}://${r}`}class B{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(g(this.auth,"network-request-failed")),O.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function j(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=g(e,t,i);return r.customData._tokenResponse=n,r}function Z(){return(Z=(0,i.Z)(function*(e,t){return N(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function z(e,t){return G.apply(this,arguments)}function G(){return(G=(0,i.Z)(function*(e,t){return N(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function H(e,t){return Y.apply(this,arguments)}function Y(){return(Y=(0,i.Z)(function*(e,t){return N(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function $(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function W(){return(W=(0,i.Z)(function*(e,t=!1){const n=(0,r.m9)(e),i=yield n.getIdToken(t),s=Q(i);b(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:$(K(s.auth_time)),issuedAtTime:$(K(s.iat)),expirationTime:$(K(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function K(e){return 1e3*Number(e)}function Q(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return f("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,r.tV)(n);return e?JSON.parse(e):(f("Failed to decode base64 JWT payload"),null)}catch(s){return f("Caught error parsing JWT payload as JSON",s),null}}function J(e,t){return X.apply(this,arguments)}function X(){return(X=(0,i.Z)(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(i){throw i instanceof r.ZR&&ee(i)&&e.auth.currentUser===e&&(yield e.auth.signOut()),i}})).apply(this,arguments)}function ee({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class te{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,i.Z)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,i.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class ne{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$(this.lastLoginAt),this.creationTime=$(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ie(e){return re.apply(this,arguments)}function re(){return(re=(0,i.Z)(function*(e){var t;const n=e.auth,i=yield e.getIdToken(),r=yield J(e,H(n,{idToken:i}));b(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ae(s.providerUserInfo):[],a=oe(e.providerData,o),l=!!e.isAnonymous&&!(e.email&&s.passwordHash||(null==a?void 0:a.length)),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ne(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(e,c)})).apply(this,arguments)}function se(){return(se=(0,i.Z)(function*(e){const t=(0,r.m9)(e);yield ie(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function oe(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function ae(e){return e.map(e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function le(){return(le=(0,i.Z)(function*(e,t){const n=yield L(e,{},(0,i.Z)(function*(){const n=(0,r.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=q(e,i,"/v1/token",`key=${s}`),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",D.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){b(e.idToken,"internal-error"),b(void 0!==e.idToken,"internal-error"),b(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Q(e);return b(t,"internal-error"),b(void 0!==t.exp,"internal-error"),b(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return(0,i.Z)(function*(){return b(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,i.Z)(function*(){const{accessToken:i,refreshToken:r,expiresIn:s}=yield function(e,t){return le.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(i,r,Number(s))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new ce;return n&&(b("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(b("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(b("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ce,this.toJSON())}_performRefresh(){return w("not implemented")}}function ue(e,t){b("string"==typeof e||void 0===e,"internal-error",{appName:t})}class he{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new te(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ne(r.createdAt||void 0,r.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,i.Z)(function*(){const n=yield J(t,t.stsTokenManager.getToken(t.auth,e));return b(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function(e){return W.apply(this,arguments)}(this,e)}reload(){return function(e){return se.apply(this,arguments)}(this)}_assign(e){this!==e&&(b(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new he(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){b(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,i.Z)(function*(){let i=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield ie(n)),yield n.auth._persistUserIfCurrent(n),i&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,i.Z)(function*(){const t=yield e.getIdToken();return yield J(e,function(e,t){return Z.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,_=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:C,stsTokenManager:S}=t;b(y&&S,e,"internal-error");const k=ce.fromJSON(this.name,S);b("string"==typeof y,e,"internal-error"),ue(u,e.name),ue(h,e.name),b("boolean"==typeof v,e,"internal-error"),b("boolean"==typeof w,e,"internal-error"),ue(d,e.name),ue(p,e.name),ue(f,e.name),ue(m,e.name),ue(g,e.name),ue(_,e.name);const T=new he({uid:y,auth:e,email:h,emailVerified:v,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:k,createdAt:g,lastLoginAt:_});return C&&Array.isArray(C)&&(T.providerData=C.map(e=>Object.assign({},e))),m&&(T._redirectEventId=m),T}static _fromIdTokenResponse(e,t,n=!1){return(0,i.Z)(function*(){const i=new ce;i.updateFromServerResponse(t);const r=new he({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return yield ie(r),r})()}}const de=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,i.Z)(function*(){return!0})()}_set(e,t){var n=this;return(0,i.Z)(function*(){n.storage[e]=t})()}_get(e){var t=this;return(0,i.Z)(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return(0,i.Z)(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function pe(e,t,n){return`firebase:${e}:${t}:${n}`}class fe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=pe(this.userKey,i.apiKey,r),this.fullPersistenceKey=pe("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,i.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?he._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,i.Z)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,i.Z)(function*(){if(!t.length)return new fe(k(de),e,n);const r=(yield Promise.all(t.map(function(){var e=(0,i.Z)(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let s=r[0]||k(de);const o=pe(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=yield n._get(o);if(t){const i=he._fromJSON(e,t);n!==s&&(a=i),s=n;break}}catch(c){}const l=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var e=(0,i.Z)(function*(e){if(e!==s)try{yield e._remove(o)}catch(c){}});return function(t){return e.apply(this,arguments)}}())),new fe(s,e,n)):new fe(s,e,n)})()}}function me(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ve(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ge(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(we(t))return"Blackberry";if(Ce(t))return"Webos";if(_e(t))return"Safari";if((t.includes("chrome/")||ye(t))&&!t.includes("edge/"))return"Chrome";if(be(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function ge(e=(0,r.z$)()){return/firefox\//i.test(e)}function _e(e=(0,r.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ye(e=(0,r.z$)()){return/crios\//i.test(e)}function ve(e=(0,r.z$)()){return/iemobile/i.test(e)}function be(e=(0,r.z$)()){return/android/i.test(e)}function we(e=(0,r.z$)()){return/blackberry/i.test(e)}function Ce(e=(0,r.z$)()){return/webos/i.test(e)}function Se(e=(0,r.z$)()){return/iphone|ipad|ipod/i.test(e)}function ke(e=(0,r.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function Te(e=(0,r.z$)()){return Se(e)||be(e)||Ce(e)||we(e)||/windows phone/i.test(e)||ve(e)}function Ee(e,t=[]){let n;switch(e){case"Browser":n=me((0,r.z$)());break;case"Worker":n=`${me((0,r.z$)())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${s.SDK_VERSION}/${i}`}class xe{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ae(this),this.idTokenSubscription=new Ae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=k(t)),this._initializationPromise=this.queue((0,i.Z)(function*(){var i,r;if(!n._deleted&&(n.persistenceManager=yield fe.create(n,e),!n._deleted)){if(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{yield n._popupRedirectResolver._initialize(n)}catch(s){}yield n.initializeCurrentUser(t),n.lastNotifiedUid=(null===(r=n.currentUser)||void 0===r?void 0:r.uid)||null,n._deleted||(n._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,i.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();return e.currentUser||t?e.currentUser&&t&&e.currentUser.uid===t.uid?(e._currentUser._assign(t),void(yield e.currentUser.getIdToken())):void(yield e._updateCurrentUser(t)):void 0})()}initializeCurrentUser(e){var t=this;return(0,i.Z)(function*(){var n;let i=yield t.assertedPersistence.getCurrentUser();if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const r=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null==i?void 0:i._redirectEventId,o=yield t.tryRedirectSignIn(e);r&&r!==s||!(null==o?void 0:o.user)||(i=o.user)}return i?i._redirectEventId?(b(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===i._redirectEventId?t.directlySetCurrentUser(i):t.reloadAndSetCurrentUserOrClear(i)):t.reloadAndSetCurrentUserOrClear(i):t.directlySetCurrentUser(null)})()}tryRedirectSignIn(e){var t=this;return(0,i.Z)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(i){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,i.Z)(function*(){try{yield ie(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return(0,i.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,i.Z)(function*(){const n=e?(0,r.m9)(e):null;return n&&b(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e){var t=this;return(0,i.Z)(function*(){if(!t._deleted)return e&&b(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,i.Z)(function*(){yield t.directlySetCurrentUser(e),t.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,i.Z)(function*(){return(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null)})()}setPersistence(e){var t=this;return this.queue((0,i.Z)(function*(){yield t.assertedPersistence.setPersistence(k(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,i.Z)(function*(){const i=yield n.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,i.Z)(function*(){if(!t.redirectPersistenceManager){const n=e&&k(e)||t._popupRedirectResolver;b(n,t,"argument-error"),t.redirectPersistenceManager=yield fe.create(t,[k(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,i.Z)(function*(){var n,r;return t._isInitialized&&(yield t.queue((0,i.Z)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,i.Z)(function*(){if(e===t.currentUser)return t.queue((0,i.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return b(s,this,"internal-error"),s.then(()=>r(this.currentUser)),"function"==typeof t?e.addObserver(t,n,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,i.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return b(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ee(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,i.Z)(function*(){var t;const n={"X-Client-Version":e.clientVersion};e.app.options.appId&&(n["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return i&&(n["X-Firebase-Client"]=i),n})()}}function Ie(e){return(0,r.m9)(e)}class Ae{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,r.ne)(e=>this.observer=e)}get next(){return b(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function De(e,t,n){const i=Ie(e);b(i._canInitEmulator,i,"emulator-config-failed"),b(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=Re(t),{host:o,port:a}=function(e){const t=Re(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:Oe(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:Oe(t)}}}(t);i.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Re(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Oe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Pe{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return w("not implemented")}_getIdTokenResponse(e){return w("not implemented")}_linkToIdToken(e,t){return w("not implemented")}_getReauthenticationResolver(e){return w("not implemented")}}function Ne(e,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,i.Z)(function*(e,t){return N(e,"POST","/v1/accounts:resetPassword",P(e,t))})).apply(this,arguments)}function Le(e,t){return Me.apply(this,arguments)}function Me(){return(Me=(0,i.Z)(function*(e,t){return N(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Ve(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,i.Z)(function*(e,t){return N(e,"POST","/v1/accounts:update",P(e,t))})).apply(this,arguments)}function qe(){return(qe=(0,i.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithPassword",P(e,t))})).apply(this,arguments)}function Be(e,t){return je.apply(this,arguments)}function je(){return(je=(0,i.Z)(function*(e,t){return N(e,"POST","/v1/accounts:sendOobCode",P(e,t))})).apply(this,arguments)}function Ze(e,t){return ze.apply(this,arguments)}function ze(){return(ze=(0,i.Z)(function*(e,t){return Be(e,t)})).apply(this,arguments)}function Ge(e,t){return He.apply(this,arguments)}function He(){return(He=(0,i.Z)(function*(e,t){return Be(e,t)})).apply(this,arguments)}function Ye(e,t){return $e.apply(this,arguments)}function $e(){return($e=(0,i.Z)(function*(e,t){return Be(e,t)})).apply(this,arguments)}function We(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,i.Z)(function*(e,t){return Be(e,t)})).apply(this,arguments)}function Qe(){return(Qe=(0,i.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))})).apply(this,arguments)}function Je(){return(Je=(0,i.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))})).apply(this,arguments)}class Xe extends Pe{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Xe(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Xe(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,i.Z)(function*(){switch(t.signInMethod){case"password":return function(e,t){return qe.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return Qe.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:m(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,i.Z)(function*(){switch(n.signInMethod){case"password":return Le(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return Je.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:m(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,i.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithIdp",P(e,t))})).apply(this,arguments)}class nt extends Pe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new nt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):m("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=o(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new nt(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return et(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,et(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,et(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,r.xO)(t)}return e}}function it(e,t){return rt.apply(this,arguments)}function rt(){return(rt=(0,i.Z)(function*(e,t){return N(e,"POST","/v1/accounts:sendVerificationCode",P(e,t))})).apply(this,arguments)}function st(){return(st=(0,i.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t))})).apply(this,arguments)}function ot(){return(ot=(0,i.Z)(function*(e,t){const n=yield V(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t));if(n.temporaryProof)throw j(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const at={USER_NOT_FOUND:"user-not-found"};function lt(){return(lt=(0,i.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),at)})).apply(this,arguments)}class ct extends Pe{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ct({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ct({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return st.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return ot.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return lt.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new ct({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class ut{constructor(e){var t,n,i,s,o,a;const l=(0,r.zd)((0,r.pd)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=l.mode)&&void 0!==i?i:null);b(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,r.zd)((0,r.pd)(e)).link,n=t?(0,r.zd)((0,r.pd)(t)).deep_link_id:null,i=(0,r.zd)((0,r.pd)(e)).deep_link_id;return(i?(0,r.zd)((0,r.pd)(i)).link:null)||i||n||t||e}(e);try{return new ut(t)}catch(n){return null}}}let ht=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Xe._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ut.parseLink(t);return b(n,"argument-error"),Xe._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class dt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pt extends dt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ft extends pt{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return b("providerId"in t&&"signInMethod"in t,"argument-error"),nt._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return b(e.idToken||e.accessToken,"argument-error"),nt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ft.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ft.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:o}=e;if(!(n||i||t||r))return null;if(!o)return null;try{return new ft(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:r})}catch(a){return null}}}let mt=(()=>{class e extends pt{constructor(){super("facebook.com")}static credential(t){return nt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),gt=(()=>{class e extends pt{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return nt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return e.credential(n,i)}catch(r){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),_t=(()=>{class e extends pt{constructor(){super("github.com")}static credential(t){return nt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class yt extends Pe{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return et(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,et(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,et(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:r}=t;return n&&i&&r&&n===i?new yt(n,r):null}static _create(e,t){return new yt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class vt extends dt{constructor(e){b(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return vt.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return vt.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=yt.fromJSON(e);return b(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return yt._create(n,t)}catch(i){return null}}}let bt=(()=>{class e extends pt{constructor(){super("twitter.com")}static credential(t,n){return nt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return e.credential(n,i)}catch(r){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();function wt(e,t){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,i.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signUp",P(e,t))})).apply(this,arguments)}class St{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,r=!1){return(0,i.Z)(function*(){const i=yield he._fromIdTokenResponse(e,n,r),s=kt(n);return new St({user:i,providerId:s,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,i.Z)(function*(){yield e._updateTokensIfNecessary(n,!0);const i=kt(n);return new St({user:e,providerId:i,_tokenResponse:n,operationType:t})})()}}function kt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Tt(e){return Et.apply(this,arguments)}function Et(){return(Et=(0,i.Z)(function*(e){var t;const n=Ie(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new St({user:n.currentUser,providerId:null,operationType:"signIn"});const i=yield wt(n,{returnSecureToken:!0}),r=yield St._fromIdTokenResponse(n,"signIn",i,!0);return yield n._updateCurrentUser(r.user),r})).apply(this,arguments)}class xt extends r.ZR{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,xt.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new xt(e,t,n,i)}}function It(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw xt._fromErrorAndOperation(e,n,t,i);throw n})}function At(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function Dt(e,t){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,i.Z)(function*(e,t){const n=(0,r.m9)(e);yield Nt(!0,n,t);const{providerUserInfo:i}=yield z(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),s=At(i||[]);return n.providerData=n.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function Ot(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,i.Z)(function*(e,t,n=!1){const i=yield J(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return St._forOperation(e,"link",i)})).apply(this,arguments)}function Nt(e,t,n){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,i.Z)(function*(e,t,n){yield ie(t);const i=!1===e?"provider-already-linked":"no-such-provider";b(At(t.providerData).has(n)===e,t.auth,i)})).apply(this,arguments)}function Lt(e,t){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,i.Z)(function*(e,t,n=!1){const{auth:i}=e;try{const r=yield J(e,It(i,"reauthenticate",t,e),n);b(r.idToken,i,"internal-error");const s=Q(r.idToken);b(s,i,"internal-error");const{sub:o}=s;return b(e.uid===o,i,"user-mismatch"),St._forOperation(e,"reauthenticate",r)}catch(r){throw"auth/user-not-found"===(null==r?void 0:r.code)&&m(i,"user-mismatch"),r}})).apply(this,arguments)}function Vt(e,t){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,i.Z)(function*(e,t,n=!1){const i=yield It(e,"signIn",t),r=yield St._fromIdTokenResponse(e,"signIn",i);return n||(yield e._updateCurrentUser(r.user)),r})).apply(this,arguments)}function qt(e,t){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,i.Z)(function*(e,t){return Vt(Ie(e),t)})).apply(this,arguments)}function jt(e,t){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,i.Z)(function*(e,t){const n=(0,r.m9)(e);return yield Nt(!1,n,t.providerId),Ot(n,t)})).apply(this,arguments)}function zt(e,t){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,i.Z)(function*(e,t){return Lt((0,r.m9)(e),t)})).apply(this,arguments)}function Ht(e,t){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,i.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithCustomToken",P(e,t))})).apply(this,arguments)}function $t(e,t){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,i.Z)(function*(e,t){const n=Ie(e),i=yield Ht(n,{token:t,returnSecureToken:!0}),r=yield St._fromIdTokenResponse(n,"signIn",i);return yield n._updateCurrentUser(r.user),r})).apply(this,arguments)}class Kt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Qt._fromServerResponse(e,t):m(e,"internal-error")}}class Qt extends Kt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Qt(t)}}function Jt(e,t,n){var i;b((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),b(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(b(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(b(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Xt(e,t,n){return en.apply(this,arguments)}function en(){return(en=(0,i.Z)(function*(e,t,n){const i=(0,r.m9)(e),s={requestType:"PASSWORD_RESET",email:t};n&&Jt(i,s,n),yield Ge(i,s)})).apply(this,arguments)}function tn(e,t,n){return nn.apply(this,arguments)}function nn(){return(nn=(0,i.Z)(function*(e,t,n){yield Ne((0,r.m9)(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function rn(e,t){return sn.apply(this,arguments)}function sn(){return(sn=(0,i.Z)(function*(e,t){yield Ve((0,r.m9)(e),{oobCode:t})})).apply(this,arguments)}function on(e,t){return an.apply(this,arguments)}function an(){return(an=(0,i.Z)(function*(e,t){const n=(0,r.m9)(e),i=yield Ne(n,{oobCode:t}),s=i.requestType;switch(b(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":b(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":b(i.mfaInfo,n,"internal-error");default:b(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=Kt._fromServerResponse(Ie(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:s}})).apply(this,arguments)}function ln(e,t){return cn.apply(this,arguments)}function cn(){return(cn=(0,i.Z)(function*(e,t){const{data:n}=yield on((0,r.m9)(e),t);return n.email})).apply(this,arguments)}function un(e,t,n){return hn.apply(this,arguments)}function hn(){return(hn=(0,i.Z)(function*(e,t,n){const i=Ie(e),r=yield wt(i,{returnSecureToken:!0,email:t,password:n}),s=yield St._fromIdTokenResponse(i,"signIn",r);return yield i._updateCurrentUser(s.user),s})).apply(this,arguments)}function dn(e,t,n){return qt((0,r.m9)(e),ht.credential(t,n))}function pn(e,t,n){return fn.apply(this,arguments)}function fn(){return(fn=(0,i.Z)(function*(e,t,n){const i=(0,r.m9)(e),s={requestType:"EMAIL_SIGNIN",email:t};b(n.handleCodeInApp,i,"argument-error"),n&&Jt(i,s,n),yield Ye(i,s)})).apply(this,arguments)}function mn(e,t){const n=ut.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}function gn(e,t,n){return _n.apply(this,arguments)}function _n(){return(_n=(0,i.Z)(function*(e,t,n){const i=(0,r.m9)(e),s=ht.credentialWithLink(t,n||T());return b(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),qt(i,s)})).apply(this,arguments)}function yn(e,t){return vn.apply(this,arguments)}function vn(){return(vn=(0,i.Z)(function*(e,t){return N(e,"POST","/v1/accounts:createAuthUri",P(e,t))})).apply(this,arguments)}function bn(e,t){return wn.apply(this,arguments)}function wn(){return(wn=(0,i.Z)(function*(e,t){const n={identifier:t,continueUri:E()?T():"http://localhost"},{signinMethods:i}=yield yn((0,r.m9)(e),n);return i||[]})).apply(this,arguments)}function Cn(e,t){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,i.Z)(function*(e,t){const n=(0,r.m9)(e),i={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&Jt(n.auth,i,t);const{email:s}=yield Ze(n.auth,i);s!==e.email&&(yield e.reload())})).apply(this,arguments)}function kn(e,t,n){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,i.Z)(function*(e,t,n){const i=(0,r.m9)(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&Jt(i.auth,s,n);const{email:o}=yield We(i.auth,s);o!==e.email&&(yield e.reload())})).apply(this,arguments)}function En(e,t){return xn.apply(this,arguments)}function xn(){return(xn=(0,i.Z)(function*(e,t){return N(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function In(e,t){return An.apply(this,arguments)}function An(){return(An=(0,i.Z)(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const i=(0,r.m9)(e),s={idToken:yield i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=yield J(i,En(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),yield i._updateTokensIfNecessary(o)})).apply(this,arguments)}function Dn(e,t){return On((0,r.m9)(e),t,null)}function Rn(e,t){return On((0,r.m9)(e),null,t)}function On(e,t,n){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,i.Z)(function*(e,t,n){const{auth:i}=e,r={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(r.email=t),n&&(r.password=n);const s=yield J(e,Le(i,r));yield e._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class Nn{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class Fn extends Nn{constructor(e,t,n,i){super(e,t,n),this.username=i}}class Ln extends Nn{constructor(e,t){super(e,"facebook.com",t)}}class Mn extends Fn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Vn extends Nn{constructor(e,t){super(e,"google.com",t)}}class Un extends Fn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function qn(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:i}=e,r=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!i&&(null==e?void 0:e.idToken)){const i=null===(n=null===(t=Q(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(i)return new Nn(s,"anonymous"!==i&&"custom"!==i?i:null)}if(!i)return null;switch(i){case"facebook.com":return new Ln(s,r);case"github.com":return new Mn(s,r);case"google.com":return new Vn(s,r);case"twitter.com":return new Un(s,r,e.screenName||null);case"custom":case"anonymous":return new Nn(s,null);default:return new Nn(s,i,r)}}(n)}class Bn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new Bn("enroll",e)}static _fromMfaPendingCredential(e){return new Bn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Bn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Bn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class jn{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ie(e),r=t.customData._serverResponse,s=(r.mfaInfo||[]).map(e=>Kt._fromServerResponse(n,e));b(r.mfaPendingCredential,n,"internal-error");const o=Bn._fromMfaPendingCredential(r.mfaPendingCredential);return new jn(o,s,function(){var e=(0,i.Z)(function*(e){const i=yield e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const s=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=yield St._fromIdTokenResponse(n,t.operationType,s);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return b(t.user,n,"internal-error"),St._forOperation(t.user,t.operationType,s);default:m(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,i.Z)(function*(){return t.signInResolver(e)})()}}function Zn(e,t){var n;const i=(0,r.m9)(e),s=t;return b(t.customData.operationType,i,"argument-error"),b(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),jn._fromError(i,s)}function zn(e,t){return N(e,"POST","/v2/accounts/mfaEnrollment:start",P(e,t))}class Gn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Kt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Gn(e)}getSession(){var e=this;return(0,i.Z)(function*(){return Bn._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return(0,i.Z)(function*(){const i=e,r=yield n.getSession(),s=yield J(n.user,i._process(n.user.auth,r,t));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(e){var t=this;return(0,i.Z)(function*(){const n="string"==typeof e?e:e.uid,i=yield t.user.getIdToken(),r=yield J(t.user,(s=t.user.auth,o={idToken:i,mfaEnrollmentId:n},N(s,"POST","/v2/accounts/mfaEnrollment:withdraw",P(s,o))));var s,o;t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(r);try{yield t.user.reload()}catch(a){if("auth/user-token-expired"!==a.code)throw a}})()}}const Hn=new WeakMap;function Yn(e){const t=(0,r.m9)(e);return Hn.has(t)||Hn.set(t,Gn._fromUser(t)),Hn.get(t)}class $n{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wn=(()=>{class e extends $n{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,r.z$)();return _e(e)||Se(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Te(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,r.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,r=this;return(0,i.Z)(function*(){yield n().call(r,e,t),r.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return(0,i.Z)(function*(){const i=yield t().call(n,e);return n.localCache[e]=JSON.stringify(i),i})()}_remove(e){var t=()=>super._remove,n=this;return(0,i.Z)(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),Kn=(()=>{class e extends $n{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let Qn=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const i=new e(t);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return(0,i.Z)(function*(){const n=e,{eventId:r,eventType:s,data:o}=n.data,a=t.handlersMap[s];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(function(){var e=(0,i.Z)(function*(e){return e(n.origin,o)});return function(t){return e.apply(this,arguments)}}()),c=yield function(e){return Promise.all(e.map(function(){var e=(0,i.Z)(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function Jn(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}class Xn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var r=this;return(0,i.Z)(function*(){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Jn("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"))}}},r.handlers.add(o),i.port1.addEventListener("message",o.onMessage),r.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&r.removeMessageHandler(o)})})()}}function ei(){return window}function ti(){return void 0!==ei().WorkerGlobalScope&&"function"==typeof ei().importScripts}function ni(){return(ni=(0,i.Z)(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(e){return null}})).apply(this,arguments)}const ii="firebaseLocalStorageDb";class ri{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function si(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function oi(){const e=indexedDB.open(ii,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(i){n(i)}}),e.addEventListener("success",(0,i.Z)(function*(){const n=e.result;n.objectStoreNames.contains("firebaseLocalStorage")?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(ii);return new ri(e).toPromise()}(),t(yield oi()))}))})}function ai(e,t,n){return li.apply(this,arguments)}function li(){return(li=(0,i.Z)(function*(e,t,n){const i=si(e,!0).put({fbase_key:t,value:n});return new ri(i).toPromise()})).apply(this,arguments)}function ci(){return(ci=(0,i.Z)(function*(e,t){const n=si(e,!1).get(t),i=yield new ri(n).toPromise();return void 0===i?null:i.value})).apply(this,arguments)}function ui(e,t){const n=si(e,!0).delete(t);return new ri(n).toPromise()}const hi=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return(0,i.Z)(function*(){return e.db||(e.db=yield oi()),e.db})()}_withRetries(e){var t=this;return(0,i.Z)(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(i){if(n++>3)throw i;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return(0,i.Z)(function*(){return ti()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return(0,i.Z)(function*(){e.receiver=Qn._getInstance(ti()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,i.Z)(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,i.Z)(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return(0,i.Z)(function*(){var t,n;if(e.activeServiceWorker=yield function(){return ni.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new Xn(e.activeServiceWorker);const i=yield e.sender._send("ping",{},800);i&&(null===(t=i[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=i[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return(0,i.Z)(function*(){var n;if(t.sender&&t.activeServiceWorker&&((null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,i.Z)(function*(){try{if(!indexedDB)return!1;const e=yield oi();return yield ai(e,"__sak","1"),yield ui(e,"__sak"),!0}catch(e){}return!1})()}_withPendingWrite(e){var t=this;return(0,i.Z)(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return(0,i.Z)(function*(){return n._withPendingWrite((0,i.Z)(function*(){return yield n._withRetries(n=>ai(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return(0,i.Z)(function*(){const n=yield t._withRetries(t=>function(e,t){return ci.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return(0,i.Z)(function*(){return t._withPendingWrite((0,i.Z)(function*(){return yield t._withRetries(t=>ui(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return(0,i.Z)(function*(){const t=yield e._withRetries(e=>{const t=si(e,!1).getAll();return new ri(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(e.localCache[r])!==JSON.stringify(s)&&(e.notifyListeners(r,s),n.push(r));for(const r of Object.keys(e.localCache))e.localCache[r]&&!i.has(r)&&(e.notifyListeners(r,null),n.push(r));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,i.Z)(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function di(e,t){return N(e,"POST","/v2/accounts/mfaSignIn:start",P(e,t))}function pi(){return(pi=(0,i.Z)(function*(e){return(yield N(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fi(e){return new Promise((t,n)=>{const i=document.createElement("script");var r,s;i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=g("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",(null!==(s=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==s?s:document).appendChild(i)})}function mi(e){return`__${e}${Math.floor(1e6*Math.random())}`}class gi{constructor(e){this.auth=e,this.counter=1e12,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new _i(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||1e12;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||1e12))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,i.Z)(function*(){var n;return null===(n=t._widgets.get(e||1e12))||void 0===n||n.execute(),""})()}}class _i{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"==typeof e?document.getElementById(e):e;b(i,"argument-error",{appName:t}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<50;i++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yi=mi("rcb"),vi=new I(3e4,6e4);class bi{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ei().grecaptcha}load(e,t=""){return b(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(ei().grecaptcha):new Promise((n,i)=>{const s=ei().setTimeout(()=>{i(g(e,"network-request-failed"))},vi.get());ei()[yi]=()=>{ei().clearTimeout(s),delete ei()[yi];const r=ei().grecaptcha;if(!r)return void i(g(e,"internal-error"));const o=r.render;r.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(r)},fi(`https://www.google.com/recaptcha/api.js??${(0,r.xO)({onload:yi,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(s),i(g(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!ei().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wi{load(e){return(0,i.Z)(function*(){return new gi(e)})()}clearedOneInstance(){}}const Ci={theme:"light",type:"image"};class Si{constructor(e,t=Object.assign({},Ci),n){this.parameters=t,this.type="recaptcha",this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ie(n),this.isInvisible="invisible"===this.parameters.size,b("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"==typeof e?document.getElementById(e):e;b(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wi:new bi,this.validateStartingState()}verify(){var e=this;return(0,i.Z)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(i=>{const r=t=>{t&&(e.tokenChangeListeners.delete(r),i(t))};e.tokenChangeListeners.add(r),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){b(!this.parameters.sitekey,this.auth,"argument-error"),b(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),b("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=ei()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){b(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,i.Z)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,i.Z)(function*(){b(E()&&!ti(),e.auth,"internal-error"),yield function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function(e){return pi.apply(this,arguments)}(e.auth);b(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return b(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ki{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ct._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function Ti(e,t,n){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,i.Z)(function*(e,t,n){const i=Ie(e),s=yield Ri(i,t,(0,r.m9)(n));return new ki(s,e=>qt(i,e))})).apply(this,arguments)}function xi(e,t,n){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,i.Z)(function*(e,t,n){const i=(0,r.m9)(e);yield Nt(!1,i,"phone");const s=yield Ri(i.auth,t,(0,r.m9)(n));return new ki(s,e=>jt(i,e))})).apply(this,arguments)}function Ai(e,t,n){return Di.apply(this,arguments)}function Di(){return(Di=(0,i.Z)(function*(e,t,n){const i=(0,r.m9)(e),s=yield Ri(i.auth,t,(0,r.m9)(n));return new ki(s,e=>zt(i,e))})).apply(this,arguments)}function Ri(e,t,n){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,i.Z)(function*(e,t,n){var i;const r=yield n.verify();try{let s;if(b("string"==typeof r,e,"argument-error"),b("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return b("enroll"===t.type,e,"internal-error"),(yield zn(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{b("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;return b(n,e,"missing-multi-factor-info"),(yield di(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield it(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}})).apply(this,arguments)}function Pi(e,t){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,i.Z)(function*(e,t){yield Ot((0,r.m9)(e),t)})).apply(this,arguments)}let Fi=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Ie(t)}verifyPhoneNumber(e,t){return Ri(this.auth,e,(0,r.m9)(t))}static credential(e,t){return ct._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ct._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function Li(e,t){return t?k(t):(b(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class Mi extends Pe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return et(e,this._buildIdpRequest())}_linkToIdToken(e,t){return et(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return et(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Vi(e){return Vt(e.auth,new Mi(e),e.bypassAuthState)}function Ui(e){const{auth:t,user:n}=e;return b(n,t,"internal-error"),Lt(n,new Mi(e),e.bypassAuthState)}function qi(e){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,i.Z)(function*(e){const{auth:t,user:n}=e;return b(n,t,"internal-error"),Ot(n,new Mi(e),e.bypassAuthState)})).apply(this,arguments)}class ji{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,i.Z)(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(i){e.reject(i)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,i.Z)(function*(){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o)return void t.reject(o);const l={auth:t.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(l))}catch(c){t.reject(c)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vi;case"linkViaPopup":case"linkViaRedirect":return qi;case"reauthViaPopup":case"reauthViaRedirect":return Ui;default:m(this.auth,"internal-error")}}resolve(e){C(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){C(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zi=new I(2e3,1e4);function zi(e,t,n){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,i.Z)(function*(e,t,n){const i=Ie(e);y(e,t,dt);const r=Li(i,n);return new Ki(i,"signInViaPopup",t,r).executeNotNull()})).apply(this,arguments)}function Hi(e,t,n){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,i.Z)(function*(e,t,n){const i=(0,r.m9)(e);y(i.auth,t,dt);const s=Li(i.auth,n);return new Ki(i.auth,"reauthViaPopup",t,s,i).executeNotNull()})).apply(this,arguments)}function $i(e,t,n){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,i.Z)(function*(e,t,n){const i=(0,r.m9)(e);y(i.auth,t,dt);const s=Li(i.auth,n);return new Ki(i.auth,"linkViaPopup",t,s,i).executeNotNull()})).apply(this,arguments)}let Ki=(()=>{class e extends ji{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return(0,i.Z)(function*(){const t=yield e.execute();return b(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return(0,i.Z)(function*(){C(1===e.filter.length,"Popup operations only handle one event");const t=Jn();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(g(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(g(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(g(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,Zi.get())};e()}}return e.currentPopupAction=null,e})();const Qi=new Map;class Ji extends ji{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,i.Z)(function*(){let n=Qi.get(t.auth._key());if(!n){try{const i=(yield function(e,t){return Xi.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(i)}catch(i){n=()=>Promise.reject(i)}Qi.set(t.auth._key(),n)}return t.bypassAuthState||Qi.set(t.auth._key(),()=>Promise.resolve(null)),n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,i.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const i=yield n.auth._redirectUserForId(e.eventId);if(i)return n.user=i,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,i.Z)(function*(){})()}cleanUp(){}}function Xi(){return(Xi=(0,i.Z)(function*(e,t){const n=rr(t),i=ir(e);if(!(yield i._isAvailable()))return!1;const r="true"===(yield i._get(n));return yield i._remove(n),r})).apply(this,arguments)}function er(e,t){return tr.apply(this,arguments)}function tr(){return(tr=(0,i.Z)(function*(e,t){return ir(e)._set(rr(t),"true")})).apply(this,arguments)}function nr(){Qi.clear()}function ir(e){return k(e._redirectPersistence)}function rr(e){return pe("pendingRedirect",e.config.apiKey,e.name)}function sr(e,t,n){return function(e,t,n){return or.apply(this,arguments)}(e,t,n)}function or(){return(or=(0,i.Z)(function*(e,t,n){const i=Ie(e);y(e,t,dt);const r=Li(i,n);return yield er(r,i),r._openRedirect(i,t,"signInViaRedirect")})).apply(this,arguments)}function ar(e,t,n){return function(e,t,n){return lr.apply(this,arguments)}(e,t,n)}function lr(){return(lr=(0,i.Z)(function*(e,t,n){const i=(0,r.m9)(e);y(i.auth,t,dt);const s=Li(i.auth,n);yield er(s,i.auth);const o=yield mr(i);return s._openRedirect(i.auth,t,"reauthViaRedirect",o)})).apply(this,arguments)}function cr(e,t,n){return function(e,t,n){return ur.apply(this,arguments)}(e,t,n)}function ur(){return(ur=(0,i.Z)(function*(e,t,n){const i=(0,r.m9)(e);y(i.auth,t,dt);const s=Li(i.auth,n);yield Nt(!1,i,t.providerId),yield er(s,i.auth);const o=yield mr(i);return s._openRedirect(i.auth,t,"linkViaRedirect",o)})).apply(this,arguments)}function hr(e,t){return dr.apply(this,arguments)}function dr(){return(dr=(0,i.Z)(function*(e,t){return yield Ie(e)._initializationPromise,pr(e,t,!1)})).apply(this,arguments)}function pr(e,t){return fr.apply(this,arguments)}function fr(){return(fr=(0,i.Z)(function*(e,t,n=!1){const i=Ie(e),r=Li(i,t),s=new Ji(i,r,n),o=yield s.execute();return o&&!n&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,t)),o})).apply(this,arguments)}function mr(e){return gr.apply(this,arguments)}function gr(){return(gr=(0,i.Z)(function*(e){const t=Jn(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class _r{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!vr(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(g(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yr(e))}saveEventToCache(e){this.cachedEventUids.add(yr(e)),this.lastProcessedEventTime=Date.now()}}function yr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function vr({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function br(e){return wr.apply(this,arguments)}function wr(){return(wr=(0,i.Z)(function*(e,t={}){return N(e,"GET","/v1/projects",t)})).apply(this,arguments)}const Cr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sr=/^https?/;function kr(){return(kr=(0,i.Z)(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield br(e);for(const i of t)try{if(Tr(i))return}catch(n){}m(e,"unauthorized-domain")})).apply(this,arguments)}function Tr(e){const t=T(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Sr.test(n))return!1;if(Cr.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Er=new I(3e4,6e4);function xr(){const e=ei().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Ir=null;function Ar(e){return Ir=Ir||function(e){return new Promise((t,n)=>{var i,r,s;function o(){xr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xr(),n(g(e,"network-request-failed"))},timeout:Er.get()})}if(null===(r=null===(i=ei().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=ei().gapi)||void 0===s?void 0:s.load)){const t=mi("iframefcb");return ei()[t]=()=>{gapi.load?o():n(g(e,"network-request-failed"))},fi(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw Ir=null,e})}(e),Ir}const Dr=new I(5e3,15e3),Rr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Or=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pr(e){const t=e.config;b(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?A(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:s.SDK_VERSION},o=Or.get(e.config.apiHost);o&&(i.eid=o);const a=e._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${(0,r.xO)(i).slice(1)}`}function Nr(){return(Nr=(0,i.Z)(function*(e){const t=yield Ar(e),n=ei().gapi;return b(n,e,"internal-error"),t.open({where:document.body,url:Pr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rr,dontclear:!0},t=>new Promise(function(){var n=(0,i.Z)(function*(n,i){yield t.restyle({setHideOnLeave:!1});const r=g(e,"network-request-failed"),s=ei().setTimeout(()=>{i(r)},Dr.get());function o(){ei().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{i(r)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const Fr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Mr(e,t,n,i,o,a){b(e.config.authDomain,e,"auth-domain-config-required"),b(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:s.SDK_VERSION,eventId:o};if(t instanceof dt){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,r.xb)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof pt){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];return`${function({config:e}){return e.emulator?A(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,r.xO)(c).slice(1)}`}const Vr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kn,this._completeRedirectFn=pr}_openPopup(e,t,n,s){var o=this;return(0,i.Z)(function*(){var i;C(null===(i=o.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");const a=Mr(e,t,n,T(),s);return function(e,t,n,i=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Fr),{width:i.toString(),height:s.toString(),top:o,left:a}),u=(0,r.z$)().toLowerCase();n&&(l=ye(u)?"_blank":n),ge(u)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,r.z$)()){var t;return Se(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",l),new Lr(null);const d=window.open(t||"",l,h);b(d,e,"popup-blocked");try{d.focus()}catch(p){}return new Lr(d)}(e,a,Jn())})()}_openRedirect(e,t,n,r){var s=this;return(0,i.Z)(function*(){var i;return yield s._originValidation(e),i=Mr(e,t,n,T(),r),ei().location.href=i,new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(C(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}initAndGetManager(e){var t=this;return(0,i.Z)(function*(){const n=yield function(e){return Nr.apply(this,arguments)}(e),i=new _r(e);return n.register("authEvent",t=>(b(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:i.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=n,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send("webStorageSupport",{type:"webStorageSupport"},n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==r&&t(!!r),m(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return kr.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Te()||_e()||Se()}};class Ur extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return w("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Ur(e)}_finalizeEnroll(e,t,n){return function(e,t){return N(e,"POST","/v2/accounts/mfaEnrollment:finalize",P(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return N(e,"POST","/v2/accounts/mfaSignIn:finalize",P(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let qr=(()=>{class e{constructor(){}static assertion(e){return Ur._fromCredential(e)}}return e.FACTOR_ID="phone",e})();class Br{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,i.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){b(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,s._registerComponent)(new l.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:r,authDomain:s}=n.options;return((e,n)=>{b(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),b(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const i={apiKey:r,authDomain:s,clientPlatform:"Browser",apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ee("Browser")},o=new xe(e,n,i);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(k);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,s._registerComponent)(new l.wA("auth-internal",e=>{return t=Ie(e.getProvider("auth").getImmediate()),new Br(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.registerVersion)("@firebase/auth","0.19.11",void 0),(0,s.registerVersion)("@firebase/auth","0.19.11","esm2017")},8604:function(e,t,n){"use strict";n.d(t,{wA:function(){return s},H0:function(){return a},zt:function(){return o}});var i=n(6304),r=n(3854);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,i.Z)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(r)&&s.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,"[DEFAULT]"===i?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(r){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},9306:function(e,t,n){"use strict";n.d(t,{in:function(){return r},Yd:function(){return c},Ub:function(){return u},Am:function(){return h}});const i=[];var r=(()=>(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(r||(r={})),r))();const s={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},o=r.INFO,a={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},l=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=a[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in r))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...e),this._logHandler(this,r.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...e),this._logHandler(this,r.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,r.INFO,...e),this._logHandler(this,r.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,r.WARN,...e),this._logHandler(this,r.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...e),this._logHandler(this,r.ERROR,...e)}}function u(e){i.forEach(t=>{t.setLogLevel(e)})}function h(e,t){for(const n of i){let i=null;t&&t.level&&(i=s[t.level]),n.userLogHandler=null===e?null:(t,n,...s)=>{const o=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:r[n].toLowerCase(),message:o,args:s,type:t.name})}}}},3854:function(e,t,n){"use strict";n.d(t,{BH:function(){return p},LL:function(){return D},ZR:function(){return A},gQ:function(){return H},zI:function(){return I},hu:function(){return r},g5:function(){return s},US:function(){return a},tV:function(){return u},h$:function(){return l},L:function(){return c},$s:function(){return ne},r3:function(){return M},Sg:function(){return f},ne:function(){return Y},p$:function(){return h},vZ:function(){return B},ZB:function(){return d},Lj:function(){return ue},gK:function(){return Q},pd:function(){return G},m9:function(){return ie},z$:function(){return m},GJ:function(){return L},jU:function(){return y},ru:function(){return v},d:function(){return w},xb:function(){return U},w1:function(){return C},hl:function(){return E},uI:function(){return g},UG:function(){return _},Yr:function(){return k},b$:function(){return b},G6:function(){return T},Mn:function(){return S},w9:function(){return F},cI:function(){return O},UI:function(){return q},X3:function(){return ce},xO:function(){return Z},zd:function(){return z},DV:function(){return V},ug:function(){return te},dS:function(){return ee},Pz:function(){return P},Dv:function(){return K},Wj:function(){return J},lb:function(){return X},eu:function(){return x}});var i=n(6304);const r=function(e,t){if(!e)throw s(t)},s=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},o=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,o=s?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0;let c=(15&o)<<2|l>>6,u=63&l;a||(u=64,s||(c=64)),i.push(n[t>>2],n[(3&t)<<4|o>>4],n[c],n[u])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const o=r<e.length?n[e.charAt(r)]:64;++r;const a=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==o||null==a)throw Error();i.push(t<<2|s>>4),64!==o&&(i.push(s<<4&240|o>>2),64!==a&&i.push(o<<6&192|a))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},l=function(e){const t=o(e);return a.encodeByteArray(t,!0)},c=function(e){return l(e).replace(/\./g,"")},u=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function h(e){return d(void 0,e)}function d(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=d(e[n],t[n]));return e}class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function f(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(s)),""].join(".")}function m(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function _(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return m().indexOf("Electron/")>=0}function C(){const e=m();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function S(){return m().indexOf("MSAppHost/")>=0}function k(){return!1}function T(){return!_()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E(){return"object"==typeof indexedDB}function x(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function I(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class A extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,A.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D.prototype.create)}}class D{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(R,(e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`})}(r,n):"Error";return new A(i,`${this.serviceName}: ${s} (${i}).`,n)}}const R=/\{\$([^}]+)}/g;function O(e){return JSON.parse(e)}function P(e){return JSON.stringify(e)}const N=function(e){let t={},n={},i={},r="";try{const s=e.split(".");t=O(u(s[0])||""),n=O(u(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:i,signature:r}},F=function(e){const t=N(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},L=function(e){const t=N(e).claims;return"object"==typeof t&&!0===t.admin};function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function V(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function U(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function q(e,t,n){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function B(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(j(n)&&j(s)){if(!B(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function j(e){return null!==e&&"object"==typeof e}function Z(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function z(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function G(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class H{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let i,r,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(i=l^o&(a^l),r=1518500249):(i=o^a^l,r=1859775393):u<60?(i=o&a|l&(o|a),r=2400959708):(i=o^a^l,r=3395469782);const e=(s<<5|s>>>27)+i+c+r+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[i]>>t&255,++n;return e}}function Y(e,t){const n=new $(e,t);return n.subscribe.bind(n)}class ${constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of["next","error","complete"])if(n in e&&"function"==typeof e[n])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=W),void 0===i.error&&(i.error=W),void 0===i.complete&&(i.complete=W);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}}),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W(){}const K=function(e,t,n,i){let r;if(i<t?r="at least "+t:i>n&&(r=0===n?"none":"no more than "+n),r)throw new Error(e+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".")};function Q(e,t){return`${e} failed: ${t} argument `}function J(e,t,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(Q(e,t)+"must be a valid function.")}function X(e,t,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(Q(e,t)+"must be a valid context object.")}const ee=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);if(s>=55296&&s<=56319){const t=s-55296;i++,r(i<e.length,"Surrogate pair missing trail surrogate."),s=65536+(t<<10)+(e.charCodeAt(i)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},te=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function ne(e,t=1e3,n=2){const i=t*Math.pow(n,e),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function ie(e){return e&&e._delegate?e._delegate:e}function re(e,t){return new Promise((n,i)=>{e.onsuccess=e=>{n(e.target.result)},e.onerror=e=>{var n;i(`${t}: ${null===(n=e.target.error)||void 0===n?void 0:n.message}`)}})}class se{constructor(e){this._db=e,this.objectStoreNames=this._db.objectStoreNames}transaction(e,t){return new oe(this._db.transaction.call(this._db,e,t))}createObjectStore(e,t){return new ae(this._db.createObjectStore(e,t))}close(){this._db.close()}}class oe{constructor(e){this._transaction=e,this.complete=new Promise((e,t)=>{this._transaction.oncomplete=function(){e()},this._transaction.onerror=()=>{t(this._transaction.error)},this._transaction.onabort=()=>{t(this._transaction.error)}})}objectStore(e){return new ae(this._transaction.objectStore(e))}}class ae{constructor(e){this._store=e}index(e){return new le(this._store.index(e))}createIndex(e,t,n){return new le(this._store.createIndex(e,t,n))}get(e){return re(this._store.get(e),"Error reading from IndexedDB")}put(e,t){return re(this._store.put(e,t),"Error writing to IndexedDB")}delete(e){return re(this._store.delete(e),"Error deleting from IndexedDB")}clear(){return re(this._store.clear(),"Error clearing IndexedDB object store")}}class le{constructor(e){this._index=e}get(e){return re(this._index.get(e),"Error reading from IndexedDB")}}function ce(e,t,n){return new Promise((i,r)=>{try{const s=indexedDB.open(e,t);s.onsuccess=e=>{i(new se(e.target.result))},s.onerror=e=>{var t;r(`Error opening indexedDB: ${null===(t=e.target.error)||void 0===t?void 0:t.message}`)},s.onupgradeneeded=e=>{n(new se(s.result),e.oldVersion,e.newVersion,new oe(s.transaction))}}catch(s){r(`Error opening indexedDB: ${s.message}`)}})}function ue(e){return he.apply(this,arguments)}function he(){return(he=(0,i.Z)(function*(e){return new Promise((t,n)=>{try{const i=indexedDB.deleteDatabase(e);i.onsuccess=()=>{t()},i.onerror=t=>{var i;n(`Error deleting indexedDB database "${e}": ${null===(i=t.target.error)||void 0===i?void 0:i.message}`)}}catch(i){n(`Error deleting indexedDB database "${e}": ${i.message}`)}})})).apply(this,arguments)}},2329:function(e,t,n){"use strict";n.d(t,{Mq:function(){return i.getApp},C6:function(){return i.getApps}});var i=n(279);(0,i.registerVersion)("firebase","9.6.10","app")},7841:function(e,t,n){"use strict";n.d(t,{Z:function(){return i.Z}});var i=n(156);i.Z.registerVersion("firebase","9.6.10","app-compat")},4828:function(e,t,n){"use strict";n.r(t);var i=n(6304),r=n(156),s=n(7415),o=n(3854),a=(n(279),n(9306),n(8604));function l(){return window}function c(){return(c=(0,i.Z)(function*(e,t,n){var i;const{BuildInfo:r}=l();(0,s.ap)(t.sessionId,"AuthEvent did not contain a session ID");const o=yield d(t.sessionId),a={};return(0,s.aq)()?a.ibi=r.packageName:(0,s.ar)()?a.apn=r.packageName:(0,s.as)(e,"operation-not-supported-in-this-environment"),r.displayName&&(a.appDisplayName=r.displayName),a.sessionId=o,(0,s.at)(e,n,t.type,void 0,null!==(i=t.eventId)&&void 0!==i?i:void 0,a)})).apply(this,arguments)}function u(){return(u=(0,i.Z)(function*(e){const{BuildInfo:t}=l(),n={};(0,s.aq)()?n.iosBundleId=t.packageName:(0,s.ar)()?n.androidPackageName=t.packageName:(0,s.as)(e,"operation-not-supported-in-this-environment"),yield(0,s.au)(e,n)})).apply(this,arguments)}function h(){return(h=(0,i.Z)(function*(e,t,n){const{cordova:i}=l();let r=()=>{};try{yield new Promise((o,a)=>{let l=null;function c(){var e;o();const t=null===(e=i.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function u(){l||(l=window.setTimeout(()=>{a((0,s.av)(e,"redirect-cancelled-by-user"))},2e3))}function h(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(c),document.addEventListener("resume",u,!1),(0,s.ar)()&&document.addEventListener("visibilitychange",h,!1),r=()=>{t.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",h,!1),l&&window.clearTimeout(l)}})}finally{r()}})).apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return(p=(0,i.Z)(function*(e){const t=f(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function f(e){if((0,s.ap)(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}class m extends s.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,i.Z)(function*(){yield e.initPromise})()}}function g(e){return _.apply(this,arguments)}function _(){return(_=(0,i.Z)(function*(e){const t=yield v()._get(b(e));return t&&(yield v()._remove(b(e))),t})).apply(this,arguments)}function y(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function v(){return(0,s.ax)(s.b)}function b(e){return(0,s.ay)("authEvent",e.config.apiKey,e.name)}function w(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,o.zd)(n.join("?"))}function C(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,s.av)("no-auth-event")}}function S(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function k(e=(0,o.z$)()){return!("file:"!==S()&&"ionic:"!==S()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function T(){try{const e=self.localStorage,t=s.aG();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,o.z$)()){return(0,o.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,o.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,o.hl)()}catch(e){return E()&&(0,o.hl)()}return!1}function E(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function x(){return("http:"===S()||"https:"===S()||(0,o.ru)()||k())&&!((0,o.b$)()||(0,o.UG)())&&T()&&!E()}function I(){return k()&&"undefined"!=typeof document}function A(){return(A=(0,i.Z)(function*(){return!!I()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})})).apply(this,arguments)}const D={LOCAL:"local",NONE:"none",SESSION:"session"},R=s.aw;function O(e){return P.apply(this,arguments)}function P(){return(P=(0,i.Z)(function*(e){yield e._initializationPromise;const t=N(),n=s.ay("persistence",e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())})).apply(this,arguments)}function N(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const F=s.aw;class L{constructor(){this.browserResolver=s.ax(s.k),this.cordovaResolver=s.ax(class{constructor(){this._redirectPersistence=s.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=s.aA}_initialize(e){var t=this;return(0,i.Z)(function*(){const n=e._key();let i=t.eventManagers.get(n);return i||(i=new m(e),t.eventManagers.set(n,i),t.attachCallbackListeners(e,i)),i})()}_openPopup(e){(0,s.as)(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,r){var o=this;return(0,i.Z)(function*(){!function(e){var t,n,i,r,o,a,c,u,h,d;const p=l();(0,s.aw)("function"==typeof(null===(t=null==p?void 0:p.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,s.aw)(void 0!==(null===(n=null==p?void 0:p.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,s.aw)("function"==typeof(null===(o=null===(r=null===(i=null==p?void 0:p.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.aw)("function"==typeof(null===(u=null===(c=null===(a=null==p?void 0:p.cordova)||void 0===a?void 0:a.plugins)||void 0===c?void 0:c.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.aw)("function"==typeof(null===(d=null===(h=null==p?void 0:p.cordova)||void 0===h?void 0:h.InAppBrowser)||void 0===d?void 0:d.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=yield o._initialize(e);yield i.initialized(),i.resetRedirect(),(0,s.aB)(),yield o._originValidation(e);const a=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:y(),postBody:null,tenantId:e.tenantId,error:(0,s.av)(e,"no-auth-event")}}(e,n,r);yield function(e,t){return v()._set(b(e),t)}(e,a);const u=yield function(e,t,n){return c.apply(this,arguments)}(e,a,t),d=yield function(e){const{cordova:t}=l();return new Promise(n=>{t.plugins.browsertab.isAvailable(i=>{let r=null;i?t.plugins.browsertab.openUrl(e):r=t.InAppBrowser.open(e,(0,s.ao)()?"_blank":"_system","location=yes"),n(r)})})}(u);return function(e,t,n){return h.apply(this,arguments)}(e,i,d)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return u.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:o}=l(),a=setTimeout((0,i.Z)(function*(){yield g(e),t.onEvent(C())}),500),c=function(){var n=(0,i.Z)(function*(n){clearTimeout(a);const i=yield g(e);let r=null;i&&(null==n?void 0:n.url)&&(r=function(e,t){var n,i;const r=function(e){const t=w(e),n=t.link?decodeURIComponent(t.link):void 0,i=w(n).link,r=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return w(r).link||r||i||n||e}(t);if(r.includes("/__/auth/callback")){const t=w(r),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,a=null===(i=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],l=a?(0,s.av)(a):null;return l?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:r,postBody:null}}return null}(i,n.url)),t.onEvent(r||C())});return function(e){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,c);const u=r,h=`${o.packageName.toLowerCase()}://`;l().handleOpenURL=function(){var e=(0,i.Z)(function*(e){if(e.toLowerCase().startsWith(h)&&c({url:e}),"function"==typeof u)try{u(e)}catch(t){console.error(t)}});return function(t){return e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=s.a,this._completeRedirectFn=s.aA}_initialize(e){var t=this;return(0,i.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,r){var s=this;return(0,i.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(e,t,n,r)})()}_openRedirect(e,t,n,r){var s=this;return(0,i.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(e,t,n,r)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return I()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return F(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,i.Z)(function*(){if(e.underlyingResolver)return;const t=yield function(){return A.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function M(e){return e.unwrap()}function V(e){const{_tokenResponse:t}=e instanceof o.ZR?e.customData:e;if(!t)return null;if(!(e instanceof o.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return s.P.credentialFromResult(e);const n=t.providerId;if(!n||n===s.o.PASSWORD)return null;let i;switch(n){case s.o.GOOGLE:i=s.N;break;case s.o.FACEBOOK:i=s.M;break;case s.o.GITHUB:i=s.Q;break;case s.o.TWITTER:i=s.V;break;default:const{oauthIdToken:e,oauthAccessToken:r,oauthTokenSecret:o,pendingToken:a,nonce:l}=t;return r||o||e||a?a?n.startsWith("saml.")?s.aJ._create(n,a):s.I._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:r}):new s.T(n).credential({idToken:e,accessToken:r,rawNonce:l}):null}return e instanceof o.ZR?i.credentialFromError(e):i.credentialFromResult(e)}function U(e,t){return t.catch(t=>{throw t instanceof o.ZR&&function(e,t){var n;const i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new j(e,s.am(e,t));else if(i){const e=V(t),n=t;e&&(n.credential=e,n.tenantId=i.tenantId||void 0,n.email=i.email||void 0,n.phoneNumber=i.phoneNumber||void 0)}}(e,t),t}).then(e=>{const t=e.user;return{operationType:e.operationType,credential:(n=e,V(n)),additionalUserInfo:s.ak(e),user:Z.getOrCreate(t)};var n})}function q(e,t){return B.apply(this,arguments)}function B(){return(B=(0,i.Z)(function*(e,t){const n=yield t;return{verificationId:n.verificationId,confirm:t=>U(e,n.confirm(t))}})).apply(this,arguments)}class j{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return U(M(this.auth),this.resolver.resolveSignIn(e))}}class Z{constructor(e){this._delegate=e,this.multiFactor=s.an(e)}static getOrCreate(e){return Z.USER_MAP.has(e)||Z.USER_MAP.set(e,new Z(e)),Z.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,i.Z)(function*(){return U(t.auth,s.Y(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,i.Z)(function*(){return q(n.auth,s.l(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,i.Z)(function*(){return U(t.auth,s.d(t._delegate,e,L))})()}linkWithRedirect(e){var t=this;return(0,i.Z)(function*(){return yield O(s.aC(t.auth)),s.g(t._delegate,e,L)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,i.Z)(function*(){return U(t.auth,s.Z(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return q(this.auth,s.r(this._delegate,e,t))}reauthenticateWithPopup(e){return U(this.auth,s.e(this._delegate,e,L))}reauthenticateWithRedirect(e){var t=this;return(0,i.Z)(function*(){return yield O(s.aC(t.auth)),s.h(t._delegate,e,L)})()}sendEmailVerification(e){return s.aa(this._delegate,e)}unlink(e){var t=this;return(0,i.Z)(function*(){return yield s.aj(t._delegate,e),t})()}updateEmail(e){return s.af(this._delegate,e)}updatePassword(e){return s.ag(this._delegate,e)}updatePhoneNumber(e){return s.u(this._delegate,e)}updateProfile(e){return s.ae(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return s.ab(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Z.USER_MAP=new WeakMap;const z=s.aw;let G=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;z(n,"invalid-api-key",{appName:e.name}),z(n,"invalid-api-key",{appName:e.name});const i="undefined"!=typeof window?L:void 0;this._delegate=t.initialize({options:{persistence:Y(n,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(s.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Z.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){s.E(this._delegate,e,t)}applyActionCode(e){return s.a1(this._delegate,e)}checkActionCode(e){return s.a2(this._delegate,e)}confirmPasswordReset(e,t){return s.a0(this._delegate,e,t)}createUserWithEmailAndPassword(e,t){var n=this;return(0,i.Z)(function*(){return U(n._delegate,s.a4(n._delegate,e,t))})()}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return s.a9(this._delegate,e)}isSignInWithEmailLink(e){return s.a7(this._delegate,e)}getRedirectResult(){var e=this;return(0,i.Z)(function*(){z(x(),e._delegate,"operation-not-supported-in-this-environment");const t=yield s.j(e._delegate,L);return t?U(e._delegate,Promise.resolve(t)):{credential:null,user:null}})()}addFrameworkForLogging(e){!function(e,t){(0,s.aC)(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:i,error:r,complete:s}=H(e,t,n);return this._delegate.onAuthStateChanged(i,r,s)}onIdTokenChanged(e,t,n){const{next:i,error:r,complete:s}=H(e,t,n);return this._delegate.onIdTokenChanged(i,r,s)}sendSignInLinkToEmail(e,t){return s.a6(this._delegate,e,t)}sendPasswordResetEmail(e,t){return s.$(this._delegate,e,t||void 0)}setPersistence(e){var t=this;return(0,i.Z)(function*(){let n;switch(function(e,t){R(Object.values(D).includes(t),e,"invalid-persistence-type"),(0,o.b$)()?R(t!==D.SESSION,e,"unsupported-persistence-type"):(0,o.UG)()?R(t===D.NONE,e,"unsupported-persistence-type"):E()?R(t===D.NONE||t===D.LOCAL&&(0,o.hl)(),e,"unsupported-persistence-type"):R(t===D.NONE||T(),e,"unsupported-persistence-type")}(t._delegate,e),e){case D.SESSION:n=s.a;break;case D.LOCAL:n=(yield s.ax(s.i)._isAvailable())?s.i:s.b;break;case D.NONE:n=s.K;break;default:return s.as("argument-error",{appName:t._delegate.name})}return t._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return U(this._delegate,s.W(this._delegate))}signInWithCredential(e){return U(this._delegate,s.X(this._delegate,e))}signInWithCustomToken(e){return U(this._delegate,s._(this._delegate,e))}signInWithEmailAndPassword(e,t){return U(this._delegate,s.a5(this._delegate,e,t))}signInWithEmailLink(e,t){return U(this._delegate,s.a8(this._delegate,e,t))}signInWithPhoneNumber(e,t){return q(this._delegate,s.s(this._delegate,e,t))}signInWithPopup(e){var t=this;return(0,i.Z)(function*(){return z(x(),t._delegate,"operation-not-supported-in-this-environment"),U(t._delegate,s.c(t._delegate,e,L))})()}signInWithRedirect(e){var t=this;return(0,i.Z)(function*(){return z(x(),t._delegate,"operation-not-supported-in-this-environment"),yield O(t._delegate),s.f(t._delegate,e,L)})()}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return s.a3(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=D,e})();function H(e,t,n){let i=e;"function"!=typeof e&&({next:i,error:t,complete:n}=e);const r=i;return{next:e=>r(e&&Z.getOrCreate(e)),error:t,complete:n}}function Y(e,t){const n=function(e,t){const n=N();if(!n)return[];const i=s.ay("persistence",e,t);switch(n.getItem(i)){case D.NONE:return[s.K];case D.LOCAL:return[s.i,s.a];case D.SESSION:return[s.a];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(s.i)||n.push(s.i),"undefined"!=typeof window)for(const i of[s.b,s.a])n.includes(i)||n.push(i);return n.includes(s.K)||n.push(s.K),n}class ${constructor(){this.providerId="phone",this._delegate=new s.P(M(r.Z.auth()))}static credential(e,t){return s.P.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}$.PHONE_SIGN_IN_METHOD=s.P.PHONE_SIGN_IN_METHOD,$.PROVIDER_ID=s.P.PROVIDER_ID;const W=s.aw;var K;(K=r.Z).INTERNAL.registerComponent(new a.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new G(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:s.A.EMAIL_SIGNIN,PASSWORD_RESET:s.A.PASSWORD_RESET,RECOVER_EMAIL:s.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:s.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:s.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:s.A.VERIFY_EMAIL}},EmailAuthProvider:s.L,FacebookAuthProvider:s.M,GithubAuthProvider:s.Q,GoogleAuthProvider:s.N,OAuthProvider:s.T,SAMLAuthProvider:s.U,PhoneAuthProvider:$,PhoneMultiFactorGenerator:s.m,RecaptchaVerifier:class{constructor(e,t,n=r.Z.app()){var i;W(null===(i=n.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new s.R(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:s.V,Auth:G,AuthCredential:s.G,Error:o.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),K.registerVersion("@firebase/auth-compat","0.2.11")},7574:function(e,t,n){"use strict";n.d(t,{y:function(){return c}});var i=n(7393),r=n(9181),s=n(6490),o=n(6554),a=n(4487),l=n(2494);let c=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof i.L)return e;if(e[r.b])return e[r.b]()}return e||t||n?new i.L(e,t,n):new i.L(s.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||l.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),l.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){l.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof i.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=u(t))((t,n)=>{let i;i=this.subscribe(t=>{try{e(t)}catch(r){n(r),i&&i.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?a.y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=u(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function u(e){if(e||(e=l.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:function(e,t,n){"use strict";n.d(t,{c:function(){return s}});var i=n(2494),r=n(4449);const s={closed:!0,next(e){},error(e){if(i.v.useDeprecatedSynchronousErrorHandling)throw e;(0,r.z)(e)},complete(){}}},9765:function(e,t,n){"use strict";n.d(t,{Yc:function(){return c},xQ:function(){return u}});var i=n(7574),r=n(7393),s=n(5319),o=n(7971),a=n(8858),l=n(9181);class c extends r.L{constructor(e){super(e),this.destination=e}}let u=(()=>{class e extends i.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[l.b](){return new c(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,i=t.slice();for(let r=0;r<n;r++)i[r].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,i=t.slice();for(let r=0;r<n;r++)i[r].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let i=0;i<t;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new i.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends u{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.w.EMPTY}}},8858:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var i=n(5319);class r extends i.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},7393:function(e,t,n){"use strict";n.d(t,{L:function(){return c}});var i=n(9105),r=n(6490),s=n(5319),o=n(9181),a=n(2494),l=n(4449);class c extends s.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=r.c;break;case 1:if(!e){this.destination=r.c;break}if("object"==typeof e){e instanceof c?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new u(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new u(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const i=new c(e,t,n);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class u extends c{constructor(e,t,n,s){let o;super(),this._parentSubscriber=e;let a=this;(0,i.m)(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==r.c&&(a=Object.create(t),(0,i.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,l.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,l.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,l.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):((0,l.z)(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},5319:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var i=n(9796),r=n(1555),s=n(9105);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class a{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:n,_unsubscribe:l,_subscriptions:u}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof a)t.remove(this);else if(null!==t)for(let i=0;i<t.length;++i)t[i].remove(this);if((0,s.m)(l)){n&&(this._unsubscribe=void 0);try{l.call(this)}catch(h){e=h instanceof o?c(h.errors):[h]}}if((0,i.k)(u)){let t=-1,n=u.length;for(;++t<n;){const n=u[t];if((0,r.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(c(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let t=e;if(!e)return a.EMPTY;switch(typeof e){case"function":t=new a(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof a)){const e=t;t=new a,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof a){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var l;function c(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}a.EMPTY=((l=new a).closed=!0,l)},2494:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});let i=!1;const r={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}}},5345:function(e,t,n){"use strict";n.d(t,{IY:function(){return o},Ds:function(){return a},ft:function(){return l}});var i=n(7393),r=n(7574),s=n(7444);class o extends i.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends i.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function l(e,t){if(t.closed)return;if(e instanceof r.y)return e.subscribe(t);let n;try{n=(0,s.s)(e)(t)}catch(i){t.error(i)}return n}},2441:function(e,t,n){"use strict";n.d(t,{c:function(){return a},N:function(){return l}});var i=n(9765),r=n(7574),s=n(5319),o=n(1307);class a extends r.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.w,e.add(this.source.subscribe(new c(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const l=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class c extends i.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},9193:function(e,t,n){"use strict";n.d(t,{E:function(){return r},c:function(){return s}});var i=n(7574);const r=new i.y(e=>e.complete());function s(e){return e?function(e){return new i.y(t=>e.schedule(()=>t.complete()))}(e):r}},4402:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var i=n(7574),r=n(7444),s=n(5319),o=n(6554),a=n(4087),l=n(377),c=n(4072),u=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new i.y(n=>{const i=new s.w;return i.add(t.schedule(()=>{const r=e[o.L]();i.add(r.subscribe({next(e){i.add(t.schedule(()=>n.next(e)))},error(e){i.add(t.schedule(()=>n.error(e)))},complete(){i.add(t.schedule(()=>n.complete()))}}))})),i})}(e,t);if((0,c.t)(e))return function(e,t){return new i.y(n=>{const i=new s.w;return i.add(t.schedule(()=>e.then(e=>{i.add(t.schedule(()=>{n.next(e),i.add(t.schedule(()=>n.complete()))}))},e=>{i.add(t.schedule(()=>n.error(e)))}))),i})}(e,t);if((0,u.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[l.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new i.y(n=>{const i=new s.w;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(()=>{r=e[l.hZ](),i.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=r.next();e=n.value,t=n.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof i.y?e:new i.y((0,r.s)(e))}},6693:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var i=n(7574),r=n(5015),s=n(4087);function o(e,t){return t?(0,s.r)(e,t):new i.y((0,r.V)(e))}},6682:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var i=n(7574),r=n(4869),s=n(3282),o=n(6693);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,r.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof i.y?e[0]:(0,s.J)(t)((0,o.n)(e,n))}},5917:function(e,t,n){"use strict";n.d(t,{of:function(){return o}});var i=n(4869),r=n(6693),s=n(4087);function o(...e){let t=e[e.length-1];return(0,i.K)(t)?(e.pop(),(0,s.r)(e,t)):(0,r.n)(e)}},205:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var i=n(7574);function r(e,t){return new i.y(t?n=>t.schedule(s,0,{error:e,subscriber:n}):t=>t.error(e))}function s({error:e,subscriber:t}){t.error(e)}},8002:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var i=n(7393);function r(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends i.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},3282:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var i=n(9773),r=n(4487);function s(e=Number.POSITIVE_INFINITY){return(0,i.zg)(r.y,e)}},9773:function(e,t,n){"use strict";n.d(t,{zg:function(){return o}});var i=n(8002),r=n(4402),s=n(5345);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?s=>s.pipe(o((n,s)=>(0,r.D)(e(n,s)).pipe((0,i.U)((e,i)=>t(n,e,s,i))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new l(e,this.project,this.concurrent))}}class l extends s.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t)}_innerSub(e){const t=new s.IY(this),n=this.destination;n.add(t);const i=(0,s.ft)(e,t);i!==t&&n.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},6136:function(e,t,n){"use strict";n.d(t,{ht:function(){return u},QV:function(){return l}});var i=n(7393),r=n(9193),s=n(5917),o=n(205);class a{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return(0,o._)(this.error);case"C":return(0,r.c)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new a("N",e):a.undefinedValueNotification}static createError(e){return new a("E",void 0,e)}static createComplete(){return a.completeNotification}}function l(e,t=0){return function(n){return n.lift(new c(e,t))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))}}class u extends i.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(u.dispatch,this.delay,new h(e,this.destination)))}_next(e){this.scheduleMessage(a.createNext(e))}_error(e){this.scheduleMessage(a.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(e,t){this.notification=e,this.destination=t}}},1307:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});var i=n(7393);function r(){return function(e){return e.lift(new s(e))}}class s{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const i=new o(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class o extends i.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}},8819:function(e,t,n){"use strict";n.d(t,{B:function(){return a}});var i=n(2441),r=n(1307),s=n(9765);function o(){return new s.xQ}function a(){return e=>{return(0,r.x)()((t=o,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,i.N);return r.source=e,r.subjectFactory=n,r})(e));var t}}},9673:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});var i=n(7574),r=n(4581),s=n(6561);class o extends i.y{constructor(e,t=0,n=r.e){super(),this.source=e,this.delayTime=t,this.scheduler=n,(!(0,s.k)(t)||t<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=r.e)}static create(e,t=0,n=r.e){return new o(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(o.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function a(e,t=0){return function(n){return n.lift(new l(e,t))}}class l{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new o(t,this.delay,this.scheduler).subscribe(e)}}},3342:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var i=n(7393);function r(){}var s=n(9105);function o(e,t,n){return function(i){return i.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new l(e,this.nextOrObserver,this.error,this.complete))}}class l extends i.L{constructor(e,t,n,i){super(e),this._tapNext=r,this._tapError=r,this._tapComplete=r,this._tapError=n||r,this._tapComplete=i||r,(0,s.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||r,this._tapError=t.error||r,this._tapComplete=t.complete||r)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},4087:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var i=n(7574),r=n(5319);function s(e,t){return new i.y(n=>{const i=new r.w;let s=0;return i.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||i.add(this.schedule())):n.complete()})),i})}},6465:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var i=n(5319);class r extends i.w{constructor(e,t){super()}schedule(e,t=0){return this}}class s extends r{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,i=!1;try{this.work(e)}catch(r){i=!0,n=!!r&&r||new Error(r)}if(i)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},6102:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});let i=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class r extends i{constructor(e,t=i.now){super(e,()=>r.delegate&&r.delegate!==this?r.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return r.delegate&&r.delegate!==this?r.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},4581:function(e,t,n){"use strict";n.d(t,{e:function(){return h},E:function(){return u}});let i=1;const r=Promise.resolve(),s={};function o(e){return e in s&&(delete s[e],!0)}const a={setImmediate(e){const t=i++;return s[t]=!0,r.then(()=>o(t)&&e()),t},clearImmediate(e){o(e)}};var l=n(6465),c=n(6102);const u=new class extends c.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,i=-1,r=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++i<r&&(e=t.shift()));if(this.active=!1,n){for(;++i<r&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends l.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=a.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(a.clearImmediate(t),e.scheduled=void 0)}}),h=u},3637:function(e,t,n){"use strict";n.d(t,{z:function(){return r},P:function(){return s}});var i=n(6465);const r=new(n(6102).v)(i.o),s=r},7771:function(e,t,n){"use strict";n.d(t,{c:function(){return o},N:function(){return s}});var i=n(6465),r=n(6102);const s=new class extends r.v{}(class extends i.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}),o=s},377:function(e,t,n){"use strict";n.d(t,{hZ:function(){return i}});const i="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});const i="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});const i="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});const i=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},4449:function(e,t,n){"use strict";function i(e){setTimeout(()=>{throw e},0)}n.d(t,{z:function(){return i}})},4487:function(e,t,n){"use strict";function i(e){return e}n.d(t,{y:function(){return i}})},9796:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});const i=Array.isArray||(e=>e&&"number"==typeof e.length)},9489:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});const i=e=>e&&"number"==typeof e.length&&"function"!=typeof e},9105:function(e,t,n){"use strict";function i(e){return"function"==typeof e}n.d(t,{m:function(){return i}})},6561:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var i=n(9796);function r(e){return!(0,i.k)(e)&&e-parseFloat(e)+1>=0}},1555:function(e,t,n){"use strict";function i(e){return null!==e&&"object"==typeof e}n.d(t,{K:function(){return i}})},4072:function(e,t,n){"use strict";function i(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:function(){return i}})},4869:function(e,t,n){"use strict";function i(e){return e&&"function"==typeof e.schedule}n.d(t,{K:function(){return i}})},7444:function(e,t,n){"use strict";n.d(t,{s:function(){return u}});var i=n(5015),r=n(4449),s=n(377),o=n(6554),a=n(9489),l=n(4072),c=n(1555);const u=e=>{if(e&&"function"==typeof e[o.L])return u=e,e=>{const t=u[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,a.z)(e))return(0,i.V)(e);if((0,l.t)(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,r.z),e);if(e&&"function"==typeof e[s.hZ])return t=e,e=>{const n=t[s.hZ]();for(;;){let t;try{t=n.next()}catch(i){return e.error(i),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=(0,c.K)(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,u}},5015:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});const i=e=>t=>{for(let n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.complete()}},4012:function(e,t,n){"use strict";var i=n(7716);let r=null;function s(){return r}const o=new i.OlP("DocumentToken");let a=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,i.Yz7)({factory:l,token:e,providedIn:"platform"}),e})();function l(){return(0,i.LFG)(u)}const c=new i.OlP("Location Initialized");let u=(()=>{class e extends a{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){h()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){h()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o))},e.\u0275prov=(0,i.Yz7)({factory:d,token:e,providedIn:"platform"}),e})();function h(){return!!window.history.pushState}function d(){return new u((0,i.LFG)(o))}function p(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function f(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function m(e){return e&&"?"!==e[0]?"?"+e:e}let g=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,i.Yz7)({factory:_,token:e,providedIn:"root"}),e})();function _(e){const t=(0,i.LFG)(o).location;return new v((0,i.LFG)(a),t&&t.origin||"")}const y=new i.OlP("appBaseHref");let v=(()=>{class e extends g{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return p(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,i){const r=this.prepareExternalUrl(n+m(i));this._platformLocation.pushState(e,t,r)}replaceState(e,t,n,i){const r=this.prepareExternalUrl(n+m(i));this._platformLocation.replaceState(e,t,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(a),i.LFG(y,8))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),b=(()=>{class e extends g{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=p(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,i){let r=this.prepareExternalUrl(n+m(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(e,t,r)}replaceState(e,t,n,i){let r=this.prepareExternalUrl(n+m(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(a),i.LFG(y,8))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),w=(()=>{class e{constructor(e,t){this._subject=new i.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=f(S(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+m(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,S(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+m(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+m(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(g),i.LFG(a))},e.normalizeQueryParams=m,e.joinWithSlash=p,e.stripTrailingSlash=f,e.\u0275prov=(0,i.Yz7)({factory:C,token:e,providedIn:"root"}),e})();function C(){return new w((0,i.LFG)(g),(0,i.LFG)(a))}function S(e){return e.replace(/\/index.html$/,"")}var k=(()=>((k=k||{})[k.Zero=0]="Zero",k[k.One=1]="One",k[k.Two=2]="Two",k[k.Few=3]="Few",k[k.Many=4]="Many",k[k.Other=5]="Other",k))(),T=(()=>((T=T||{})[T.Format=0]="Format",T[T.Standalone=1]="Standalone",T))(),E=(()=>((E=E||{})[E.Narrow=0]="Narrow",E[E.Abbreviated=1]="Abbreviated",E[E.Wide=2]="Wide",E[E.Short=3]="Short",E))(),x=(()=>((x=x||{})[x.Short=0]="Short",x[x.Medium=1]="Medium",x[x.Long=2]="Long",x[x.Full=3]="Full",x))(),I=(()=>((I=I||{})[I.Decimal=0]="Decimal",I[I.Group=1]="Group",I[I.List=2]="List",I[I.PercentSign=3]="PercentSign",I[I.PlusSign=4]="PlusSign",I[I.MinusSign=5]="MinusSign",I[I.Exponential=6]="Exponential",I[I.SuperscriptingExponent=7]="SuperscriptingExponent",I[I.PerMille=8]="PerMille",I[I[1/0]=9]="Infinity",I[I.NaN=10]="NaN",I[I.TimeSeparator=11]="TimeSeparator",I[I.CurrencyDecimal=12]="CurrencyDecimal",I[I.CurrencyGroup=13]="CurrencyGroup",I))();function A(e,t){return F((0,i.cg1)(e)[i.wAp.DateFormat],t)}function D(e,t){return F((0,i.cg1)(e)[i.wAp.TimeFormat],t)}function R(e,t){return F((0,i.cg1)(e)[i.wAp.DateTimeFormat],t)}function O(e,t){const n=(0,i.cg1)(e),r=n[i.wAp.NumberSymbols][t];if(void 0===r){if(t===I.CurrencyDecimal)return n[i.wAp.NumberSymbols][I.Decimal];if(t===I.CurrencyGroup)return n[i.wAp.NumberSymbols][I.Group]}return r}const P=i.kL8;function N(e){if(!e[i.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[i.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function F(e,t){for(let n=t;n>-1;n--)if(void 0!==e[n])return e[n];throw new Error("Locale data API: locale data undefined")}function L(e){const[t,n]=e.split(":");return{hours:+t,minutes:+n}}const M=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,V={},U=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var q=(()=>((q=q||{})[q.Short=0]="Short",q[q.ShortGMT=1]="ShortGMT",q[q.Long=2]="Long",q[q.Extended=3]="Extended",q))(),B=(()=>((B=B||{})[B.FullYear=0]="FullYear",B[B.Month=1]="Month",B[B.Date=2]="Date",B[B.Hours=3]="Hours",B[B.Minutes=4]="Minutes",B[B.Seconds=5]="Seconds",B[B.FractionalSeconds=6]="FractionalSeconds",B[B.Day=7]="Day",B))(),j=(()=>((j=j||{})[j.DayPeriods=0]="DayPeriods",j[j.Days=1]="Days",j[j.Months=2]="Months",j[j.Eras=3]="Eras",j))();function Z(e,t,n,i){let r=function(e){if(ne(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[t,n=1,i=1]=e.split("-").map(e=>+e);return z(t,n-1,i)}const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);let n;if(n=e.match(M))return function(e){const t=new Date(0);let n=0,i=0;const r=e[8]?t.setUTCFullYear:t.setFullYear,s=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),i=Number(e[9]+e[11])),r.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));const o=Number(e[4]||0)-n,a=Number(e[5]||0)-i,l=Number(e[6]||0),c=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return s.call(t,o,a,l,c),t}(n)}const t=new Date(e);if(!ne(t))throw new Error(`Unable to convert "${e}" into a date`);return t}(e);t=G(n,t)||t;let s,o=[];for(;t;){if(s=U.exec(t),!s){o.push(t);break}{o=o.concat(s.slice(1));const e=o.pop();if(!e)break;t=e}}let a=r.getTimezoneOffset();i&&(a=te(i,a),r=function(e,t,n){const i=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(te(t,i)-i))}(r,i));let l="";return o.forEach(e=>{const t=function(e){if(ee[e])return ee[e];let t;switch(e){case"G":case"GG":case"GGG":t=W(j.Eras,E.Abbreviated);break;case"GGGG":t=W(j.Eras,E.Wide);break;case"GGGGG":t=W(j.Eras,E.Narrow);break;case"y":t=$(B.FullYear,1,0,!1,!0);break;case"yy":t=$(B.FullYear,2,0,!0,!0);break;case"yyy":t=$(B.FullYear,3,0,!1,!0);break;case"yyyy":t=$(B.FullYear,4,0,!1,!0);break;case"Y":t=X(1);break;case"YY":t=X(2,!0);break;case"YYY":t=X(3);break;case"YYYY":t=X(4);break;case"M":case"L":t=$(B.Month,1,1);break;case"MM":case"LL":t=$(B.Month,2,1);break;case"MMM":t=W(j.Months,E.Abbreviated);break;case"MMMM":t=W(j.Months,E.Wide);break;case"MMMMM":t=W(j.Months,E.Narrow);break;case"LLL":t=W(j.Months,E.Abbreviated,T.Standalone);break;case"LLLL":t=W(j.Months,E.Wide,T.Standalone);break;case"LLLLL":t=W(j.Months,E.Narrow,T.Standalone);break;case"w":t=J(1);break;case"ww":t=J(2);break;case"W":t=J(1,!0);break;case"d":t=$(B.Date,1);break;case"dd":t=$(B.Date,2);break;case"c":case"cc":t=$(B.Day,1);break;case"ccc":t=W(j.Days,E.Abbreviated,T.Standalone);break;case"cccc":t=W(j.Days,E.Wide,T.Standalone);break;case"ccccc":t=W(j.Days,E.Narrow,T.Standalone);break;case"cccccc":t=W(j.Days,E.Short,T.Standalone);break;case"E":case"EE":case"EEE":t=W(j.Days,E.Abbreviated);break;case"EEEE":t=W(j.Days,E.Wide);break;case"EEEEE":t=W(j.Days,E.Narrow);break;case"EEEEEE":t=W(j.Days,E.Short);break;case"a":case"aa":case"aaa":t=W(j.DayPeriods,E.Abbreviated);break;case"aaaa":t=W(j.DayPeriods,E.Wide);break;case"aaaaa":t=W(j.DayPeriods,E.Narrow);break;case"b":case"bb":case"bbb":t=W(j.DayPeriods,E.Abbreviated,T.Standalone,!0);break;case"bbbb":t=W(j.DayPeriods,E.Wide,T.Standalone,!0);break;case"bbbbb":t=W(j.DayPeriods,E.Narrow,T.Standalone,!0);break;case"B":case"BB":case"BBB":t=W(j.DayPeriods,E.Abbreviated,T.Format,!0);break;case"BBBB":t=W(j.DayPeriods,E.Wide,T.Format,!0);break;case"BBBBB":t=W(j.DayPeriods,E.Narrow,T.Format,!0);break;case"h":t=$(B.Hours,1,-12);break;case"hh":t=$(B.Hours,2,-12);break;case"H":t=$(B.Hours,1);break;case"HH":t=$(B.Hours,2);break;case"m":t=$(B.Minutes,1);break;case"mm":t=$(B.Minutes,2);break;case"s":t=$(B.Seconds,1);break;case"ss":t=$(B.Seconds,2);break;case"S":t=$(B.FractionalSeconds,1);break;case"SS":t=$(B.FractionalSeconds,2);break;case"SSS":t=$(B.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=K(q.Short);break;case"ZZZZZ":t=K(q.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=K(q.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=K(q.Long);break;default:return null}return ee[e]=t,t}(e);l+=t?t(r,n,a):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function z(e,t,n){const i=new Date(0);return i.setFullYear(e,t,n),i.setHours(0,0,0),i}function G(e,t){const n=function(e){return(0,i.cg1)(e)[i.wAp.LocaleId]}(e);if(V[n]=V[n]||{},V[n][t])return V[n][t];let r="";switch(t){case"shortDate":r=A(e,x.Short);break;case"mediumDate":r=A(e,x.Medium);break;case"longDate":r=A(e,x.Long);break;case"fullDate":r=A(e,x.Full);break;case"shortTime":r=D(e,x.Short);break;case"mediumTime":r=D(e,x.Medium);break;case"longTime":r=D(e,x.Long);break;case"fullTime":r=D(e,x.Full);break;case"short":const t=G(e,"shortTime"),n=G(e,"shortDate");r=H(R(e,x.Short),[t,n]);break;case"medium":const i=G(e,"mediumTime"),s=G(e,"mediumDate");r=H(R(e,x.Medium),[i,s]);break;case"long":const o=G(e,"longTime"),a=G(e,"longDate");r=H(R(e,x.Long),[o,a]);break;case"full":const l=G(e,"fullTime"),c=G(e,"fullDate");r=H(R(e,x.Full),[l,c])}return r&&(V[n][t]=r),r}function H(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e}function Y(e,t,n="-",i,r){let s="";(e<0||r&&e<=0)&&(r?e=1-e:(e=-e,s=n));let o=String(e);for(;o.length<t;)o="0"+o;return i&&(o=o.substr(o.length-t)),s+o}function $(e,t,n=0,i=!1,r=!1){return function(s,o){let a=function(e,t){switch(e){case B.FullYear:return t.getFullYear();case B.Month:return t.getMonth();case B.Date:return t.getDate();case B.Hours:return t.getHours();case B.Minutes:return t.getMinutes();case B.Seconds:return t.getSeconds();case B.FractionalSeconds:return t.getMilliseconds();case B.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,s);if((n>0||a>-n)&&(a+=n),e===B.Hours)0===a&&-12===n&&(a=12);else if(e===B.FractionalSeconds)return l=t,Y(a,3).substr(0,l);var l;const c=O(o,I.MinusSign);return Y(a,t,c,i,r)}}function W(e,t,n=T.Format,r=!1){return function(s,o){return function(e,t,n,r,s,o){switch(n){case j.Months:return function(e,t,n){const r=(0,i.cg1)(e),s=F([r[i.wAp.MonthsFormat],r[i.wAp.MonthsStandalone]],t);return F(s,n)}(t,s,r)[e.getMonth()];case j.Days:return function(e,t,n){const r=(0,i.cg1)(e),s=F([r[i.wAp.DaysFormat],r[i.wAp.DaysStandalone]],t);return F(s,n)}(t,s,r)[e.getDay()];case j.DayPeriods:const a=e.getHours(),l=e.getMinutes();if(o){const e=function(e){const t=(0,i.cg1)(e);return N(t),(t[i.wAp.ExtraData][2]||[]).map(e=>"string"==typeof e?L(e):[L(e[0]),L(e[1])])}(t),n=function(e,t,n){const r=(0,i.cg1)(e);N(r);const s=F([r[i.wAp.ExtraData][0],r[i.wAp.ExtraData][1]],t)||[];return F(s,n)||[]}(t,s,r),o=e.findIndex(e=>{if(Array.isArray(e)){const[t,n]=e,i=a>=t.hours&&l>=t.minutes,r=a<n.hours||a===n.hours&&l<n.minutes;if(t.hours<n.hours){if(i&&r)return!0}else if(i||r)return!0}else if(e.hours===a&&e.minutes===l)return!0;return!1});if(-1!==o)return n[o]}return function(e,t,n){const r=(0,i.cg1)(e),s=F([r[i.wAp.DayPeriodsFormat],r[i.wAp.DayPeriodsStandalone]],t);return F(s,n)}(t,s,r)[a<12?0:1];case j.Eras:return function(e,t){return F((0,i.cg1)(e)[i.wAp.Eras],t)}(t,r)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(s,o,e,t,n,r)}}function K(e){return function(t,n,i){const r=-1*i,s=O(n,I.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(e){case q.Short:return(r>=0?"+":"")+Y(o,2,s)+Y(Math.abs(r%60),2,s);case q.ShortGMT:return"GMT"+(r>=0?"+":"")+Y(o,1,s);case q.Long:return"GMT"+(r>=0?"+":"")+Y(o,2,s)+":"+Y(Math.abs(r%60),2,s);case q.Extended:return 0===i?"Z":(r>=0?"+":"")+Y(o,2,s)+":"+Y(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${e}"`)}}}function Q(e){return z(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function J(e,t=!1){return function(n,i){let r;if(t){const e=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,t=n.getDate();r=1+Math.floor((t+e)/7)}else{const e=Q(n),t=function(e){const t=z(e,0,1).getDay();return z(e,0,1+(t<=4?4:11)-t)}(e.getFullYear()),i=e.getTime()-t.getTime();r=1+Math.round(i/6048e5)}return Y(r,e,O(i,I.MinusSign))}}function X(e,t=!1){return function(n,i){return Y(Q(n).getFullYear(),e,O(i,I.MinusSign),t)}}const ee={};function te(e,t){e=e.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function ne(e){return e instanceof Date&&!isNaN(e.valueOf())}class ie{}let re=(()=>{class e extends ie{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(P(t||this.locale)(e)){case k.Zero:return"zero";case k.One:return"one";case k.Two:return"two";case k.Few:return"few";case k.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.soG))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function se(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[i,r]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(i.trim()===t)return decodeURIComponent(r)}return null}let oe=(()=>{class e{constructor(e,t,n,i){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,i.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,i.AaK)(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.ZZ4),i.Y36(i.aQg),i.Y36(i.SBq),i.Y36(i.Qsj))},e.\u0275dir=i.lG2({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class ae{constructor(e,t,n,i){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let le=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(nb){throw new Error(`Cannot find a differ supporting object '${t}' of type '${e=t,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,i)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ae(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new ce(e,n);t.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const s=new ce(e,r);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=i,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(i.Rgc),i.Y36(i.ZZ4))},e.\u0275dir=i.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class ce{constructor(e,t){this.record=e,this.view=t}}let ue=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new he,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){de("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){de("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(i.Rgc))},e.\u0275dir=i.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class he{constructor(){this.$implicit=null,this.ngIf=null}}function de(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${(0,i.AaK)(t)}'.`)}class pe{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let fe=(()=>{class e{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),e})(),me=(()=>{class e{constructor(e,t,n){this.ngSwitch=n,n._addCase(),this._view=new pe(e,t)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(i.Rgc),i.Y36(fe,9))},e.\u0275dir=i.lG2({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),e})(),ge=(()=>{class e{constructor(e,t,n){n._addDefault(new pe(e,t))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(i.Rgc),i.Y36(fe,9))},e.\u0275dir=i.lG2({type:e,selectors:[["","ngSwitchDefault",""]]}),e})();function _e(e,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${(0,i.AaK)(e)}'`)}class ye{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class ve{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const be=new ve,we=new ye;let Ce=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if((0,i.QGY)(t))return be;if((0,i.F4k)(t))return we;throw _e(e,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.sBO,16))},e.\u0275pipe=i.Yjl({name:"async",type:e,pure:!1}),e})(),Se=(()=>{class e{constructor(e){this.locale=e}transform(t,n="mediumDate",i,r){if(null==t||""===t||t!=t)return null;try{return Z(t,n,r||this.locale,i)}catch(XR){throw _e(e,XR.message)}}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.soG,16))},e.\u0275pipe=i.Yjl({name:"date",type:e,pure:!0}),e})(),ke=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[{provide:ie,useClass:re}]}),e})();function Te(e){return"server"===e}let Ee=(()=>{class e{}return e.\u0275prov=(0,i.Yz7)({token:e,providedIn:"root",factory:()=>new xe((0,i.LFG)(o),window)}),e})();class xe{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=n.currentNode;for(;i;){const e=i.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}i=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ie(this.window.history)||Ie(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(nb){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(nb){return!1}}}function Ie(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Ae{}class De extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new De,r||(r=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Oe=Oe||document.querySelector("base"),Oe?Oe.getAttribute("href"):null);return null==t?null:function(e){Re=Re||document.createElement("a"),Re.setAttribute("href",e);const t=Re.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){Oe=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return se(document.cookie,e)}}let Re,Oe=null;const Pe=new i.OlP("TRANSITION_ID"),Ne=[{provide:i.ip1,useFactory:function(e,t,n){return()=>{n.get(i.CZH).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[Pe,o,i.zs3],multi:!0}];class Fe{static init(){(0,i.VLi)(new Fe)}addToWindow(e){i.dqk.getAngularTestability=(t,n=!0)=>{const i=e.findTestabilityInTree(t,n);if(null==i)throw new Error("Could not find testability for element.");return i},i.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),i.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),i.dqk.frameworkStabilizers||(i.dqk.frameworkStabilizers=[]),i.dqk.frameworkStabilizers.push(e=>{const t=i.dqk.getAllAngularTestabilities();let n=t.length,r=!1;const s=function(t){r=r||t,n--,0==n&&e(r)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?s().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Le=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const Me=new i.OlP("EventManagerPlugins");let Ve=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let i=0;i<n.length;i++){const t=n[i];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Me),i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class Ue{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=s().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}let qe=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),Be=(()=>{class e extends qe{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const i=this._doc.createElement("style");i.textContent=e,n.push(t.appendChild(i))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(je),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(je))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function je(e){s().remove(e)}const Ze={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ze=/%COMP%/g;function Ge(e,t,n){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?Ge(e,r,n):(r=r.replace(ze,e),n.push(r))}return n}function He(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Ye=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new $e(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case i.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new We(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case i.ifc.ShadowDom:return new Ke(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=Ge(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Ve),i.LFG(Be),i.LFG(i.AFp))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class $e{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Ze[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=i+":"+t;const r=Ze[i];r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const i=Ze[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(i.JOm.DashCase|i.JOm.Important)?e.style.setProperty(t,n,r&i.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&i.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,He(n)):this.eventManager.addEventListener(e,t,He(n))}}class We extends $e{constructor(e,t,n,i){super(e),this.component=n;const r=Ge(i+"-"+n.id,n.styles,[]);t.addStyles(r),this.contentAttr="_ngcontent-%COMP%".replace(ze,i+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(ze,i+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class Ke extends $e{constructor(e,t,n,i){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=Ge(i.id,i.styles,[]);for(let s=0;s<r.length;s++){const e=document.createElement("style");e.textContent=r[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Qe=(()=>{class e extends Ue{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const Je=["alt","control","meta","shift"],Xe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},et={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},tt={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let nt=(()=>{class e extends Ue{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,i){const r=e.parseEventName(n),o=e.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(t,r.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=e._normalizeKey(n.pop());let s="";if(Je.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=r,0!=n.length||0===r.length)return null;const o={};return o.domEventName=i,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&et.hasOwnProperty(t)&&(t=et[t]))}return Xe[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Je.forEach(i=>{i!=n&&(0,tt[i])(e)&&(t+=i+".")}),t+=n,t}static eventCallback(t,n,i){return r=>{e.getEventFullKey(r)===t&&i.runGuarded(()=>n(r))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),it=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,i.Yz7)({factory:function(){return(0,i.LFG)(st)},token:e,providedIn:"root"}),e})();function rt(e){return new st(e.get(o))}let st=(()=>{class e extends it{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case i.q3G.NONE:return t;case i.q3G.HTML:return(0,i.qzn)(t,"HTML")?(0,i.z3N)(t):(0,i.EiD)(this._doc,String(t)).toString();case i.q3G.STYLE:return(0,i.qzn)(t,"Style")?(0,i.z3N)(t):t;case i.q3G.SCRIPT:if((0,i.qzn)(t,"Script"))return(0,i.z3N)(t);throw new Error("unsafe value used in a script context");case i.q3G.URL:return(0,i.yhl)(t),(0,i.qzn)(t,"URL")?(0,i.z3N)(t):(0,i.mCW)(String(t));case i.q3G.RESOURCE_URL:if((0,i.qzn)(t,"ResourceURL"))return(0,i.z3N)(t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,i.JVY)(e)}bypassSecurityTrustStyle(e){return(0,i.L6k)(e)}bypassSecurityTrustScript(e){return(0,i.eBb)(e)}bypassSecurityTrustUrl(e){return(0,i.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,i.pB0)(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o))},e.\u0275prov=(0,i.Yz7)({factory:function(){return rt((0,i.LFG)(i.gxx))},token:e,providedIn:"root"}),e})();const ot=(0,i.eFA)(i._c5,"browser",[{provide:i.Lbi,useValue:"browser"},{provide:i.g9A,useValue:function(){De.makeCurrent(),Fe.init()},multi:!0},{provide:o,useFactory:function(){return(0,i.RDi)(document),document},deps:[]}]),at=[[],{provide:i.zSh,useValue:"root"},{provide:i.qLn,useFactory:function(){return new i.qLn},deps:[]},{provide:Me,useClass:Qe,multi:!0,deps:[o,i.R0b,i.Lbi]},{provide:Me,useClass:nt,multi:!0,deps:[o]},[],{provide:Ye,useClass:Ye,deps:[Ve,Be,i.AFp]},{provide:i.FYo,useExisting:Ye},{provide:qe,useExisting:Be},{provide:Be,useClass:Be,deps:[o]},{provide:i.dDg,useClass:i.dDg,deps:[i.R0b]},{provide:Ve,useClass:Ve,deps:[Me,i.R0b]},{provide:Ae,useClass:Le,deps:[]},[]];let lt=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:i.AFp,useValue:t.appId},{provide:Pe,useExisting:i.AFp},Ne]}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(e,12))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:at,imports:[ke,i.hGG]}),e})();"undefined"!=typeof window&&window;var ct=n(4402),ut=n(5917),ht=n(9765),dt=n(7971);class pt extends ht.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new dt.N;return this._value}next(e){super.next(this._value=e)}}var ft=n(4869),mt=n(9796),gt=n(7393);class _t extends gt.L{notifyNext(e,t,n,i,r){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class yt extends gt.L{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var vt=n(7444),bt=n(7574);function wt(e,t,n,i,r=new yt(e,n,i)){if(!r.closed)return t instanceof bt.y?t.subscribe(r):(0,vt.s)(t)(r)}var Ct=n(6693);const St={};function kt(...e){let t,n;return(0,ft.K)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&(0,mt.k)(e[0])&&(e=e[0]),(0,Ct.n)(e,n).lift(new Tt(t))}class Tt{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Et(e,this.resultSelector))}}class Et extends _t{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(St),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(wt(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const i=this.values,r=this.toRespond?i[n]===St?--this.toRespond:this.toRespond:0;i[n]=t,0===r&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const xt=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();var It=n(3282);function At(...e){return(0,It.J)(1)((0,ut.of)(...e))}var Dt=n(9193);function Rt(e){return new bt.y(t=>{let n;try{n=e()}catch(i){return void t.error(i)}return(n?(0,ct.D)(n):(0,Dt.c)()).subscribe(t)})}var Ot=n(2441),Pt=n(8002),Nt=n(5345);function Ft(e,t){return"function"==typeof t?n=>n.pipe(Ft((n,i)=>(0,ct.D)(e(n,i)).pipe((0,Pt.U)((e,r)=>t(n,e,i,r))))):t=>t.lift(new Lt(e))}class Lt{constructor(e){this.project=e}call(e,t){return t.subscribe(new Mt(e,this.project))}}class Mt extends Nt.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(XR){return void this.destination.error(XR)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new Nt.IY(this),i=this.destination;i.add(n),this.innerSubscription=(0,Nt.ft)(e,n),this.innerSubscription!==n&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Vt=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function Ut(e){return t=>0===e?(0,Dt.c)():t.lift(new qt(e))}class qt{constructor(e){if(this.total=e,this.total<0)throw new Vt}call(e,t){return t.subscribe(new Bt(e,this.total))}}class Bt extends gt.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function jt(...e){const t=e[e.length-1];return(0,ft.K)(t)?(e.pop(),n=>At(e,n,t)):t=>At(e,t)}function Zt(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new zt(e,t,n))}}class zt{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new Gt(e,this.accumulator,this.seed,this.hasSeed))}}class Gt extends gt.L{constructor(e,t,n,i){super(e),this.accumulator=t,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}function Ht(e,t){return function(n){return n.lift(new Yt(e,t))}}class Yt{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new $t(e,this.predicate,this.thisArg))}}class $t extends gt.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}function Wt(e){return function(t){const n=new Kt(e),i=t.lift(n);return n.caught=i}}class Kt{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Qt(e,this.selector,this.caught))}}class Qt extends Nt.Ds{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const i=new Nt.IY(this);this.add(i);const r=(0,Nt.ft)(n,i);r!==i&&this.add(r)}}}var Jt=n(9773);function Xt(e,t){return(0,Jt.zg)(e,t,1)}function en(e){return function(t){return 0===e?(0,Dt.c)():t.lift(new tn(e))}}class tn{constructor(e){if(this.total=e,this.total<0)throw new Vt}call(e,t){return t.subscribe(new nn(e,this.total))}}class nn extends gt.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,i=this.count++;t.length<n?t.push(e):t[i%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=t++%n;e.next(i[r])}}e.complete()}}function rn(e=an){return t=>t.lift(new sn(e))}class sn{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new on(e,this.errorFactory))}}class on extends gt.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function an(){return new xt}function ln(e=null){return t=>t.lift(new cn(e))}class cn{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new un(e,this.defaultValue))}}class un extends gt.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var hn=n(4487);function dn(e,t){const n=arguments.length>=2;return i=>i.pipe(e?Ht((t,n)=>e(t,n,i)):hn.y,Ut(1),n?ln(t):rn(()=>new xt))}var pn=n(3342),fn=n(1307),mn=n(5319);function gn(e){return t=>t.lift(new _n(e))}class _n{constructor(e){this.callback=e}call(e,t){return t.subscribe(new yn(e,this.callback))}}class yn extends gt.L{constructor(e,t){super(e),this.add(new mn.w(t))}}class vn{constructor(e,t){this.id=e,this.url=t}}class bn extends vn{constructor(e,t,n="imperative",i=null){super(e,t),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wn extends vn{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cn extends vn{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Sn extends vn{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kn extends vn{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tn extends vn{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class En extends vn{constructor(e,t,n,i,r){super(e,t),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xn extends vn{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class In extends vn{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class An{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Dn{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Rn{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class On{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pn{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nn{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fn{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ln{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Mn(e){return new Ln(e)}function Vn(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Un(e,t,n){const i=n.path.split("/");if(i.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||i.length<e.length))return null;const r={};for(let s=0;s<i.length;s++){const t=i[s],n=e[s];if(t.startsWith(":"))r[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function qn(e,t){const n=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!Bn(e[r],t[r]))return!1;return!0}function Bn(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),i=[...t].sort();return n.every((e,t)=>i[t]===e)}return e===t}function jn(e){return Array.prototype.concat.apply([],e)}function Zn(e){return e.length>0?e[e.length-1]:null}function zn(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Gn(e){return(0,i.CqO)(e)?e:(0,i.QGY)(e)?(0,ct.D)(Promise.resolve(e)):(0,ut.of)(e)}const Hn={exact:function e(t,n,i){if(!ti(t.segments,n.segments))return!1;if(!Qn(t.segments,n.segments,i))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r],i))return!1}return!0},subset:Wn},Yn={exact:function(e,t){return qn(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Bn(e[n],t[n]))},ignored:()=>!0};function $n(e,t,n){return Hn[n.paths](e.root,t.root,n.matrixParams)&&Yn[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function Wn(e,t,n){return Kn(e,t,t.segments,n)}function Kn(e,t,n,i){if(e.segments.length>n.length){const r=e.segments.slice(0,n.length);return!!ti(r,n)&&!t.hasChildren()&&!!Qn(r,n,i)}if(e.segments.length===n.length){if(!ti(e.segments,n))return!1;if(!Qn(e.segments,n,i))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!Wn(e.children[n],t.children[n],i))return!1}return!0}{const r=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!ti(e.segments,r)&&!!Qn(e.segments,r,i)&&!!e.children.primary&&Kn(e.children.primary,t,s,i)}}function Qn(e,t,n){return t.every((t,i)=>Yn[n](e[i].parameters,t.parameters))}class Jn{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mn(this.queryParams)),this._queryParamMap}toString(){return ri.serialize(this)}}class Xn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,zn(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return si(this)}}class ei{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Mn(this.parameters)),this._parameterMap}toString(){return di(this)}}function ti(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class ni{}class ii{parse(e){const t=new _i(e);return new Jn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`/${oi(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${li(t)}=${li(e)}`).join("&"):`${li(t)}=${li(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const ri=new ii;function si(e){return e.segments.map(e=>di(e)).join("/")}function oi(e,t){if(!e.hasChildren())return si(e);if(t){const t=e.children.primary?oi(e.children.primary,!1):"",n=[];return zn(e.children,(e,t)=>{"primary"!==t&&n.push(`${t}:${oi(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return zn(e.children,(e,i)=>{"primary"===i&&(n=n.concat(t(e,i)))}),zn(e.children,(e,i)=>{"primary"!==i&&(n=n.concat(t(e,i)))}),n}(e,(t,n)=>"primary"===n?[oi(e.children.primary,!1)]:[`${n}:${oi(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${si(e)}/${t[0]}`:`${si(e)}/(${t.join("//")})`}}function ai(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function li(e){return ai(e).replace(/%3B/gi,";")}function ci(e){return ai(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ui(e){return decodeURIComponent(e)}function hi(e){return ui(e.replace(/\+/g,"%20"))}function di(e){return`${ci(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${ci(e)}=${ci(t[e])}`).join("")}`;var t}const pi=/^[^\/()?;=#]+/;function fi(e){const t=e.match(pi);return t?t[0]:""}const mi=/^[^=?&#]+/,gi=/^[^?&#]+/;class _i{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xn([],{}):new Xn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Xn(e,t)),n}parseSegment(){const e=fi(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ei(ui(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fi(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=fi(this.remaining);e&&(n=e,this.capture(n))}e[ui(t)]=ui(n)}parseQueryParam(e){const t=function(e){const t=e.match(mi);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(gi);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const i=hi(t),r=hi(n);if(e.hasOwnProperty(i)){let t=e[i];Array.isArray(t)||(t=[t],e[i]=t),t.push(r)}else e[i]=r}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=fi(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):e&&(r="primary");const s=this.parseChildren();t[r]=1===Object.keys(s).length?s.primary:new Xn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class yi{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=vi(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=vi(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=bi(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return bi(e,this._root).map(e=>e.value)}}function vi(e,t){if(e===t.value)return t;for(const n of t.children){const t=vi(e,n);if(t)return t}return null}function bi(e,t){if(e===t.value)return[t];for(const n of t.children){const i=bi(e,n);if(i.length)return i.unshift(t),i}return[]}class wi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ci(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Si extends yi{constructor(e,t){super(e),this.snapshot=t,Ai(this,e)}toString(){return this.snapshot.toString()}}function ki(e,t){const n=function(e,t){const n=new xi([],{},{},"",{},"primary",t,null,e.root,-1,{});return new Ii("",new wi(n,[]))}(e,t),i=new pt([new ei("",{})]),r=new pt({}),s=new pt({}),o=new pt({}),a=new pt(""),l=new Ti(i,r,o,a,s,"primary",t,n.root);return l.snapshot=n.root,new Si(new wi(l,[]),n)}class Ti{constructor(e,t,n,i,r,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Pt.U)(e=>Mn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Pt.U)(e=>Mn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ei(e,t="emptyOnly"){const n=e.pathFromRoot;let i=0;if("always"!==t)for(i=n.length-1;i>=1;){const e=n[i],t=n[i-1];if(e.routeConfig&&""===e.routeConfig.path)i--;else{if(t.component)break;i--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class xi{constructor(e,t,n,i,r,s,o,a,l,c,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Mn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ii extends yi{constructor(e,t){super(t),this.url=e,Ai(this,t)}toString(){return Di(this._root)}}function Ai(e,t){t.value._routerState=e,t.children.forEach(t=>Ai(e,t))}function Di(e){const t=e.children.length>0?` { ${e.children.map(Di).join(", ")} } `:"";return`${e.value}${t}`}function Ri(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,qn(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),qn(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!qn(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),qn(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Oi(e,t){return qn(e.params,t.params)&&function(e,t){return ti(e,t)&&e.every((e,n)=>qn(e.parameters,t[n].parameters))}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||Oi(e.parent,t.parent))}function Pi(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=t.value;const r=function(e,t,n){return t.children.map(t=>{for(const i of n.children)if(e.shouldReuseRoute(t.value,i.value.snapshot))return Pi(e,t,i);return Pi(e,t)})}(e,t,n);return new wi(i,r)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return Ni(t,e),e}}const n=new Ti(new pt((i=t.value).url),new pt(i.params),new pt(i.queryParams),new pt(i.fragment),new pt(i.data),i.outlet,i.component,i),r=t.children.map(t=>Pi(e,t));return new wi(n,r)}var i}function Ni(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)Ni(e.children[n],t.children[n])}function Fi(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Li(e){return"object"==typeof e&&null!=e&&e.outlets}function Mi(e,t,n,i,r){let s={};return i&&zn(i,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new Jn(n.root===e?t:Vi(n.root,e,t),s,r)}function Vi(e,t,n){const i={};return zn(e.children,(e,r)=>{i[r]=e===t?n:Vi(e,t,n)}),new Xn(e.segments,i)}class Ui{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Fi(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(Li);if(i&&i!==Zn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qi{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Bi(e,t,n){if(e||(e=new Xn([],{})),0===e.segments.length&&e.hasChildren())return ji(e,t,n);const i=function(e,t,n){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return s;const t=e.segments[r],o=n[i];if(Li(o))break;const a=`${o}`,l=i<n.length-1?n[i+1]:null;if(r>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!Hi(a,l,t))return s;i+=2}else{if(!Hi(a,{},t))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const t=new Xn(e.segments.slice(0,i.pathIndex),{});return t.children.primary=new Xn(e.segments.slice(i.pathIndex),e.children),ji(t,0,r)}return i.match&&0===r.length?new Xn(e.segments,{}):i.match&&!e.hasChildren()?Zi(e,t,n):i.match?ji(e,0,r):Zi(e,t,n)}function ji(e,t,n){if(0===n.length)return new Xn(e.segments,{});{const i=function(e){return Li(e[0])?e[0].outlets:{primary:e}}(n),r={};return zn(i,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(r[i]=Bi(e.children[i],t,n))}),zn(e.children,(e,t)=>{void 0===i[t]&&(r[t]=e)}),new Xn(e.segments,r)}}function Zi(e,t,n){const i=e.segments.slice(0,t);let r=0;for(;r<n.length;){const s=n[r];if(Li(s)){const e=zi(s.outlets);return new Xn(i,e)}if(0===r&&Fi(n[0])){i.push(new ei(e.segments[t].path,Gi(n[0]))),r++;continue}const o=Li(s)?s.outlets.primary:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&Fi(a)?(i.push(new ei(o,Gi(a))),r+=2):(i.push(new ei(o,{})),r++)}return new Xn(i,{})}function zi(e){const t={};return zn(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=Zi(new Xn([],{}),0,e))}),t}function Gi(e){const t={};return zn(e,(e,n)=>t[n]=`${e}`),t}function Hi(e,t,n){return e==n.path&&qn(t,n.parameters)}class Yi{constructor(e,t,n,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=i}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Ri(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const i=Ci(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,i[t],n),delete i[t]}),zn(i,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const i=e.value,r=t?t.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(e,t,r.children)}else this.deactivateChildRoutes(e,t,n);else r&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:i})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,r=Ci(e);for(const s of Object.keys(r))this.deactivateRouteAndItsChildren(r[s],i);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const i=Ci(t);e.children.forEach(e=>{this.activateRoutes(e,i[e.value.outlet],n),this.forwardEvent(new Nn(e.value.snapshot))}),e.children.length&&this.forwardEvent(new On(e.value.snapshot))}activateRoutes(e,t,n){const i=e.value,r=t?t.value:null;if(Ri(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,r.children)}else this.activateChildRoutes(e,t,n);else if(i.component){const t=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const e=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),$i(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),r=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=i,t.resolver=r,t.outlet&&t.outlet.activateWith(i,r),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function $i(e){Ri(e.value),e.children.forEach($i)}class Wi{constructor(e,t){this.routes=e,this.module=t}}function Ki(e){return"function"==typeof e}function Qi(e){return e instanceof Jn}const Ji=Symbol("INITIAL_VALUE");function Xi(){return Ft(e=>kt(e.map(e=>e.pipe(Ut(1),jt(Ji)))).pipe(Zt((e,t)=>{let n=!1;return t.reduce((e,i,r)=>{if(e!==Ji)return e;if(i===Ji&&(n=!0),!n){if(!1===i)return i;if(r===t.length-1||Qi(i))return i}return e},e)},Ji),Ht(e=>e!==Ji),(0,Pt.U)(e=>Qi(e)?e:!0===e),Ut(1)))}let er=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&i._UZ(0,"router-outlet")},directives:function(){return[Kr]},encapsulation:2}),e})();function tr(e,t=""){for(let n=0;n<e.length;n++){const i=e[n];nr(i,ir(t,i))}}function nr(e,t){e.children&&tr(e.children,t)}function ir(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function rr(e){const t=e.children&&e.children.map(rr),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=er),n}function sr(e){return e.outlet||"primary"}function or(e,t){const n=e.filter(e=>sr(e)===t);return n.push(...e.filter(e=>sr(e)!==t)),n}const ar={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function lr(e,t,n){var i;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},ar):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const r=(t.matcher||Un)(n,e,t);if(!r)return Object.assign({},ar);const s={};zn(r.posParams,(e,t)=>{s[t]=e.path});const o=r.consumed.length>0?Object.assign(Object.assign({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o,positionalParamSegments:null!==(i=r.posParams)&&void 0!==i?i:{}}}function cr(e,t,n,i,r="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>ur(e,t,n)&&"primary"!==sr(n))}(e,n,i)){const r=new Xn(t,function(e,t,n,i){const r={};r.primary=i,i._sourceSegment=e,i._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&"primary"!==sr(s)){const n=new Xn([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,r[sr(s)]=n}return r}(e,t,i,new Xn(n,e.children)));return r._sourceSegment=e,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>ur(e,t,n))}(e,n,i)){const s=new Xn(e.segments,function(e,t,n,i,r,s){const o={};for(const a of i)if(ur(e,n,a)&&!r[sr(a)]){const n=new Xn([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[sr(a)]=n}return Object.assign(Object.assign({},r),o)}(e,t,n,i,e.children,r));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new Xn(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function ur(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function hr(e,t,n,i){return!!(sr(e)===i||"primary"!==i&&ur(t,n,e))&&("**"===e.path||lr(t,e,n).matched)}function dr(e,t,n){return 0===t.length&&!e.children[n]}class pr{constructor(e){this.segmentGroup=e||null}}class fr{constructor(e){this.urlTree=e}}function mr(e){return new bt.y(t=>t.error(new pr(e)))}function gr(e){return new bt.y(t=>t.error(new fr(e)))}function _r(e){return new bt.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class yr{constructor(e,t,n,r,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(i.h0i)}apply(){const e=cr(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,"primary").pipe((0,Pt.U)(e=>this.createUrlTree(vr(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Wt(e=>{if(e instanceof fr)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof pr)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe((0,Pt.U)(t=>this.createUrlTree(vr(t),e.queryParams,e.fragment))).pipe(Wt(e=>{if(e instanceof pr)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const i=e.segments.length>0?new Xn([],{primary:e}):e;return new Jn(i,t,n)}expandSegmentGroup(e,t,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,Pt.U)(e=>new Xn([],e))):this.expandSegment(e,n,t,n.segments,i,!0)}expandChildren(e,t,n){const i=[];for(const r of Object.keys(n.children))"primary"===r?i.unshift(r):i.push(r);return(0,ct.D)(i).pipe(Xt(i=>{const r=n.children[i],s=or(t,i);return this.expandSegmentGroup(e,s,r,i).pipe((0,Pt.U)(e=>({segment:e,outlet:i})))}),Zt((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return i=>i.pipe(e?Ht((t,n)=>e(t,n,i)):hn.y,en(1),n?ln(t):rn(()=>new xt))}())}expandSegment(e,t,n,i,r,s){return(0,ct.D)(n).pipe(Xt(o=>this.expandSegmentAgainstRoute(e,t,n,o,i,r,s).pipe(Wt(e=>{if(e instanceof pr)return(0,ut.of)(null);throw e}))),dn(e=>!!e),Wt((e,n)=>{if(e instanceof xt||"EmptyError"===e.name){if(dr(t,i,r))return(0,ut.of)(new Xn([],{}));throw new pr(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,i,r,s,o){return hr(i,t,r,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,r,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,i,r,s):mr(t):mr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,i,r,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,r,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?gr(r):this.lineralizeSegments(n,r).pipe((0,Jt.zg)(n=>{const r=new Xn(n,{});return this.expandSegment(e,r,t,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,r,s){const{matched:o,consumedSegments:a,lastChild:l,positionalParamSegments:c}=lr(t,i,r);if(!o)return mr(t);const u=this.applyRedirectCommands(a,i.redirectTo,c);return i.redirectTo.startsWith("/")?gr(u):this.lineralizeSegments(i,u).pipe((0,Jt.zg)(i=>this.expandSegment(e,t,n,i.concat(r.slice(l)),s,!1)))}matchSegmentAgainstRoute(e,t,n,i,r){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,ut.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,Pt.U)(e=>(n._loadedConfig=e,new Xn(i,{})))):(0,ut.of)(new Xn(i,{}));const{matched:s,consumedSegments:o,lastChild:a}=lr(t,n,i);if(!s)return mr(t);const l=i.slice(a);return this.getChildConfig(e,n,i).pipe((0,Jt.zg)(e=>{const i=e.module,s=e.routes,{segmentGroup:a,slicedSegments:c}=cr(t,o,l,s),u=new Xn(a.segments,a.children);if(0===c.length&&u.hasChildren())return this.expandChildren(i,s,u).pipe((0,Pt.U)(e=>new Xn(o,e)));if(0===s.length&&0===c.length)return(0,ut.of)(new Xn(o,{}));const h=sr(n)===r;return this.expandSegment(i,u,s,c,h?"primary":r,!0).pipe((0,Pt.U)(e=>new Xn(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,ut.of)(new Wi(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,ut.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,Jt.zg)(n=>n?this.configLoader.load(e.injector,t).pipe((0,Pt.U)(e=>(t._loadedConfig=e,e))):function(e){return new bt.y(t=>t.error(Vn(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):(0,ut.of)(new Wi([],e))}runCanLoadGuards(e,t,n){const i=t.canLoad;if(!i||0===i.length)return(0,ut.of)(!0);const r=i.map(i=>{const r=e.get(i);let s;if(function(e){return e&&Ki(e.canLoad)}(r))s=r.canLoad(t,n);else{if(!Ki(r))throw new Error("Invalid CanLoad guard");s=r(t,n)}return Gn(s)});return(0,ut.of)(r).pipe(Xi(),(0,pn.b)(e=>{if(!Qi(e))return;const t=Vn(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,Pt.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],i=t.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return(0,ut.of)(n);if(i.numberOfChildren>1||!i.children.primary)return _r(e.redirectTo);i=i.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,i){const r=this.createSegmentGroup(e,t.root,n,i);return new Jn(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return zn(e,(e,i)=>{if("string"==typeof e&&e.startsWith(":")){const r=e.substring(1);n[i]=t[r]}else n[i]=e}),n}createSegmentGroup(e,t,n,i){const r=this.createSegments(e,t.segments,n,i);let s={};return zn(t.children,(t,r)=>{s[r]=this.createSegmentGroup(e,t,n,i)}),new Xn(r,s)}createSegments(e,t,n,i){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,i):this.findOrReturn(t,n))}findPosParam(e,t,n){const i=n[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let n=0;for(const i of t){if(i.path===e.path)return t.splice(n),i;n++}return e}}function vr(e){const t={};for(const n of Object.keys(e.children)){const i=vr(e.children[n]);(i.segments.length>0||i.hasChildren())&&(t[n]=i)}return function(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new Xn(e.segments.concat(t.segments),t.children)}return e}(new Xn(e.segments,t))}class br{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wr{constructor(e,t){this.component=e,this.route=t}}function Cr(e,t,n){const i=e._root;return kr(i,t?t._root:null,n,[i.value])}function Sr(e,t,n){const i=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:n).get(e)}function kr(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ci(t);return e.children.forEach(e=>{!function(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!ti(e.url,t.url);case"pathParamsOrQueryParamsChange":return!ti(e.url,t.url)||!qn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oi(e,t)||!qn(e.queryParams,t.queryParams);case"paramsChange":default:return!Oi(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new br(i)):(s.data=o.data,s._resolvedData=o._resolvedData),kr(e,t,s.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new wr(a.outlet.component,o))}else o&&Tr(t,a,r),r.canActivateChecks.push(new br(i)),kr(e,null,s.component?a?a.children:null:n,i,r)}(e,s[e.value.outlet],n,i.concat([e.value]),r),delete s[e.value.outlet]}),zn(s,(e,t)=>Tr(e,n.getContext(t),r)),r}function Tr(e,t,n){const i=Ci(e),r=e.value;zn(i,(e,i)=>{Tr(e,r.component?t?t.children.getContext(i):null:t,n)}),n.canDeactivateChecks.push(new wr(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class Er{}function xr(e){return new bt.y(t=>t.error(e))}class Ir{constructor(e,t,n,i,r,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=s}recognize(){const e=cr(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary");if(null===t)return null;const n=new xi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),i=new wi(n,t),r=new Ii(this.url,i);return this.inheritParamsAndData(r._root),r}inheritParamsAndData(e){const t=e.value,n=Ei(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const r of Object.keys(t.children)){const i=t.children[r],s=or(e,r),o=this.processSegmentGroup(s,i,r);if(null===o)return null;n.push(...o)}const i=Dr(n);return i.sort((e,t)=>"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,n,i){for(const r of e){const e=this.processSegmentAgainstRoute(r,t,n,i);if(null!==e)return e}return dr(t,n,i)?[]:null}processSegmentAgainstRoute(e,t,n,i){if(e.redirectTo||!hr(e,t,n,i))return null;let r,s=[],o=[];if("**"===e.path){const i=n.length>0?Zn(n).parameters:{};r=new xi(n,i,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Pr(e),sr(e),e.component,e,Rr(t),Or(t)+n.length,Nr(e))}else{const i=lr(t,e,n);if(!i.matched)return null;s=i.consumedSegments,o=n.slice(i.lastChild),r=new xi(s,i.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Pr(e),sr(e),e.component,e,Rr(t),Or(t)+s.length,Nr(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:l,slicedSegments:c}=cr(t,s,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const e=this.processChildren(a,l);return null===e?null:[new wi(r,e)]}if(0===a.length&&0===c.length)return[new wi(r,[])];const u=sr(e)===i,h=this.processSegment(a,l,c,u?"primary":i);return null===h?null:[new wi(r,h)]}}function Ar(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Dr(e){const t=[],n=new Set;for(const i of e){if(!Ar(i)){t.push(i);continue}const e=t.find(e=>i.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...i.children),n.add(e)):t.push(i)}for(const i of n){const e=Dr(i.children);t.push(new wi(i.value,e))}return t.filter(e=>!n.has(e))}function Rr(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Or(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Pr(e){return e.data||{}}function Nr(e){return e.resolve||{}}function Fr(e){return Ft(t=>{const n=e(t);return n?(0,ct.D)(n).pipe((0,Pt.U)(()=>t)):(0,ut.of)(t)})}class Lr extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Mr=new i.OlP("ROUTES");class Vr{constructor(e,t,n,i){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,Pt.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new Wi(jn(r.injector.get(Mr,void 0,i.XFs.Self|i.XFs.Optional)).map(rr),r)}),Wt(e=>{throw t._loader$=void 0,e}));return t._loader$=new Ot.c(n,()=>new ht.xQ).pipe((0,fn.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,ct.D)(this.loader.load(e)):Gn(e()).pipe((0,Jt.zg)(e=>e instanceof i.YKP?(0,ut.of)(e):(0,ct.D)(this.compiler.compileModuleAsync(e))))}}class Ur{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new qr,this.attachRef=null}}class qr{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ur,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Br{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function jr(e){throw e}function Zr(e,t,n){return t.parse("/")}function zr(e,t){return(0,ut.of)(null)}const Gr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Yr=(()=>{class e{constructor(e,t,n,r,s,o,a,l){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ht.xQ,this.errorHandler=jr,this.malformedUriErrorHandler=Zr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:zr,afterPreactivation:zr},this.urlHandlingStrategy=new Br,this.routeReuseStrategy=new Lr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(i.h0i),this.console=s.get(i.c2e);const c=s.get(i.R0b);this.isNgZoneEnabled=c instanceof i.R0b&&i.R0b.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=new Jn(new Xn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Vr(o,a,e=>this.triggerEvent(new An(e)),e=>this.triggerEvent(new Dn(e))),this.routerState=ki(this.currentUrlTree,this.rootComponentType),this.transitions=new pt({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const t=this.events;return e.pipe(Ht(e=>0!==e.id),(0,Pt.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Ft(e=>{let n=!1,i=!1;return(0,ut.of)(e).pipe((0,pn.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ft(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,ut.of)(e).pipe(Ft(e=>{const n=this.transitions.getValue();return t.next(new bn(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?Dt.E:Promise.resolve(e)}),(i=this.ngModule.injector,r=this.configLoader,s=this.urlSerializer,o=this.config,Ft(e=>function(e,t,n,i,r){return new yr(e,t,n,i,r).apply()}(i,r,s,e.extractedUrl,o).pipe((0,Pt.U)(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),(0,pn.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,i,r){return(0,Jt.zg)(s=>function(e,t,n,i,r="emptyOnly",s="legacy"){try{const o=new Ir(e,t,n,i,r,s).recognize();return null===o?xr(new Er):(0,ut.of)(o)}catch(o){return xr(o)}}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),i,r).pipe((0,Pt.U)(e=>Object.assign(Object.assign({},s),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,pn.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new kn(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var i,r,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:s,extras:o}=e,a=new bn(n,this.serializeUrl(i),r,s);t.next(a);const l=ki(i,this.rootComponentType).snapshot;return(0,ut.of)(Object.assign(Object.assign({},e),{targetSnapshot:l,urlAfterRedirects:i,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Dt.E}),Fr(e=>{const{targetSnapshot:t,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),(0,pn.b)(e=>{const t=new Tn(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,Pt.U)(e=>Object.assign(Object.assign({},e),{guards:Cr(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,Jt.zg)(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,ut.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,i){return(0,ct.D)(e).pipe((0,Jt.zg)(e=>function(e,t,n,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,ut.of)(!0);const o=s.map(s=>{const o=Sr(s,t,r);let a;if(function(e){return e&&Ki(e.canDeactivate)}(o))a=Gn(o.canDeactivate(e,t,n,i));else{if(!Ki(o))throw new Error("Invalid CanDeactivate guard");a=Gn(o(e,t,n,i))}return a.pipe(dn())});return(0,ut.of)(o).pipe(Xi())}(e.component,e.route,n,t,i)),dn(e=>!0!==e,!0))}(o,i,r,e).pipe((0,Jt.zg)(n=>n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,i){return(0,ct.D)(t).pipe(Xt(t=>At(function(e,t){return null!==e&&t&&t(new Rn(e)),(0,ut.of)(!0)}(t.route.parent,i),function(e,t){return null!==e&&t&&t(new Pn(e)),(0,ut.of)(!0)}(t.route,i),function(e,t,n){const i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>Rt(()=>{const r=t.guards.map(r=>{const s=Sr(r,t.node,n);let o;if(function(e){return e&&Ki(e.canActivateChild)}(s))o=Gn(s.canActivateChild(i,e));else{if(!Ki(s))throw new Error("Invalid CanActivateChild guard");o=Gn(s(i,e))}return o.pipe(dn())});return(0,ut.of)(r).pipe(Xi())}));return(0,ut.of)(r).pipe(Xi())}(e,t.path,n),function(e,t,n){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return(0,ut.of)(!0);const r=i.map(i=>Rt(()=>{const r=Sr(i,t,n);let s;if(function(e){return e&&Ki(e.canActivate)}(r))s=Gn(r.canActivate(t,e));else{if(!Ki(r))throw new Error("Invalid CanActivate guard");s=Gn(r(t,e))}return s.pipe(dn())}));return(0,ut.of)(r).pipe(Xi())}(e,t.route,n))),dn(e=>!0!==e,!0))}(i,s,e,t):(0,ut.of)(n)),(0,Pt.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,pn.b)(e=>{if(Qi(e.guardsResult)){const t=Vn(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new En(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Ht(e=>!!e.guardsResult||(this.restoreHistory(e),this.cancelNavigationTransition(e,""),!1)),Fr(e=>{if(e.guards.canActivateChecks.length)return(0,ut.of)(e).pipe((0,pn.b)(e=>{const t=new xn(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),Ft(e=>{let t=!1;return(0,ut.of)(e).pipe((n=this.paramsInheritanceStrategy,i=this.ngModule.injector,(0,Jt.zg)(e=>{const{targetSnapshot:t,guards:{canActivateChecks:r}}=e;if(!r.length)return(0,ut.of)(e);let s=0;return(0,ct.D)(r).pipe(Xt(e=>function(e,t,n,i){return function(e,t,n,i){const r=Object.keys(e);if(0===r.length)return(0,ut.of)({});const s={};return(0,ct.D)(r).pipe((0,Jt.zg)(r=>function(e,t,n,i){const r=Sr(e,t,i);return Gn(r.resolve?r.resolve(t,n):r(t,n))}(e[r],t,n,i).pipe((0,pn.b)(e=>{s[r]=e}))),en(1),(0,Jt.zg)(()=>Object.keys(s).length===r.length?(0,ut.of)(s):Dt.E))}(e._resolve,e,t,i).pipe((0,Pt.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Ei(e,n).resolve),null)))}(e.route,t,n,i)),(0,pn.b)(()=>s++),en(1),(0,Jt.zg)(t=>s===r.length?(0,ut.of)(e):Dt.E))})),(0,pn.b)({next:()=>t=!0,complete:()=>{t||(this.restoreHistory(e),this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}));var n,i}),(0,pn.b)(e=>{const t=new In(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),Fr(e=>{const{targetSnapshot:t,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Pt.U)(e=>{const t=function(e,t,n){const i=Pi(e,t._root,n?n._root:void 0);return new Si(i,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,pn.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),(r=this.rootContexts,s=this.routeReuseStrategy,o=e=>this.triggerEvent(e),(0,Pt.U)(e=>(new Yi(s,e.targetRouterState,e.currentRouterState,o).activate(r),e))),(0,pn.b)({next(){n=!0},complete(){n=!0}}),gn(()=>{if(!n&&!i){const t=`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(e),this.cancelNavigationTransition(e,t)):this.cancelNavigationTransition(e,t)}this.currentNavigation=null}),Wt(n=>{if(i=!0,function(e){return e&&e.ngNavigationCancelingError}(n)){const i=Qi(n.url);i||(this.navigated=!0,this.restoreHistory(e,!0));const r=new Cn(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(r),i?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.restoreHistory(e,!0);const i=new Sn(e.id,this.serializeUrl(e.extractedUrl),n);t.next(i);try{e.resolve(this.errorHandler(n))}catch(Sd){e.reject(Sd)}}return Dt.E}));var r,s,o}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:i}=t,r={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(r.state=e)}this.scheduleNavigation(i,e,n,r)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){tr(e),this.config=e.map(rr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:i,fragment:r,queryParamsHandling:s,preserveFragment:o}=t,a=n||this.routerState.root,l=o?this.currentUrlTree.fragment:r;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=i||null}return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,i,r){if(0===n.length)return Mi(t.root,t.root,t,i,r);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Ui(!0,0,e);let t=0,n=!1;const i=e.reduce((e,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const t={};return zn(i.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(i.segmentPath)return[...e,i.segmentPath]}return"string"!=typeof i?[...e,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?t++:""!=i&&e.push(i))}),e):[...e,i]},[]);return new Ui(n,t,i)}(n);if(s.toRoot())return Mi(t.root,new Xn([],{}),t,i,r);const o=function(e,t,n){if(e.isAbsolute)return new qi(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new qi(e,e===t.root,0)}const i=Fi(e.commands[0])?0:1;return function(e,t,n){let i=e,r=t,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new qi(i,!1,r-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?ji(o.segmentGroup,o.index,s.commands):Bi(o.segmentGroup,o.index,s.commands);return Mi(o.segmentGroup,a,t,i,r)}(a,this.currentUrlTree,e,c,null!=l?l:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=Qi(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},Gr):!1===t?Object.assign({},Hr):t,Qi(e))return $n(this.currentUrlTree,e,n);const i=this.parseUrl(e);return $n(this.currentUrlTree,i,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const i=e[n];return null!=i&&(t[n]=i),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new wn(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,i,r){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),l="imperative"!==t&&"imperative"===(null==a?void 0:a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===e.toString();if(l&&c)return Promise.resolve(!0);let u,h,d;r?(u=r.resolve,h=r.reject,d=r.promise):d=new Promise((e,t)=>{u=e,h=t});const p=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),f=n&&n.\u0275routerPageId?n.\u0275routerPageId:i.replaceUrl||i.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):f=0,this.setTransition({id:p,targetPageId:f,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:i,resolve:u,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),i=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",i):this.location.go(n,"",i)}restoreHistory(e,t=!1){var n,i;if("computed"===this.canceledNavigationResolution){const t=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===t?this.currentUrlTree===(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)&&0===t&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(t)}else"replace"===this.canceledNavigationResolution&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){const n=new Cn(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.DyG),i.LFG(ni),i.LFG(qr),i.LFG(w),i.LFG(i.zs3),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(void 0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),$r=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.onChanges=new ht.xQ,this.subscription=e.events.subscribe(e=>{e instanceof wn&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,i,r){if(0!==e||t||n||i||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:Wr(this.skipLocationChange),replaceUrl:Wr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Wr(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Yr),i.Y36(Ti),i.Y36(g))},e.\u0275dir=i.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(i.Ikx("href",t.href,i.LSH),i.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[i.TTD]}),e})();function Wr(e){return""===e||!!e}let Kr=(()=>{class e{constructor(e,t,n,r,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.vpe,this.deactivateEvents=new i.vpe,this.name=r||"primary",e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new Qr(e,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(qr),i.Y36(i.s_b),i.Y36(i._Vd),i.$8M("name"),i.Y36(i.sBO))},e.\u0275dir=i.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class Qr{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Ti?this.route:e===qr?this.childContexts:this.parent.get(e,t)}}class Jr{}class Xr{preload(e,t){return(0,ut.of)(null)}}let es=(()=>{class e{constructor(e,t,n,i,r){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=new Vr(t,n,t=>e.triggerEvent(new An(t)),t=>e.triggerEvent(new Dn(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ht(e=>e instanceof wn),Xt(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(i.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const i of t)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const e=i._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(e,i)):i.children&&n.push(this.processRoutes(e,i.children));return(0,ct.D)(n).pipe((0,It.J)(),(0,Pt.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,ut.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,Jt.zg)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Yr),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(i.zs3),i.LFG(Jr))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),ts=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof bn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof wn&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Fn&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Fn(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Yr),i.LFG(Ee),i.LFG(void 0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const ns=new i.OlP("ROUTER_CONFIGURATION"),is=new i.OlP("ROUTER_FORROOT_GUARD"),rs=[w,{provide:ni,useClass:ii},{provide:Yr,useFactory:function(e,t,n,i,r,s,o,a={},l,c){const u=new Yr(null,e,t,n,i,r,s,jn(o));return l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,u),a.enableTracing&&u.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),u},deps:[ni,qr,w,i.zs3,i.v3s,i.Sil,Mr,ns,[class{},new i.FiY],[class{},new i.FiY]]},qr,{provide:Ti,useFactory:function(e){return e.routerState.root},deps:[Yr]},{provide:i.v3s,useClass:i.EAV},es,Xr,class{preload(e,t){return t().pipe(Wt(()=>(0,ut.of)(null)))}},{provide:ns,useValue:{enableTracing:!1}}];function ss(){return new i.PXZ("Router",Yr)}let os=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[rs,us(t),{provide:is,useFactory:cs,deps:[[Yr,new i.FiY,new i.tp0]]},{provide:ns,useValue:n||{}},{provide:g,useFactory:ls,deps:[a,[new i.tBr(y),new i.FiY],ns]},{provide:ts,useFactory:as,deps:[Yr,Ee,ns]},{provide:Jr,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Xr},{provide:i.PXZ,multi:!0,useFactory:ss},[hs,{provide:i.ip1,multi:!0,useFactory:ds,deps:[hs]},{provide:fs,useFactory:ps,deps:[hs]},{provide:i.tb,multi:!0,useExisting:fs}]]}}static forChild(t){return{ngModule:e,providers:[us(t)]}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(is,8),i.LFG(Yr,8))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})();function as(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new ts(e,t,n)}function ls(e,t,n={}){return n.useHash?new b(e,t):new v(e,t)}function cs(e){return"guarded"}function us(e){return[{provide:i.deG,multi:!0,useValue:e},{provide:Mr,multi:!0,useValue:e}]}let hs=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ht.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let e=null;const t=new Promise(t=>e=t),n=this.injector.get(Yr),i=this.injector.get(ns);return"disabled"===i.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,ut.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(ns),n=this.injector.get(es),r=this.injector.get(ts),s=this.injector.get(Yr),o=this.injector.get(i.z2F);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||s.initialNavigation(),n.setUpPreloading(),r.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.zs3))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function ds(e){return e.appInitializer.bind(e)}function ps(e){return e.bootstrapListener.bind(e)}const fs=new i.OlP("Router Initializer");var ms=n(1555);function gs(...e){if(1===e.length){const t=e[0];if((0,mt.k)(t))return _s(t,null);if((0,ms.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return _s(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return _s(e=1===e.length&&(0,mt.k)(e[0])?e[0]:e,null).pipe((0,Pt.U)(e=>t(...e)))}return _s(e,null)}function _s(e,t){return new bt.y(n=>{const i=e.length;if(0===i)return void n.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const l=(0,ct.D)(e[a]);let c=!1;n.add(l.subscribe({next:e=>{c||(c=!0,o++),r[a]=e},error:e=>n.error(e),complete:()=>{s++,s!==i&&c||(o===i&&n.next(t?t.reduce((e,t,n)=>(e[t]=r[n],e),{}):r),n.complete())}}))}})}let ys=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.Qsj),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e}),e})(),vs=(()=>{class e extends ys{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275dir=i.lG2({type:e,features:[i.qOj]}),e})();const bs=new i.OlP("NgValueAccessor"),ws={provide:bs,useExisting:(0,i.Gpc)(()=>Ss),multi:!0},Cs=new i.OlP("CompositionEventMode");let Ss=(()=>{class e extends ys{constructor(e,t,n){super(e,t),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=s()?s().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(Cs,8))},e.\u0275dir=i.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&i.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[i._Bn([ws]),i.qOj]}),e})();function ks(e){return null==e||0===e.length}function Ts(e){return null!=e&&"number"==typeof e.length}const Es=new i.OlP("NgValidators"),xs=new i.OlP("NgAsyncValidators"),Is=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class As{static min(e){return function(e){return t=>{if(ks(t.value)||ks(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(e)}static max(e){return function(e){return t=>{if(ks(t.value)||ks(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(e)}static required(e){return Ds(e)}static requiredTrue(e){return function(e){return!0===e.value?null:{required:!0}}(e)}static email(e){return function(e){return ks(e.value)||Is.test(e.value)?null:{email:!0}}(e)}static minLength(e){return function(e){return t=>ks(t.value)||!Ts(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}(e)}static maxLength(e){return function(e){return t=>Ts(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}(e)}static pattern(e){return function(e){if(!e)return Rs;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(ks(e.value))return null;const i=e.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Ms(e)}static composeAsync(e){return Us(e)}}function Ds(e){return ks(e.value)?{required:!0}:null}function Rs(e){return null}function Os(e){return null!=e}function Ps(e){const t=(0,i.QGY)(e)?(0,ct.D)(e):e;return(0,i.CqO)(t),t}function Ns(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function Fs(e,t){return t.map(t=>t(e))}function Ls(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}function Ms(e){if(!e)return null;const t=e.filter(Os);return 0==t.length?null:function(e){return Ns(Fs(e,t))}}function Vs(e){return null!=e?Ms(Ls(e)):null}function Us(e){if(!e)return null;const t=e.filter(Os);return 0==t.length?null:function(e){return gs(Fs(e,t).map(Ps)).pipe((0,Pt.U)(Ns))}}function qs(e){return null!=e?Us(Ls(e)):null}function Bs(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function js(e){return e._rawValidators}function Zs(e){return e._rawAsyncValidators}let zs=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Vs(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=qs(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e}),e})(),Gs=(()=>{class e extends zs{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275dir=i.lG2({type:e,features:[i.qOj]}),e})();class Hs extends zs{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ys{constructor(e){this._cd=e}is(e){var t,n,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===i?void 0:i[e])}}let $s=(()=>{class e extends Ys{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Hs,2))},e.\u0275dir=i.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&i.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[i.qOj]}),e})(),Ws=(()=>{class e extends Ys{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Gs,10))},e.\u0275dir=i.lG2({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,t){2&e&&i.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))("ng-submitted",t.is("submitted"))},features:[i.qOj]}),e})();function Ks(e,t){Xs(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&to(e,t)})}(e,t),function(e,t){const n=(e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&to(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){const n=e=>{t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function Qs(e,t,n=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),eo(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function Js(e,t){e.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Xs(e,t){const n=js(e);null!==t.validator?e.setValidators(Bs(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const i=Zs(e);null!==t.asyncValidator?e.setAsyncValidators(Bs(i,t.asyncValidator)):"function"==typeof i&&e.setAsyncValidators([i]);const r=()=>e.updateValueAndValidity();Js(t._rawValidators,r),Js(t._rawAsyncValidators,r)}function eo(e,t){let n=!1;if(null!==e){if(null!==t.validator){const i=js(e);if(Array.isArray(i)&&i.length>0){const r=i.filter(e=>e!==t.validator);r.length!==i.length&&(n=!0,e.setValidators(r))}}if(null!==t.asyncValidator){const i=Zs(e);if(Array.isArray(i)&&i.length>0){const r=i.filter(e=>e!==t.asyncValidator);r.length!==i.length&&(n=!0,e.setAsyncValidators(r))}}}const i=()=>{};return Js(t._rawValidators,i),Js(t._rawAsyncValidators,i),n}function to(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function no(e,t){Xs(e,t)}function io(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}function ro(e,t){e._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function so(e,t){if(!t)return null;let n,i,r;return Array.isArray(t),t.forEach(e=>{e.constructor===Ss?n=e:Object.getPrototypeOf(e.constructor)===vs?i=e:r=e}),r||i||n||null}function oo(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function ao(e){return(ho(e)?e.validators:e)||null}function lo(e){return Array.isArray(e)?Vs(e):e||null}function co(e,t){return(ho(t)?t.asyncValidators:e)||null}function uo(e){return Array.isArray(e)?qs(e):e||null}function ho(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class po{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=lo(this._rawValidators),this._composedAsyncValidatorFn=uo(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=lo(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=uo(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;const t=Ps(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let i=e;return t.forEach(e=>{i=i instanceof mo?i.controls.hasOwnProperty(e)?i.controls[e]:null:i instanceof go&&i.at(e)||null}),i}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new i.vpe,this.statusChanges=new i.vpe}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ho(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class fo extends po{constructor(e=null,t,n){super(ao(t),co(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oo(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oo(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class mo extends po{constructor(e,t,n){super(ao(t),co(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof fo?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,i)=>{n=t(n,e,i)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class go extends po{constructor(e,t,n){super(ao(t),co(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof fo?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const _o={provide:Gs,useExisting:(0,i.Gpc)(()=>vo)},yo=(()=>Promise.resolve(null))();let vo=(()=>{class e extends Gs{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new i.vpe,this.form=new mo({},Vs(e),qs(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){yo.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Ks(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){yo.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),oo(this._directives,e)})}addFormGroup(e){yo.then(()=>{const t=this._findContainer(e.path),n=new mo({});no(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){yo.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){yo.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,ro(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Es,10),i.Y36(xs,10))},e.\u0275dir=i.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&i.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[i._Bn([_o]),i.qOj]}),e})(),bo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),wo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})();const Co=new i.OlP("NgModelWithFormControlWarning"),So={provide:Hs,useExisting:(0,i.Gpc)(()=>ko)};let ko=(()=>{class e extends Hs{constructor(e,t,n,r){super(),this._ngModelWarningConfig=r,this.update=new i.vpe,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(t),this.valueAccessor=so(0,n)}set isDisabled(e){}ngOnChanges(e){if(this._isControlChanged(e)){const t=e.form.previousValue;t&&Qs(t,this,!1),Ks(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}io(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Qs(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Es,10),i.Y36(xs,10),i.Y36(bs,10),i.Y36(Co,8))},e.\u0275dir=i.lG2({type:e,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[i._Bn([So]),i.qOj,i.TTD]}),e._ngModelWarningSentOnce=!1,e})();const To={provide:Gs,useExisting:(0,i.Gpc)(()=>Eo)};let Eo=(()=>{class e extends Gs{constructor(e,t){super(),this.validators=e,this.asyncValidators=t,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new i.vpe,this._setValidators(e),this._setAsyncValidators(t)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(eo(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return Ks(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){Qs(e.control||null,e,!1),oo(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,ro(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=e.control,n=this.form.get(e.path);t!==n&&(Qs(t||null,e),n instanceof fo&&(Ks(n,e),e.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const t=this.form.get(e.path);no(t,e),t.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const t=this.form.get(e.path);t&&function(e,t){return eo(e,t)}(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Xs(this.form,this),this._oldForm&&eo(this._oldForm,this)}_checkFormPresent(){}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Es,10),i.Y36(xs,10))},e.\u0275dir=i.lG2({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&i.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[i._Bn([To]),i.qOj,i.TTD]}),e})();const xo={provide:Hs,useExisting:(0,i.Gpc)(()=>Io)};let Io=(()=>{class e extends Hs{constructor(e,t,n,r,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new i.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=so(0,r)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),io(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return e=null==this.name?this.name:this.name.toString(),[...this._parent.path,e];var e}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Gs,13),i.Y36(Es,10),i.Y36(xs,10),i.Y36(bs,10),i.Y36(Co,8))},e.\u0275dir=i.lG2({type:e,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[i._Bn([xo]),i.qOj,i.TTD]}),e._ngModelWarningSentOnce=!1,e})();const Ao={provide:Es,useExisting:(0,i.Gpc)(()=>Do),multi:!0};let Do=(()=>{class e{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?Ds(e):null}registerOnValidatorChange(e){this._onChange=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&i.uIk("required",t.required?"":null)},inputs:{required:"required"},features:[i._Bn([Ao])]}),e})(),Ro=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[wo]]}),e})(),Oo=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:Co,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[Ro]}),e})(),Po=(()=>{class e{isErrorState(e,t){return!!(e&&e.invalid&&(e.dirty||e.touched||t&&t.submitted))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var No=n(7415),Fo=n(3854),Lo=n(279),Mo=n(9306),Vo=n(8604),Uo=n(3637),qo=n(4459);function Bo(){return e=>e.lift(new jo)}class jo{call(e,t){return t.subscribe(new Zo(e))}}class Zo extends gt.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function zo(e,t){return n=>n.lift(new Go(e,t))}class Go{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Ho(e,this.compare,this.keySelector))}}class Ho extends gt.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}var Yo,$o=n(8939),Wo=(n(4828),n(156)),Ko=n(6304),Qo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Jo={},Xo=Xo||{},ea=Qo||self;function ta(){}function na(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ia(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ra="closure_uid_"+(1e9*Math.random()>>>0),sa=0;function oa(e,t,n){return e.call.apply(e.bind,arguments)}function aa(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function la(e,t,n){return(la=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:aa).apply(null,arguments)}function ca(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ua(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function ha(){this.s=this.s,this.o=this.o}var da={};ha.prototype.s=!1,ha.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ra)&&e[ra]||(e[ra]=++sa)}(this);delete da[e]}},ha.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pa=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},fa=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const i=e.length,r="string"==typeof e?e.split(""):e;for(let s=0;s<i;s++)s in r&&t.call(n,r[s],s,e)};function ma(e){return Array.prototype.concat.apply([],arguments)}function ga(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function _a(e){return/^[\s\xa0]*$/.test(e)}var ya,va=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ba(e,t){return-1!=e.indexOf(t)}function wa(e,t){return e<t?-1:e>t?1:0}e:{var Ca=ea.navigator;if(Ca){var Sa=Ca.userAgent;if(Sa){ya=Sa;break e}}ya=""}function ka(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function Ta(e){const t={};for(const n in e)t[n]=e[n];return t}var Ea="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xa(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<Ea.length;t++)n=Ea[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function Ia(e){return Ia[" "](e),e}Ia[" "]=ta;var Aa,Da,Ra=ba(ya,"Opera"),Oa=ba(ya,"Trident")||ba(ya,"MSIE"),Pa=ba(ya,"Edge"),Na=Pa||Oa,Fa=ba(ya,"Gecko")&&!(ba(ya.toLowerCase(),"webkit")&&!ba(ya,"Edge"))&&!(ba(ya,"Trident")||ba(ya,"MSIE"))&&!ba(ya,"Edge"),La=ba(ya.toLowerCase(),"webkit")&&!ba(ya,"Edge");function Ma(){var e=ea.document;return e?e.documentMode:void 0}e:{var Va="",Ua=(Da=ya,Fa?/rv:([^\);]+)(\)|;)/.exec(Da):Pa?/Edge\/([\d\.]+)/.exec(Da):Oa?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Da):La?/WebKit\/(\S+)/.exec(Da):Ra?/(?:Version)[ \/]?(\S+)/.exec(Da):void 0);if(Ua&&(Va=Ua?Ua[1]:""),Oa){var qa=Ma();if(null!=qa&&qa>parseFloat(Va)){Aa=String(qa);break e}}Aa=Va}var Ba={};var ja=ea.document&&Oa&&(Ma()||parseInt(Aa,10))||void 0,Za=function(){if(!ea.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ea.addEventListener("test",ta,t),ea.removeEventListener("test",ta,t)}catch(n){}return e}();function za(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ga(e,t){if(za.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Fa){e:{try{Ia(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Ha[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ga.Z.h.call(this)}}za.prototype.h=function(){this.defaultPrevented=!0},ua(Ga,za);var Ha={2:"touch",3:"pen",4:"mouse"};Ga.prototype.h=function(){Ga.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ya="closure_listenable_"+(1e6*Math.random()|0),$a=0;function Wa(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ia=r,this.key=++$a,this.ca=this.fa=!1}function Ka(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Qa(e){this.src=e,this.g={},this.h=0}function Ja(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=pa(r,t);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Ka(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Xa(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==i)return r}return-1}Qa.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Xa(e,t,i,r);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Wa(t,this.src,s,!!i,r)).fa=n,e.push(t)),t};var el="closure_lm_"+(1e6*Math.random()|0),tl={};function nl(e,t,n,i,r){if(i&&i.once)return rl(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)nl(e,t[s],n,i,r);return null}return n=hl(n),e&&e[Ya]?e.N(t,n,ia(i)?!!i.capture:!!i,r):il(e,t,n,!1,i,r)}function il(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=ia(r)?!!r.capture:!!r,a=cl(e);if(a||(e[el]=a=new Qa(e)),(n=a.add(t,n,i,o,s)).proxy)return n;if(i=function(){var e=ll;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)Za||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(al(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function rl(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)rl(e,t[s],n,i,r);return null}return n=hl(n),e&&e[Ya]?e.O(t,n,ia(i)?!!i.capture:!!i,r):il(e,t,n,!0,i,r)}function sl(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)sl(e,t[s],n,i,r);else i=ia(i)?!!i.capture:!!i,n=hl(n),e&&e[Ya]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Xa(s=e.g[t],n,i,r))&&(Ka(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=cl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Xa(t,n,i,r)),(n=-1<e?t[e]:null)&&ol(n))}function ol(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Ya])Ja(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(al(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=cl(t))?(Ja(n,e),0==n.h&&(n.src=null,t[el]=null)):Ka(e)}}}function al(e){return e in tl?tl[e]:tl[e]="on"+e}function ll(e,t){if(e.ca)e=!0;else{t=new Ga(t,this);var n=e.listener,i=e.ia||e.src;e.fa&&ol(e),e=n.call(i,t)}return e}function cl(e){return(e=e[el])instanceof Qa?e:null}var ul="__closure_events_fn_"+(1e9*Math.random()>>>0);function hl(e){return"function"==typeof e?e:(e[ul]||(e[ul]=function(t){return e.handleEvent(t)}),e[ul])}function dl(){ha.call(this),this.i=new Qa(this),this.P=this,this.I=null}function pl(e,t){var n,i=e.I;if(i)for(n=[];i;i=i.I)n.push(i);if(e=e.P,i=t.type||t,"string"==typeof t)t=new za(t,e);else if(t instanceof za)t.target=t.target||e;else{var r=t;xa(t=new za(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=fl(o,i,!0,t)&&r}if(r=fl(o=t.g=e,i,!0,t)&&r,r=fl(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=fl(o=t.g=n[s],i,!1,t)&&r}function fl(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&Ja(e.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}ua(dl,ha),dl.prototype[Ya]=!0,dl.prototype.removeEventListener=function(e,t,n,i){sl(this,e,t,n,i)},dl.prototype.M=function(){if(dl.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Ka(n[i]);delete t.g[e],t.h--}}this.I=null},dl.prototype.N=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},dl.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var ml=ea.JSON.stringify;function gl(){var e=Sl;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _l,yl=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new vl,e=>e.reset());class vl{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function bl(e){ea.setTimeout(()=>{throw e},0)}function wl(e,t){_l||function(){var e=ea.Promise.resolve(void 0);_l=function(){e.then(kl)}}(),Cl||(_l(),Cl=!0),Sl.add(e,t)}var Cl=!1,Sl=new class{constructor(){this.h=this.g=null}add(e,t){const n=yl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function kl(){for(var e;e=gl();){try{e.h.call(e.g)}catch(n){bl(n)}var t=yl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Cl=!1}function Tl(e,t){dl.call(this),this.h=e||1,this.g=t||ea,this.j=la(this.kb,this),this.l=Date.now()}function El(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function xl(e,t,n){if("function"==typeof e)n&&(e=la(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=la(e.handleEvent,e)}return 2147483647<Number(t)?-1:ea.setTimeout(e,t||0)}function Il(e){e.g=xl(()=>{e.g=null,e.i&&(e.i=!1,Il(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ua(Tl,dl),(Yo=Tl.prototype).da=!1,Yo.S=null,Yo.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),pl(this,"tick"),this.da&&(El(this),this.start()))}},Yo.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Yo.M=function(){Tl.Z.M.call(this),El(this),delete this.g};class Al extends ha{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Il(this)}M(){super.M(),this.g&&(ea.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dl(e){ha.call(this),this.h=e,this.g={}}ua(Dl,ha);var Rl=[];function Ol(e,t,n,i){Array.isArray(n)||(n&&(Rl[0]=n.toString()),n=Rl);for(var r=0;r<n.length;r++){var s=nl(t,n[r],i||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Pl(e){ka(e.g,function(e,t){this.g.hasOwnProperty(t)&&ol(e)},e),e.g={}}function Nl(){this.g=!0}function Fl(e,t,n,i){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return ml(n)}catch(a){return t}}(e,n)+(i?" "+i:"")})}Dl.prototype.M=function(){Dl.Z.M.call(this),Pl(this)},Dl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nl.prototype.Aa=function(){this.g=!1},Nl.prototype.info=function(){};var Ll={},Ml=null;function Vl(){return Ml=Ml||new dl}function Ul(e){za.call(this,Ll.Ma,e)}function ql(e){const t=Vl();pl(t,new Ul(t,e))}function Bl(e,t){za.call(this,Ll.STAT_EVENT,e),this.stat=t}function jl(e){const t=Vl();pl(t,new Bl(t,e))}function Zl(e,t){za.call(this,Ll.Na,e),this.size=t}function zl(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return ea.setTimeout(function(){e()},t)}Ll.Ma="serverreachability",ua(Ul,za),Ll.STAT_EVENT="statevent",ua(Bl,za),Ll.Na="timingevent",ua(Zl,za);var Gl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Hl={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Yl(){}function $l(){}Yl.prototype.h=null;var Wl,Kl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ql(){za.call(this,"d")}function Jl(){za.call(this,"c")}function Xl(){}function ec(e,t,n,i){this.l=e,this.j=t,this.m=n,this.X=i||1,this.V=new Dl(this),this.P=nc,this.W=new Tl(e=Na?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new tc}function tc(){this.i=null,this.g="",this.h=!1}ua(Ql,za),ua(Jl,za),ua(Xl,Yl),Xl.prototype.g=function(){return new XMLHttpRequest},Xl.prototype.i=function(){return{}},Wl=new Xl;var nc=45e3,ic={},rc={};function sc(e,t,n){e.K=1,e.v=Ic(Cc(t)),e.s=n,e.U=!0,oc(e,null)}function oc(e,t){e.F=Date.now(),uc(e),e.A=Cc(e.v);var n=e.A,i=e.X;Array.isArray(i)||(i=[String(i)]),Bc(n.h,"t",i),e.C=0,n=e.l.H,e.h=new tc,e.g=Bu(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Al(la(e.Ia,e,e.g),e.O)),Ol(e.V,e.g,"readystatechange",e.gb),t=e.H?Ta(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ql(1),function(e,t,n,i,r,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function ac(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function lc(e,t,n){let i,r=!0;for(;!e.I&&e.C<n.length;){if(i=cc(e,n),i==rc){4==t&&(e.o=4,jl(14),r=!1),Fl(e.j,e.m,null,"[Incomplete Response]");break}if(i==ic){e.o=4,jl(15),Fl(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}Fl(e.j,e.m,i,null),mc(e,i)}ac(e)&&i!=rc&&i!=ic&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,jl(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pu(t),t.L=!0,jl(11))):(Fl(e.j,e.m,n,"[Invalid Chunked Response]"),fc(e),pc(e))}function cc(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?rc:(n=Number(t.substring(n,i)),isNaN(n)?ic:(i+=1)+n>t.length?rc:(t=t.substr(i,n),e.C=i+n,t))}function uc(e){e.Y=Date.now()+e.P,hc(e,e.P)}function hc(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=zl(la(e.eb,e),t)}function dc(e){e.B&&(ea.clearTimeout(e.B),e.B=null)}function pc(e){0==e.l.G||e.I||Lu(e.l,e)}function fc(e){dc(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,El(e.W),Pl(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function mc(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Yc(n.i,e)))if(n.I=e.N,!e.J&&Yc(n.i,e)&&3==n.G){try{var i=n.Ca.g.parse(t)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Fu(n),ku(n)}Ou(n),jl(18)}}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&0==n.A&&!n.v&&(n.v=zl(la(n.ab,n),6e3));if(1>=Hc(n.i)&&n.ka){try{n.ka()}catch(c){}n.ka=void 0}}else Vu(n,11)}else if((e.J||n.g==e)&&Fu(n),!_a(t))for(r=n.Ca.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const t=c[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const r=c[4];null!=r&&(n.za=r,n.h.info("SVER="+n.za));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(n.K=i=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.i;!s.g&&(ba(e,"spdy")||ba(e,"quic")||ba(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&($c(s,s.h),s.h=null))}if(i.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.sa=e,xc(i.F,i.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((i=n).oa=qu(i,i.H?i.la:null,i.W),o.J){Wc(i.i,o);var a=o,l=i.K;l&&a.setTimeout(l),a.B&&(dc(a),uc(a)),i.g=o}else Ru(i);0<n.l.length&&xu(n)}else"stop"!=c[0]&&"close"!=c[0]||Vu(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Vu(n,7):Su(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}ql(4)}catch(c){}}function gc(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(na(e)||"string"==typeof e)fa(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(na(e)||"string"==typeof e){n=[];for(var i=e.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,e)n[i++]=r;r=(i=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(na(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e)).length;for(var s=0;s<r;s++)t.call(void 0,i[s],n&&n[s],e)}}function _c(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof _c)for(n=e.T(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function yc(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var i=e.g[t];vc(e.h,i)&&(e.g[n++]=i),t++}e.g.length=n}if(e.i!=e.g.length){var r={};for(n=t=0;t<e.g.length;)vc(r,i=e.g[t])||(e.g[n++]=i,r[i]=1),t++;e.g.length=n}}function vc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Yo=ec.prototype).setTimeout=function(e){this.P=e},Yo.gb=function(e){e=e.target;const t=this.L;t&&3==yu(e)?t.l():this.Ia(e)},Yo.Ia=function(e){try{if(e==this.g)e:{const u=yu(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>u)&&(3!=u||Na||this.g&&(this.h.h||this.g.ga()||vu(this.g)))){this.I||4!=u||7==t||ql(8==t||0>=h?3:2),dc(this);var n=this.g.ba();this.N=n;t:if(ac(this)){var i=vu(this.g);e="";var r=i.length,s=4==yu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){fc(this),pc(this);var o="";break t}this.h.i=new ea.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,i,r,s,o){e.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_a(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,jl(12),fc(this),pc(this);break e}Fl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,mc(this,n)}this.U?(lc(this,u,o),Na&&this.i&&3==u&&(Ol(this.V,this.W,"tick",this.fb),this.W.start())):(Fl(this.j,this.m,o,null),mc(this,o)),4==u&&fc(this),this.i&&!this.I&&(4==u?Lu(this.l,this):(this.i=!1,uc(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,jl(12)):(this.o=0,jl(13)),fc(this),pc(this)}}}catch(u){}},Yo.fb=function(){if(this.g){var e=yu(this.g),t=this.g.ga();this.C<t.length&&(dc(this),lc(this,e,t),this.i&&4!=e&&uc(this))}},Yo.cancel=function(){this.I=!0,fc(this)},Yo.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(ql(3),jl(17)),fc(this),this.o=2,pc(this)):hc(this,this.Y-e)},(Yo=_c.prototype).R=function(){yc(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Yo.T=function(){return yc(this),this.g.concat()},Yo.get=function(e,t){return vc(this.h,e)?this.h[e]:t},Yo.set=function(e,t){vc(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Yo.forEach=function(e,t){for(var n=this.T(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);e.call(t,s,r,this)}};var bc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wc(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof wc){this.g=void 0!==t?t:e.g,Sc(this,e.j),this.s=e.s,kc(this,e.i),Tc(this,e.m),this.l=e.l,t=e.h;var n=new Mc;n.i=t.i,t.g&&(n.g=new _c(t.g),n.h=t.h),Ec(this,n),this.o=e.o}else e&&(n=String(e).match(bc))?(this.g=!!t,Sc(this,n[1]||"",!0),this.s=Ac(n[2]||""),kc(this,n[3]||"",!0),Tc(this,n[4]),this.l=Ac(n[5]||"",!0),Ec(this,n[6]||"",!0),this.o=Ac(n[7]||"")):(this.g=!!t,this.h=new Mc(null,this.g))}function Cc(e){return new wc(e)}function Sc(e,t,n){e.j=n?Ac(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function kc(e,t,n){e.i=n?Ac(t,!0):t}function Tc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ec(e,t,n){t instanceof Mc?(e.h=t,function(e,t){t&&!e.j&&(Vc(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Uc(this,t),Bc(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=Dc(t,Fc)),e.h=new Mc(t,e.g))}function xc(e,t,n){e.h.set(t,n)}function Ic(e){return xc(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ac(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Dc(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Rc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Rc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}wc.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Dc(t,Oc,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Dc(t,Oc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Dc(n,"/"==n.charAt(0)?Nc:Pc,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Dc(n,Lc)),e.join("")};var Oc=/[#\/\?@]/g,Pc=/[#\?:]/g,Nc=/[#\?]/g,Fc=/[#\?@]/g,Lc=/#/g;function Mc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Vc(e){e.g||(e.g=new _c,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Uc(e,t){Vc(e),t=jc(e,t),vc(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,vc((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&yc(e)))}function qc(e,t){return Vc(e),t=jc(e,t),vc(e.g.h,t)}function Bc(e,t,n){Uc(e,t),0<n.length&&(e.i=null,e.g.set(jc(e,t),ga(n)),e.h+=n.length)}function jc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Zc(e){this.l=e||zc,e=ea.PerformanceNavigationTiming?0<(e=ea.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(ea.g&&ea.g.Ea&&ea.g.Ea()&&ea.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Yo=Mc.prototype).add=function(e,t){Vc(this),this.i=null,e=jc(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Yo.forEach=function(e,t){Vc(this),this.g.forEach(function(n,i){fa(n,function(n){e.call(t,n,i,this)},this)},this)},Yo.T=function(){Vc(this);for(var e=this.g.R(),t=this.g.T(),n=[],i=0;i<t.length;i++)for(var r=e[i],s=0;s<r.length;s++)n.push(t[i]);return n},Yo.R=function(e){Vc(this);var t=[];if("string"==typeof e)qc(this,e)&&(t=ma(t,this.g.get(jc(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ma(t,e[n])}return t},Yo.set=function(e,t){return Vc(this),this.i=null,qc(this,e=jc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Yo.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Yo.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var i=t[n],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;""!==i[s]&&(o+="="+encodeURIComponent(String(i[s]))),e.push(o)}}return this.i=e.join("&")};var zc=10;function Gc(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Hc(e){return e.h?1:e.g?e.g.size:0}function Yc(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function $c(e,t){e.g?e.g.add(t):e.h=t}function Wc(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Kc(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return ga(e.i)}function Qc(){}function Jc(){this.g=new Qc}function Xc(e,t,n){const i=n||"";try{gc(e,function(e,n){let r=e;ia(e)&&(r=ml(e)),t.push(i+n+"="+encodeURIComponent(r))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function eu(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(s){}}function tu(e){this.l=e.$b||null,this.j=e.ib||!1}function nu(e,t){dl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=iu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zc.prototype.cancel=function(){if(this.i=Kc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},Qc.prototype.stringify=function(e){return ea.JSON.stringify(e,void 0)},Qc.prototype.parse=function(e){return ea.JSON.parse(e,void 0)},ua(tu,Yl),tu.prototype.g=function(){return new nu(this.l,this.j)},tu.prototype.i=function(e){return function(){return e}}({}),ua(nu,dl);var iu=0;function ru(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function su(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ou(e)}function ou(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Yo=nu.prototype).open=function(e,t){if(this.readyState!=iu)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ou(this)},Yo.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||ea).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Yo.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,su(this)),this.readyState=iu},Yo.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ou(this)),this.g&&(this.readyState=3,ou(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ea.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ru(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Yo.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?su(this):ou(this),3==this.readyState&&ru(this)}},Yo.Ua=function(e){this.g&&(this.response=this.responseText=e,su(this))},Yo.Ta=function(e){this.g&&(this.response=e,su(this))},Yo.ha=function(){this.g&&su(this)},Yo.setRequestHeader=function(e,t){this.v.append(e,t)},Yo.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Yo.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(nu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var au=ea.JSON.parse;function lu(e){dl.call(this),this.headers=new _c,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=cu,this.K=this.L=!1}ua(lu,dl);var cu="",uu=/^https?$/i,hu=["POST","PUT"];function du(e){return"content-type"==e.toLowerCase()}function pu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,fu(e),gu(e)}function fu(e){e.D||(e.D=!0,pl(e,"complete"),pl(e,"error"))}function mu(e){if(e.h&&void 0!==Xo&&(!e.C[1]||4!=yu(e)||2!=e.ba()))if(e.v&&4==yu(e))xl(e.Fa,0,e);else if(pl(e,"readystatechange"),4==yu(e)){e.h=!1;try{const l=e.ba();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===l){var r=String(e.H).match(bc)[1]||null;if(!r&&ea.self&&ea.self.location){var s=ea.self.location.protocol;r=s.substr(0,s.length-1)}i=!uu.test(r?r.toLowerCase():"")}n=i}if(n)pl(e,"complete"),pl(e,"success");else{e.m=6;try{var o=2<yu(e)?e.g.statusText:""}catch(a){o=""}e.j=o+" ["+e.ba()+"]",fu(e)}}finally{gu(e)}}}function gu(e,t){if(e.g){_u(e);const i=e.g,r=e.C[0]?ta:null;e.g=null,e.C=null,t||pl(e,"ready");try{i.onreadystatechange=r}catch(n){}}}function _u(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(ea.clearTimeout(e.A),e.A=null)}function yu(e){return e.g?e.g.readyState:0}function vu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case cu:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function bu(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=function(e){let t="";return ka(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):xc(e,t,n))}function wu(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Cu(e){this.za=0,this.l=[],this.h=new Nl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=wu("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=wu("baseRetryDelayMs",5e3,e),this.$a=wu("retryDelaySeedMs",1e4,e),this.Ya=wu("forwardChannelMaxRetries",2,e),this.ra=wu("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Zc(e&&e.concurrentRequestLimit),this.Ca=new Jc,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Su(e){if(Tu(e),3==e.G){var t=e.V++,n=Cc(e.F);xc(n,"SID",e.J),xc(n,"RID",t),xc(n,"TYPE","terminate"),Au(e,n),(t=new ec(e,e.h,t,void 0)).K=2,t.v=Ic(Cc(n)),n=!1,ea.navigator&&ea.navigator.sendBeacon&&(n=ea.navigator.sendBeacon(t.v.toString(),"")),!n&&ea.Image&&((new Image).src=t.v,n=!0),n||(t.g=Bu(t.l,null),t.g.ea(t.v)),t.F=Date.now(),uc(t)}Uu(e)}function ku(e){e.g&&(Pu(e),e.g.cancel(),e.g=null)}function Tu(e){ku(e),e.u&&(ea.clearTimeout(e.u),e.u=null),Fu(e),e.i.cancel(),e.m&&("number"==typeof e.m&&ea.clearTimeout(e.m),e.m=null)}function Eu(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&xu(e)}function xu(e){Gc(e.i)||e.m||(e.m=!0,wl(e.Ha,e),e.C=0)}function Iu(e,t){var n;n=t?t.m:e.V++;const i=Cc(e.F);xc(i,"SID",e.J),xc(i,"RID",n),xc(i,"AID",e.U),Au(e,i),e.o&&e.s&&bu(i,e.o,e.s),n=new ec(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Du(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),$c(e.i,n),sc(n,i,t)}function Au(e,t){e.j&&gc({},function(e,n){xc(t,n,e)})}function Du(e,t,n){n=Math.min(e.l.length,n);var i=e.j?la(e.j.Oa,e.j,e):null;e:{var r=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=r[o].h;const a=r[o].g;if(n-=t,0>n)t=Math.max(0,r[o].h-100),s=!1;else try{Xc(a,e,"req"+n+"_")}catch(ph){i&&i(a)}}if(s){i=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,i}function Ru(e){e.g||e.u||(e.Y=1,wl(e.Ga,e),e.A=0)}function Ou(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=zl(la(e.Ga,e),Mu(e,e.A)),e.A++,0))}function Pu(e){null!=e.B&&(ea.clearTimeout(e.B),e.B=null)}function Nu(e){e.g=new ec(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Cc(e.oa);xc(t,"RID","rpc"),xc(t,"SID",e.J),xc(t,"CI",e.N?"0":"1"),xc(t,"AID",e.U),Au(e,t),xc(t,"TYPE","xmlhttp"),e.o&&e.s&&bu(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Ic(Cc(t)),n.s=null,n.U=!0,oc(n,e)}function Fu(e){null!=e.v&&(ea.clearTimeout(e.v),e.v=null)}function Lu(e,t){var n=null;if(e.g==t){Fu(e),Pu(e),e.g=null;var i=2}else{if(!Yc(e.i,t))return;n=t.D,Wc(e.i,t),i=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.F;var r=e.C;pl(i=Vl(),new Zl(i,n,t,r)),xu(e)}else Ru(e);else if(3==(r=t.o)||0==r&&0<e.I||!(1==i&&function(e,t){return!(Hc(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=zl(la(e.Ha,e,t),Mu(e,e.C)),e.C++,0)))}(e,t)||2==i&&Ou(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:Vu(e,5);break;case 4:Vu(e,10);break;case 3:Vu(e,6);break;default:Vu(e,2)}}function Mu(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Vu(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var i=la(e.jb,e);n||(n=new wc("//www.google.com/images/cleardot.gif"),ea.location&&"http"==ea.location.protocol||Sc(n,"https"),Ic(n)),function(e,t){const n=new Nl;if(ea.Image){const i=new Image;i.onload=ca(eu,n,i,"TestLoadImage: loaded",!0,t),i.onerror=ca(eu,n,i,"TestLoadImage: error",!1,t),i.onabort=ca(eu,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=ca(eu,n,i,"TestLoadImage: timeout",!1,t),ea.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}(n.toString(),i)}else jl(2);e.G=0,e.j&&e.j.va(t),Uu(e),Tu(e)}function Uu(e){e.G=0,e.I=-1,e.j&&(0==Kc(e.i).length&&0==e.l.length||(e.i.i.length=0,ga(e.l),e.l.length=0),e.j.ua())}function qu(e,t,n){let i=function(e){return e instanceof wc?Cc(e):new wc(e,void 0)}(n);if(""!=i.i)t&&kc(i,t+"."+i.i),Tc(i,i.m);else{const e=ea.location;i=function(e,t,n,i){var r=new wc(null,void 0);return e&&Sc(r,e),t&&kc(r,t),n&&Tc(r,n),i&&(r.l=i),r}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&ka(e.aa,function(e,t){xc(i,t,e)}),n=e.sa,(t=e.D)&&n&&xc(i,t,n),xc(i,"VER",e.ma),Au(e,i),i}function Bu(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new lu(n&&e.Ba&&!e.qa?new tu({ib:!0}):e.qa)).L=e.H,t}function ju(){}function Zu(){if(Oa&&!(10<=Number(ja)))throw Error("Environmental error: no available transport.")}function zu(e,t){dl.call(this),this.g=new Cu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!_a(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!_a(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Yu(this)}function Gu(e){Ql.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Hu(){Jl.call(this),this.status=1}function Yu(e){this.g=e}(Yo=lu.prototype).ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wl.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:Wl),this.g.onreadystatechange=la(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void pu(this,s)}e=n||"";const r=new _c(this.headers);i&&gc(i,function(e,t){r.set(t,e)}),i=function(e){e:{var t=du;const n=e.length,i="string"==typeof e?e.split(""):e;for(let r=0;r<n;r++)if(r in i&&t.call(void 0,i[r],r,e)){t=r;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(r.T()),n=ea.FormData&&e instanceof ea.FormData,!(0<=pa(hu,t))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_u(this),0<this.B&&((this.K=function(e){return Oa&&function(){return e=Ba,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=va(String(Aa)).split("."),n=va("9").split("."),i=Math.max(t.length,n.length);for(let o=0;0==e&&o<i;o++){var r=t[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;e=wa(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||wa(0==r[2].length,0==s[2].length)||wa(r[2],s[2]),r=r[3],s=s[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=la(this.pa,this)):this.A=xl(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){pu(this,s)}},Yo.pa=function(){void 0!==Xo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pl(this,"timeout"),this.abort(8))},Yo.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,pl(this,"complete"),pl(this,"abort"),gu(this))},Yo.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gu(this,!0)),lu.Z.M.call(this)},Yo.Fa=function(){this.s||(this.F||this.v||this.l?mu(this):this.cb())},Yo.cb=function(){mu(this)},Yo.ba=function(){try{return 2<yu(this)?this.g.status:-1}catch(Da){return-1}},Yo.ga=function(){try{return this.g?this.g.responseText:""}catch(Da){return""}},Yo.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),au(t)}},Yo.Da=function(){return this.m},Yo.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Yo=Cu.prototype).ma=8,Yo.G=1,Yo.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Yo.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const r=new ec(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=Ta(s),xa(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var i=this.l[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Du(this,r,t),xc(n=Cc(this.F),"RID",e),xc(n,"CVER",22),this.D&&xc(n,"X-HTTP-Session-Id",this.D),Au(this,n),this.o&&s&&bu(n,this.o,s),$c(this.i,r),this.Ra&&xc(n,"TYPE","init"),this.ja?(xc(n,"$req",t),xc(n,"SID","null"),r.$=!0,sc(r,n,null)):sc(r,n,t),this.G=2}}else 3==this.G&&(e?Iu(this,e):0==this.l.length||Gc(this.i)||Iu(this))},Yo.Ga=function(){if(this.u=null,Nu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=zl(la(this.bb,this),e)}},Yo.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,jl(10),ku(this),Nu(this))},Yo.ab=function(){null!=this.v&&(this.v=null,ku(this),Ou(this),jl(19))},Yo.jb=function(e){e?(this.h.info("Successfully pinged google.com"),jl(2)):(this.h.info("Failed to ping google.com"),jl(1))},(Yo=ju.prototype).xa=function(){},Yo.wa=function(){},Yo.va=function(){},Yo.ua=function(){},Yo.Oa=function(){},Zu.prototype.g=function(e,t){return new zu(e,t)},ua(zu,dl),zu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),wl(la(e.hb,e,t))),jl(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=qu(e,null,e.W),xu(e)},zu.prototype.close=function(){Su(this.g)},zu.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Eu(this.g,t)}else this.v?((t={}).__data__=ml(e),Eu(this.g,t)):Eu(this.g,e)},zu.prototype.M=function(){this.g.j=null,delete this.j,Su(this.g),delete this.g,zu.Z.M.call(this)},ua(Gu,Ql),ua(Hu,Jl),ua(Yu,ju),Yu.prototype.xa=function(){pl(this.g,"a")},Yu.prototype.wa=function(e){pl(this.g,new Gu(e))},Yu.prototype.va=function(e){pl(this.g,new Hu(e))},Yu.prototype.ua=function(){pl(this.g,"b")},Zu.prototype.createWebChannel=Zu.prototype.g,zu.prototype.send=zu.prototype.u,zu.prototype.open=zu.prototype.m,zu.prototype.close=zu.prototype.close,Gl.NO_ERROR=0,Gl.TIMEOUT=8,Gl.HTTP_ERROR=6,Hl.COMPLETE="complete",$l.EventType=Kl,Kl.OPEN="a",Kl.CLOSE="b",Kl.ERROR="c",Kl.MESSAGE="d",dl.prototype.listen=dl.prototype.N,lu.prototype.listenOnce=lu.prototype.O,lu.prototype.getLastError=lu.prototype.La,lu.prototype.getLastErrorCode=lu.prototype.Da,lu.prototype.getStatus=lu.prototype.ba,lu.prototype.getResponseJson=lu.prototype.Qa,lu.prototype.getResponseText=lu.prototype.ga,lu.prototype.send=lu.prototype.ea;var $u=Jo.createWebChannelTransport=function(){return new Zu},Wu=Jo.getStatEventTarget=function(){return Vl()},Ku=Jo.ErrorCode=Gl,Qu=Jo.EventType=Hl,Ju=Jo.Event=Ll,Xu=Jo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},eh=Jo.FetchXmlHttpFactory=tu,th=Jo.WebChannel=$l,nh=Jo.XhrIo=lu;class ih{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ih.UNAUTHENTICATED=new ih(null),ih.GOOGLE_CREDENTIALS=new ih("google-credentials-uid"),ih.FIRST_PARTY=new ih("first-party-uid"),ih.MOCK_USER=new ih("mock-user");let rh="9.6.10";const sh=new Mo.Yd("@firebase/firestore");function oh(){return sh.logLevel}function ah(e,...t){if(sh.logLevel<=Mo.in.DEBUG){const n=t.map(uh);sh.debug(`Firestore (${rh}): ${e}`,...n)}}function lh(e,...t){if(sh.logLevel<=Mo.in.ERROR){const n=t.map(uh);sh.error(`Firestore (${rh}): ${e}`,...n)}}function ch(e,...t){if(sh.logLevel<=Mo.in.WARN){const n=t.map(uh);sh.warn(`Firestore (${rh}): ${e}`,...n)}}function uh(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function hh(e="Unexpected state"){const t=`FIRESTORE (${rh}) INTERNAL ASSERTION FAILED: `+e;throw lh(t),new Error(t)}function dh(e,t){e||hh()}function ph(e,t){return e}const fh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mh extends Fo.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class gh{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _h{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ih.UNAUTHENTICATED))}shutdown(){}}class vh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bh{constructor(e){this.t=e,this.currentUser=ih.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let i=this.i;const r=e=>this.i!==i?(i=this.i,t(e)):Promise.resolve();let s=new gh;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gh,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=s;e.enqueueRetryable((0,Ko.Z)(function*(){yield t.promise,yield r(n.currentUser)}))},a=e=>{ah("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ah("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gh)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ah("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(dh("string"==typeof t.accessToken),new _h(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dh(null===e||"string"==typeof e),new ih(e)}}class wh{constructor(e,t,n){this.type="FirstParty",this.user=ih.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class Ch{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new wh(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ih.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kh{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&ah("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,ah("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const i=e=>{ah("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit(e=>i(e)),setTimeout(()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?i(e):ah("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(dh("string"==typeof e.token),this.p=e.token,new Sh(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Th{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.I(e),this.T=e=>t.writeSequenceNumber(e))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Eh(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}Th.A=-1;class xh{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=Eh(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%e.length))}return n}}function Ih(e,t){return e<t?-1:e>t?1:0}function Ah(e,t,n){return e.length===t.length&&e.every((e,i)=>n(e,t[i]))}function Dh(e){return e+"\0"}class Rh{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new mh(fh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new mh(fh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new mh(fh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new mh(fh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rh.fromMillis(Date.now())}static fromDate(e){return Rh.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Rh(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ih(this.nanoseconds,e.nanoseconds):Ih(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Oh{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Oh(e)}static min(){return new Oh(new Rh(0,0))}static max(){return new Oh(new Rh(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ph(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Nh(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Fh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Lh{constructor(e,t,n){void 0===t?t=0:t>e.length&&hh(),void 0===n?n=e.length-t:n>e.length-t&&hh(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Lh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lh?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Mh extends Lh{construct(e,t,n){return new Mh(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new mh(fh.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new Mh(t)}static emptyPath(){return new Mh([])}}const Vh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Uh extends Lh{construct(e,t,n){return new Uh(e,t,n)}static isValidIdentifier(e){return Vh.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Uh.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Uh(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new mh(fh.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new mh(fh.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new mh(fh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new mh(fh.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Uh(t)}static emptyPath(){return new Uh([])}}class qh{constructor(e){this.fields=e,e.sort(Uh.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ah(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Bh{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Bh(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Bh(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ih(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bh.EMPTY_BYTE_STRING=new Bh("");const jh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zh(e){if(dh(!!e),"string"==typeof e){let t=0;const n=jh.exec(e);if(dh(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:zh(e.seconds),nanos:zh(e.nanos)}}function zh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Gh(e){return"string"==typeof e?Bh.fromBase64String(e):Bh.fromUint8Array(e)}function Hh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yh(e){const t=e.mapValue.fields.__previous_value__;return Hh(t)?Yh(t):t}function $h(e){const t=Zh(e.mapValue.fields.__local_write_time__.timestampValue);return new Rh(t.seconds,t.nanos)}class Wh{constructor(e,t,n,i,r,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Kh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Kh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Kh&&e.projectId===this.projectId&&e.database===this.database}}function Qh(e){return null==e}function Jh(e){return 0===e&&1/e==-1/0}function Xh(e){return"number"==typeof e&&Number.isInteger(e)&&!Jh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class ed{constructor(e){this.path=e}static fromPath(e){return new ed(Mh.fromString(e))}static fromName(e){return new ed(Mh.fromString(e).popFirst(5))}static empty(){return new ed(Mh.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Mh.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Mh.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ed(new Mh(e.slice()))}}const td={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nd={nullValue:"NULL_VALUE"};function id(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Hh(e)?4:_d(e)?9:10:hh()}function rd(e,t){if(e===t)return!0;const n=id(e);if(n!==id(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $h(e).isEqual($h(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Zh(e.timestampValue),i=Zh(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Gh(e.bytesValue).isEqual(Gh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return zh(e.geoPointValue.latitude)===zh(t.geoPointValue.latitude)&&zh(e.geoPointValue.longitude)===zh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return zh(e.integerValue)===zh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=zh(e.doubleValue),i=zh(t.doubleValue);return n===i?Jh(n)===Jh(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Ah(e.arrayValue.values||[],t.arrayValue.values||[],rd);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(Ph(n)!==Ph(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!rd(n[r],i[r])))return!1;return!0}(e,t);default:return hh()}}function sd(e,t){return void 0!==(e.values||[]).find(e=>rd(e,t))}function od(e,t){if(e===t)return 0;const n=id(e),i=id(t);if(n!==i)return Ih(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ih(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=zh(e.integerValue||e.doubleValue),i=zh(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return ad(e.timestampValue,t.timestampValue);case 4:return ad($h(e),$h(t));case 5:return Ih(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Gh(e),i=Gh(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=Ih(n[r],i[r]);if(0!==e)return e}return Ih(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ih(zh(e.latitude),zh(t.latitude));return 0!==n?n:Ih(zh(e.longitude),zh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=od(n[r],i[r]);if(e)return e}return Ih(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const e=Ih(i[o],s[o]);if(0!==e)return e;const t=od(n[i[o]],r[s[o]]);if(0!==t)return t}return Ih(i.length,s.length)}(e.mapValue,t.mapValue);default:throw hh()}}function ad(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ih(e,t);const n=Zh(e),i=Zh(t),r=Ih(n.seconds,i.seconds);return 0!==r?r:Ih(n.nanos,i.nanos)}function ld(e){return cd(e)}function cd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Zh(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Gh(e.bytesValue).toBase64():"referenceValue"in e?ed.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=cd(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+=`${r}:${cd(e.fields[r])}`;return n+"}"}(e.mapValue):hh();var t}function ud(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function hd(e){return!!e&&"integerValue"in e}function dd(e){return!!e&&"arrayValue"in e}function pd(e){return!!e&&"nullValue"in e}function fd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function md(e){return!!e&&"mapValue"in e}function gd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Nh(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=gd(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=gd(e.arrayValue.values[n]);return t}return Object.assign({},e)}function _d(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function yd(e,t){return void 0===e?t:void 0===t||od(e,t)>0?e:t}function vd(e,t){return void 0===e?t:void 0===t||od(e,t)<0?e:t}class bd{constructor(e){this.value=e}static empty(){return new bd({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!md(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gd(t)}setAll(e){let t=Uh.emptyPath(),n={},i=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=gd(e):i.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());md(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];md(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Nh(t,(t,n)=>e[t]=n);for(const i of n)delete e[i]}clone(){return new bd(gd(this.value))}}function wd(e){const t=[];return Nh(e.fields,(e,n)=>{const i=new Uh([e]);if(md(n)){const e=wd(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)}),new qh(t)}class Cd{constructor(e,t,n,i,r,s){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.data=r,this.documentState=s}static newInvalidDocument(e){return new Cd(e,0,Oh.min(),Oh.min(),bd.empty(),0)}static newFoundDocument(e,t,n){return new Cd(e,1,t,Oh.min(),n,0)}static newNoDocument(e,t){return new Cd(e,2,t,Oh.min(),bd.empty(),0)}static newUnknownDocument(e,t){return new Cd(e,3,t,Oh.min(),bd.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bd.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bd.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cd&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cd(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sd{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function kd(e){return e.fields.find(e=>2===e.kind)}function Td(e){return e.fields.filter(e=>2!==e.kind)}Sd.UNKNOWN_ID=-1;class Ed{constructor(e,t){this.fieldPath=e,this.kind=t}}class xd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xd(0,Dd.min())}}function Id(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Oh.fromTimestamp(1e9===i?new Rh(n+1,0):new Rh(n,i));return new Dd(r,ed.empty(),t)}function Ad(e){return new Dd(e.readTime,e.key,-1)}class Dd{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Dd(Oh.min(),ed.empty(),-1)}static max(){return new Dd(Oh.max(),ed.empty(),-1)}}function Rd(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ed.comparator(e.documentKey,t.documentKey),0!==n?n:Ih(e.largestBatchId,t.largestBatchId))}class Od{constructor(e,t=null,n=[],i=[],r=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.P=null}}function Pd(e,t=null,n=[],i=[],r=null,s=null,o=null){return new Od(e,t,n,i,r,s,o)}function Nd(e){const t=ph(e);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>{return(t=e).field.canonicalString()+t.op.toString()+ld(t.value);var t}).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Qh(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>ld(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>ld(e)).join(",")),t.P=e}return t.P}function Fd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!Wd(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if((n=e.filters[r]).op!==(i=t.filters[r]).op||!n.field.isEqual(i.field)||!rd(n.value,i.value))return!1;var n,i;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Qd(e.startAt,t.startAt)&&Qd(e.endAt,t.endAt)}function Ld(e){return ed.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Md(e,t){return e.filters.filter(e=>e instanceof Vd&&e.field.isEqual(t))}class Vd extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,n):new Ud(e,t,n):"array-contains"===t?new Zd(e,n):"in"===t?new zd(e,n):"not-in"===t?new Gd(e,n):"array-contains-any"===t?new Hd(e,n):new Vd(e,t,n)}static V(e,t,n){return"in"===t?new qd(e,n):new Bd(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(od(t,this.value)):null!==t&&id(this.value)===id(t)&&this.v(od(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return hh()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ud extends Vd{constructor(e,t,n){super(e,t,n),this.key=ed.fromName(n.referenceValue)}matches(e){const t=ed.comparator(e.key,this.key);return this.v(t)}}class qd extends Vd{constructor(e,t){super(e,"in",t),this.keys=jd(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Bd extends Vd{constructor(e,t){super(e,"not-in",t),this.keys=jd(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function jd(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ed.fromName(e.referenceValue))}class Zd extends Vd{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dd(t)&&sd(t.arrayValue,this.value)}}class zd extends Vd{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sd(this.value.arrayValue,t)}}class Gd extends Vd{constructor(e,t){super(e,"not-in",t)}matches(e){if(sd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sd(this.value.arrayValue,t)}}class Hd extends Vd{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>sd(this.value.arrayValue,e))}}class Yd{constructor(e,t){this.position=e,this.inclusive=t}}class $d{constructor(e,t="asc"){this.field=e,this.dir=t}}function Wd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Kd(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(i=s.field.isKeyField()?ed.comparator(ed.fromName(o.referenceValue),n.key):od(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Qd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!rd(e.position[n],t.position[n]))return!1;return!0}class Jd{constructor(e,t=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.D=null,this.C=null}}function Xd(e,t,n,i,r,s,o,a){return new Jd(e,t,n,i,r,s,o,a)}function ep(e){return new Jd(e)}function tp(e){return!Qh(e.limit)&&"F"===e.limitType}function np(e){return!Qh(e.limit)&&"L"===e.limitType}function ip(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function rp(e){for(const t of e.filters)if(t.S())return t.field;return null}function sp(e){return null!==e.collectionGroup}function op(e){const t=ph(e);if(null===t.D){t.D=[];const e=rp(t),n=ip(t);if(null!==e&&null===n)e.isKeyField()||t.D.push(new $d(e)),t.D.push(new $d(Uh.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.D.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new $d(Uh.keyField(),e))}}}return t.D}function ap(e){const t=ph(e);if(!t.C)if("F"===t.limitType)t.C=Pd(t.path,t.collectionGroup,op(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const r of op(t))e.push(new $d(r.field,"desc"===r.dir?"asc":"desc"));const n=t.endAt?new Yd(t.endAt.position,!t.endAt.inclusive):null,i=t.startAt?new Yd(t.startAt.position,!t.startAt.inclusive):null;t.C=Pd(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}return t.C}function lp(e,t,n){return new Jd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function cp(e,t){return Fd(ap(e),ap(t))&&e.limitType===t.limitType}function up(e){return`${Nd(ap(e))}|lt:${e.limitType}`}function hp(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${ld(t.value)}`;var t}).join(", ")}]`),Qh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>ld(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>ld(e)).join(",")),`Target(${t})`}(ap(e))}; limitType=${e.limitType})`}function dp(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ed.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=Kd(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,op(e),t)||e.endAt&&!function(e,t,n){const i=Kd(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,op(e),t))}(e,t)}function pp(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fp(e){return(t,n)=>{let i=!1;for(const r of op(e)){const e=mp(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function mp(e,t,n){const i=e.field.isKeyField()?ed.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?od(i,r):hh()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return hh()}}function gp(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jh(t)?"-0":t}}function _p(e){return{integerValue:""+e}}function yp(e,t){return Xh(t)?_p(t):gp(e,t)}class vp{constructor(){this._=void 0}}function bp(e,t,n){return e instanceof Sp?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof kp?Tp(e,t):e instanceof Ep?xp(e,t):function(e,t){const n=Cp(e,t),i=Ap(n)+Ap(e.k);return hd(n)&&hd(e.k)?_p(i):gp(e.M,i)}(e,t)}function wp(e,t,n){return e instanceof kp?Tp(e,t):e instanceof Ep?xp(e,t):n}function Cp(e,t){return e instanceof Ip?hd(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Sp extends vp{}class kp extends vp{constructor(e){super(),this.elements=e}}function Tp(e,t){const n=Dp(t);for(const i of e.elements)n.some(e=>rd(e,i))||n.push(i);return{arrayValue:{values:n}}}class Ep extends vp{constructor(e){super(),this.elements=e}}function xp(e,t){let n=Dp(t);for(const i of e.elements)n=n.filter(e=>!rd(e,i));return{arrayValue:{values:n}}}class Ip extends vp{constructor(e,t){super(),this.M=e,this.k=t}}function Ap(e){return zh(e.integerValue||e.doubleValue)}function Dp(e){return dd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Rp{constructor(e,t){this.field=e,this.transform=t}}class Op{constructor(e,t){this.version=e,this.transformResults=t}}class Pp{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pp}static exists(e){return new Pp(void 0,e)}static updateTime(e){return new Pp(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Np(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Fp{}function Lp(e,t,n){e instanceof Bp?function(e,t,n){const i=e.value.clone(),r=zp(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof jp?function(e,t,n){if(!Np(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=zp(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Zp(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Mp(e,t,n){e instanceof Bp?function(e,t,n){if(!Np(e.precondition,t))return;const i=e.value.clone(),r=Gp(e.fieldTransforms,n,t);i.setAll(r),t.convertToFoundDocument(qp(t),i).setHasLocalMutations()}(e,t,n):e instanceof jp?function(e,t,n){if(!Np(e.precondition,t))return;const i=Gp(e.fieldTransforms,n,t),r=t.data;r.setAll(Zp(e)),r.setAll(i),t.convertToFoundDocument(qp(t),r).setHasLocalMutations()}(e,t,n):function(e,t){Np(e.precondition,t)&&t.convertToNoDocument(Oh.min())}(e,t)}function Vp(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=Cp(i.transform,e||null);null!=r&&(null==n&&(n=bd.empty()),n.set(i.field,r))}return n||null}function Up(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ah(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof kp&&t instanceof kp||e instanceof Ep&&t instanceof Ep?Ah(e.elements,t.elements,rd):e instanceof Ip&&t instanceof Ip?rd(e.k,t.k):e instanceof Sp&&t instanceof Sp}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function qp(e){return e.isFoundDocument()?e.version:Oh.min()}class Bp extends Fp{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}}class jp extends Fp{constructor(e,t,n,i,r=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}}function Zp(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function zp(e,t,n){const i=new Map;dh(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,wp(o,a,n[r]))}return i}function Gp(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,bp(e,s,t))}return i}class Hp extends Fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Yp extends Fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class $p{constructor(e){this.count=e}}var Wp,Kp;function Qp(e){switch(e){default:return hh();case fh.CANCELLED:case fh.UNKNOWN:case fh.DEADLINE_EXCEEDED:case fh.RESOURCE_EXHAUSTED:case fh.INTERNAL:case fh.UNAVAILABLE:case fh.UNAUTHENTICATED:return!1;case fh.INVALID_ARGUMENT:case fh.NOT_FOUND:case fh.ALREADY_EXISTS:case fh.PERMISSION_DENIED:case fh.FAILED_PRECONDITION:case fh.ABORTED:case fh.OUT_OF_RANGE:case fh.UNIMPLEMENTED:case fh.DATA_LOSS:return!0}}function Jp(e){if(void 0===e)return lh("GRPC error has no .code"),fh.UNKNOWN;switch(e){case Wp.OK:return fh.OK;case Wp.CANCELLED:return fh.CANCELLED;case Wp.UNKNOWN:return fh.UNKNOWN;case Wp.DEADLINE_EXCEEDED:return fh.DEADLINE_EXCEEDED;case Wp.RESOURCE_EXHAUSTED:return fh.RESOURCE_EXHAUSTED;case Wp.INTERNAL:return fh.INTERNAL;case Wp.UNAVAILABLE:return fh.UNAVAILABLE;case Wp.UNAUTHENTICATED:return fh.UNAUTHENTICATED;case Wp.INVALID_ARGUMENT:return fh.INVALID_ARGUMENT;case Wp.NOT_FOUND:return fh.NOT_FOUND;case Wp.ALREADY_EXISTS:return fh.ALREADY_EXISTS;case Wp.PERMISSION_DENIED:return fh.PERMISSION_DENIED;case Wp.FAILED_PRECONDITION:return fh.FAILED_PRECONDITION;case Wp.ABORTED:return fh.ABORTED;case Wp.OUT_OF_RANGE:return fh.OUT_OF_RANGE;case Wp.UNIMPLEMENTED:return fh.UNIMPLEMENTED;case Wp.DATA_LOSS:return fh.DATA_LOSS;default:return hh()}}(Kp=Wp||(Wp={}))[Kp.OK=0]="OK",Kp[Kp.CANCELLED=1]="CANCELLED",Kp[Kp.UNKNOWN=2]="UNKNOWN",Kp[Kp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kp[Kp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kp[Kp.NOT_FOUND=5]="NOT_FOUND",Kp[Kp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kp[Kp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kp[Kp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kp[Kp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kp[Kp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kp[Kp.ABORTED=10]="ABORTED",Kp[Kp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kp[Kp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kp[Kp.INTERNAL=13]="INTERNAL",Kp[Kp.UNAVAILABLE=14]="UNAVAILABLE",Kp[Kp.DATA_LOSS=15]="DATA_LOSS";class Xp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Nh(this.inner,(t,n)=>{for(const[i,r]of n)e(i,r)})}isEmpty(){return Fh(this.inner)}size(){return this.innerSize}}class ef{constructor(e,t){this.comparator=e,this.root=t||nf.EMPTY}insert(e,t){return new ef(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nf.BLACK,null,null))}remove(e){return new ef(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nf.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tf(this.root,e,this.comparator,!0)}}class tf{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nf{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:nf.RED,this.left=null!=i?i:nf.EMPTY,this.right=null!=r?r:nf.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new nf(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nf.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return nf.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw hh();if(this.right.isRed())throw hh();const e=this.left.check();if(e!==this.right.check())throw hh();return e+(this.isRed()?0:1)}}nf.EMPTY=null,nf.RED=!0,nf.BLACK=!1,nf.EMPTY=new class{constructor(){this.size=0}get key(){throw hh()}get value(){throw hh()}get color(){throw hh()}get left(){throw hh()}get right(){throw hh()}copy(e,t,n,i,r){return this}insert(e,t,n){return new nf(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rf{constructor(e){this.comparator=e,this.data=new ef(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sf(this.data.getIterator())}getIteratorFrom(e){return new sf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof rf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rf(this.comparator);return t.data=e,t}}class sf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function of(e){return e.hasNext()?e.getNext():void 0}const af=new ef(ed.comparator);function lf(){return af}const cf=new ef(ed.comparator);function uf(){return cf}function hf(){return new Xp(e=>e.toString(),(e,t)=>e.isEqual(t))}const df=new ef(ed.comparator),pf=new rf(ed.comparator);function ff(...e){let t=pf;for(const n of e)t=t.add(n);return t}const mf=new rf(Ih);function gf(){return mf}class _f{constructor(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,yf.createSynthesizedTargetChangeForCurrentChange(e,t)),new _f(Oh.min(),n,gf(),lf(),ff())}}class yf{constructor(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t){return new yf(Bh.EMPTY_BYTE_STRING,t,ff(),ff(),ff())}}class vf{constructor(e,t,n,i){this.O=e,this.removedTargetIds=t,this.key=n,this.F=i}}class bf{constructor(e,t){this.targetId=e,this.$=t}}class wf{constructor(e,t,n=Bh.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Cf{constructor(){this.B=0,this.L=Tf(),this.U=Bh.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=ff(),t=ff(),n=ff();return this.L.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:hh()}}),new yf(this.U,this.q,e,t,n)}J(){this.G=!1,this.L=Tf()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Sf{constructor(e){this.nt=e,this.st=new Map,this.it=lf(),this.rt=kf(),this.ot=new rf(Ih)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const n=this.lt(t);switch(e.state){case 0:this.ft(t)&&n.W(e.resumeToken);break;case 1:n.tt(),n.K||n.J(),n.W(e.resumeToken);break;case 2:n.tt(),n.K||this.removeTarget(t);break;case 3:this.ft(t)&&(n.et(),n.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),n.W(e.resumeToken));break;default:hh()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((e,n)=>{this.ft(n)&&t(n)})}_t(e){const t=e.targetId,n=e.$.count,i=this.wt(t);if(i){const e=i.target;if(Ld(e))if(0===n){const n=new ed(e.path);this.ct(t,n,Cd.newNoDocument(n,Oh.min()))}else dh(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((n,i)=>{const r=this.wt(i);if(r){if(n.current&&Ld(r.target)){const t=new ed(r.target.path);null!==this.it.get(t)||this.It(i,t)||this.ct(i,t,Cd.newNoDocument(t,e))}n.j&&(t.set(i,n.H()),n.J())}});let n=ff();this.rt.forEach((e,t)=>{let i=!0;t.forEachWhile(e=>{const t=this.wt(e);return!t||2===t.purpose||(i=!1,!1)}),i&&(n=n.add(e))}),this.it.forEach((t,n)=>n.setReadTime(e));const i=new _f(e,t,this.ot,this.it,n);return this.it=lf(),this.rt=kf(),this.ot=new rf(Ih),i}at(e,t){if(!this.ft(e))return;const n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Cf,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new rf(Ih),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ah("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Cf),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function kf(){return new ef(ed.comparator)}function Tf(){return new ef(ed.comparator)}const Ef={asc:"ASCENDING",desc:"DESCENDING"},xf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class If{constructor(e,t){this.databaseId=e,this.N=t}}function Af(e,t){return e.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Df(e,t){return e.N?t.toBase64():t.toUint8Array()}function Rf(e,t){return Af(e,t.toTimestamp())}function Of(e){return dh(!!e),Oh.fromTimestamp(function(e){const t=Zh(e);return new Rh(t.seconds,t.nanos)}(e))}function Pf(e,t){return function(e){return new Mh(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Nf(e){const t=Mh.fromString(e);return dh(nm(t)),t}function Ff(e,t){return Pf(e.databaseId,t.path)}function Lf(e,t){const n=Nf(t);if(n.get(1)!==e.databaseId.projectId)throw new mh(fh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new mh(fh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ed(qf(n))}function Mf(e,t){return Pf(e.databaseId,t)}function Vf(e){const t=Nf(e);return 4===t.length?Mh.emptyPath():qf(t)}function Uf(e){return new Mh(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qf(e){return dh(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Bf(e,t,n){return{name:Ff(e,t),fields:n.value.mapValue.fields}}function jf(e,t,n){const i=Lf(e,t.name),r=Of(t.updateTime),s=new bd({mapValue:{fields:t.fields}}),o=Cd.newFoundDocument(i,r,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Zf(e,t){let n;if(t instanceof Bp)n={update:Bf(e,t.key,t.value)};else if(t instanceof Hp)n={delete:Ff(e,t.key)};else if(t instanceof jp)n={update:Bf(e,t.key,t.data),updateMask:tm(t.fieldMask)};else{if(!(t instanceof Yp))return hh();n={verify:Ff(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Sp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof kp)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ep)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ip)return{fieldPath:t.field.canonicalString(),increment:n.k};throw hh()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Rf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:hh()}(e,t.precondition)),n}function zf(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Pp.updateTime(Of(e.updateTime)):void 0!==e.exists?Pp.exists(e.exists):Pp.none()}(t.currentDocument):Pp.none(),i=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(dh("REQUEST_TIME"===t.setToServerValue),n=new Sp):"appendMissingElements"in t?n=new kp(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new Ep(t.removeAllFromArray.values||[]):"increment"in t?n=new Ip(e,t.increment):hh();const i=Uh.fromServerFormat(t.fieldPath);return new Rp(i,n)}(e,t)):[];if(t.update){const r=Lf(e,t.update.name),s=new bd({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){return new qh((e.fieldPaths||[]).map(e=>Uh.fromServerFormat(e)))}(t.updateMask);return new jp(r,s,e,n,i)}return new Bp(r,s,n,i)}if(t.delete){const i=Lf(e,t.delete);return new Hp(i,n)}if(t.verify){const i=Lf(e,t.verify);return new Yp(i,n)}return hh()}function Gf(e,t){return{documents:[Mf(e,t.path)]}}function Hf(e,t){const n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n.parent=Mf(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Mf(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(fd(e.value))return{unaryFilter:{field:Qf(e.field),op:"IS_NAN"}};if(pd(e.value))return{unaryFilter:{field:Qf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fd(e.value))return{unaryFilter:{field:Qf(e.field),op:"IS_NOT_NAN"}};if(pd(e.value))return{unaryFilter:{field:Qf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qf(e.field),op:Kf(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);r&&(n.structuredQuery.where=r);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Qf(e.field),direction:Wf(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.N||Qh(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Yf(e){let t=Vf(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){dh(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=$f(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new $d(Jf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Qh(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){return new Yd(e.values||[],!!e.before)}(n.startAt));let c=null;return n.endAt&&(c=function(e){return new Yd(e.values||[],!e.before)}(n.endAt)),Xd(t,r,o,s,a,"F",l,c)}function $f(e){return e?void 0!==e.unaryFilter?[em(e)]:void 0!==e.fieldFilter?[Xf(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>$f(e)).reduce((e,t)=>e.concat(t)):hh():[]}function Wf(e){return Ef[e]}function Kf(e){return xf[e]}function Qf(e){return{fieldPath:e.canonicalString()}}function Jf(e){return Uh.fromServerFormat(e.fieldPath)}function Xf(e){return Vd.create(Jf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return hh()}}(e.fieldFilter.op),e.fieldFilter.value)}function em(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Jf(e.unaryFilter.field);return Vd.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Jf(e.unaryFilter.field);return Vd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Jf(e.unaryFilter.field);return Vd.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Jf(e.unaryFilter.field);return Vd.create(r,"!=",{nullValue:"NULL_VALUE"});default:return hh()}}function tm(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function nm(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function im(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=sm(t)),t=rm(e.get(n),t);return sm(t)}function rm(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const t=e.charAt(r);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function sm(e){return e+"\x01\x01"}function om(e){const t=e.length;if(dh(t>=2),2===t)return dh("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Mh.emptyPath();const n=t-2,i=[];let r="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&hh(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===r.length?o=n:(r+=n,o=r,r=""),i.push(o);break;case"\x10":r+=e.substring(s,t),r+="\0";break;case"\x11":r+=e.substring(s,t+1);break;default:hh()}s=t+2}return new Mh(i)}const am=["userId","batchId"];function lm(e,t){return[e,im(t)]}function cm(e,t,n){return[e,im(t),n]}const um={},hm=["prefixPath","collectionGroup","readTime","documentId"],dm=["prefixPath","collectionGroup","documentId"],pm=["collectionGroup","readTime","prefixPath","documentId"],fm=["canonicalId","targetId"],mm=["targetId","path"],gm=["path","targetId"],_m=["collectionId","parent"],ym=["indexId","uid"],vm=["uid","sequenceNumber"],bm=["indexId","uid","arrayValue","directionalValue","documentKey"],wm=["indexId","uid","documentKey"],Cm=["userId","collectionPath","documentId"],Sm=["userId","collectionPath","largestBatchId"],km=["userId","collectionGroup","largestBatchId"],Tm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Em=[...Tm,"documentOverlays"],xm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Im=[...xm,"indexConfiguration","indexState","indexEntries"],Am="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Rm{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&hh(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Rm((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Rm?t:Rm.resolve(t)}catch(e){return Rm.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Rm.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Rm.reject(t)}static resolve(e){return new Rm((t,n)=>{t(e)})}static reject(e){return new Rm((t,n)=>{n(e)})}static waitFor(e){return new Rm((t,n)=>{let i=0,r=0,s=!1;e.forEach(e=>{++i,e.next(()=>{++r,s&&r===i&&t()},e=>n(e))}),s=!0,r===i&&t()})}static or(e){let t=Rm.resolve(!1);for(const n of e)t=t.next(e=>e?Rm.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,i)=>{n.push(t.call(this,e,i))}),this.waitFor(n)}}class Om{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new gh,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Fm(e,t.error)):this.At.resolve()},this.transaction.onerror=t=>{const n=qm(t.target.error);this.At.reject(new Fm(e,n))}}static open(e,t,n,i){try{return new Om(t,e.transaction(i,n))}catch(e){throw new Fm(t,e)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ah("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Mm(t)}}class Pm{constructor(e,t,n){this.name=e,this.version=t,this.Pt=n,12.2===Pm.Vt((0,Fo.z$)())&&lh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ah("SimpleDb","Removing database:",e),Vm(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Fo.hl)())return!1;if(Pm.St())return!0;const e=(0,Fo.z$)(),t=Pm.Vt(e),n=0<t&&t<10,i=Pm.Dt(e),r=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||r)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Nt(e){var t=this;return(0,Ko.Z)(function*(){return t.db||(ah("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,i)=>{const r=indexedDB.open(t.name,t.version);r.onsuccess=e=>{n(e.target.result)},r.onblocked=()=>{i(new Fm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const n=t.target.error;i("VersionError"===n.name?new mh(fh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new mh(fh.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new Fm(e,n))},r.onupgradeneeded=e=>{ah("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.Pt.kt(e.target.result,r.transaction,e.oldVersion,t.version).next(()=>{ah("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=e=>t.Mt(e)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,i){var r=this;return(0,Ko.Z)(function*(){const s="readonly"===t;let o=0;for(;;){++o;try{r.db=yield r.Nt(e);const t=Om.open(r.db,e,s?"readonly":"readwrite",n),o=i(t).next(e=>(t.bt(),e)).catch(e=>(t.abort(e),Rm.reject(e))).toPromise();return o.catch(()=>{}),yield t.Rt,o}catch(e){const n="FirebaseError"!==e.name&&o<3;if(ah("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),r.close(),!n)return Promise.reject(e)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Nm{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Vm(this.Ft.delete())}}class Fm extends mh{constructor(e,t){super(fh.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Lm(e){return"IndexedDbTransactionError"===e.name}class Mm{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(ah("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ah("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Vm(n)}add(e){return ah("SimpleDb","ADD",this.store.name,e,e),Vm(this.store.add(e))}get(e){return Vm(this.store.get(e)).next(t=>(void 0===t&&(t=null),ah("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ah("SimpleDb","DELETE",this.store.name,e),Vm(this.store.delete(e))}count(){return ah("SimpleDb","COUNT",this.store.name),Vm(this.store.count())}qt(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.Gt(e,(e,n)=>{t.push(n)}).next(()=>t)}{const e=this.store.getAll(n.range);return new Rm((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}}Kt(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Rm((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}Qt(e,t){ah("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.jt=!1;const i=this.cursor(n);return this.Gt(i,(e,t,n)=>n.delete())}Wt(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new Rm((n,i)=>{t.onerror=e=>{const t=qm(e.target.error);i(t)},t.onsuccess=t=>{const i=t.target.result;i?e(i.primaryKey,i.value).next(e=>{e?i.continue():n()}):n()}})}Gt(e,t){const n=[];return new Rm((i,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{const r=e.target.result;if(!r)return void i();const s=new Nm(r),o=t(r.primaryKey,r.value,s);if(o instanceof Rm){const e=o.catch(e=>(s.done(),Rm.reject(e)));n.push(e)}s.isDone?i():null===s.Lt?r.continue():r.continue(s.Lt)}}).next(()=>Rm.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Vm(e){return new Rm((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=qm(e.target.error);n(t)}})}let Um=!1;function qm(e){const t=Pm.Vt((0,Fo.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new mh("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Um||(Um=!0,setTimeout(()=>{throw e},0)),e}}return e}class Bm extends Dm{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function jm(e,t){const n=ph(e);return Pm.xt(n.Ht,t)}class Zm{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&Lp(t,e,n[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Mp(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Mp(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),i=n;this.applyToLocalView(i),n.isValidDocument()||i.convertToNoDocument(Oh.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ff())}isEqual(e){return this.batchId===e.batchId&&Ah(this.mutations,e.mutations,(e,t)=>Up(e,t))&&Ah(this.baseMutations,e.baseMutations,(e,t)=>Up(e,t))}}class zm{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){dh(e.mutations.length===n.length);let i=df;const r=e.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new zm(e,t,n,i)}}class Gm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Hm{constructor(e,t,n,i,r=Oh.min(),s=Oh.min(),o=Bh.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Hm(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Hm(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Hm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ym{constructor(e){this.Jt=e}}function $m(e,t){const n=t.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Wm(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(e,t){return{name:Ff(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Af(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Km(t.version)};else{if(!t.isUnknownDocument())return hh();i.unknownDocument={path:n.path.toArray(),version:Km(t.version)}}return i}function Wm(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Km(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Qm(e){const t=new Rh(e.seconds,e.nanoseconds);return Oh.fromTimestamp(t)}function Jm(e,t){const n=(t.baseMutations||[]).map(t=>zf(e.Jt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(t=>zf(e.Jt,t)),r=Rh.fromMillis(t.localWriteTimeMs);return new Zm(t.batchId,r,n,i)}function Xm(e){const t=Qm(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Qm(e.lastLimboFreeSnapshotVersion):Oh.min();let i;var r;return void 0!==e.query.documents?(dh(1===(r=e.query).documents.length),i=ap(ep(Vf(r.documents[0])))):i=function(e){return ap(Yf(e))}(e.query),new Hm(i,e.targetId,0,e.lastListenSequenceNumber,t,n,Bh.fromBase64String(e.resumeToken))}function eg(e,t){const n=Km(t.snapshotVersion),i=Km(t.lastLimboFreeSnapshotVersion);let r;r=Ld(t.target)?Gf(e.Jt,t.target):Hf(e.Jt,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Nd(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function tg(e){const t=Yf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?lp(t,t.limit,"L"):t}function ng(e,t){return new Gm(t.largestBatchId,zf(e.Jt,t.overlayMutation))}function ig(e,t){const n=t.path.lastSegment();return[e,im(t.path.popLast()),n]}class rg{getBundleMetadata(e,t){return sg(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:Qm(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return sg(e).put({bundleId:(n=t).id,createTime:Km(Of(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return og(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:tg(t.bundledQuery),readTime:Qm(t.readTime)};var t})}saveNamedQuery(e,t){return og(e).put(function(e){return{name:e.name,readTime:Km(Of(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function sg(e){return jm(e,"bundles")}function og(e){return jm(e,"namedQueries")}class ag{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new ag(e,t.uid||"")}getOverlay(e,t){return lg(e).get(ig(this.userId,t)).next(e=>e?ng(this.M,e):null)}saveOverlays(e,t,n){const i=[];return n.forEach((n,r)=>{const s=new Gm(t,r);i.push(this.Xt(e,s))}),Rm.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach(e=>i.add(im(e.getCollectionPath())));const r=[];return i.forEach(t=>{const i=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);r.push(lg(e).Qt("collectionPathOverlayIndex",i))}),Rm.waitFor(r)}getOverlaysForCollection(e,t,n){const i=hf(),r=im(t),s=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return lg(e).qt("collectionPathOverlayIndex",s).next(e=>{for(const t of e){const e=ng(this.M,t);i.set(e.getKey(),e)}return i})}getOverlaysForCollectionGroup(e,t,n,i){const r=hf();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lg(e).Wt({index:"collectionGroupOverlayIndex",range:o},(e,t,n)=>{const o=ng(this.M,t);r.size()<i||o.largestBatchId===s?(r.set(o.getKey(),o),s=o.largestBatchId):n.done()}).next(()=>r)}Xt(e,t){return lg(e).put(function(e,t,n){const[i,r,s]=ig(t,n.mutation.key);return{userId:t,collectionPath:r,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Zf(e.Jt,n.mutation)}}(this.M,this.userId,t))}}function lg(e){return jm(e,"documentOverlays")}class cg{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(zh(e.integerValue));else if("doubleValue"in e){const n=zh(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Jh(n)?t.se(0):t.se(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ne(t,20),"string"==typeof n?t.ie(n):(t.ie(`${n.seconds||""}`),t.se(n.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Gh(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ne(t,45),t.se(n.latitude||0),t.se(n.longitude||0)}else"mapValue"in e?_d(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):hh()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const n=e.fields||{};this.ne(t,55);for(const i of Object.keys(n))this.re(i,t),this.te(n[i],t)}he(e,t){const n=e.values||[];this.ne(t,50);for(const i of n)this.te(i,t)}ae(e,t){this.ne(t,37),ed.fromName(e).path.forEach(e=>{this.ne(t,60),this.le(e,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function ug(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function hg(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const i=ug(255&e[n]);if(t+=i,8!==i)break}return t}(e);return Math.ceil(t/8)}cg.fe=new cg;class dg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this._e(n.value),n=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.ge(n.value),n=t.next();this.ye()}pe(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this._e(e);else if(e<2048)this._e(960|e>>>6),this._e(128|63&e);else if(t<"\ud800"||"\udbff"<t)this._e(480|e>>>12),this._e(128|63&e>>>6),this._e(128|63&e);else{const e=t.codePointAt(0);this._e(240|e>>>18),this._e(128|63&e>>>12),this._e(128|63&e>>>6),this._e(128|63&e)}}this.we()}Ie(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.ge(e);else if(e<2048)this.ge(960|e>>>6),this.ge(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.ge(480|e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e);else{const e=t.codePointAt(0);this.ge(240|e>>>18),this.ge(128|63&e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e)}}this.ye()}Te(e){const t=this.Ee(e),n=hg(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),n=hg(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class pg{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class fg{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class mg{constructor(){this.De=new dg,this.Ce=new pg(this.De),this.xe=new fg(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class gg{constructor(e,t,n,i){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new gg(this.indexId,this.documentKey,this.arrayValue,n)}}function _g(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=yg(e.arrayValue,t.arrayValue),0!==n?n:(n=yg(e.directionalValue,t.directionalValue),0!==n?n:ed.comparator(e.documentKey,t.documentKey)))}function yg(e,t){for(let n=0;n<e.length&&n<t.length;++n){const i=e[n]-t[n];if(0!==i)return i}return e.length-t.length}class vg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const e=t;e.S()?this.Fe=e:this.Oe.push(e)}}$e(e){const t=kd(e);if(void 0!==t&&!this.Be(t))return!1;const n=Td(e);let i=0,r=0;for(;i<n.length&&this.Be(n[i]);++i);if(i===n.length)return!0;if(void 0!==this.Fe){const e=n[i];if(!this.Le(this.Fe,e)||!this.Ue(this.Me[r++],e))return!1;++i}for(;i<n.length;++i){const e=n[i];if(r>=this.Me.length||!this.Ue(this.Me[r++],e))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class bg{constructor(){this.qe=new wg}addToCollectionParentIndex(e,t){return this.qe.add(t),Rm.resolve()}getCollectionParents(e,t){return Rm.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return Rm.resolve()}deleteFieldIndex(e,t){return Rm.resolve()}getDocumentsMatchingTarget(e,t){return Rm.resolve(null)}getFieldIndex(e,t){return Rm.resolve(null)}getFieldIndexes(e,t){return Rm.resolve([])}getNextCollectionGroupToUpdate(e){return Rm.resolve(null)}updateCollectionGroup(e,t,n){return Rm.resolve()}updateIndexEntries(e,t){return Rm.resolve()}}class wg{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new rf(Mh.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new rf(Mh.comparator)).toArray()}}const Cg=new Uint8Array(0);class Sg{constructor(e){this.user=e,this.Ge=new wg,this.Ke=new Xp(e=>Nd(e),(e,t)=>Fd(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const r={collectionId:n,parent:im(i)};return kg(e).put(r)}return Rm.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[Dh(t),""],!1,!0);return kg(e).qt(i).next(e=>{for(const i of e){if(i.collectionId!==t)break;n.push(om(i.parent))}return n})}addFieldIndex(e,t){const n=Eg(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);return delete i.indexId,n.add(i).next()}deleteFieldIndex(e,t){const n=Eg(e),i=xg(e),r=Tg(e);return n.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const n=Tg(e);let i=!0;const r=new Map;return Rm.forEach(this.Qe(t),t=>this.getFieldIndex(e,t).next(e=>{i&&(i=!!e),r.set(t,e)})).next(()=>{if(i){let e=ff();return Rm.forEach(r,(i,r)=>{var s;ah("IndexedDbIndexManager",`Using index ${s=i,`id=${s.indexId}|cg=${s.collectionGroup}|f=${s.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`} to execute ${Nd(t)}`);const o=function(e,t){const n=kd(t);if(void 0===n)return null;for(const i of Md(e,n.fieldPath))switch(i.op){case"array-contains-any":return i.value.arrayValue.values||[];case"array-contains":return[i.value]}return null}(r,i),a=function(e,t){const n=new Map;for(const i of Td(t))for(const t of Md(e,i.fieldPath))switch(t.op){case"==":case"in":n.set(i.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(i.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(r,i),l=function(e,t){const n=[];let i=!0;for(const s of Td(t)){let t,o=!0;for(const n of Md(e,s.fieldPath)){let e,i=!0;switch(n.op){case"<":case"<=":e="nullValue"in(r=n.value)?nd:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?ud(Kh.empty(),ed.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:hh();break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,i=!1;break;case"!=":case"not-in":e=nd}yd(t,e)===e&&(t=e,o=i)}if(null!==e.startAt)for(let n=0;n<e.orderBy.length;++n)if(e.orderBy[n].field.isEqual(s.fieldPath)){const i=e.startAt.position[n];yd(t,i)===i&&(t=i,o=e.startAt.inclusive);break}if(void 0===t)return null;n.push(t),i&&(i=o)}var r;return new Yd(n,i)}(r,i),c=function(e,t){const n=[];let i=!0;for(const s of Td(t)){let t,o=!0;for(const n of Md(e,s.fieldPath)){let e,i=!0;switch(n.op){case">=":case">":e="nullValue"in(r=n.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?ud(Kh.empty(),ed.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?td:hh(),i=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,i=!1;break;case"!=":case"not-in":e=td}vd(t,e)===e&&(t=e,o=i)}if(null!==e.endAt)for(let n=0;n<e.orderBy.length;++n)if(e.orderBy[n].field.isEqual(s.fieldPath)){const i=e.endAt.position[n];vd(t,i)===i&&(t=i,o=e.endAt.inclusive);break}if(void 0===t)return null;n.push(t),i&&(i=o)}var r;return new Yd(n,i)}(r,i),u=this.je(i,r,l),h=this.je(i,r,c),d=this.We(i,r,a),p=this.ze(i.indexId,o,u,!!l&&l.inclusive,h,!!c&&c.inclusive,d);return Rm.forEach(p,i=>n.Kt(i,t.limit).next(t=>{t.forEach(t=>{e=e.add(new ed(om(t.documentKey)))})}))}).next(()=>e)}return Rm.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,n,i,r,s,o){const a=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=r?r.length:1),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.He(t[u/l]):Cg,h=n?this.Je(e,a,n[u%l],i):this.Ye(e),d=r?this.Xe(e,a,r[u%l],s):this.Ye(e+1);c.push(...this.createRange(h,d,o.map(t=>this.Je(e,a,t,!0))))}return c}Je(e,t,n,i){const r=new gg(e,ed.empty(),t,n);return i?r:r.ke()}Xe(e,t,n,i){const r=new gg(e,ed.empty(),t,n);return i?r.ke():r}Ye(e){return new gg(e,ed.empty(),Cg,Cg)}getFieldIndex(e,t){const n=new vg(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(e=>{const t=e.filter(e=>n.$e(e));return t.sort((e,t)=>t.fields.length-e.fields.length),t.length>0?t[0]:null})}Ze(e,t){const n=new mg;for(const i of Td(e)){const e=t.data.field(i.fieldPath);if(null==e)return null;const r=n.Ne(i.kind);cg.fe.Zt(e,r)}return n.Se()}He(e){const t=new mg;return cg.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,n){if(null===n)return[];let i=[];i.push(new mg);let r=0;for(const s of Td(e)){const e=n[r++];for(const n of i)if(this.tn(t,s.fieldPath)&&dd(e))i=this.en(i,s,e);else{const t=n.Ne(s.kind);cg.fe.Zt(e,t)}}return this.nn(i)}je(e,t,n){return null==n?null:this.We(e,t,n.position)}nn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Se();return t}en(e,t,n){const i=[...e],r=[];for(const s of n.arrayValue.values||[])for(const e of i){const n=new mg;n.seed(e.Se()),cg.fe.Zt(s,n.Ne(t.kind)),r.push(n)}return r}tn(e,t){return!!e.filters.find(e=>e instanceof Vd&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=Eg(e),i=xg(e);return(t?n.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.qt()).next(e=>{const t=[];return Rm.forEach(e,e=>i.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new xd(t.sequenceNumber,new Dd(Qm(t.readTime),new ed(om(t.documentKey)),t.largestBatchId)):xd.empty(),i=e.fields.map(([e,t])=>new Ed(Uh.fromServerFormat(e),t));return new Sd(e.indexId,e.collectionGroup,i,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ih(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const i=Eg(e),r=xg(e);return this.sn(e).next(e=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>Rm.forEach(t,t=>r.put(function(e,t,n,i){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Km(i.readTime),documentKey:im(i.documentKey.path),largestBatchId:i.largestBatchId}}(t.indexId,this.user,e,n)))))}updateIndexEntries(e,t){const n=new Map;return Rm.forEach(t,(t,i)=>{const r=n.get(t.collectionGroup);return(r?Rm.resolve(r):this.getFieldIndexes(e,t.collectionGroup)).next(r=>(n.set(t.collectionGroup,r),Rm.forEach(r,n=>this.rn(e,t,n).next(t=>{const r=this.on(i,n);return t.isEqual(r)?Rm.resolve():this.un(e,i,t,r)}))))})}an(e,t,n){return Tg(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:im(t.key.path)})}cn(e,t,n){return Tg(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,im(t.key.path)])}rn(e,t,n){const i=Tg(e);let r=new rf(_g);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,im(t.path)])},(e,i)=>{r=r.add(new gg(n.indexId,t,i.arrayValue,i.directionalValue))}).next(()=>r)}on(e,t){let n=new rf(_g);const i=this.Ze(t,e);if(null==i)return n;const r=kd(t);if(null!=r){const s=e.data.field(r.fieldPath);if(dd(s))for(const r of s.arrayValue.values||[])n=n.add(new gg(t.indexId,e.key,this.He(r),i))}else n=n.add(new gg(t.indexId,e.key,Cg,i));return n}un(e,t,n,i){ah("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const r=[];return function(e,t,n,i,r){const s=e.getIterator(),o=t.getIterator();let a=of(s),l=of(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const i=n(a,l);i<0?t=!0:i>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(i(l),l=of(o)):t?(r(a),a=of(s)):(a=of(s),l=of(o))}}(n,i,_g,n=>{r.push(this.an(e,t,n))},n=>{r.push(this.cn(e,t,n))}),Rm.waitFor(r)}sn(e){let t=1;return xg(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,i)=>{i.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>_g(e,t)).filter((e,t,n)=>!t||0!==_g(e,n[t-1]));const i=[];i.push(e);for(const s of n){const n=_g(s,e),r=_g(s,t);if(0===n)i[0]=e.ke();else if(n>0&&r<0)i.push(s),i.push(s.ke());else if(r>0)break}i.push(t);const r=[];for(let s=0;s<i.length;s+=2)r.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,""],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,""]));return r}}function kg(e){return jm(e,"collectionParents")}function Tg(e){return jm(e,"indexEntries")}function Eg(e){return jm(e,"indexConfiguration")}function xg(e){return jm(e,"indexState")}const Ig={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ag{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ag(e,Ag.DEFAULT_COLLECTION_PERCENTILE,Ag.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Dg(e,t,n){const i=e.store("mutations"),r=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=i.Wt({range:o},(e,t,n)=>(a++,n.delete()));s.push(l.next(()=>{dh(1===a)}));const c=[];for(const u of n.mutations){const e=cm(t,u.key.path,n.batchId);s.push(r.delete(e)),c.push(u.key)}return Rm.waitFor(s).next(()=>c)}function Rg(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw hh();t=e.noDocument}return JSON.stringify(t).length}Ag.DEFAULT_COLLECTION_PERCENTILE=10,Ag.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ag.DEFAULT=new Ag(41943040,Ag.DEFAULT_COLLECTION_PERCENTILE,Ag.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ag.DISABLED=new Ag(-1,0,0);class Og{constructor(e,t,n,i){this.userId=e,this.M=t,this.indexManager=n,this.referenceDelegate=i,this.hn={}}static Yt(e,t,n,i){dh(""!==e.uid);const r=e.isAuthenticated()?e.uid:"";return new Og(r,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ng(e).Wt({index:"userMutationsIndex",range:n},(e,n,i)=>{t=!1,i.done()}).next(()=>t)}addMutationBatch(e,t,n,i){const r=Fg(e),s=Ng(e);return s.add({}).next(o=>{dh("number"==typeof o);const a=new Zm(o,t,n,i),l=function(e,t,n){const i=n.baseMutations.map(t=>Zf(e.Jt,t)),r=n.mutations.map(t=>Zf(e.Jt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:i,mutations:r}}(this.M,this.userId,a),c=[];let u=new rf((e,t)=>Ih(e.canonicalString(),t.canonicalString()));for(const e of i){const t=cm(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(r.put(t,um))}return u.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.hn[o]=a.keys()}),Rm.waitFor(c).next(()=>a)})}lookupMutationBatch(e,t){return Ng(e).get(t).next(e=>e?(dh(e.userId===this.userId),Jm(this.M,e)):null)}ln(e,t){return this.hn[t]?Rm.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.hn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let r=null;return Ng(e).Wt({index:"userMutationsIndex",range:i},(e,t,i)=>{t.userId===this.userId&&(dh(t.batchId>=n),r=Jm(this.M,t)),i.done()}).next(()=>r)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ng(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(e,t,i)=>{n=t.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ng(e).qt("userMutationsIndex",t).next(e=>e.map(e=>Jm(this.M,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=lm(this.userId,t.path),i=IDBKeyRange.lowerBound(n),r=[];return Fg(e).Wt({range:i},(n,i,s)=>{const[o,a,l]=n,c=om(a);if(o===this.userId&&t.path.isEqual(c))return Ng(e).get(l).next(e=>{if(!e)throw hh();dh(e.userId===this.userId),r.push(Jm(this.M,e))});s.done()}).next(()=>r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new rf(Ih);const i=[];return t.forEach(t=>{const r=lm(this.userId,t.path),s=IDBKeyRange.lowerBound(r),o=Fg(e).Wt({range:s},(e,i,r)=>{const[s,o,a]=e,l=om(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):r.done()});i.push(o)}),Rm.waitFor(i).next(()=>this.fn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,r=lm(this.userId,n),s=IDBKeyRange.lowerBound(r);let o=new rf(Ih);return Fg(e).Wt({range:s},(e,t,r)=>{const[s,a,l]=e,c=om(a);s===this.userId&&n.isPrefixOf(c)?c.length===i&&(o=o.add(l)):r.done()}).next(()=>this.fn(e,o))}fn(e,t){const n=[],i=[];return t.forEach(t=>{i.push(Ng(e).get(t).next(e=>{if(null===e)throw hh();dh(e.userId===this.userId),n.push(Jm(this.M,e))}))}),Rm.waitFor(i).next(()=>n)}removeMutationBatch(e,t){return Dg(e.Ht,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),Rm.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Rm.resolve();const n=IDBKeyRange.lowerBound([this.userId]),i=[];return Fg(e).Wt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=om(e[1]);i.push(t)}else n.done()}).next(()=>{dh(0===i.length)})})}containsKey(e,t){return Pg(e,this.userId,t)}_n(e){return Lg(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Pg(e,t,n){const i=lm(t,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return Fg(e).Wt({range:s,jt:!0},(e,n,i)=>{const[s,a,l]=e;s===t&&a===r&&(o=!0),i.done()}).next(()=>o)}function Ng(e){return jm(e,"mutations")}function Fg(e){return jm(e,"documentMutations")}function Lg(e){return jm(e,"mutationQueues")}class Mg{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Mg(0)}static gn(){return new Mg(-1)}}class Vg{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const n=new Mg(t.highestTargetId);return t.highestTargetId=n.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(e=>Oh.fromTimestamp(new Rh(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(n=>(n.targetCount+=1,this.Tn(t,n),this.pn(e,n))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ug(e).delete(t.targetId)).next(()=>this.yn(e)).next(t=>(dh(t.targetCount>0),t.targetCount-=1,this.pn(e,t)))}removeTargets(e,t,n){let i=0;const r=[];return Ug(e).Wt((s,o)=>{const a=Xm(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(i++,r.push(this.removeTargetData(e,a)))}).next(()=>Rm.waitFor(r)).next(()=>i)}forEachTarget(e,t){return Ug(e).Wt((e,n)=>{const i=Xm(n);t(i)})}yn(e){return qg(e).get("targetGlobalKey").next(e=>(dh(null!==e),e))}pn(e,t){return qg(e).put("targetGlobalKey",t)}In(e,t){return Ug(e).put(eg(this.M,t))}Tn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.yn(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Nd(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let r=null;return Ug(e).Wt({range:i,index:"queryTargetsIndex"},(e,n,i)=>{const s=Xm(n);Fd(t,s.target)&&(r=s,i.done())}).next(()=>r)}addMatchingKeys(e,t,n){const i=[],r=Bg(e);return t.forEach(t=>{const s=im(t.path);i.push(r.put({targetId:n,path:s})),i.push(this.referenceDelegate.addReference(e,n,t))}),Rm.waitFor(i)}removeMatchingKeys(e,t,n){const i=Bg(e);return Rm.forEach(t,t=>{const r=im(t.path);return Rm.waitFor([i.delete([n,r]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Bg(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=Bg(e);let r=ff();return i.Wt({range:n,jt:!0},(e,t,n)=>{const i=om(e[1]),s=new ed(i);r=r.add(s)}).next(()=>r)}containsKey(e,t){const n=im(t.path),i=IDBKeyRange.bound([n],[Dh(n)],!1,!0);let r=0;return Bg(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([e,t],n,i)=>{0!==e&&(r++,i.done())}).next(()=>r>0)}Et(e,t){return Ug(e).get(t).next(e=>e?Xm(e):null)}}function Ug(e){return jm(e,"targets")}function qg(e){return jm(e,"targetGlobal")}function Bg(e){return jm(e,"targetDocuments")}function jg(e){return Zg.apply(this,arguments)}function Zg(){return(Zg=(0,Ko.Z)(function*(e){if(e.code!==fh.FAILED_PRECONDITION||e.message!==Am)throw e;ah("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function zg([e,t],[n,i]){const r=Ih(e,n);return 0===r?Ih(t,i):r}class Gg{constructor(e){this.En=e,this.buffer=new rf(zg),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();zg(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Hg{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const n=this.Pn?3e5:6e4;ah("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,Ko.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(e){Lm(e)?ah("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield jg(e)}yield t.vn(e)}))}}class Yg{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Rm.resolve(Th.A);const n=new Gg(t);return this.Sn.forEachTarget(e,e=>n.bn(e.sequenceNumber)).next(()=>this.Sn.Cn(e,e=>n.bn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Sn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ah("LruGarbageCollector","Garbage collection skipped; disabled"),Rm.resolve(Ig)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ah("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ig):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let n,i,r,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(ah("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),i=this.params.maximumSequenceNumbersToCollect):i=t,s=Date.now(),this.nthSequenceNumber(e,i))).next(i=>(n=i,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(r=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),oh()<=Mo.in.DEBUG&&ah("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${i} in `+(o-s)+"ms\n"+`\tRemoved ${r} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),Rm.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:e})))}}class $g{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Yg(e,t)}(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Nn(e){let t=0;return this.Cn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(e,n)=>t(n))}addReference(e,t,n){return Wg(e,n)}removeReference(e,t,n){return Wg(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Wg(e,t)}Mn(e,t){return function(e,t){let n=!1;return Lg(e).zt(i=>Pg(e,i,t).next(e=>(e&&(n=!0),Rm.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let r=0;return this.kn(e,(s,o)=>{if(o<=t){const t=this.Mn(e,s).next(t=>{if(!t)return r++,n.getEntry(e,s).next(()=>(n.removeEntry(s,Oh.min()),Bg(e).delete([0,im(s.path)])))});i.push(t)}}).next(()=>Rm.waitFor(i)).next(()=>n.apply(e)).next(()=>r)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Wg(e,t)}kn(e,t){const n=Bg(e);let i,r=Th.A;return n.Wt({index:"documentTargetsIndex"},([e,n],{path:s,sequenceNumber:o})=>{0===e?(r!==Th.A&&t(new ed(om(i)),r),r=o,i=s):r=Th.A}).next(()=>{r!==Th.A&&t(new ed(om(i)),r)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wg(e,t){return Bg(e).put(function(e,t){return{targetId:0,path:im(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Kg{constructor(){this.changes=new Xp(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cd.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Rm.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Qg{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return e_(e).put(n)}removeEntry(e,t,n){return e_(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Wm(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.On(e,n)))}getEntry(e,t){let n=Cd.newInvalidDocument(t);return e_(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(t_(t))},(e,i)=>{n=this.Fn(t,i)}).next(()=>n)}$n(e,t){let n={size:0,document:Cd.newInvalidDocument(t)};return e_(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(t_(t))},(e,i)=>{n={document:this.Fn(t,i),size:Rg(i)}}).next(()=>n)}getEntries(e,t){let n=lf();return this.Bn(e,t,(e,t)=>{const i=this.Fn(e,t);n=n.insert(e,i)}).next(()=>n)}Ln(e,t){let n=lf(),i=new ef(ed.comparator);return this.Bn(e,t,(e,t)=>{const r=this.Fn(e,t);n=n.insert(e,r),i=i.insert(e,Rg(t))}).next(()=>({documents:n,Un:i}))}Bn(e,t,n){if(t.isEmpty())return Rm.resolve();let i=new rf(i_);t.forEach(e=>i=i.add(e));const r=IDBKeyRange.bound(t_(i.first()),t_(i.last())),s=i.getIterator();let o=s.getNext();return e_(e).Wt({index:"documentKeyIndex",range:r},(e,t,i)=>{const r=ed.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&i_(o,r)<0;)n(o,null),o=s.getNext();o&&o.isEqual(r)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?i.Ut(t_(o)):i.done()}).next(()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null})}getAllFromCollection(e,t,n){const i=[t.popLast().toArray(),t.lastSegment(),Wm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],r=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return e_(e).qt(IDBKeyRange.bound(i,r,!0)).next(e=>{let t=lf();for(const n of e){const e=this.Fn(ed.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);t=t.insert(e.key,e)}return t})}getAllFromCollectionGroup(e,t,n,i){let r=lf();const s=n_(t,n),o=n_(t,Dd.max());return e_(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},(e,t,n)=>{const s=this.Fn(ed.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);r=r.insert(s.key,s),r.size===i&&n.done()}).next(()=>r)}newChangeBuffer(e){return new Jg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Xg(e).get("remoteDocumentGlobalKey").next(e=>(dh(!!e),e))}On(e,t){return Xg(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const e=function(e,t){let n;if(t.document)n=jf(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=ed.fromSegments(t.noDocument.path),i=Qm(t.noDocument.readTime);n=Cd.newNoDocument(e,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return hh();{const e=ed.fromSegments(t.unknownDocument.path),i=Qm(t.unknownDocument.version);n=Cd.newUnknownDocument(e,i)}}return t.readTime&&n.setReadTime(function(e){const t=new Rh(e[0],e[1]);return Oh.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!e.isNoDocument()||!e.version.isEqual(Oh.min()))return e}return Cd.newInvalidDocument(e)}}class Jg extends Kg{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Xp(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,i=new rf((e,t)=>Ih(e.canonicalString(),t.canonicalString()));return this.changes.forEach((r,s)=>{const o=this.Gn.get(r);if(t.push(this.qn.removeEntry(e,r,o.readTime)),s.isValidDocument()){const a=$m(this.qn.M,s);i=i.add(r.path.popLast());const l=Rg(a);n+=l-o.size,t.push(this.qn.addEntry(e,r,a))}else if(n-=o.size,this.trackRemovals){const n=$m(this.qn.M,s.convertToNoDocument(Oh.min()));t.push(this.qn.addEntry(e,r,n))}}),i.forEach(n=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.qn.updateMetadata(e,n)),Rm.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(e=>(this.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:e,Un:t})=>(t.forEach((t,n)=>{this.Gn.set(t,{size:n,readTime:e.get(t).readTime})}),e))}}function Xg(e){return jm(e,"remoteDocumentGlobal")}function e_(e){return jm(e,"remoteDocumentsV14")}function t_(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function n_(e,t){const n=t.documentKey.path.toArray();return[e,Wm(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function i_(e,t){const n=e.path.length-t.path.length;return 0!==n?n:ed.comparator(e,t)}class r_{constructor(e){this.M=e}kt(e,t,n,i){const r=new Om("createOrUpgrade",t);n<1&&i>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",am,{unique:!0}),e.createObjectStore("documentMutations")}(e),s_(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Rm.resolve();return n<3&&i>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),s_(e)),s=s.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Oh.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(r))),n<4&&i>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store("mutations").qt().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",am,{unique:!0});const i=t.store("mutations"),r=n.map(e=>i.put(e));return Rm.waitFor(r)})}(e,r))),s=s.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&i>=5&&(s=s.next(()=>this.Kn(r))),n<6&&i>=6&&(s=s.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(r)))),n<7&&i>=7&&(s=s.next(()=>this.jn(r))),n<8&&i>=8&&(s=s.next(()=>this.Wn(e,r))),n<9&&i>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&i>=10&&(s=s.next(()=>this.zn(r))),n<11&&i>=11&&(s=s.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&i>=12&&(s=s.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Cm});t.createIndex("collectionPathOverlayIndex",Sm,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",km,{unique:!1})}(e)})),n<13&&i>=13&&(s=s.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:hm});t.createIndex("documentKeyIndex",dm),t.createIndex("collectionGroupIndex",pm)}(e)).next(()=>this.Hn(e,r)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&i>=14&&(s=s.next(()=>{!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ym}).createIndex("sequenceNumberIndex",vm,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:bm}).createIndex("documentKeyIndex",wm,{unique:!1})}(e)})),s}Qn(e){let t=0;return e.store("remoteDocuments").Wt((e,n)=>{t+=Rg(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Kn(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.qt().next(t=>Rm.forEach(t,t=>{const i=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.qt("userMutationsIndex",i).next(n=>Rm.forEach(n,n=>{dh(n.userId===t.userId);const i=Jm(this.M,n);return Dg(e,t.userId,i).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const i=[];return n.Wt((n,r)=>{const s=new Mh(n),o=function(e){return[0,im(e)]}(s);i.push(t.get(o).next(n=>n?Rm.resolve():(n=>t.put({targetId:0,path:im(n),sequenceNumber:e.highestListenSequenceNumber}))(s)))}).next(()=>Rm.waitFor(i))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:_m});const n=t.store("collectionParents"),i=new wg,r=e=>{if(i.add(e)){const t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:im(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(e,t)=>{const n=new Mh(e);return r(n.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([e,t,n],i)=>{const s=om(t);return r(s.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((e,n)=>{const i=Xm(n),r=eg(this.M,i);return t.put(r)})}Hn(e,t){const n=t.store("remoteDocuments"),i=[];return n.Wt((e,n)=>{const r=t.store("remoteDocumentsV14"),s=(o=n,o.document?new ed(Mh.fromString(o.document.name).popFirst(5)):o.noDocument?ed.fromSegments(o.noDocument.path):o.unknownDocument?ed.fromSegments(o.unknownDocument.path):hh()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};i.push(r.put(a))}).next(()=>Rm.waitFor(i))}}function s_(e){e.createObjectStore("targetDocuments",{keyPath:mm}).createIndex("documentTargetsIndex",gm,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fm,{unique:!0}),e.createObjectStore("targetGlobal")}const o_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class a_{constructor(e,t,n,i,r,s,o,a,l,c,u=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Jn=r,this.window=s,this.document=o,this.Yn=l,this.Xn=c,this.Zn=u,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=e=>Promise.resolve(),!a_.vt())throw new mh(fh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $g(this,i),this.cs=t+"main",this.M=new Ym(a),this.hs=new Pm(this.cs,this.Zn,new r_(this.M)),this.ls=new Vg(this.referenceDelegate,this.M),this.fs=function(e){return new Qg(e)}(this.M),this.ds=new rg,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===c&&lh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new mh(fh.FAILED_PRECONDITION,o_);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Th(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var n=(0,Ko.Z)(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,Ko.Z)(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,Ko.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>c_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(e=>{e||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Lm(e))return ah("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ah("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return l_(e).get("owner").next(e=>Rm.resolve(this.bs(e)))}Ps(e){return c_(e).delete(this.clientId)}Vs(){var e=this;return(0,Ko.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=jm(t,"clientMetadata");return n.qt().next(t=>{const i=e.Ss(t,18e5),r=t.filter(e=>-1===i.indexOf(e));return Rm.forEach(r,e=>n.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(e._s)for(const n of t)e._s.removeItem(e.Ds(n.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?Rm.resolve(!0):l_(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new mh(fh.FAILED_PRECONDITION,o_);return!1}}return!(!this.networkEnabled||!this.inForeground)||c_(e).qt().next(e=>void 0===this.Ss(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&ah("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return(0,Ko.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const n=new Bm(t,Th.A);return e.As(n).next(()=>e.Ps(n))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(e=>this.vs(e.updateTimeMs,t)&&!this.Cs(e.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>c_(e).qt().next(e=>this.Ss(e,18e5).map(e=>e.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Og.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new Sg(e)}getDocumentOverlayCache(e){return ag.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,n){ah("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",r=14===(s=this.Zn)?Im:13===s?xm:12===s?Em:11===s?Tm:void hh();var s;let o;return this.hs.runTransaction(e,i,r,i=>(o=new Bm(i,this.ts?this.ts.next():Th.A),"readwrite-primary"===t?this.Ts(o).next(e=>!!e||this.Es(o)).next(t=>{if(!t)throw lh(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new mh(fh.FAILED_PRECONDITION,Am);return n(o)}).next(e=>this.Rs(o).next(()=>e)):this.Fs(o).next(()=>n(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}Fs(e){return l_(e).get("owner").next(e=>{if(null!==e&&this.vs(e.leaseTimestampMs,5e3)&&!this.Cs(e.ownerId)&&!this.bs(e)&&!(this.Xn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new mh(fh.FAILED_PRECONDITION,o_)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return l_(e).put("owner",t)}static vt(){return Pm.vt()}As(e){const t=l_(e);return t.get("owner").next(e=>this.bs(e)?(ah("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Rm.resolve())}vs(e,t){const n=Date.now();return!(e<n-t||e>n&&(lh(`Detected an update time that is in the future: ${e} > ${n}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,Fo.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const n=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return ah("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return lh("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(ua){lh("Failed to set zombie client id.",ua)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(ua){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function l_(e){return jm(e,"owner")}function c_(e){return jm(e,"clientMetadata")}function u_(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class h_{constructor(e,t,n){this.fs=e,this.$s=t,this.indexManager=n}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Ls(e,t,n))}Ls(e,t,n){return this.fs.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}Us(e,t){e.forEach((e,n)=>{for(const i of t)i.applyToLocalView(n)})}qs(e,t){return this.fs.getEntries(e,t).next(t=>this.Gs(e,t).next(()=>t))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.Us(t,e))}Ks(e,t,n){return function(e){return ed.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):sp(t)?this.js(e,t,n):this.Ws(e,t,n)}Qs(e,t){return this.Bs(e,new ed(t)).next(e=>{let t=uf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}js(e,t,n){const i=t.collectionGroup;let r=uf();return this.indexManager.getCollectionParents(e,i).next(s=>Rm.forEach(s,s=>{const o=function(e,t){return new Jd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.Ws(e,o,n).next(e=>{e.forEach((e,t)=>{r=r.insert(e,t)})})}).next(()=>r))}Ws(e,t,n){let i;return this.fs.getAllFromCollection(e,t.path,n).next(n=>(i=n,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(e=>{for(const t of e)for(const e of t.mutations){const n=e.key;let r=i.get(n);null==r&&(r=Cd.newInvalidDocument(n),i=i.insert(n,r)),Mp(e,r,t.localWriteTime),r.isFoundDocument()||(i=i.remove(n))}}).next(()=>(i.forEach((e,n)=>{dp(t,n)||(i=i.remove(e))}),i))}}class d_{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.zs=n,this.Hs=i}static Js(e,t){let n=ff(),i=ff();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new d_(e,t.fromCache,n,i)}}class p_{Ys(e){this.Xs=e}Ks(e,t,n,i){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Oh.min())?this.Zs(e,t):this.Xs.qs(e,i).next(r=>{const s=this.ti(t,r);return(tp(t)||np(t))&&this.ei(t.limitType,s,i,n)?this.Zs(e,t):(oh()<=Mo.in.DEBUG&&ah("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),hp(t)),this.Xs.Ks(e,t,Id(n,-1)).next(e=>(s.forEach(t=>{e=e.insert(t.key,t)}),e)))})}ti(e,t){let n=new rf(fp(e));return t.forEach((t,i)=>{dp(e,i)&&(n=n.add(i))}),n}ei(e,t,n,i){if(n.size!==t.size)return!0;const r="F"===e?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Zs(e,t){return oh()<=Mo.in.DEBUG&&ah("QueryEngine","Using full collection scan to execute query:",hp(t)),this.Xs.Ks(e,t,Dd.min())}}class f_{constructor(e,t,n,i){this.persistence=e,this.ni=t,this.M=i,this.si=new ef(Ih),this.ii=new Xp(e=>Nd(e),Fd),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(n)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new h_(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function m_(e,t,n,i){return new f_(e,t,n,i)}function g_(e,t){return __.apply(this,arguments)}function __(){return(__=(0,Ko.Z)(function*(e,t){const n=ph(e);return yield n.persistence.runTransaction("Handle user change","readonly",e=>{let i;return n.$s.getAllMutationBatches(e).next(r=>(i=r,n.ui(t),n.$s.getAllMutationBatches(e))).next(t=>{const r=[],s=[];let o=ff();for(const e of i){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.ai.qs(e,o).next(e=>({ci:e,removedBatchIds:r,addedBatchIds:s}))})})})).apply(this,arguments)}function y_(e,t){const n=ph(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const i=t.batch.keys(),r=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,s=r.keys();let o=Rm.resolve();return s.forEach(e=>{o=o.next(()=>i.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);dh(null!==s),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))})}),o.next(()=>e.$s.removeMutationBatch(t,r))}(n,e,t,r).next(()=>r.apply(e)).next(()=>n.$s.performConsistencyCheck(e)).next(()=>n.ai.qs(e,i))})}function v_(e){const t=ph(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.ls.getLastRemoteSnapshotVersion(e))}function b_(e,t){const n=ph(e),i=t.snapshotVersion;let r=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.oi.newChangeBuffer({trackRemovals:!0});r=n.si;const o=[];t.targetChanges.forEach((s,a)=>{const l=r.get(a);if(!l)return;o.push(n.ls.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.ls.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?c=c.withResumeToken(Bh.EMPTY_BYTE_STRING,Oh.min()).withLastLimboFreeSnapshotVersion(Oh.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,i)),r=r.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.ls.updateTargetData(e,c))});let a=lf();if(t.documentUpdates.forEach(i=>{t.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))}),o.push(w_(e,s,t.documentUpdates).next(e=>{a=e})),!i.isEqual(Oh.min())){const t=n.ls.getLastRemoteSnapshotVersion(e).next(t=>n.ls.setTargetsMetadata(e,e.currentSequenceNumber,i));o.push(t)}return Rm.waitFor(o).next(()=>s.apply(e)).next(()=>n.ai.Gs(e,a)).next(()=>a)}).then(e=>(n.si=r,e))}function w_(e,t,n){let i=ff();return n.forEach(e=>i=i.add(e)),t.getEntries(e,i).next(e=>{let i=lf();return n.forEach((n,r)=>{const s=e.get(n);r.isNoDocument()&&r.version.isEqual(Oh.min())?(t.removeEntry(n,r.readTime),i=i.insert(n,r)):!s.isValidDocument()||r.version.compareTo(s.version)>0||0===r.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(r),i=i.insert(n,r)):ah("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",r.version)}),i})}function C_(e,t){const n=ph(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t)))}function S_(e,t){const n=ph(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let i;return n.ls.getTargetData(e,t).next(r=>r?(i=r,Rm.resolve(i)):n.ls.allocateTargetId(e).next(r=>(i=new Hm(t,r,0,e.currentSequenceNumber),n.ls.addTargetData(e,i).next(()=>i))))}).then(e=>{const i=n.si.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e})}function k_(e,t,n){return T_.apply(this,arguments)}function T_(){return(T_=(0,Ko.Z)(function*(e,t,n){const i=ph(e),r=i.si.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",s,e=>i.persistence.referenceDelegate.removeTarget(e,r)))}catch(e){if(!Lm(e))throw e;ah("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}i.si=i.si.remove(t),i.ii.delete(r.target)})).apply(this,arguments)}function E_(e,t,n){const i=ph(e);let r=Oh.min(),s=ff();return i.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const i=ph(e),r=i.ii.get(n);return void 0!==r?Rm.resolve(i.si.get(r)):i.ls.getTargetData(t,n)}(i,e,ap(t)).next(t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,i.ls.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>i.ni.Ks(e,t,n?r:Oh.min(),n?s:ff())).next(e=>(A_(i,pp(t),e),{documents:e,hi:s})))}function x_(e,t){const n=ph(e),i=ph(n.ls),r=n.si.get(t);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",e=>i.Et(e,t).next(e=>e?e.target:null))}function I_(e,t){const n=ph(e),i=n.ri.get(t)||Oh.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.oi.getAllFromCollectionGroup(e,t,Id(i,-1),Number.MAX_SAFE_INTEGER)).then(e=>(A_(n,t,e),e))}function A_(e,t,n){let i=Oh.min();n.forEach((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)}),e.ri.set(t,i)}function D_(){return(D_=(0,Ko.Z)(function*(e,t,n,i){const r=ph(e);let s=ff(),o=lf();for(const c of n){const e=t.li(c.metadata.name);c.document&&(s=s.add(e));const n=t.fi(c);n.setReadTime(t.di(c.metadata.readTime)),o=o.insert(e,n)}const a=r.oi.newChangeBuffer({trackRemovals:!0}),l=yield S_(r,function(e){return ap(ep(Mh.fromString(`__bundle__/docs/${e}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",e=>w_(e,a,o).next(t=>(a.apply(e),t)).next(t=>r.ls.removeMatchingKeysForTargetId(e,l.targetId).next(()=>r.ls.addMatchingKeys(e,s,l.targetId)).next(()=>r.ai.Gs(e,t)).next(()=>t)))})).apply(this,arguments)}function R_(e,t){return O_.apply(this,arguments)}function O_(){return(O_=(0,Ko.Z)(function*(e,t,n=ff()){const i=yield S_(e,ap(tg(t.bundledQuery))),r=ph(e);return r.persistence.runTransaction("Save named query","readwrite",e=>{const s=Of(t.readTime);if(i.snapshotVersion.compareTo(s)>=0)return r.ds.saveNamedQuery(e,t);const o=i.withResumeToken(Bh.EMPTY_BYTE_STRING,s);return r.si=r.si.insert(o.targetId,o),r.ls.updateTargetData(e,o).next(()=>r.ls.removeMatchingKeysForTargetId(e,i.targetId)).next(()=>r.ls.addMatchingKeys(e,n,i.targetId)).next(()=>r.ds.saveNamedQuery(e,t))})})).apply(this,arguments)}class P_{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return Rm.resolve(this._i.get(t))}saveBundleMetadata(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:Of(n.createTime)}),Rm.resolve()}getNamedQuery(e,t){return Rm.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:tg(e.bundledQuery),readTime:Of(e.readTime)}}(t)),Rm.resolve()}}class N_{constructor(){this.overlays=new ef(ed.comparator),this.mi=new Map}getOverlay(e,t){return Rm.resolve(this.overlays.get(t))}saveOverlays(e,t,n){return n.forEach((n,i)=>{this.Xt(e,t,i)}),Rm.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.mi.get(n);return void 0!==i&&(i.forEach(e=>this.overlays=this.overlays.remove(e)),this.mi.delete(n)),Rm.resolve()}getOverlaysForCollection(e,t,n){const i=hf(),r=t.length+1,s=new ed(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return Rm.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new ef((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=hf(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=hf(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=i)););return Rm.resolve(o)}Xt(e,t,n){if(null===n)return;const i=this.overlays.get(n.key);if(null!==i){const e=this.mi.get(i.largestBatchId).delete(n.key);this.mi.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Gm(t,n));let r=this.mi.get(t);void 0===r&&(r=ff(),this.mi.set(t,r)),this.mi.set(t,r.add(n.key))}}class F_{constructor(){this.gi=new rf(L_.yi),this.pi=new rf(L_.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const n=new L_(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}Ti(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Ei(new L_(e,t))}Ai(e,t){e.forEach(e=>this.removeReference(e,t))}Ri(e){const t=new ed(new Mh([])),n=new L_(t,e),i=new L_(t,e+1),r=[];return this.pi.forEachInRange([n,i],e=>{this.Ei(e),r.push(e.key)}),r}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new ed(new Mh([])),n=new L_(t,e),i=new L_(t,e+1);let r=ff();return this.pi.forEachInRange([n,i],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new L_(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class L_{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return ed.comparator(e.key,t.key)||Ih(e.Vi,t.Vi)}static Ii(e,t){return Ih(e.Vi,t.Vi)||ed.comparator(e.key,t.key)}}class M_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new rf(L_.yi)}checkEmpty(e){return Rm.resolve(0===this.$s.length)}addMutationBatch(e,t,n,i){const r=this.vi;this.vi++;const s=new Zm(r,t,n,i);this.$s.push(s);for(const o of i)this.Si=this.Si.add(new L_(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Rm.resolve(s)}lookupMutationBatch(e,t){return Rm.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const n=this.Ci(t+1),i=n<0?0:n;return Rm.resolve(this.$s.length>i?this.$s[i]:null)}getHighestUnacknowledgedBatchId(){return Rm.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return Rm.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new L_(t,0),i=new L_(t,Number.POSITIVE_INFINITY),r=[];return this.Si.forEachInRange([n,i],e=>{const t=this.Di(e.Vi);r.push(t)}),Rm.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new rf(Ih);return t.forEach(e=>{const t=new L_(e,0),i=new L_(e,Number.POSITIVE_INFINITY);this.Si.forEachInRange([t,i],e=>{n=n.add(e.Vi)})}),Rm.resolve(this.xi(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;ed.isDocumentKey(r)||(r=r.child(""));const s=new L_(new ed(r),0);let o=new rf(Ih);return this.Si.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.Vi)),!0)},s),Rm.resolve(this.xi(o))}xi(e){const t=[];return e.forEach(e=>{const n=this.Di(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){dh(0===this.Ni(t.batchId,"removed")),this.$s.shift();let n=this.Si;return Rm.forEach(t.mutations,i=>{const r=new L_(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=n})}dn(e){}containsKey(e,t){const n=new L_(t,0),i=this.Si.firstAfterOrEqual(n);return Rm.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Rm.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class V_{constructor(e){this.ki=e,this.docs=new ef(ed.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Rm.resolve(n?n.document.mutableCopy():Cd.newInvalidDocument(t))}getEntries(e,t){let n=lf();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Cd.newInvalidDocument(e))}),Rm.resolve(n)}getAllFromCollection(e,t,n){let i=lf();const r=new ed(t.child("")),s=this.docs.getIteratorFrom(r);for(;s.hasNext();){const{key:e,value:{document:r}}=s.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||Rd(Ad(r),n)<=0||(i=i.insert(r.key,r.mutableCopy()))}return Rm.resolve(i)}getAllFromCollectionGroup(e,t,n,i){hh()}Mi(e,t){return Rm.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new U_(this)}getSize(e){return Rm.resolve(this.size)}}class U_ extends Kg{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(n)}),Rm.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class q_{constructor(e){this.persistence=e,this.Oi=new Xp(e=>Nd(e),Fd),this.lastRemoteSnapshotVersion=Oh.min(),this.highestTargetId=0,this.Fi=0,this.$i=new F_,this.targetCount=0,this.Bi=Mg.mn()}forEachTarget(e,t){return this.Oi.forEach((e,n)=>t(n)),Rm.resolve()}getLastRemoteSnapshotVersion(e){return Rm.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Rm.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),Rm.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),Rm.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new Mg(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,Rm.resolve()}updateTargetData(e,t){return this.In(t),Rm.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,Rm.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.Oi.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Oi.delete(s),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Rm.waitFor(r).next(()=>i)}getTargetCount(e){return Rm.resolve(this.targetCount)}getTargetData(e,t){const n=this.Oi.get(t)||null;return Rm.resolve(n)}addMatchingKeys(e,t,n){return this.$i.Ti(t,n),Rm.resolve()}removeMatchingKeys(e,t,n){this.$i.Ai(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach(t=>{r.push(i.markPotentiallyOrphaned(e,t))}),Rm.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),Rm.resolve()}getMatchingKeysForTargetId(e,t){const n=this.$i.Pi(t);return Rm.resolve(n)}containsKey(e,t){return Rm.resolve(this.$i.containsKey(t))}}class B_{constructor(e,t){this.Li={},this.overlays={},this.ts=new Th(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new q_(this),this.indexManager=new bg,this.fs=function(e){return new V_(e)}(e=>this.referenceDelegate.Ui(e)),this.M=new Ym(t),this.ds=new P_(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new N_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Li[e.toKey()];return n||(n=new M_(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,n){ah("MemoryPersistence","Starting transaction:",e);const i=new j_(this.ts.next());return this.referenceDelegate.qi(),n(i).next(e=>this.referenceDelegate.Gi(i).next(()=>e)).toPromise().then(e=>(i.raiseOnCommittedEvent(),e))}Ki(e,t){return Rm.or(Object.values(this.Li).map(n=>()=>n.containsKey(e,t)))}}class j_ extends Dm{constructor(e){super(),this.currentSequenceNumber=e}}class Z_{constructor(e){this.persistence=e,this.Qi=new F_,this.ji=null}static Wi(e){return new Z_(e)}get zi(){if(this.ji)return this.ji;throw hh()}addReference(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),Rm.resolve()}removeReference(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),Rm.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),Rm.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(e=>this.zi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.zi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rm.forEach(this.zi,n=>{const i=ed.fromPath(n);return this.Hi(e,i).next(e=>{e||t.removeEntry(i,Oh.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(e=>{e?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return Rm.or([()=>Rm.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function z_(e,t){return`firestore_clients_${e}_${t}`}function G_(e,t,n){let i=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function H_(e,t){return`firestore_targets_${e}_${t}`}class Y_{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static Ji(e,t,n){const i=JSON.parse(n);let r,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new mh(i.error.code,i.error.message))),s?new Y_(e,t,i.state,r):(lh("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $_{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ji(e,t){const n=JSON.parse(t);let i,r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code,r&&(i=new mh(n.error.code,n.error.message))),r?new $_(e,n.state,i):(lh("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class W_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const n=JSON.parse(t);let i="object"==typeof n&&n.activeTargetIds instanceof Array,r=gf();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=Xh(n.activeTargetIds[s]),r=r.add(n.activeTargetIds[s]);return i?new W_(e,r):(lh("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class K_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new K_(t.clientId,t.onlineState):(lh("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Q_{constructor(){this.activeTargetIds=gf()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class J_{constructor(e,t,n,i,r){this.window=e,this.Jn=t,this.persistenceKey=n,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new ef(Ih),this.started=!1,this.ir=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.rr=z_(this.persistenceKey,this.tr),this.ur=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new Q_),this.ar=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.lr=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.dr=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ko.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const t=e.getItem(z_(e.persistenceKey,i));if(t){const n=W_.Ji(i,t);n&&(e.sr=e.sr.insert(n.clientId,n))}}e._r();const n=e.storage.getItem(e.lr);if(n){const t=e.wr(n);t&&e.mr(t)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,n){this.yr(e,t,n),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(H_(this.persistenceKey,e));if(n){const i=$_.Ji(e,n);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(H_(this.persistenceKey,e))}updateQueryState(e,t,n){this.Tr(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.pr(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ah("SharedClientState","READ",e,t),t}setItem(e,t){ah("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ah("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const n=e;if(n.storageArea===this.storage){if(ah("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void lh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,Ko.Z)(function*(){if(t.started){if(null!==n.key)if(t.ar.test(n.key)){if(null==n.newValue){const e=t.Rr(n.key);return t.br(e,null)}{const e=t.Pr(n.key,n.newValue);if(e)return t.br(e.clientId,e)}}else if(t.cr.test(n.key)){if(null!==n.newValue){const e=t.Vr(n.key,n.newValue);if(e)return t.vr(e)}}else if(t.hr.test(n.key)){if(null!==n.newValue){const e=t.Sr(n.key,n.newValue);if(e)return t.Dr(e)}}else if(n.key===t.lr){if(null!==n.newValue){const e=t.wr(n.newValue);if(e)return t.mr(e)}}else if(n.key===t.ur){const e=function(e){let t=Th.A;if(null!=e)try{const n=JSON.parse(e);dh("number"==typeof n),t=n}catch(e){lh("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue);e!==Th.A&&t.sequenceNumberHandler(e)}else if(n.key===t.dr){const e=t.Cr(n.newValue);yield Promise.all(e.map(e=>t.syncEngine.Nr(e)))}}else t.ir.push(n)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,n){const i=new Y_(this.currentUser,e,t,n),r=G_(this.persistenceKey,this.currentUser,e);this.setItem(r,i.Yi())}pr(e){const t=G_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,n){const i=H_(this.persistenceKey,e),r=new $_(e,t,n);this.setItem(i,r.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const n=this.Rr(e);return W_.Ji(n,t)}Vr(e,t){const n=this.cr.exec(e),i=Number(n[1]);return Y_.Ji(new ih(void 0!==n[2]?n[2]:null),i,t)}Sr(e,t){const n=this.hr.exec(e),i=Number(n[1]);return $_.Ji(i,t)}wr(e){return K_.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,Ko.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);ah("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const n=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),r=this.gr(n),s=[],o=[];return r.forEach(e=>{i.has(e)||s.push(e)}),i.forEach(e=>{r.has(e)||o.push(e)}),this.syncEngine.Or(s,o).then(()=>{this.sr=n})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=gf();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class X_{constructor(){this.Fr=new Q_,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,n){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Q_,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ey{Br(e){}shutdown(){}}class ty{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ah("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){ah("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ny={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class iy{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class ry extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,n,i,r){const s=this.oo(e,t);ah("RestConnection","Sending: ",s,n);const o={};return this.uo(o,i,r),this.ao(e,s,o,n).then(e=>(ah("RestConnection","Received: ",e),e),t=>{throw ch("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t})}co(e,t,n,i,r){return this.ro(e,t,n,i,r)}uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+rh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}oo(e,t){return`${this.so}/v1/${t}:${ny[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,n,i){return new Promise((r,s)=>{const o=new nh;o.listenOnce(Qu.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Ku.NO_ERROR:const t=o.getResponseJson();ah("Connection","XHR received:",JSON.stringify(t)),r(t);break;case Ku.TIMEOUT:ah("Connection",'RPC "'+e+'" timed out'),s(new mh(fh.DEADLINE_EXCEEDED,"Request time out"));break;case Ku.HTTP_ERROR:const n=o.getStatus();if(ah("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(fh).indexOf(t)>=0?t:fh.UNKNOWN}(e.status);s(new mh(t,e.message))}else s(new mh(fh.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new mh(fh.UNAVAILABLE,"Connection failed."));break;default:hh()}}finally{ah("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(i);o.send(t,"POST",a,n,15)})}ho(e,t,n){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=$u(),s=Wu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new eh({})),this.uo(o.initMessageHeaders,t,n),(0,Fo.uI)()||(0,Fo.b$)()||(0,Fo.d)()||(0,Fo.w1)()||(0,Fo.Mn)()||(0,Fo.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=i.join("");ah("Connection","Creating WebChannel: "+a,o);const l=r.createWebChannel(a,o);let c=!1,u=!1;const h=new iy({jr:e=>{u?ah("Connection","Not sending because WebChannel is closed:",e):(c||(ah("Connection","Opening WebChannel transport."),l.open(),c=!0),ah("Connection","WebChannel sending:",e),l.send(e))},Wr:()=>l.close()}),d=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return d(l,th.EventType.OPEN,()=>{u||ah("Connection","WebChannel transport opened.")}),d(l,th.EventType.CLOSE,()=>{u||(u=!0,ah("Connection","WebChannel transport closed"),h.eo())}),d(l,th.EventType.ERROR,e=>{u||(u=!0,ch("Connection","WebChannel transport errored:",e),h.eo(new mh(fh.UNAVAILABLE,"The operation could not be completed")))}),d(l,th.EventType.MESSAGE,e=>{var t;if(!u){const n=e.data[0];dh(!!n);const i=n,r=i.error||(null===(t=i[0])||void 0===t?void 0:t.error);if(r){ah("Connection","WebChannel received error:",r);const e=r.status;let t=function(e){const t=Wp[e];if(void 0!==t)return Jp(t)}(e),n=r.message;void 0===t&&(t=fh.INTERNAL,n="Unknown error status: "+e+" with message "+r.message),u=!0,h.eo(new mh(t,n)),l.close()}else ah("Connection","WebChannel received:",n),h.no(n)}}),d(s,Ju.STAT_EVENT,e=>{e.stat===Xu.PROXY?ah("Connection","Detected buffering proxy"):e.stat===Xu.NOPROXY&&ah("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.Zr()},0),h}}function sy(){return"undefined"!=typeof window?window:null}function oy(){return"undefined"!=typeof document?document:null}function ay(e){return new If(e,!0)}class ly{constructor(e,t,n=1e3,i=1.5,r=6e4){this.Jn=e,this.timerId=t,this.lo=n,this.fo=i,this._o=r,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),n=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-n);i>0&&ah("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class cy{constructor(e,t,n,i,r,s,o,a){this.Jn=e,this.Ao=n,this.Ro=i,this.bo=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new ly(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ko.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,Ko.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var n=this;return(0,Ko.Z)(function*(){n.Fo(),n.$o(),n.So.cancel(),n.Po++,4!==e?n.So.reset():t&&t.code===fh.RESOURCE_EXHAUSTED?(lh(t.toString()),lh("Using maximum backoff delay to prevent overloading the backend."),n.So.po()):t&&t.code===fh.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Bo(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Po===t&&this.Uo(e,n)},t=>{e(()=>{const e=new mh(fh.UNKNOWN,"Fetching auth token failed: "+t.message);return this.qo(e)})})}Uo(e,t){const n=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{n(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(e=>{n(()=>this.qo(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}xo(){var e=this;this.state=5,this.So.Io((0,Ko.Z)(function*(){e.state=0,e.start()}))}qo(e){return ah("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(ah("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uy extends cy{constructor(e,t,n,i,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.M=r}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function(e,t){let n;if("targetChange"in t){const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:hh()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(e,t){return e.N?(dh(void 0===t||"string"==typeof t),Bh.fromBase64String(t||"")):(dh(void 0===t||t instanceof Uint8Array),Bh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?fh.UNKNOWN:Jp(e.code);return new mh(t,e.message||"")}(o);n=new wf(i,r,s,a||null)}else if("documentChange"in t){const i=t.documentChange,r=Lf(e,i.document.name),s=Of(i.document.updateTime),o=new bd({mapValue:{fields:i.document.fields}}),a=Cd.newFoundDocument(r,s,o);n=new vf(i.targetIds||[],i.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const i=t.documentDelete,r=Lf(e,i.document),s=i.readTime?Of(i.readTime):Oh.min(),o=Cd.newNoDocument(r,s);n=new vf([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const i=t.documentRemove,r=Lf(e,i.document);n=new vf([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return hh();{const e=t.filter,i=new $p(e.count||0);n=new bf(e.targetId,i)}}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Oh.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Oh.min():t.readTime?Of(t.readTime):Oh.min()}(e);return this.listener.Ko(t,n)}Qo(e){const t={};t.database=Uf(this.M),t.addTarget=function(e,t){let n;const i=t.target;return n=Ld(i)?{documents:Gf(e,i)}:{query:Hf(e,i)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Df(e,t.resumeToken):t.snapshotVersion.compareTo(Oh.min())>0&&(n.readTime=Af(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return hh()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.Oo(t)}jo(e){const t={};t.database=Uf(this.M),t.removeTarget=e,this.Oo(t)}}class hy extends cy{constructor(e,t,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.M=r,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(dh(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function(e,t){return e&&e.length>0?(dh(void 0!==t),e.map(e=>function(e,t){let n=Of(e.updateTime?e.updateTime:t);return n.isEqual(Oh.min())&&(n=Of(t)),new Op(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Of(e.commitTime);return this.listener.Jo(n,t)}return dh(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Uf(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Zf(this.M,e))};this.Oo(t)}}class dy extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=n,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new mh(fh.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,r])=>this.bo.ro(e,t,n,i,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===fh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new mh(fh.UNKNOWN,e.toString())})}co(e,t,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,r])=>this.bo.co(e,t,n,i,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===fh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new mh(fh.UNKNOWN,e.toString())})}terminate(){this.Zo=!0}}class py{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(lh(t),this.su=!1):ah("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class fy{constructor(e,t,n,i,r){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=r,this.du.Br(e=>{n.enqueueAndForget((0,Ko.Z)(function*(){var e;Ty(s)&&(ah("RemoteStore","Restarting streams for network reachability change."),yield(e=(0,Ko.Z)(function*(e){const t=ph(e);t.lu.add(4),yield _y(t),t._u.set("Unknown"),t.lu.delete(4),yield my(t)}),function(t){return e.apply(this,arguments)})(s))}))}),this._u=new py(n,i)}}function my(e){return gy.apply(this,arguments)}function gy(){return(gy=(0,Ko.Z)(function*(e){if(Ty(e))for(const t of e.fu)yield t(!0)})).apply(this,arguments)}function _y(e){return yy.apply(this,arguments)}function yy(){return(yy=(0,Ko.Z)(function*(e){for(const t of e.fu)yield t(!1)})).apply(this,arguments)}function vy(e,t){const n=ph(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),ky(n)?Sy(n):ev(n).Co()&&wy(n,t))}function by(e,t){const n=ph(e),i=ev(n);n.hu.delete(t),i.Co()&&Cy(n,t),0===n.hu.size&&(i.Co()?i.ko():Ty(n)&&n._u.set("Unknown"))}function wy(e,t){e.wu.Z(t.targetId),ev(e).Qo(t)}function Cy(e,t){e.wu.Z(t),ev(e).jo(t)}function Sy(e){e.wu=new Sf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.hu.get(t)||null}),ev(e).start(),e._u.iu()}function ky(e){return Ty(e)&&!ev(e).Do()&&e.hu.size>0}function Ty(e){return 0===ph(e).lu.size}function Ey(e){e.wu=void 0}function xy(e){return Iy.apply(this,arguments)}function Iy(){return(Iy=(0,Ko.Z)(function*(e){e.hu.forEach((t,n)=>{wy(e,t)})})).apply(this,arguments)}function Ay(e,t){return Dy.apply(this,arguments)}function Dy(){return(Dy=(0,Ko.Z)(function*(e,t){Ey(e),ky(e)?(e._u.uu(t),Sy(e)):e._u.set("Unknown")})).apply(this,arguments)}function Ry(e,t,n){return Oy.apply(this,arguments)}function Oy(){return(Oy=(0,Ko.Z)(function*(e,t,n){if(e._u.set("Online"),t instanceof wf&&2===t.state&&t.cause)try{yield(i=(0,Ko.Z)(function*(e,t){const n=t.cause;for(const i of t.targetIds)e.hu.has(i)&&(yield e.remoteSyncer.rejectListen(i,n),e.hu.delete(i),e.wu.removeTarget(i))}),function(e,t){return i.apply(this,arguments)})(e,t)}catch(n){ah("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield Py(e,n)}else if(t instanceof vf?e.wu.ut(t):t instanceof bf?e.wu._t(t):e.wu.ht(t),!n.isEqual(Oh.min()))try{const t=yield v_(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.wu.yt(t);return n.targetChanges.forEach((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.hu.get(i);r&&e.hu.set(i,r.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.hu.get(t);if(!n)return;e.hu.set(t,n.withResumeToken(Bh.EMPTY_BYTE_STRING,n.snapshotVersion)),Cy(e,t);const i=new Hm(n.target,t,1,n.sequenceNumber);wy(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(t){ah("RemoteStore","Failed to raise snapshot:",t),yield Py(e,t)}var i})).apply(this,arguments)}function Py(e,t,n){return Ny.apply(this,arguments)}function Ny(){return(Ny=(0,Ko.Z)(function*(e,t,n){if(!Lm(t))throw t;e.lu.add(1),yield _y(e),e._u.set("Offline"),n||(n=()=>v_(e.localStore)),e.asyncQueue.enqueueRetryable((0,Ko.Z)(function*(){ah("RemoteStore","Retrying IndexedDB access"),yield n(),e.lu.delete(1),yield my(e)}))})).apply(this,arguments)}function Fy(e,t){return t().catch(n=>Py(e,n,t))}function Ly(e){return My.apply(this,arguments)}function My(){return(My=(0,Ko.Z)(function*(e){const t=ph(e),n=tv(t);let i=t.cu.length>0?t.cu[t.cu.length-1].batchId:-1;for(;Vy(t);)try{const e=yield C_(t.localStore,i);if(null===e){0===t.cu.length&&n.ko();break}i=e.batchId,Uy(t,e)}catch(e){yield Py(t,e)}qy(t)&&By(t)})).apply(this,arguments)}function Vy(e){return Ty(e)&&e.cu.length<10}function Uy(e,t){e.cu.push(t);const n=tv(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function qy(e){return Ty(e)&&!tv(e).Do()&&e.cu.length>0}function By(e){tv(e).start()}function jy(e){return Zy.apply(this,arguments)}function Zy(){return(Zy=(0,Ko.Z)(function*(e){tv(e).Xo()})).apply(this,arguments)}function zy(e){return Gy.apply(this,arguments)}function Gy(){return(Gy=(0,Ko.Z)(function*(e){const t=tv(e);for(const n of e.cu)t.Ho(n.mutations)})).apply(this,arguments)}function Hy(e,t,n){return Yy.apply(this,arguments)}function Yy(){return(Yy=(0,Ko.Z)(function*(e,t,n){const i=e.cu.shift(),r=zm.from(i,t,n);yield Fy(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),yield Ly(e)})).apply(this,arguments)}function $y(e,t){return Wy.apply(this,arguments)}function Wy(){return(Wy=(0,Ko.Z)(function*(e,t){var n;t&&tv(e).zo&&(yield(n=(0,Ko.Z)(function*(e,t){if(Qp(n=t.code)&&n!==fh.ABORTED){const n=e.cu.shift();tv(e).No(),yield Fy(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield Ly(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),qy(e)&&By(e)})).apply(this,arguments)}function Ky(e,t){return Qy.apply(this,arguments)}function Qy(){return(Qy=(0,Ko.Z)(function*(e,t){const n=ph(e);n.asyncQueue.verifyOperationInProgress(),ah("RemoteStore","RemoteStore received new credentials");const i=Ty(n);n.lu.add(3),yield _y(n),i&&n._u.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.lu.delete(3),yield my(n)})).apply(this,arguments)}function Jy(e,t){return Xy.apply(this,arguments)}function Xy(){return(Xy=(0,Ko.Z)(function*(e,t){const n=ph(e);t?(n.lu.delete(2),yield my(n)):t||(n.lu.add(2),yield _y(n),n._u.set("Unknown"))})).apply(this,arguments)}function ev(e){return e.mu||(e.mu=function(e,t,n){const i=ph(e);return i.tu(),new uy(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,n)}(e.datastore,e.asyncQueue,{zr:xy.bind(null,e),Jr:Ay.bind(null,e),Ko:Ry.bind(null,e)}),e.fu.push(function(){var t=(0,Ko.Z)(function*(t){t?(e.mu.No(),ky(e)?Sy(e):e._u.set("Unknown")):(yield e.mu.stop(),Ey(e))});return function(e){return t.apply(this,arguments)}}())),e.mu}function tv(e){return e.gu||(e.gu=function(e,t,n){const i=ph(e);return i.tu(),new hy(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,n)}(e.datastore,e.asyncQueue,{zr:jy.bind(null,e),Jr:$y.bind(null,e),Yo:zy.bind(null,e),Jo:Hy.bind(null,e)}),e.fu.push(function(){var t=(0,Ko.Z)(function*(t){t?(e.gu.No(),yield Ly(e)):(yield e.gu.stop(),e.cu.length>0&&(ah("RemoteStore",`Stopping write stream with ${e.cu.length} pending writes`),e.cu=[]))});return function(e){return t.apply(this,arguments)}}())),e.gu}class nv{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new gh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new nv(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new mh(fh.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iv(e,t){if(lh("AsyncQueue",`${t}: ${e}`),Lm(e))return new mh(fh.UNAVAILABLE,`${t}: ${e}`);throw e}class rv{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ed.comparator(t.key,n.key):(e,t)=>ed.comparator(e.key,t.key),this.keyedMap=uf(),this.sortedSet=new ef(this.comparator)}static emptySet(e){return new rv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rv))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new rv;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class sv{constructor(){this.yu=new ef(ed.comparator)}track(e){const t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):hh():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,n)=>{e.push(n)}),e}}class ov{constructor(e,t,n,i,r,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,i){const r=[];return t.forEach(e=>{r.push({type:0,doc:e})}),new ov(e,t,rv.emptySet(t),r,n,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class av{constructor(){this.Iu=void 0,this.listeners=[]}}class lv{constructor(){this.queries=new Xp(e=>up(e),cp),this.onlineState="Unknown",this.Tu=new Set}}function cv(e,t){return uv.apply(this,arguments)}function uv(){return(uv=(0,Ko.Z)(function*(e,t){const n=ph(e),i=t.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new av),r)try{s.Iu=yield n.onListen(i)}catch(e){const n=iv(e,`Initialization of query '${hp(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.listeners.push(t),t.Eu(n.onlineState),s.Iu&&t.Au(s.Iu)&&mv(n)})).apply(this,arguments)}function hv(e,t){return dv.apply(this,arguments)}function dv(){return(dv=(0,Ko.Z)(function*(e,t){const n=ph(e),i=t.query;let r=!1;const s=n.queries.get(i);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),r=0===s.listeners.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)})).apply(this,arguments)}function pv(e,t){const n=ph(e);let i=!1;for(const r of t){const e=n.queries.get(r.query);if(e){for(const t of e.listeners)t.Au(r)&&(i=!0);e.Iu=r}}i&&mv(n)}function fv(e,t,n){const i=ph(e),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(t)}function mv(e){e.Tu.forEach(e=>{e.next()})}class gv{constructor(e,t,n){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=n||{}}Au(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ov(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=ov.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class _v{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class yv{constructor(e){this.M=e}li(e){return Lf(this.M,e)}fi(e){return e.metadata.exists?jf(this.M,e.document,!1):Cd.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Of(e)}}class vv{constructor(e,t,n){this.xu=e,this.localStore=t,this.M=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bv(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const n=Mh.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,n=new yv(this.M);for(const i of e)if(i.metadata.queries){const e=n.li(i.metadata.name);for(const n of i.metadata.queries){const i=(t.get(n)||ff()).add(e);t.set(n,i)}}return t}complete(){var e=this;return(0,Ko.Z)(function*(){const t=yield function(e,t,n,i){return D_.apply(this,arguments)}(e.localStore,new yv(e.M),e.documents,e.xu.id),n=e.ku(e.documents);for(const i of e.queries)yield R_(e.localStore,i,n.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function bv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class wv{constructor(e){this.key=e}}class Cv{constructor(e){this.key=e}}class Sv{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=ff(),this.mutatedKeys=ff(),this.Lu=fp(e),this.Uu=new rv(this.Lu)}get qu(){return this.Fu}Gu(e,t){const n=t?t.Ku:new sv,i=t?t.Uu:this.Uu;let r=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a=tp(this.query)&&i.size===this.query.limit?i.last():null,l=np(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((e,t)=>{const c=i.get(e),u=dp(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),p=!0):this.Qu(c,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.Lu(u,a)>0||l&&this.Lu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(a||l)&&(o=!0)),p&&(u?(s=s.add(u),r=d?r.add(e):r.delete(e)):(s=s.delete(e),r=r.delete(e)))}),tp(this.query)||np(this.query))for(;s.size>this.query.limit;){const e=tp(this.query)?s.last():s.first();s=s.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{Uu:s,Ku:n,ei:o,mutatedKeys:r}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const r=e.Ku.pu();r.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hh()}};return n(e)-n(t)}(e.type,t.type)||this.Lu(e.doc,t.doc)),this.ju(n);const s=t?this.Wu():[],o=0===this.Bu.size&&this.current?1:0,a=o!==this.$u;return this.$u=o,0!==r.length||a?{snapshot:new ov(this.query,e.Uu,i,r,e.mutatedKeys,0===o,a,!1),zu:s}:{zu:s}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new sv,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(e=>this.Fu=this.Fu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Fu=this.Fu.delete(e)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=ff(),this.Uu.forEach(e=>{this.Hu(e.key)&&(this.Bu=this.Bu.add(e.key))});const t=[];return e.forEach(e=>{this.Bu.has(e)||t.push(new Cv(e))}),this.Bu.forEach(n=>{e.has(n)||t.push(new wv(n))}),t}Ju(e){this.Fu=e.hi,this.Bu=ff();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return ov.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class kv{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Tv{constructor(e){this.key=e,this.Xu=!1}}class Ev{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Zu={},this.ta=new Xp(e=>up(e),cp),this.ea=new Map,this.na=new Set,this.sa=new ef(ed.comparator),this.ia=new Map,this.ra=new F_,this.oa={},this.ua=new Map,this.aa=Mg.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function xv(e,t){return Iv.apply(this,arguments)}function Iv(){return(Iv=(0,Ko.Z)(function*(e,t){const n=_b(e);let i,r;const s=n.ta.get(t);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Yu();else{const e=yield S_(n.localStore,ap(t));n.isPrimaryClient&&vy(n.remoteStore,e);const s=n.sharedClientState.addLocalQueryTarget(e.targetId);i=e.targetId,r=yield Av(n,t,i,"current"===s)}return r})).apply(this,arguments)}function Av(e,t,n,i){return Dv.apply(this,arguments)}function Dv(){return(Dv=(0,Ko.Z)(function*(e,t,n,i){e.ha=(t,n,i)=>{return(r=(0,Ko.Z)(function*(e,t,n,i){let r=t.view.Gu(n);r.ei&&(r=yield E_(e.localStore,t.query,!1).then(({documents:e})=>t.view.Gu(e,r)));const s=i&&i.targetChanges.get(t.targetId),o=t.view.applyChanges(r,e.isPrimaryClient,s);return $v(e,t.targetId,o.zu),o.snapshot}),function(e,t,n,i){return r.apply(this,arguments)})(e,t,n,i);var r};const r=yield E_(e.localStore,t,!0),s=new Sv(t,r.hi),o=s.Gu(r.documents),a=yf.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState),l=s.applyChanges(o,e.isPrimaryClient,a);$v(e,n,l.zu);const c=new kv(t,n,s);return e.ta.set(t,c),e.ea.has(n)?e.ea.get(n).push(t):e.ea.set(n,[t]),l.snapshot})).apply(this,arguments)}function Rv(e,t){return Ov.apply(this,arguments)}function Ov(){return(Ov=(0,Ko.Z)(function*(e,t){const n=ph(e),i=n.ta.get(t),r=n.ea.get(i.targetId);if(r.length>1)return n.ea.set(i.targetId,r.filter(e=>!cp(e,t))),void n.ta.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||(yield k_(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),by(n.remoteStore,i.targetId),Hv(n,i.targetId)}).catch(jg))):(Hv(n,i.targetId),yield k_(n.localStore,i.targetId,!0))})).apply(this,arguments)}function Pv(){return(Pv=(0,Ko.Z)(function*(e,t,n){const i=yb(e);try{const e=yield function(e,t){const n=ph(e),i=Rh.now(),r=t.reduce((e,t)=>e.add(t.key),ff());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.ai.qs(e,r).next(r=>{s=r;const o=[];for(const e of t){const t=Vp(e,s.get(e.key));null!=t&&o.push(new jp(e.key,t,wd(t.value.mapValue),Pp.exists(!0)))}return n.$s.addMutationBatch(e,i,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.oa[e.currentUser.toKey()];i||(i=new ef(Ih)),i=i.insert(t,n),e.oa[e.currentUser.toKey()]=i}(i,e.batchId,n),yield Qv(i,e.changes),yield Ly(i.remoteStore)}catch(e){const t=iv(e,"Failed to persist write");n.reject(t)}})).apply(this,arguments)}function Nv(e,t){return Fv.apply(this,arguments)}function Fv(){return(Fv=(0,Ko.Z)(function*(e,t){const n=ph(e);try{const e=yield b_(n.localStore,t);t.targetChanges.forEach((e,t)=>{const i=n.ia.get(t);i&&(dh(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.Xu=!0:e.modifiedDocuments.size>0?dh(i.Xu):e.removedDocuments.size>0&&(dh(i.Xu),i.Xu=!1))}),yield Qv(n,e,t)}catch(e){yield jg(e)}})).apply(this,arguments)}function Lv(e,t,n){const i=ph(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.ta.forEach((n,i)=>{const r=i.view.Eu(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const n=ph(e);n.onlineState=t;let i=!1;n.queries.forEach((e,n)=>{for(const r of n.listeners)r.Eu(t)&&(i=!0)}),i&&mv(n)}(i.eventManager,t),e.length&&i.Zu.Ko(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function Mv(e,t,n){return Vv.apply(this,arguments)}function Vv(){return(Vv=(0,Ko.Z)(function*(e,t,n){const i=ph(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.ia.get(t),s=r&&r.key;if(s){let e=new ef(ed.comparator);e=e.insert(s,Cd.newNoDocument(s,Oh.min()));const n=ff().add(s),r=new _f(Oh.min(),new Map,new rf(Ih),e,n);yield Nv(i,r),i.sa=i.sa.remove(s),i.ia.delete(t),Kv(i)}else yield k_(i.localStore,t,!1).then(()=>Hv(i,t,n)).catch(jg)})).apply(this,arguments)}function Uv(e,t){return qv.apply(this,arguments)}function qv(){return(qv=(0,Ko.Z)(function*(e,t){const n=ph(e),i=t.batch.batchId;try{const e=yield y_(n.localStore,t);Gv(n,i,null),zv(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Qv(n,e)}catch(e){yield jg(e)}})).apply(this,arguments)}function Bv(e,t,n){return jv.apply(this,arguments)}function jv(){return(jv=(0,Ko.Z)(function*(e,t,n){const i=ph(e);try{const e=yield function(e,t){const n=ph(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let i;return n.$s.lookupMutationBatch(e,t).next(t=>(dh(null!==t),i=t.keys(),n.$s.removeMutationBatch(e,t))).next(()=>n.$s.performConsistencyCheck(e)).next(()=>n.ai.qs(e,i))})}(i.localStore,t);Gv(i,t,n),zv(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),yield Qv(i,e)}catch(n){yield jg(n)}})).apply(this,arguments)}function Zv(){return(Zv=(0,Ko.Z)(function*(e,t){const n=ph(e);Ty(n.remoteStore)||ah("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=ph(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.$s.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const i=n.ua.get(e)||[];i.push(t),n.ua.set(e,i)}catch(e){const n=iv(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}})).apply(this,arguments)}function zv(e,t){(e.ua.get(t)||[]).forEach(e=>{e.resolve()}),e.ua.delete(t)}function Gv(e,t,n){const i=ph(e);let r=i.oa[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.oa[i.currentUser.toKey()]=r}}function Hv(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.ea.get(t))e.ta.delete(i),n&&e.Zu.la(i,n);e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach(t=>{e.ra.containsKey(t)||Yv(e,t)})}function Yv(e,t){e.na.delete(t.path.canonicalString());const n=e.sa.get(t);null!==n&&(by(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),Kv(e))}function $v(e,t,n){for(const i of n)i instanceof wv?(e.ra.addReference(i.key,t),Wv(e,i)):i instanceof Cv?(ah("SyncEngine","Document no longer in limbo: "+i.key),e.ra.removeReference(i.key,t),e.ra.containsKey(i.key)||Yv(e,i.key)):hh()}function Wv(e,t){const n=t.key,i=n.path.canonicalString();e.sa.get(n)||e.na.has(i)||(ah("SyncEngine","New document in limbo: "+n),e.na.add(i),Kv(e))}function Kv(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){const t=e.na.values().next().value;e.na.delete(t);const n=new ed(Mh.fromString(t)),i=e.aa.next();e.ia.set(i,new Tv(n)),e.sa=e.sa.insert(n,i),vy(e.remoteStore,new Hm(ap(ep(n.path)),i,2,Th.A))}}function Qv(e,t,n){return Jv.apply(this,arguments)}function Jv(){return(Jv=(0,Ko.Z)(function*(e,t,n){const i=ph(e),r=[],s=[],o=[];var a;i.ta.isEmpty()||(i.ta.forEach((e,a)=>{o.push(i.ha(a,t,n).then(e=>{if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),r.push(e);const t=d_.Js(a.targetId,e);s.push(t)}}))}),yield Promise.all(o),i.Zu.Ko(r),yield(a=(0,Ko.Z)(function*(e,t){const n=ph(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Rm.forEach(t,t=>Rm.forEach(t.zs,i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i)).next(()=>Rm.forEach(t.Hs,i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))}catch(e){if(!Lm(e))throw e;ah("LocalStore","Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.si.get(e),i=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.si=n.si.insert(e,i)}}}),function(e,t){return a.apply(this,arguments)})(i.localStore,s))})).apply(this,arguments)}function Xv(e,t){return eb.apply(this,arguments)}function eb(){return(eb=(0,Ko.Z)(function*(e,t){const n=ph(e);if(!n.currentUser.isEqual(t)){ah("SyncEngine","User change. New user:",t.toKey());const e=yield g_(n.localStore,t);n.currentUser=t,function(e,t){e.ua.forEach(e=>{e.forEach(e=>{e.reject(new mh(fh.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.ua.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield Qv(n,e.ci)}})).apply(this,arguments)}function tb(e,t){const n=ph(e),i=n.ia.get(t);if(i&&i.Xu)return ff().add(i.key);{let e=ff();const i=n.ea.get(t);if(!i)return e;for(const t of i){const i=n.ta.get(t);e=e.unionWith(i.view.qu)}return e}}function nb(e,t){return ib.apply(this,arguments)}function ib(){return(ib=(0,Ko.Z)(function*(e,t){const n=ph(e),i=yield E_(n.localStore,t.query,!0),r=t.view.Ju(i);return n.isPrimaryClient&&$v(n,t.targetId,r.zu),r})).apply(this,arguments)}function rb(e,t){return sb.apply(this,arguments)}function sb(){return(sb=(0,Ko.Z)(function*(e,t){const n=ph(e);return I_(n.localStore,t).then(e=>Qv(n,e))})).apply(this,arguments)}function ob(e,t,n,i){return ab.apply(this,arguments)}function ab(){return(ab=(0,Ko.Z)(function*(e,t,n,i){const r=ph(e),s=yield function(e,t){const n=ph(e),i=ph(n.$s);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>i.ln(e,t).next(t=>t?n.ai.qs(e,t):Rm.resolve(null)))}(r.localStore,t);null!==s?("pending"===n?yield Ly(r.remoteStore):"acknowledged"===n||"rejected"===n?(Gv(r,t,i||null),zv(r,t),function(e,t){ph(ph(e).$s).dn(t)}(r.localStore,t)):hh(),yield Qv(r,s)):ah("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function lb(){return(lb=(0,Ko.Z)(function*(e,t){const n=ph(e);if(_b(n),yb(n),!0===t&&!0!==n.ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield cb(n,e.toArray());n.ca=!0,yield Jy(n.remoteStore,!0);for(const i of t)vy(n.remoteStore,i)}else if(!1===t&&!1!==n.ca){const e=[];let t=Promise.resolve();n.ea.forEach((i,r)=>{n.sharedClientState.isLocalQueryTarget(r)?e.push(r):t=t.then(()=>(Hv(n,r),k_(n.localStore,r,!0))),by(n.remoteStore,r)}),yield t,yield cb(n,e),function(e){const t=ph(e);t.ia.forEach((e,n)=>{by(t.remoteStore,n)}),t.ra.bi(),t.ia=new Map,t.sa=new ef(ed.comparator)}(n),n.ca=!1,yield Jy(n.remoteStore,!1)}})).apply(this,arguments)}function cb(e,t,n){return ub.apply(this,arguments)}function ub(){return(ub=(0,Ko.Z)(function*(e,t,n){const i=ph(e),r=[],s=[];for(const o of t){let e;const t=i.ea.get(o);if(t&&0!==t.length){e=yield S_(i.localStore,ap(t[0]));for(const e of t){const t=i.ta.get(e),n=yield nb(i,t);n.snapshot&&s.push(n.snapshot)}}else{const t=yield x_(i.localStore,o);e=yield S_(i.localStore,t),yield Av(i,hb(t),o,!1)}r.push(e)}return i.Zu.Ko(s),r})).apply(this,arguments)}function hb(e){return Xd(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function db(e){const t=ph(e);return ph(ph(t.localStore).persistence).Os()}function pb(e,t,n,i){return fb.apply(this,arguments)}function fb(){return(fb=(0,Ko.Z)(function*(e,t,n,i){const r=ph(e);if(r.ca)return void ah("SyncEngine","Ignoring unexpected query state notification.");const s=r.ea.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=yield I_(r.localStore,pp(s[0])),i=_f.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield Qv(r,e,i);break}case"rejected":yield k_(r.localStore,t,!0),Hv(r,t,i);break;default:hh()}})).apply(this,arguments)}function mb(e,t,n){return gb.apply(this,arguments)}function gb(){return(gb=(0,Ko.Z)(function*(e,t,n){const i=_b(e);if(i.ca){for(const e of t){if(i.ea.has(e)){ah("SyncEngine","Adding an already active target "+e);continue}const t=yield x_(i.localStore,e),n=yield S_(i.localStore,t);yield Av(i,hb(t),n.targetId,!1),vy(i.remoteStore,n)}for(const e of n)i.ea.has(e)&&(yield k_(i.localStore,e,!1).then(()=>{by(i.remoteStore,e),Hv(i,e)}).catch(jg))}})).apply(this,arguments)}function _b(e){const t=ph(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Nv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Mv.bind(null,t),t.Zu.Ko=pv.bind(null,t.eventManager),t.Zu.la=fv.bind(null,t.eventManager),t}function yb(e){const t=ph(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Uv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Bv.bind(null,t),t}class vb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ko.Z)(function*(){t.M=ay(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return m_(this.persistence,new p_,e.initialUser,this.M)}_a(e){return new B_(Z_.Wi,this.M)}da(e){return new X_}terminate(){var e=this;return(0,Ko.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class bb extends vb{constructor(e,t,n){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,Ko.Z)(function*(){yield t().call(n,e),yield n.ga.initialize(n,e),yield yb(n.ga.syncEngine),yield Ly(n.ga.remoteStore),yield n.persistence.Is(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}ma(e){return m_(this.persistence,new p_,e.initialUser,this.M)}wa(e){return new Hg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=u_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ag.withCacheSize(this.cacheSizeBytes):Ag.DEFAULT;return new a_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,sy(),oy(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new X_}}class wb extends bb{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,Ko.Z)(function*(){yield t().call(n,e);const i=n.ga.syncEngine;n.sharedClientState instanceof J_&&(n.sharedClientState.syncEngine={kr:ob.bind(null,i),Mr:pb.bind(null,i),Or:mb.bind(null,i),Os:db.bind(null,i),Nr:rb.bind(null,i)},yield n.sharedClientState.start()),yield n.persistence.Is(function(){var e=(0,Ko.Z)(function*(e){yield function(e,t){return lb.apply(this,arguments)}(n.ga.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):e||n.gcScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}da(e){const t=sy();if(!J_.vt(t))throw new mh(fh.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=u_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new J_(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Cb{initialize(e,t){var n=this;return(0,Ko.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>Lv(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=Xv.bind(null,n.syncEngine),yield Jy(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new lv}createDatastore(e){const t=ay(e.databaseInfo.databaseId),n=new ry(e.databaseInfo);return function(e,t,n,i){return new dy(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,i=e.asyncQueue,r=e=>Lv(this.syncEngine,e,0),s=ty.vt()?new ty:new ey,new fy(t,n,i,r,s);var t,n,i,r,s}createSyncEngine(e,t){return function(e,t,n,i,r,s,o){const a=new Ev(e,t,n,i,r,s);return o&&(a.ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ko.Z)(function*(e){const t=ph(e);ah("RemoteStore","RemoteStore shutting down."),t.lu.add(5),yield _y(t),t.du.shutdown(),t._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Sb(e,t=10240){let n=0;return{read:()=>(0,Ko.Z)(function*(){if(n<e.byteLength){const i={value:e.slice(n,n+t),done:!1};return n+=t,i}return{done:!0}})(),cancel:()=>(0,Ko.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class kb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Tb{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new gh,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(e=>{e&&e.Cu()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,Ko.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,Ko.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,Ko.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const n=e.Ta.decode(t),i=Number(n);isNaN(i)&&e.Ra(`length string (${n}) is not valid number`);const r=yield e.ba(i);return new _v(JSON.parse(r),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,Ko.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}ba(e){var t=this;return(0,Ko.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const n=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,Ko.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class Eb{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ko.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new mh(fh.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(i=(0,Ko.Z)(function*(e,t){const n=ph(e),i=Uf(n.M)+"/documents",r={documents:t.map(e=>Ff(n.M,e))},s=yield n.co("BatchGetDocuments",i,r),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){dh(!!t.found);const n=Lf(e,t.found.name),i=Of(t.found.updateTime),r=new bd({mapValue:{fields:t.found.fields}});return Cd.newFoundDocument(n,i,r)}(e,t):"missing"in t?function(e,t){dh(!!t.missing),dh(!!t.readTime);const n=Lf(e,t.missing),i=Of(t.readTime);return Cd.newNoDocument(n,i)}(e,t):hh()}(n.M,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());dh(!!t),a.push(t)}),a}),function(e,t){return i.apply(this,arguments)})(t.datastore,e);var i;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ko.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const i=ed.fromPath(n);e.mutations.push(new Yp(i,e.precondition(i)))}),yield(n=(0,Ko.Z)(function*(e,t){const n=ph(e),i=Uf(n.M)+"/documents",r={writes:t.map(e=>Zf(n.M,e))};yield n.ro("Commit",i,r)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw hh();t=Oh.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new mh(fh.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Pp.updateTime(t):Pp.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Oh.min()))throw new mh(fh.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pp.updateTime(t)}return Pp.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class xb{constructor(e,t,n,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=i,this.va=5,this.So=new ly(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,Ko.Z)(function*(){const t=new Eb(e.datastore),n=e.Da(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.Ca(t)}))}).catch(t=>{e.Ca(t)})}))}Da(e){try{const t=this.updateFunction(e);return!Qh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Qp(t)}return!1}}class Ib{constructor(e,t,n,i){var r=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=ih.UNAUTHENTICATED,this.clientId=xh.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var e=(0,Ko.Z)(function*(e){ah("FirestoreClient","Received user=",e.uid),yield r.authCredentialListener(e),r.user=e});return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(n,e=>(ah("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}getConfiguration(){var e=this;return(0,Ko.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new mh(fh.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new gh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ko.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(n){const e=iv(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function Ab(e,t){return Db.apply(this,arguments)}function Db(){return(Db=(0,Ko.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress(),ah("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(function(){var e=(0,Ko.Z)(function*(e){i.isEqual(e)||(yield g_(t.localStore,e),i=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t})).apply(this,arguments)}function Rb(e,t){return Ob.apply(this,arguments)}function Ob(){return(Ob=(0,Ko.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield Pb(e);ah("FirestoreClient","Initializing OnlineComponentProvider");const i=yield e.getConfiguration();yield t.initialize(n,i),e.setCredentialChangeListener(e=>Ky(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ky(t.remoteStore,n)),e.onlineComponents=t})).apply(this,arguments)}function Pb(e){return Nb.apply(this,arguments)}function Nb(){return(Nb=(0,Ko.Z)(function*(e){return e.offlineComponents||(ah("FirestoreClient","Using default OfflineComponentProvider"),yield Ab(e,new vb)),e.offlineComponents})).apply(this,arguments)}function Fb(e){return Lb.apply(this,arguments)}function Lb(){return(Lb=(0,Ko.Z)(function*(e){return e.onlineComponents||(ah("FirestoreClient","Using default OnlineComponentProvider"),yield Rb(e,new Cb)),e.onlineComponents})).apply(this,arguments)}function Mb(e){return Pb(e).then(e=>e.persistence)}function Vb(e){return Pb(e).then(e=>e.localStore)}function Ub(e){return Fb(e).then(e=>e.remoteStore)}function qb(e){return Fb(e).then(e=>e.syncEngine)}function Bb(e){return jb.apply(this,arguments)}function jb(){return(jb=(0,Ko.Z)(function*(e){const t=yield Fb(e),n=t.eventManager;return n.onListen=xv.bind(null,t.syncEngine),n.onUnlisten=Rv.bind(null,t.syncEngine),n})).apply(this,arguments)}function Zb(e,t,n={}){const i=new gh;return e.asyncQueue.enqueueAndForget((0,Ko.Z)(function*(){return function(e,t,n,i,r){const s=new kb({next:s=>{t.enqueueAndForget(()=>hv(e,o));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new mh(fh.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new mh(fh.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:e=>r.reject(e)}),o=new gv(ep(n.path),s,{includeMetadataChanges:!0,Du:!0});return cv(e,o)}(yield Bb(e),e.asyncQueue,t,n,i)})),i.promise}function zb(e,t,n={}){const i=new gh;return e.asyncQueue.enqueueAndForget((0,Ko.Z)(function*(){return function(e,t,n,i,r){const s=new kb({next:n=>{t.enqueueAndForget(()=>hv(e,o)),n.fromCache&&"server"===i.source?r.reject(new mh(fh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),o=new gv(n,s,{includeMetadataChanges:!0,Du:!0});return cv(e,o)}(yield Bb(e),e.asyncQueue,t,n,i)})),i.promise}const Gb=new Map;function Hb(e,t,n){if(!n)throw new mh(fh.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Yb(e,t,n,i){if(!0===t&&!0===i)throw new mh(fh.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function $b(e){if(!ed.isDocumentKey(e))throw new mh(fh.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Wb(e){if(ed.isDocumentKey(e))throw new mh(fh.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Kb(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":hh()}function Qb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new mh(fh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kb(e);throw new mh(fh.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Jb(e,t){if(t<=0)throw new mh(fh.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Xb{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new mh(fh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new mh(fh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Yb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ew{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xb({}),this._settingsFrozen=!1,e instanceof Kh?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new mh(fh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kh(e.options.projectId)}(e))}get app(){if(!this._app)throw new mh(fh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new mh(fh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xb(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new yh;switch(e.type){case"gapi":const t=e.client;return dh(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ch(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new mh(fh.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Gb.get(e);t&&(ah("ComponentProvider","Removing Datastore"),Gb.delete(e),t.terminate())}(this),Promise.resolve()}}class tw{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new iw(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tw(this.firestore,e,this._key)}}class nw{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new nw(this.firestore,e,this._query)}}class iw extends nw{constructor(e,t,n){super(e,t,ep(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tw(this.firestore,null,new ed(e))}withConverter(e){return new iw(this.firestore,e,this._path)}}function rw(e,t,...n){if(e=(0,Fo.m9)(e),Hb("collection","path",t),e instanceof ew){const i=Mh.fromString(t,...n);return Wb(i),new iw(e,null,i)}{if(!(e instanceof tw||e instanceof iw))throw new mh(fh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Mh.fromString(t,...n));return Wb(i),new iw(e.firestore,null,i)}}function sw(e,t,...n){if(e=(0,Fo.m9)(e),1===arguments.length&&(t=xh.R()),Hb("doc","path",t),e instanceof ew){const i=Mh.fromString(t,...n);return $b(i),new tw(e,null,new ed(i))}{if(!(e instanceof tw||e instanceof iw))throw new mh(fh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Mh.fromString(t,...n));return $b(i),new tw(e.firestore,e instanceof iw?e.converter:null,new ed(i))}}function ow(e,t){return e=(0,Fo.m9)(e),t=(0,Fo.m9)(t),(e instanceof tw||e instanceof iw)&&(t instanceof tw||t instanceof iw)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function aw(e,t){return e=(0,Fo.m9)(e),t=(0,Fo.m9)(t),e instanceof nw&&t instanceof nw&&e.firestore===t.firestore&&cp(e._query,t._query)&&e.converter===t.converter}class lw{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new ly(this,"async_queue_retry"),this.Ua=()=>{const e=oy();e&&ah("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const e=oy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=oy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new gh;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,Ko.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(ua){if(!Lm(ua))throw ua;ah("AsyncQueue","Operation failed with retryable error: "+ua)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(e=>{throw this.Fa=e,this.$a=!1,lh("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.$a=!1,e))));return this.Na=t,t}enqueueAfterDelay(e,t,n){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=nv.createAndSchedule(this,e,t,n,e=>this.Qa(e));return this.Oa.push(i),i}qa(){this.Fa&&hh()}verifyOperationInProgress(){}ja(){var e=this;return(0,Ko.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function cw(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const i of["next","error","complete"])if(i in n&&"function"==typeof n[i])return!0;return!1}(e)}class uw{constructor(){this._progressObserver={},this._taskCompletionResolver=new gh,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class hw extends ew{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new lw,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||pw(this),this._firestoreClient.terminate()}}function dw(e){return e._firestoreClient||pw(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function pw(e){var t;const n=e._freezeSettings(),i=function(e,t,n,i){return new Wh(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Ib(e._authCredentials,e._appCheckCredentials,e._queue,i)}function fw(e,t,n){const i=new gh;return e.asyncQueue.enqueue((0,Ko.Z)(function*(){try{yield Ab(e,n),yield Rb(e,t),i.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===fh.FAILED_PRECONDITION||e.code===fh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),i.reject(e)}})).then(()=>i.promise)}function mw(e){if(e._initialized||e._terminated)throw new mh(fh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gw{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new mh(fh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Uh(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _w{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _w(Bh.fromBase64String(e))}catch(e){throw new mh(fh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new _w(Bh.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yw{constructor(e){this._methodName=e}}class vw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new mh(fh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new mh(fh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ih(this._lat,e._lat)||Ih(this._long,e._long)}}const bw=/^__.*__$/;class ww{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new jp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bp(e,this.data,t,this.fieldTransforms)}}class Cw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new jp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Sw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hh()}}class kw{constructor(e,t,n,i,r,s){this.settings=e,this.databaseId=t,this.M=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Ja(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new kw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:n,tc:!1});return i.ec(e),i}nc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:n,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return zw(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(Sw(this.Ya)&&bw.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class Tw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=n||ay(e)}uc(e,t,n,i=!1){return new kw({Ya:e,methodName:t,oc:n,path:Uh.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Ew(e){const t=e._freezeSettings(),n=ay(e._databaseId);return new Tw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function xw(e,t,n,i,r,s={}){const o=e.uc(s.merge||s.mergeFields?2:0,t,n,r);qw("Data must be an object, but it was:",o,i);const a=Vw(i,o);let l,c;if(s.merge)l=new qh(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const i of s.mergeFields){const r=Bw(t,i,n);if(!o.contains(r))throw new mh(fh.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Gw(e,r)||e.push(r)}l=new qh(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new ww(new bd(a),l,c)}class Iw extends yw{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Iw}}function Aw(e,t,n){return new kw({Ya:3,oc:t.settings.oc,methodName:e._methodName,tc:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}class Dw extends yw{_toFieldTransform(e){return new Rp(e.path,new Sp)}isEqual(e){return e instanceof Dw}}class Rw extends yw{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=Aw(this,e,!0),n=this.ac.map(e=>Mw(e,t)),i=new kp(n);return new Rp(e.path,i)}isEqual(e){return this===e}}class Ow extends yw{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=Aw(this,e,!0),n=this.ac.map(e=>Mw(e,t)),i=new Ep(n);return new Rp(e.path,i)}isEqual(e){return this===e}}class Pw extends yw{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Ip(e.M,yp(e.M,this.cc));return new Rp(e.path,t)}isEqual(e){return this===e}}function Nw(e,t,n,i){const r=e.uc(1,t,n);qw("Data must be an object, but it was:",r,i);const s=[],o=bd.empty();Nh(i,(e,i)=>{const a=Zw(t,e,n);i=(0,Fo.m9)(i);const l=r.nc(a);if(i instanceof Iw)s.push(a);else{const e=Mw(i,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new qh(s);return new Cw(o,a,r.fieldTransforms)}function Fw(e,t,n,i,r,s){const o=e.uc(1,t,n),a=[Bw(t,i,n)],l=[r];if(s.length%2!=0)throw new mh(fh.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Bw(t,s[d])),l.push(s[d+1]);const c=[],u=bd.empty();for(let d=a.length-1;d>=0;--d)if(!Gw(c,a[d])){const e=a[d];let t=l[d];t=(0,Fo.m9)(t);const n=o.nc(e);if(t instanceof Iw)c.push(e);else{const i=Mw(t,n);null!=i&&(c.push(e),u.set(e,i))}}const h=new qh(c);return new Cw(u,h,o.fieldTransforms)}function Lw(e,t,n,i=!1){return Mw(n,e.uc(i?4:3,t))}function Mw(e,t){if(Uw(e=(0,Fo.m9)(e)))return qw("Unsupported field value:",t,e),Vw(e,t);if(e instanceof yw)return function(e,t){if(!Sw(t.Ya))throw t.ic(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.ic(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=Mw(r,t.sc(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,Fo.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return yp(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Rh.fromDate(e);return{timestampValue:Af(t.M,n)}}if(e instanceof Rh){const n=new Rh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Af(t.M,n)}}if(e instanceof vw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _w)return{bytesValue:Df(t.M,e._byteString)};if(e instanceof tw){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.ic(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Pf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic(`Unsupported field value: ${Kb(e)}`)}(e,t)}function Vw(e,t){const n={};return Fh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Nh(e,(e,i)=>{const r=Mw(i,t.Za(e));null!=r&&(n[e]=r)}),{mapValue:{fields:n}}}function Uw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Rh||e instanceof vw||e instanceof _w||e instanceof tw||e instanceof yw)}function qw(e,t,n){if(!Uw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=Kb(n);throw t.ic("an object"===i?e+" a custom object":e+" "+i)}}function Bw(e,t,n){if((t=(0,Fo.m9)(t))instanceof gw)return t._internalPath;if("string"==typeof t)return Zw(e,t);throw zw("Field path arguments must be of type string or ",e,!1,void 0,n)}const jw=new RegExp("[~\\*/\\[\\]]");function Zw(e,t,n){if(t.search(jw)>=0)throw zw(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new gw(...t.split("."))._internalPath}catch(i){throw zw(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function zw(e,t,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new mh(fh.INVALID_ARGUMENT,a+e+l)}function Gw(e,t){return e.some(e=>e.isEqual(t))}class Hw{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new tw(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Yw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($w("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Yw extends Hw{data(){return super.data()}}function $w(e,t){return"string"==typeof t?Zw(e,t):t instanceof gw?t._internalPath:t._delegate._internalPath}class Ww{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kw extends Hw{constructor(e,t,n,i,r,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field($w("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Qw extends Kw{data(e={}){return super.data(e)}}class Jw{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ww(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Qw(this._firestore,this._userDataWriter,n.key,n,new Ww(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new mh(fh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new Qw(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ww(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const i=new Qw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ww(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,s=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Xw(t.type),doc:i,oldIndex:r,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Xw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hh()}}function eC(e,t){return e instanceof Kw&&t instanceof Kw?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Jw&&t instanceof Jw&&e._firestore===t._firestore&&aw(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function tC(e){if(np(e)&&0===e.explicitOrderBy.length)throw new mh(fh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nC{}function iC(e,...t){for(const n of t)e=n._apply(e);return e}class rC extends nC{constructor(e,t,n){super(),this.hc=e,this.lc=t,this.fc=n,this.type="where"}_apply(e){const t=Ew(e.firestore),n=function(e,t,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new mh(fh.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){hC(o,s);const t=[];for(const n of o)t.push(uC(i,e,n));a={arrayValue:{values:t}}}else a=uC(i,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||hC(o,s),a=Lw(n,"where",o,"in"===s||"not-in"===s);const l=Vd.create(r,s,a);return function(e,t){if(t.S()){const n=rp(e);if(null!==n&&!n.isEqual(t.field))throw new mh(fh.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const i=ip(e);null!==i&&dC(0,t.field,i)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new mh(fh.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,l),l}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new nw(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new Jd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class sC extends nC{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new mh(fh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new mh(fh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const i=new $d(t,n);return function(e,t){if(null===ip(e)){const n=rp(e);null!==n&&dC(0,n,t.field)}}(e,i),i}(e._query,this.hc,this.dc);return new nw(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Jd(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class oC extends nC{constructor(e,t,n){super(),this.type=e,this._c=t,this.wc=n}_apply(e){return new nw(e.firestore,e.converter,lp(e._query,this._c,this.wc))}}class aC extends nC{constructor(e,t,n){super(),this.type=e,this.mc=t,this.gc=n}_apply(e){const t=cC(e,this.type,this.mc,this.gc);return new nw(e.firestore,e.converter,function(e,t){return new Jd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class lC extends nC{constructor(e,t,n){super(),this.type=e,this.mc=t,this.gc=n}_apply(e){const t=cC(e,this.type,this.mc,this.gc);return new nw(e.firestore,e.converter,function(e,t){return new Jd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function cC(e,t,n,i){if(n[0]=(0,Fo.m9)(n[0]),n[0]instanceof Hw)return function(e,t,n,i,r){if(!i)throw new mh(fh.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of op(e))if(o.field.isKeyField())s.push(ud(t,i.key));else{const e=i.data.field(o.field);if(Hh(e))throw new mh(fh.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new mh(fh.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new Yd(s,r)}(e._query,e.firestore._databaseId,t,n[0]._document,i);{const r=Ew(e.firestore);return function(e,t,n,i,r,s){const o=e.explicitOrderBy;if(r.length>o.length)throw new mh(fh.INVALID_ARGUMENT,`Too many arguments provided to ${i}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let l=0;l<r.length;l++){const s=r[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new mh(fh.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${i}(), but got a ${typeof s}`);if(!sp(e)&&-1!==s.indexOf("/"))throw new mh(fh.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${i}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(Mh.fromString(s));if(!ed.isDocumentKey(n))throw new mh(fh.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${i}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const r=new ed(n);a.push(ud(t,r))}else{const e=Lw(n,i,s);a.push(e)}}return new Yd(a,s)}(e._query,e.firestore._databaseId,r,t,n,i)}}function uC(e,t,n){if("string"==typeof(n=(0,Fo.m9)(n))){if(""===n)throw new mh(fh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sp(t)&&-1!==n.indexOf("/"))throw new mh(fh.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Mh.fromString(n));if(!ed.isDocumentKey(i))throw new mh(fh.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ud(e,new ed(i))}if(n instanceof tw)return ud(e,n._key);throw new mh(fh.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kb(n)}.`)}function hC(e,t){if(!Array.isArray(e)||0===e.length)throw new mh(fh.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new mh(fh.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function dC(e,t,n){if(!n.isEqual(t))throw new mh(fh.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class pC{convertValue(e,t="none"){switch(id(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw hh()}}convertObject(e,t){const n={};return Nh(e.fields,(e,i)=>{n[e]=this.convertValue(i,t)}),n}convertGeoPoint(e){return new vw(zh(e.latitude),zh(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Yh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp($h(e));default:return null}}convertTimestamp(e){const t=Zh(e);return new Rh(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Mh.fromString(e);dh(nm(n));const i=new Kh(n.get(1),n.get(3)),r=new ed(n.popFirst(5));return i.isEqual(t)||lh(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}function fC(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class mC extends pC{constructor(e){super(),this.firestore=e}convertBytes(e){return new _w(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tw(this.firestore,null,t)}}class gC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ew(e)}set(e,t,n){this._verifyNotCommitted();const i=_C(e,this._firestore),r=fC(i.converter,t,n),s=xw(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(s.toMutation(i._key,Pp.none())),this}update(e,t,n,...i){this._verifyNotCommitted();const r=_C(e,this._firestore);let s;return s="string"==typeof(t=(0,Fo.m9)(t))||t instanceof gw?Fw(this._dataReader,"WriteBatch.update",r._key,t,n,i):Nw(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(s.toMutation(r._key,Pp.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_C(e,this._firestore);return this._mutations=this._mutations.concat(new Hp(t._key,Pp.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new mh(fh.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _C(e,t){if((e=(0,Fo.m9)(e)).firestore!==t)throw new mh(fh.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class yC extends pC{constructor(e){super(),this.firestore=e}convertBytes(e){return new _w(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tw(this.firestore,null,t)}}function vC(e,t,n){e=Qb(e,tw);const i=Qb(e.firestore,hw),r=fC(e.converter,t,n);return CC(i,[xw(Ew(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,Pp.none())])}function bC(e,t,n,...i){e=Qb(e,tw);const r=Qb(e.firestore,hw),s=Ew(r);let o;return o="string"==typeof(t=(0,Fo.m9)(t))||t instanceof gw?Fw(s,"updateDoc",e._key,t,n,i):Nw(s,"updateDoc",e._key,t),CC(r,[o.toMutation(e._key,Pp.exists(!0))])}function wC(e,...t){var n,i,r;e=(0,Fo.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||cw(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(cw(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),t[o+2]=null===(r=e.complete)||void 0===r?void 0:r.bind(e)}let l,c,u;if(e instanceof tw)c=Qb(e.firestore,hw),u=ep(e._key.path),l={next:n=>{t[o]&&t[o](SC(c,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Qb(e,nw);c=Qb(n.firestore,hw),u=n._query;const i=new yC(c);l={next:e=>{t[o]&&t[o](new Jw(c,i,n,e))},error:t[o+1],complete:t[o+2]},tC(e._query)}return function(e,t,n,i){const r=new kb(i),s=new gv(t,r,n);return e.asyncQueue.enqueueAndForget((0,Ko.Z)(function*(){return cv(yield Bb(e),s)})),()=>{r.pa(),e.asyncQueue.enqueueAndForget((0,Ko.Z)(function*(){return hv(yield Bb(e),s)}))}}(dw(c),u,a,l)}function CC(e,t){return function(e,t){const n=new gh;return e.asyncQueue.enqueueAndForget((0,Ko.Z)(function*(){return function(e,t,n){return Pv.apply(this,arguments)}(yield qb(e),t,n)})),n.promise}(dw(e),t)}function SC(e,t,n){const i=n.docs.get(t._key),r=new yC(e);return new Kw(e,r,t._key,i,new Ww(n.hasPendingWrites,n.fromCache),t.converter)}class kC extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ew(e)}get(e){const t=_C(e,this._firestore),n=new mC(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return hh();const i=e[0];if(i.isFoundDocument())return new Hw(this._firestore,n,i.key,i,t.converter);if(i.isNoDocument())return new Hw(this._firestore,n,t._key,null,t.converter);throw hh()})}set(e,t,n){const i=_C(e,this._firestore),r=fC(i.converter,t,n),s=xw(this._dataReader,"Transaction.set",i._key,r,null!==i.converter,n);return this._transaction.set(i._key,s),this}update(e,t,n,...i){const r=_C(e,this._firestore);let s;return s="string"==typeof(t=(0,Fo.m9)(t))||t instanceof gw?Fw(this._dataReader,"Transaction.update",r._key,t,n,i):Nw(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,s),this}delete(e){const t=_C(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_C(e,this._firestore),n=new yC(this._firestore);return super.get(e).then(e=>new Kw(this._firestore,n,t._key,e._document,new Ww(!1,!1),t.converter))}}function TC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new mh("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function EC(){if("undefined"==typeof Uint8Array)throw new mh("unimplemented","Uint8Arrays are not available in this environment.")}function xC(){if("undefined"==typeof atob)throw new mh("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){!function(e){rh=e}(Lo.SDK_VERSION),(0,Lo._registerComponent)(new Vo.wA("firestore",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=new hw(i,new bh(e.getProvider("auth-internal")),new kh(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),r._setSettings(n),r},"PUBLIC")),(0,Lo.registerVersion)("@firebase/firestore","3.4.7",e),(0,Lo.registerVersion)("@firebase/firestore","3.4.7","esm2017")}();class IC{constructor(e){this._delegate=e}static fromBase64String(e){return xC(),new IC(_w.fromBase64String(e))}static fromUint8Array(e){return EC(),new IC(_w.fromUint8Array(e))}toBase64(){return xC(),this._delegate.toBase64()}toUint8Array(){return EC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function AC(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const i of["next","error","complete"])if(i in n&&"function"==typeof n[i])return!0;return!1}(e)}class DC{enableIndexedDbPersistence(e,t){return function(e,t){mw(e=Qb(e,hw));const n=dw(e),i=e._freezeSettings(),r=new Cb;return fw(n,r,new bb(r,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){mw(e=Qb(e,hw));const t=dw(e),n=e._freezeSettings(),i=new Cb;return fw(t,i,new wb(i,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new mh(fh.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new gh;return e._queue.enqueueAndForgetEvenWhileRestricted((0,Ko.Z)(function*(){try{yield(n=(0,Ko.Z)(function*(e){if(!Pm.vt())return Promise.resolve();const t=e+"main";yield Pm.delete(t)}),function(e){return n.apply(this,arguments)})(u_(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var n})),t.promise}(e._delegate)}}class RC{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Kh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||ch("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,i={}){var r;const s=(e=Qb(e,ew))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&ch("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=ih.MOCK_USER;else{t=(0,Fo.Sg)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new mh(fh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ih(s)}e._authCredentials=new vh(new _h(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Ko.Z)(function*(){const t=yield Mb(e),n=yield Ub(e);return t.setNetworkEnabled(!0),function(e){const t=ph(e);return t.lu.delete(0),my(t)}(n)}))}(dw(e=Qb(e,hw)))}(this._delegate)}disableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Ko.Z)(function*(){const t=yield Mb(e),n=yield Ub(e);return t.setNetworkEnabled(!1),(i=(0,Ko.Z)(function*(e){const t=ph(e);t.lu.add(0),yield _y(t),t._u.set("Offline")}),function(e){return i.apply(this,arguments)})(n);var i}))}(dw(e=Qb(e,hw)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Yb("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){return function(e){const t=new gh;return e.asyncQueue.enqueueAndForget((0,Ko.Z)(function*(){return function(e,t){return Zv.apply(this,arguments)}(yield qb(e),t)})),t.promise}(dw(e=Qb(e,hw)))}(this._delegate)}onSnapshotsInSync(e){return function(e,t){return function(e,t){const n=new kb(t);return e.asyncQueue.enqueueAndForget((0,Ko.Z)(function*(){return function(e,t){ph(e).Tu.add(t),t.next()}(yield Bb(e),n)})),()=>{n.pa(),e.asyncQueue.enqueueAndForget((0,Ko.Z)(function*(){return function(e,t){ph(e).Tu.delete(t)}(yield Bb(e),n)}))}}(dw(e=Qb(e,hw)),cw(t)?t:{next:t})}(this._delegate,e)}get app(){if(!this._appCompat)throw new mh("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new GC(this,rw(this._delegate,e))}catch(t){throw MC(t,"collection()","Firestore.collection()")}}doc(e){try{return new LC(this,sw(this._delegate,e))}catch(t){throw MC(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new jC(this,function(e,t){if(e=Qb(e,ew),Hb("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new mh(fh.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new nw(e,null,function(e){return new Jd(Mh.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw MC(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t){return function(e,t){const n=new gh;return e.asyncQueue.enqueueAndForget((0,Ko.Z)(function*(){const i=yield function(e){return Fb(e).then(e=>e.datastore)}(e);new xb(e.asyncQueue,i,t,n).run()})),n.promise}(dw(e=Qb(e,hw)),n=>t(new kC(e,n)))}(this._delegate,t=>e(new PC(this,t)))}batch(){return dw(this._delegate),new NC(new gC(this._delegate,e=>CC(this._delegate,e)))}loadBundle(e){return function(e,t){const n=dw(e=Qb(e,hw)),i=new uw;return function(e,t,n,i){const r=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new Tb(e,t)}(function(e,t){if(e instanceof Uint8Array)return Sb(e,t);if(e instanceof ArrayBuffer)return Sb(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,ay(t));e.asyncQueue.enqueueAndForget((0,Ko.Z)(function*(){!function(e,t,n){const i=ph(e);var r;(r=(0,Ko.Z)(function*(e,t,n){try{const i=yield t.getMetadata();if(yield function(e,t){const n=ph(e),i=Of(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.ds.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(i)>=0)}(e.localStore,i))return yield t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),Promise.resolve(new Set);n._updateProgress(bv(i));const r=new vv(i,e.localStore,t.M);let s=yield t.fa();for(;s;){const e=yield r.Nu(s);e&&n._updateProgress(e),s=yield t.fa()}const o=yield r.complete();return yield Qv(e,o.Ou,void 0),yield function(e,t){const n=ph(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.ds.saveBundleMetadata(e,t))}(e.localStore,i),n._completeWith(o.progress),Promise.resolve(o.Mu)}catch(e){return ch("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}}),function(e,t,n){return r.apply(this,arguments)})(i,t,n).then(e=>{i.sharedClientState.notifyBundleLoaded(e)})}(yield qb(e),r,i)}))}(n,e._databaseId,t,i),i}(this._delegate,e)}namedQuery(e){return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,Ko.Z)(function*(){return function(e,t){const n=ph(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.ds.getNamedQuery(e,t))}(yield Vb(e),t)}))}(dw(e=Qb(e,hw)),t).then(t=>t?new nw(e,null,t.query):null)}(this._delegate,e).then(e=>e?new jC(this,e):null)}}class OC extends pC{constructor(e){super(),this.firestore=e}convertBytes(e){return new IC(new _w(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return LC.forKey(t,this.firestore,null)}}class PC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new OC(e)}get(e){const t=HC(e);return this._delegate.get(t).then(e=>new qC(this._firestore,new Kw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const i=HC(e);return n?(TC("Transaction.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const r=HC(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,n,...i),this}delete(e){const t=HC(e);return this._delegate.delete(t),this}}class NC{constructor(e){this._delegate=e}set(e,t,n){const i=HC(e);return n?(TC("WriteBatch.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const r=HC(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,n,...i),this}delete(e){const t=HC(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class FC{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Qw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new BC(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=FC.INSTANCES;let i=n.get(e);i||(i=new WeakMap,n.set(e,i));let r=i.get(t);return r||(r=new FC(e,new OC(e),t),i.set(t,r)),r}}FC.INSTANCES=new WeakMap;class LC{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new OC(e)}static forPath(e,t,n){if(e.length%2!=0)throw new mh("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new LC(t,new tw(t._delegate,n,new ed(e)))}static forKey(e,t,n){return new LC(t,new tw(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new GC(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new GC(this.firestore,rw(this._delegate,e))}catch(t){throw MC(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Fo.m9)(e))instanceof tw&&ow(this._delegate,e)}set(e,t){t=TC("DocumentReference.set",t);try{return t?vC(this._delegate,e,t):vC(this._delegate,e)}catch(n){throw MC(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?bC(this._delegate,e):bC(this._delegate,e,t,...n)}catch(i){throw MC(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return CC(Qb(e.firestore,hw),[new Hp(e._key,Pp.none())])}(this._delegate)}onSnapshot(...e){const t=VC(e),n=UC(e,e=>new qC(this.firestore,new Kw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return wC(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Qb(e,tw);const t=Qb(e.firestore,hw),n=dw(t),i=new yC(t);return function(e,t){const n=new gh;return e.asyncQueue.enqueueAndForget((0,Ko.Z)(function*(){return(i=(0,Ko.Z)(function*(e,t,n){try{const i=yield function(e,t){const n=ph(e);return n.persistence.runTransaction("read document","readonly",e=>n.ai.Bs(e,t))}(e,t);i.isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new mh(fh.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const i=iv(e,`Failed to get document '${t} from cache`);n.reject(i)}}),function(e,t,n){return i.apply(this,arguments)})(yield Vb(e),t,n);var i})),n.promise}(n,e._key).then(n=>new Kw(t,i,e._key,n,new Ww(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Qb(e,tw);const t=Qb(e.firestore,hw);return Zb(dw(t),e._key,{source:"server"}).then(n=>SC(t,e,n))}(this._delegate):function(e){e=Qb(e,tw);const t=Qb(e.firestore,hw);return Zb(dw(t),e._key).then(n=>SC(t,e,n))}(this._delegate),t.then(e=>new qC(this.firestore,new Kw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new LC(this.firestore,this._delegate.withConverter(e?FC.getInstance(this.firestore,e):null))}}function MC(e,t,n){return e.message=e.message.replace(t,n),e}function VC(e){for(const t of e)if("object"==typeof t&&!AC(t))return t;return{}}function UC(e,t){var n,i;let r;return r=AC(e[0])?e[0]:AC(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{r.next&&r.next(t(e))},error:null===(n=r.error)||void 0===n?void 0:n.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class qC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new LC(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return eC(this._delegate,e._delegate)}}class BC extends qC{data(e){const t=this._delegate.data(e);return function(e,t){e||hh()}(void 0!==t),t}}class jC{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new OC(e)}where(e,t,n){try{return new jC(this.firestore,iC(this._delegate,function(e,t,n){const i=t,r=$w("where",e);return new rC(r,i,n)}(e,t,n)))}catch(i){throw MC(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new jC(this.firestore,iC(this._delegate,function(e,t="asc"){const n=t,i=$w("orderBy",e);return new sC(i,n)}(e,t)))}catch(n){throw MC(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new jC(this.firestore,iC(this._delegate,function(e){return Jb("limit",e),new oC("limit",e,"F")}(e)))}catch(t){throw MC(t,"limit()","Query.limit()")}}limitToLast(e){try{return new jC(this.firestore,iC(this._delegate,function(e){return Jb("limitToLast",e),new oC("limitToLast",e,"L")}(e)))}catch(t){throw MC(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new jC(this.firestore,iC(this._delegate,function(...e){return new aC("startAt",e,!0)}(...e)))}catch(t){throw MC(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new jC(this.firestore,iC(this._delegate,function(...e){return new aC("startAfter",e,!1)}(...e)))}catch(t){throw MC(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new jC(this.firestore,iC(this._delegate,function(...e){return new lC("endBefore",e,!1)}(...e)))}catch(t){throw MC(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new jC(this.firestore,iC(this._delegate,function(...e){return new lC("endAt",e,!0)}(...e)))}catch(t){throw MC(t,"endAt()","Query.endAt()")}}isEqual(e){return aw(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Qb(e,nw);const t=Qb(e.firestore,hw),n=dw(t),i=new yC(t);return function(e,t){const n=new gh;return e.asyncQueue.enqueueAndForget((0,Ko.Z)(function*(){return(i=(0,Ko.Z)(function*(e,t,n){try{const i=yield E_(e,t,!0),r=new Sv(t,i.hi),s=r.Gu(i.documents),o=r.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const i=iv(e,`Failed to execute query '${t} against cache`);n.reject(i)}}),function(e,t,n){return i.apply(this,arguments)})(yield Vb(e),t,n);var i})),n.promise}(n,e._query).then(n=>new Jw(t,i,e,n))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Qb(e,nw);const t=Qb(e.firestore,hw),n=dw(t),i=new yC(t);return zb(n,e._query,{source:"server"}).then(n=>new Jw(t,i,e,n))}(this._delegate):function(e){e=Qb(e,nw);const t=Qb(e.firestore,hw),n=dw(t),i=new yC(t);return tC(e._query),zb(n,e._query).then(n=>new Jw(t,i,e,n))}(this._delegate),t.then(e=>new zC(this.firestore,new Jw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=VC(e),n=UC(e,e=>new zC(this.firestore,new Jw(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return wC(this._delegate,t,n)}withConverter(e){return new jC(this.firestore,this._delegate.withConverter(e?FC.getInstance(this.firestore,e):null))}}class ZC{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new BC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class zC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new jC(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new BC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new ZC(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new BC(this._firestore,n))})}isEqual(e){return eC(this._delegate,e._delegate)}}class GC extends jC{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new LC(this.firestore,e):null}doc(e){try{return new LC(this.firestore,void 0===e?sw(this._delegate):sw(this._delegate,e))}catch(t){throw MC(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Qb(e.firestore,hw),i=sw(e),r=fC(e.converter,t);return CC(n,[xw(Ew(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,Pp.exists(!1))]).then(()=>i)}(this._delegate,e).then(e=>new LC(this.firestore,e))}isEqual(e){return ow(this._delegate,e._delegate)}withConverter(e){return new GC(this.firestore,this._delegate.withConverter(e?FC.getInstance(this.firestore,e):null))}}function HC(e){return Qb(e,tw)}class YC{constructor(...e){this._delegate=new gw(...e)}static documentId(){return new YC(Uh.keyField().canonicalString())}isEqual(e){return(e=(0,Fo.m9)(e))instanceof gw&&this._delegate._internalPath.isEqual(e._internalPath)}}class $C{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Dw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new $C(e)}static delete(){const e=new Iw("deleteField");return e._methodName="FieldValue.delete",new $C(e)}static arrayUnion(...e){const t=function(...e){return new Rw("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new $C(t)}static arrayRemove(...e){const t=function(...e){return new Ow("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new $C(t)}static increment(e){const t=function(e){return new Pw("increment",e)}(e);return t._methodName="FieldValue.increment",new $C(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const WC={Firestore:RC,GeoPoint:vw,Timestamp:Rh,Blob:IC,Transaction:PC,WriteBatch:NC,DocumentReference:LC,DocumentSnapshot:qC,Query:jC,QueryDocumentSnapshot:BC,QuerySnapshot:zC,CollectionReference:GC,FieldPath:YC,FieldValue:$C,setLogLevel:function(e){!function(e){sh.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};var KC,QC;QC=(e,t)=>new RC(e,t,new DC),(KC=Wo.Z).INTERNAL.registerComponent(new Vo.wA("firestore-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return QC(t,n)},"PUBLIC").setServiceProps(Object.assign({},WC))),KC.registerVersion("@firebase/firestore-compat","0.1.16");var JC=n(6682),XC=n(6136),eS=n(7771),tS=n(8858);class nS extends ht.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new iS(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,r=n.length;let s;if(this.closed)throw new dt.N;if(this.isStopped||this.hasError?s=mn.w.EMPTY:(this.observers.push(e),s=new tS.W(this,e)),i&&e.add(e=new XC.ht(e,i)),t)for(let o=0;o<r&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<r&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||eS.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,i=this._events,r=i.length;let s=0;for(;s<r&&!(e-i[s].time<n);)s++;return r>t&&(s=Math.max(s,r-t)),s>0&&i.splice(0,s),i}}class iS{constructor(e,t){this.time=e,this.value=t}}function rS(e,t,n){let i;return i=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:i}){let r,s,o=0,a=!1,l=!1;return function(c){let u;o++,!r||a?(a=!1,r=new nS(e,t,i),u=r.subscribe(this),s=c.subscribe({next(e){r.next(e)},error(e){a=!0,r.error(e)},complete(){l=!0,s=void 0,r.complete()}}),l&&(s=void 0)):u=r.subscribe(this),this.add(()=>{o--,u.unsubscribe(),u=void 0,s&&!l&&n&&0===o&&(s.unsubscribe(),s=void 0,r=void 0)})}}(i))}function sS(e,t){return t?Ft(()=>e,t):Ft(()=>e)}var oS=n(9673);n(2329);const aS=new Map,lS={activated:!1,tokenObservers:[]},cS={initialized:!1,enabled:!1};function uS(e){return aS.get(e)||lS}function hS(e,t){aS.set(e,t)}function dS(){return cS}class pS{constructor(e,t,n,i,r){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=i,this.upperBound=r,this.pending=null,this.nextErrorWaitInterval=i,i>r)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ko.Z)(function*(){t.stop();try{t.pending=new Fo.BH,yield function(e){return new Promise(t=>{setTimeout(t,e)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Fo.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(XR){t.retryPolicy(XR)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const fS=new Fo.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function mS(e){if(!uS(e).activated)throw fS.create("use-before-activation",{appName:e.name})}function gS(e,t){return _S.apply(this,arguments)}function _S(){return(_S=(0,Ko.Z)(function*({url:e,body:t},n){const i={"Content-Type":"application/json"},r=n.getImmediate({optional:!0});if(r){const e=yield r.getHeartbeatsHeader();e&&(i["X-Firebase-Client"]=e)}const s={method:"POST",body:JSON.stringify(t),headers:i};let o,a;try{o=yield fetch(e,s)}catch(h){throw fS.create("fetch-network-error",{originalErrorMessage:h.message})}if(200!==o.status)throw fS.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(h){throw fS.create("fetch-parse-error",{originalErrorMessage:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw fS.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(l[1]),u=Date.now();return{token:a.attestationToken,expireTimeMillis:u+c,issuedAtTimeMillis:u}})).apply(this,arguments)}function yS(e,t){const{projectId:n,appId:i,apiKey:r}=e.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${n}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const vS="firebase-app-check-store";let bS=null;function wS(){return bS||(bS=new Promise((e,t)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{var n;t(fS.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(vS,{keyPath:"compositeKey"})}}}catch(n){t(fS.create("storage-open",{originalErrorMessage:n.message}))}}),bS)}function CS(){return(CS=(0,Ko.Z)(function*(e,t){const n=(yield wS()).transaction(vS,"readwrite"),i=n.objectStore(vS).put({compositeKey:e,value:t});return new Promise((e,t)=>{i.onsuccess=t=>{e()},n.onerror=e=>{var n;t(fS.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})})).apply(this,arguments)}const SS=new Mo.Yd("@firebase/app-check");function kS(e,t){return(0,Fo.hl)()?function(e,t){return function(e,t){return CS.apply(this,arguments)}(function(e){return`${e.options.appId}-${e.name}`}(e),t)}(e,t).catch(e=>{SS.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function TS(){return dS().enabled}function ES(){return xS.apply(this,arguments)}function xS(){return(xS=(0,Ko.Z)(function*(){const e=dS();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const IS={error:"UNKNOWN_ERROR"};function AS(e){return DS.apply(this,arguments)}function DS(){return(DS=(0,Ko.Z)(function*(e,t=!1){const n=e.app;mS(n);const i=uS(n);let r,s=i.token;if(!s){const e=yield i.cachedTokenPromise;e&&NS(e)&&(s=e)}if(!t&&s&&NS(s))return{token:s.token};let o,a=!1;if(TS()){i.exchangeTokenPromise||(i.exchangeTokenPromise=gS(yS(n,yield ES()),e.heartbeatServiceProvider).then(e=>(i.exchangeTokenPromise=void 0,e)),a=!0);const t=yield i.exchangeTokenPromise;return yield kS(n,t),hS(n,Object.assign(Object.assign({},i),{token:t})),{token:t.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(e=>(i.exchangeTokenPromise=void 0,e)),a=!0),s=yield i.exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?SS.warn(l.message):SS.error(l),r=l}return s?(o={token:s.token},hS(n,Object.assign(Object.assign({},i),{token:s})),yield kS(n,s)):o=FS(r),a&&PS(n,o),o})).apply(this,arguments)}function RS(e,t){const n=uS(e),i=n.tokenObservers.filter(e=>e.next!==t);0===i.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),hS(e,Object.assign(Object.assign({},n),{tokenObservers:i}))}function OS(e){const{app:t}=e,n=uS(t);let i=n.tokenRefresher;i||(i=function(e){const{app:t}=e;return new pS((0,Ko.Z)(function*(){let n;if(n=uS(t).token?yield AS(e,!0):yield AS(e),n.error)throw n.error}),()=>!0,()=>{const e=uS(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return t=Math.min(t,e.token.expireTimeMillis-3e5),Math.max(0,t-Date.now())}return 0},3e4,96e4)}(e),hS(t,Object.assign(Object.assign({},n),{tokenRefresher:i}))),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function PS(e,t){const n=uS(e).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(i){}}function NS(e){return e.expireTimeMillis-Date.now()>0}function FS(e){return{token:(t=IS,Fo.US.encodeString(JSON.stringify(t),!1)),error:e};var t}class LS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=uS(this.app);for(const t of e)RS(this.app,t.next);return Promise.resolve()}}(0,Lo._registerComponent)(new Vo.wA("app-check",e=>{return t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),new LS(t,n);var t,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("app-check-internal").initialize()})),(0,Lo._registerComponent)(new Vo.wA("app-check-internal",e=>{return t=e.getProvider("app-check").getImmediate(),{getToken:e=>AS(t,e),addTokenListener:e=>function(e,t,n,i){const{app:r}=e,s=uS(r),o={next:n,error:void 0,type:"INTERNAL"};if(hS(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&NS(s.token)){const t=s.token;Promise.resolve().then(()=>{n({token:t.token}),OS(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>OS(e))}(t,0,e),removeTokenListener:e=>RS(t.app,e)};var t},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Lo.registerVersion)("@firebase/app-check","0.5.5");class MS{constructor(){return(0,qo.vb)("app-check")}}"undefined"!=typeof window&&window;var VS=n(7841);const US=new i.OlP("angularfire2.auth.use-emulator"),qS=new i.OlP("angularfire2.auth.settings"),BS=new i.OlP("angularfire2.auth.tenant-id"),jS=new i.OlP("angularfire2.auth.langugage-code"),ZS=new i.OlP("angularfire2.auth.use-device-language"),zS=new i.OlP("angularfire.auth.persistence"),GS=(e,t,n,i,r,s,o,a)=>(0,$o.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const l=t.runOutsideAngular(()=>e.auth());if(n&&l.useEmulator(...n),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))l.settings[e]=t;return a&&l.setPersistence(a),l},[n,i,r,s,o,a]);let HS=(()=>{class e{constructor(e,t,i,r,s,o,a,l,c,u,h,d){const p=new ht.xQ,f=(0,ut.of)(void 0).pipe((0,XC.QV)(s.outsideAngular),Ft(()=>r.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,4828)))),(0,Pt.U)(()=>(0,$o.on)(e,r,t)),(0,Pt.U)(e=>GS(e,r,o,l,c,u,a,h)),rS({bufferSize:1,refCount:!1}));if(Te(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ut.of)(null);else{f.pipe(dn()).subscribe();const e=f.pipe(Ft(e=>e.getRedirectResult().then(e=>e,()=>null)),qo.iC,rS({bufferSize:1,refCount:!1})),t=f.pipe(Ft(e=>new bt.y(t=>({unsubscribe:r.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=f.pipe(Ft(e=>new bt.y(t=>({unsubscribe:r.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(sS(t),(0,oS.R)(s.outsideAngular),(0,XC.QV)(s.insideAngular)),this.user=e.pipe(sS(n),(0,oS.R)(s.outsideAngular),(0,XC.QV)(s.insideAngular)),this.idToken=this.user.pipe(Ft(e=>e?(0,ct.D)(e.getIdToken()):(0,ut.of)(null))),this.idTokenResult=this.user.pipe(Ft(e=>e?(0,ct.D)(e.getIdTokenResult()):(0,ut.of)(null))),this.credential=(0,JC.T)(e,p,this.authState.pipe(Ht(e=>!e))).pipe((0,Pt.U)(e=>(null==e?void 0:e.user)?e:null),(0,oS.R)(s.outsideAngular),(0,XC.QV)(s.insideAngular))}return(0,$o.pX)(this,f,r,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>p.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(i.LFG($o.Dh),i.LFG($o.xv,8),i.LFG(i.Lbi),i.LFG(i.R0b),i.LFG(qo.HU),i.LFG(US,8),i.LFG(qS,8),i.LFG(BS,8),i.LFG(jS,8),i.LFG(ZS,8),i.LFG(zS,8),i.LFG(MS,8))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),YS=(()=>{class e{constructor(){VS.Z.registerVersion("angularfire",qo.q4.full,"auth-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[HS]}),e})();function $S(e,t){return function(e,t=Uo.z){return new bt.y(n=>{let i;return null!=t?t.schedule(()=>{i=e.onSnapshot({includeMetadataChanges:!0},n)}):i=e.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=i&&i()}})}(e,t)}function WS(e,t){return $S(e,t).pipe((0,Pt.U)(e=>({payload:e,type:"query"})))}function KS(e,t){return WS(e,t).pipe(jt(void 0),Bo(),(0,Pt.U)(([e,t])=>{const n=t.payload.docChanges(),i=n.map(e=>({type:e.type,payload:e}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((t,r)=>{const s=n.find(e=>e.doc.ref.isEqual(t.ref)),o=null==e?void 0:e.payload.docs.find(e=>e.ref.isEqual(t.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(t.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(t.metadata)||i.push({type:"modified",payload:{oldIndex:r,newIndex:r,type:"modified",doc:t}})}),i}))}function QS(e,t,n){return KS(e,n).pipe(Zt((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return JS(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return JS(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return JS(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(e=>e.payload),t),[]),zo(),(0,Pt.U)(e=>e.map(e=>({type:e.type,payload:e}))))}function JS(e,t,n,...i){const r=e.slice();return r.splice(t,n,...i),r}function XS(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}class ek{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=KS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Pt.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)))),t.pipe(jt(void 0),Bo(),Ht(([e,t])=>t.length>0||!e),(0,Pt.U)(([e,t])=>t),qo.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zt((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=XS(e);return QS(this.query,t,this.afs.schedulers.outsideAngular).pipe(qo.iC)}valueChanges(e={}){return WS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),qo.iC)}get(e){return(0,ct.D)(this.query.get(e)).pipe(qo.iC)}add(e){return this.ref.add(e)}doc(e){return new tk(this.ref.doc(e),this.afs)}}class tk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:i,query:r}=ak(n,t);return new ek(i,r,this.afs)}snapshotChanges(){return function(e,t){return $S(e,t).pipe(jt(void 0),Bo(),(0,Pt.U)(([e,t])=>t.exists?(null==e?void 0:e.exists)?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(qo.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ct.D)(this.ref.get(e)).pipe(qo.iC)}}class nk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?KS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)),Ht(e=>e.length>0),qo.iC):KS(this.query,this.afs.schedulers.outsideAngular).pipe(qo.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zt((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=XS(e);return QS(this.query,t,this.afs.schedulers.outsideAngular).pipe(qo.iC)}valueChanges(e={}){return WS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign({[e.idField]:t.id},t.data()):t.data())),qo.iC)}get(e){return(0,ct.D)(this.query.get(e)).pipe(qo.iC)}}const ik=new i.OlP("angularfire2.enableFirestorePersistence"),rk=new i.OlP("angularfire2.firestore.persistenceSettings"),sk=new i.OlP("angularfire2.firestore.settings"),ok=new i.OlP("angularfire2.firestore.use-emulator");function ak(e,t=(e=>e)){return{query:t(e),ref:e}}let lk=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l,c,u,h,d,p,f,m,g){this.schedulers=o;const _=(0,$o.on)(e,s,t),y=l;c&&GS(_,s,u,d,p,f,h,m),[this.firestore,this.persistenceEnabled$]=(0,$o.cc)(`${_.name}.firestore`,"AngularFirestore",_.name,()=>{const e=s.runOutsideAngular(()=>_.firestore());if(i&&e.settings(i),y&&e.useEmulator(...y),n&&!Te(r)){const t=()=>{try{return(0,ct.D)(e.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,ut.of)(!1)}};return[e,s.runOutsideAngular(t)]}return[e,(0,ut.of)(!1)]},[i,y,n])}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:i,query:r}=ak(n,t),s=this.schedulers.ngZone.run(()=>i);return new ek(s,r,this)}collectionGroup(e,t){const n=t||(e=>e),i=this.firestore.collectionGroup(e);return new nk(n(i),this)}doc(e){let t;t="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>t);return new tk(n,this)}createId(){return this.firestore.collection("_").doc().id}}return e.\u0275fac=function(t){return new(t||e)(i.LFG($o.Dh),i.LFG($o.xv,8),i.LFG(ik,8),i.LFG(sk,8),i.LFG(i.Lbi),i.LFG(i.R0b),i.LFG(qo.HU),i.LFG(rk,8),i.LFG(ok,8),i.LFG(HS,8),i.LFG(US,8),i.LFG(qS,8),i.LFG(BS,8),i.LFG(jS,8),i.LFG(ZS,8),i.LFG(zS,8),i.LFG(MS,8))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),ck=(()=>{class e{constructor(){VS.Z.registerVersion("angularfire",qo.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:e,providers:[{provide:ik,useValue:!0},{provide:rk,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[lk]}),e})(),uk=(()=>{class e{constructor(e,t,n,i){this.afs=e,this.afAuth=t,this.router=n,this.ngZone=i,this.afAuth.authState.subscribe(e=>{if(e){this.userData=e;let t=new Date;localStorage.setItem("X-token",this.userData.email+t.toLocaleDateString()),console.log(localStorage.getItem("X-token")),JSON.parse(localStorage.getItem("user"))}else localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user"))})}SignIn(e,t){return this.afAuth.signInWithEmailAndPassword(e,t).then(e=>{this.ngZone.run(()=>{this.router.navigate(["contacts"])}),this.SetUserData(e.user)}).catch(e=>{window.alert(e.message)})}SignUp(e,t){return this.afAuth.createUserWithEmailAndPassword(e,t).then(e=>{this.SendVerificationMail(),this.SetUserData(e.user)}).catch(e=>{window.alert(e.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(e=>{window.alert(e)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}GoogleAuth(){return this.AuthLogin(new No.N).then(e=>{e&&this.router.navigate(["dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(e=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(e.user)}).catch(e=>{window.alert(e)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("X-token"),this.router.navigate(["login"])})}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(lk),i.LFG(HS),i.LFG(Yr),i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function hk(e){return null!=e&&"false"!=`${e}`}function dk(e,t=0){return pk(e)?Number(e):t}function pk(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function fk(e){return Array.isArray(e)?e:[e]}function mk(e){return null==e?"":"string"==typeof e?e:`${e}px`}function gk(e){return e instanceof i.SBq?e.nativeElement:e}function _k(e,t=Uo.P){return n=>n.lift(new yk(e,t))}class yk{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new vk(e,this.dueTime,this.scheduler))}}class vk extends gt.L{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(bk,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function bk(e){e.debouncedNext()}let wk,Ck=(()=>{class e{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Sk=(()=>{class e{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,t)=>this._cleanupObserver(t))}observe(e){const t=gk(e);return new bt.y(e=>{const n=this._observeElement(t).subscribe(e);return()=>{n.unsubscribe(),this._unobserveElement(t)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const t=new ht.xQ,n=this._mutationObserverFactory.create(e=>t.next(e));n&&n.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:n,stream:t,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:t,stream:n}=this._observedElements.get(e);t&&t.disconnect(),n.complete(),this._observedElements.delete(e)}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Ck))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(Ck))},token:e,providedIn:"root"}),e})(),kk=(()=>{class e{constructor(e,t,n){this._contentObserver=e,this._elementRef=t,this._ngZone=n,this.event=new i.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=hk(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=dk(e),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(_k(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Sk),i.Y36(i.SBq),i.Y36(i.R0b))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),e})(),Tk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[Ck]}),e})();function Ek(e,...t){return t.length?t.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function xk(e){return t=>t.lift(new Ik(e))}class Ik{constructor(e){this.total=e}call(e,t){return t.subscribe(new Ak(e,this.total))}}class Ak extends gt.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function Dk(e){return t=>t.lift(new Rk(e))}class Rk{constructor(e){this.notifier=e}call(e,t){const n=new Ok(e),i=(0,Nt.ft)(this.notifier,new Nt.IY(n));return i&&!n.seenValue?(n.add(i),t.subscribe(n)):n}}class Ok extends Nt.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}try{wk="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(nb){wk=!1}let Pk,Nk=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!wk)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.Lbi))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(i.Lbi))},token:e,providedIn:"root"}),e})(),Fk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})();const Lk=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Mk(){if(Pk)return Pk;if("object"!=typeof document||!document)return Pk=new Set(Lk),Pk;let e=document.createElement("input");return Pk=new Set(Lk.filter(t=>(e.setAttribute("type",t),e.type===t))),Pk}let Vk,Uk,qk;function Bk(e){return function(){if(null==Vk&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Vk=!0}))}finally{Vk=Vk||!1}return Vk}()?e:!!e.capture}function jk(){if(null==Uk){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Uk=!1,Uk;if("scrollBehavior"in document.documentElement.style)Uk=!0;else{const e=Element.prototype.scrollTo;Uk=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return Uk}function Zk(){let e="undefined"!=typeof document&&document?document.activeElement:null;for(;e&&e.shadowRoot;){const t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}function zk(e){return e.composedPath?e.composedPath()[0]:e.target}function Gk(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function Hk(e,t){return(e.getAttribute(t)||"").match(/\S+/g)||[]}let Yk=0;const $k=new Map;let Wk=null,Kk=(()=>{class e{constructor(e){this._document=e}describe(e,t,n){if(!this._canBeDescribed(e,t))return;const i=Qk(t,n);"string"!=typeof t?(Jk(t),$k.set(i,{messageElement:t,referenceCount:0})):$k.has(i)||this._createMessageElement(t,n),this._isElementDescribedByMessage(e,i)||this._addMessageReference(e,i)}removeDescription(e,t,n){if(!t||!this._isElementNode(e))return;const i=Qk(t,n);if(this._isElementDescribedByMessage(e,i)&&this._removeMessageReference(e,i),"string"==typeof t){const e=$k.get(i);e&&0===e.referenceCount&&this._deleteMessageElement(i)}Wk&&0===Wk.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const e=this._document.querySelectorAll("[cdk-describedby-host]");for(let t=0;t<e.length;t++)this._removeCdkDescribedByReferenceIds(e[t]),e[t].removeAttribute("cdk-describedby-host");Wk&&this._deleteMessagesContainer(),$k.clear()}_createMessageElement(e,t){const n=this._document.createElement("div");Jk(n),n.textContent=e,t&&n.setAttribute("role",t),this._createMessagesContainer(),Wk.appendChild(n),$k.set(Qk(e,t),{messageElement:n,referenceCount:0})}_deleteMessageElement(e){const t=$k.get(e),n=t&&t.messageElement;Wk&&n&&Wk.removeChild(n),$k.delete(e)}_createMessagesContainer(){if(!Wk){const e=this._document.getElementById("cdk-describedby-message-container");e&&e.parentNode&&e.parentNode.removeChild(e),Wk=this._document.createElement("div"),Wk.id="cdk-describedby-message-container",Wk.style.visibility="hidden",Wk.classList.add("cdk-visually-hidden"),this._document.body.appendChild(Wk)}}_deleteMessagesContainer(){Wk&&Wk.parentNode&&(Wk.parentNode.removeChild(Wk),Wk=null)}_removeCdkDescribedByReferenceIds(e){const t=Hk(e,"aria-describedby").filter(e=>0!=e.indexOf("cdk-describedby-message"));e.setAttribute("aria-describedby",t.join(" "))}_addMessageReference(e,t){const n=$k.get(t);!function(e,t,n){const i=Hk(e,t);i.some(e=>e.trim()==n.trim())||(i.push(n.trim()),e.setAttribute(t,i.join(" ")))}(e,"aria-describedby",n.messageElement.id),e.setAttribute("cdk-describedby-host",""),n.referenceCount++}_removeMessageReference(e,t){const n=$k.get(t);n.referenceCount--,function(e,t,n){const i=Hk(e,t).filter(e=>e!=n.trim());i.length?e.setAttribute(t,i.join(" ")):e.removeAttribute(t)}(e,"aria-describedby",n.messageElement.id),e.removeAttribute("cdk-describedby-host")}_isElementDescribedByMessage(e,t){const n=Hk(e,"aria-describedby"),i=$k.get(t),r=i&&i.messageElement.id;return!!r&&-1!=n.indexOf(r)}_canBeDescribed(e,t){if(!this._isElementNode(e))return!1;if(t&&"object"==typeof t)return!0;const n=null==t?"":`${t}`.trim(),i=e.getAttribute("aria-label");return!(!n||i&&i.trim()===n)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(o))},token:e,providedIn:"root"}),e})();function Qk(e,t){return"string"==typeof e?`${t||""}/${e}`:e}function Jk(e){e.id||(e.id="cdk-describedby-message-"+Yk++)}class Xk extends class{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ht.xQ,this._typeaheadSubscription=mn.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new ht.xQ,this.change=new ht.xQ,e instanceof i.n_E&&e.changes.subscribe(e=>{if(this._activeItem){const t=e.toArray().indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,pn.b)(e=>this._pressedLetters.push(e)),_k(e),Ht(()=>this._pressedLetters.length>0),(0,Pt.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const t=this._getItemsArray();for(let n=1;n<t.length+1;n++){const i=(this._activeItemIndex+n)%t.length,r=t[i];if(!this._skipPredicateFn(r)&&0===r.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(i);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(t=>!e[t]||this._allowedModifierKeys.indexOf(t)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&n){this.setNextItemActive();break}return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&n){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&n){this.setLastItemActive();break}return;default:return void((n||Ek(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e),i=t[n];this._activeItem=null==i?null:i,this._activeItemIndex=n}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const i=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof i.n_E?this._items.toArray():this._items}}{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let eT=(()=>{class e{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const t=function(e){try{return e.frameElement}catch(nb){return null}}((n=e).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(t){if(-1===nT(t))return!1;if(!this.isVisible(t))return!1}let i=e.nodeName.toLowerCase(),r=nT(e);return e.hasAttribute("contenteditable")?-1!==r:"iframe"!==i&&"object"!==i&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(e){let t=e.nodeName.toLowerCase(),n="input"===t&&e.type;return"text"===n||"password"===n||"select"===t||"textarea"===t}(e))&&("audio"===i?!!e.hasAttribute("controls")&&-1!==r:"video"===i?-1!==r&&(null!==r||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,t){return function(e){return!function(e){return function(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function(e){let t=e.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(e)||function(e){return function(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||tT(e))}(e)&&!this.isDisabled(e)&&((null==t?void 0:t.ignoreVisibility)||this.isVisible(e))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Nk))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(Nk))},token:e,providedIn:"root"}),e})();function tT(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;let t=e.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function nT(e){if(!tT(e))return null;const t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class iT{constructor(e,t,n,i,r=!1){this._element=e,this._checker=t,this._ngZone=n,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let n=0;n<t.length;n++)t[n].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[n]):t[n].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[n]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){const n=this._getFirstTabbableElement(t);return null==n||n.focus(e),!!n}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let n=0;n<t.length;n++){let e=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(e)return e}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let n=t.length-1;n>=0;n--){let e=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(e)return e}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Ut(1)).subscribe(e)}}let rT=(()=>{class e{constructor(e,t,n){this._checker=e,this._ngZone=t,this._document=n}create(e,t=!1){return new iT(e,this._checker,this._ngZone,this._document,t)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(eT),i.LFG(i.R0b),i.LFG(o))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(eT),i.LFG(i.R0b),i.LFG(o))},token:e,providedIn:"root"}),e})(),sT=(()=>{class e{constructor(e,t,n){this._elementRef=e,this._focusTrapFactory=t,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=hk(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=hk(e)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const t=e.autoCapture;t&&!t.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=Zk(),this.focusTrap.focusInitialElementWhenReady()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(rT),i.Y36(o))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[i.TTD]}),e})();function oT(e){return 0===e.offsetX&&0===e.offsetY}function aT(e){const t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}"undefined"!=typeof Element&&Element;const lT=new i.OlP("cdk-input-modality-detector-options"),cT={ignoreKeys:[18,17,224,91,16]},uT=Bk({passive:!0,capture:!0});let hT=(()=>{class e{constructor(e,t,n,i){this._platform=e,this._mostRecentTarget=null,this._modality=new pt(null),this._lastTouchMs=0,this._onKeydown=e=>{var t,n;(null===(n=null===(t=this._options)||void 0===t?void 0:t.ignoreKeys)||void 0===n?void 0:n.some(t=>t===e.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=zk(e))},this._onMousedown=e=>{Date.now()-this._lastTouchMs<650||(this._modality.next(oT(e)?"keyboard":"mouse"),this._mostRecentTarget=zk(e))},this._onTouchstart=e=>{aT(e)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=zk(e))},this._options=Object.assign(Object.assign({},cT),i),this.modalityDetected=this._modality.pipe(xk(1)),this.modalityChanged=this.modalityDetected.pipe(zo()),e.isBrowser&&t.runOutsideAngular(()=>{n.addEventListener("keydown",this._onKeydown,uT),n.addEventListener("mousedown",this._onMousedown,uT),n.addEventListener("touchstart",this._onTouchstart,uT)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,uT),document.removeEventListener("mousedown",this._onMousedown,uT),document.removeEventListener("touchstart",this._onTouchstart,uT))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Nk),i.LFG(i.R0b),i.LFG(o),i.LFG(lT,8))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(Nk),i.LFG(i.R0b),i.LFG(o),i.LFG(lT,8))},token:e,providedIn:"root"}),e})();const dT=new i.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),pT=new i.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let fT=(()=>{class e{constructor(e,t,n,i){this._ngZone=t,this._defaultOptions=i,this._document=n,this._liveElement=e||this._createLiveElement()}announce(e,...t){const n=this._defaultOptions;let i,r;return 1===t.length&&"number"==typeof t[0]?r=t[0]:[i,r]=t,this.clear(),clearTimeout(this._previousTimeout),i||(i=n&&n.politeness?n.politeness:"polite"),null==r&&n&&(r=n.duration),this._liveElement.setAttribute("aria-live",i),this._ngZone.runOutsideAngular(()=>new Promise(t=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,t(),"number"==typeof r&&(this._previousTimeout=setTimeout(()=>this.clear(),r))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const e=this._document.getElementsByClassName("cdk-live-announcer-element"),t=this._document.createElement("div");for(let n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n]);return t.classList.add("cdk-live-announcer-element"),t.classList.add("cdk-visually-hidden"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),t}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(dT,8),i.LFG(i.R0b),i.LFG(o),i.LFG(pT,8))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(dT,8),i.LFG(i.R0b),i.LFG(o),i.LFG(pT,8))},token:e,providedIn:"root"}),e})(),mT=(()=>{class e{constructor(e,t,n,i){this._elementRef=e,this._liveAnnouncer=t,this._contentObserver=n,this._ngZone=i,this._politeness="polite"}get politeness(){return this._politeness}set politeness(e){this._politeness="off"===e||"assertive"===e?e:"polite","off"===this._politeness?this._subscription&&(this._subscription.unsubscribe(),this._subscription=null):this._subscription||(this._subscription=this._ngZone.runOutsideAngular(()=>this._contentObserver.observe(this._elementRef).subscribe(()=>{const e=this._elementRef.nativeElement.textContent;e!==this._previousAnnouncedText&&(this._liveAnnouncer.announce(e,this._politeness),this._previousAnnouncedText=e)})))}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(fT),i.Y36(Sk),i.Y36(i.R0b))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdkAriaLive",""]],inputs:{politeness:["cdkAriaLive","politeness"]},exportAs:["cdkAriaLive"]}),e})();const gT=new i.OlP("cdk-focus-monitor-default-options"),_T=Bk({passive:!0,capture:!0});let yT=(()=>{class e{constructor(e,t,n,i,r){this._ngZone=e,this._platform=t,this._inputModalityDetector=n,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ht.xQ,this._rootNodeFocusAndBlurListener=e=>{const t=zk(e),n="focus"===e.type?this._onFocus:this._onBlur;for(let i=t;i;i=i.parentElement)n.call(this,e,i)},this._document=i,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(e,t=!1){const n=gk(e);if(!this._platform.isBrowser||1!==n.nodeType)return(0,ut.of)(null);const i=function(e){if(function(){if(null==qk){const e="undefined"!=typeof document?document.head:null;qk=!(!e||!e.createShadowRoot&&!e.attachShadow)}return qk}()){const t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(n)||this._getDocument(),r=this._elementInfo.get(n);if(r)return t&&(r.checkChildren=!0),r.subject;const s={checkChildren:t,subject:new ht.xQ,rootNode:i};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(e){const t=gk(e),n=this._elementInfo.get(t);n&&(n.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._removeGlobalListeners(n))}focusVia(e,t,n){const i=gk(e);i===this._getDocument().activeElement?this._getClosestElementsInfo(i).forEach(([e,n])=>this._originChanged(e,t,n)):(this._setOrigin(t),"function"==typeof i.focus&&i.focus(n))}ngOnDestroy(){this._elementInfo.forEach((e,t)=>this.stopMonitoring(t))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,t,n){n?e.classList.add(t):e.classList.remove(t)}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,t){this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t)}_setOrigin(e,t=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&t,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,t){const n=this._elementInfo.get(t),i=zk(e);n&&(n.checkChildren||t===i)&&this._originChanged(t,this._getFocusOrigin(i),n)}_onBlur(e,t){const n=this._elementInfo.get(t);!n||n.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(n.subject,null))}_emitOrigin(e,t){this._ngZone.run(()=>e.next(t))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const t=e.rootNode,n=this._rootNodeFocusListenerCount.get(t)||0;n||this._ngZone.runOutsideAngular(()=>{t.addEventListener("focus",this._rootNodeFocusAndBlurListener,_T),t.addEventListener("blur",this._rootNodeFocusAndBlurListener,_T)}),this._rootNodeFocusListenerCount.set(t,n+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Dk(this._stopInputModalityDetector)).subscribe(e=>{this._setOrigin(e,!0)}))}_removeGlobalListeners(e){const t=e.rootNode;if(this._rootNodeFocusListenerCount.has(t)){const e=this._rootNodeFocusListenerCount.get(t);e>1?this._rootNodeFocusListenerCount.set(t,e-1):(t.removeEventListener("focus",this._rootNodeFocusAndBlurListener,_T),t.removeEventListener("blur",this._rootNodeFocusAndBlurListener,_T),this._rootNodeFocusListenerCount.delete(t))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,t,n){this._setClasses(e,t),this._emitOrigin(n.subject,t),this._lastFocusOrigin=t}_getClosestElementsInfo(e){const t=[];return this._elementInfo.forEach((n,i)=>{(i===e||n.checkChildren&&i.contains(e))&&t.push([i,n])}),t}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.R0b),i.LFG(Nk),i.LFG(hT),i.LFG(o,8),i.LFG(gT,8))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(i.R0b),i.LFG(Nk),i.LFG(hT),i.LFG(o,8),i.LFG(gT,8))},token:e,providedIn:"root"}),e})(),vT=(()=>{class e{constructor(e,t){this._elementRef=e,this._focusMonitor=t,this.cdkFocusChange=new i.vpe}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(e=>this.cdkFocusChange.emit(e))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(yT))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),e})(),bT=(()=>{class e{constructor(e,t){this._platform=e,this._document=t}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const t=this._document.defaultView||window,n=t&&t.getComputedStyle?t.getComputedStyle(e):null,i=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),i){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove("cdk-high-contrast-active"),e.remove("cdk-high-contrast-black-on-white"),e.remove("cdk-high-contrast-white-on-black"),this._hasCheckedHighContrastMode=!0;const t=this.getHighContrastMode();1===t?(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-black-on-white")):2===t&&(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-white-on-black"))}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Nk),i.LFG(o))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(Nk),i.LFG(o))},token:e,providedIn:"root"}),e})(),wT=(()=>{class e{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(bT))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[Fk,Tk]]}),e})();const CT=new i.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,i.f3M)(o)}});let ST=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new i.vpe,e){const t=e.documentElement?e.documentElement.dir:null,n=(e.body?e.body.dir:null)||t;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(CT,8))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(CT,8))},token:e,providedIn:"root"}),e})(),kT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})();const TT=new i.GfV("12.2.13");class ET{}function xT(e,t){return{type:7,name:e,definitions:t,options:{}}}function IT(e,t=null){return{type:4,styles:t,timings:e}}function AT(e,t=null){return{type:2,steps:e,options:t}}function DT(e){return{type:6,styles:e,offset:null}}function RT(e,t,n){return{type:0,name:e,styles:t,options:n}}function OT(e){return{type:5,steps:e}}function PT(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function NT(e=null){return{type:9,options:e}}function FT(e,t,n=null){return{type:11,selector:e,animation:t,options:n}}function LT(e){Promise.resolve(null).then(e)}class MT{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){LT(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class VT{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,i=0;const r=this.players.length;0==r?LT(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==r&&this._onFinish()}),e.onDestroy(()=>{++n==r&&this._onDestroy()}),e.onStart(()=>{++i==r&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){const e=this.players.reduce((e,t)=>null===e||t.totalTime>e.totalTime?t:e,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}function UT(){return"undefined"!=typeof window&&void 0!==window.document}function qT(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function BT(e){switch(e.length){case 0:return new MT;case 1:return e[0];default:return new VT(e)}}function jT(e,t,n,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(e=>{const n=e.offset,i=n==l,u=i&&c||{};Object.keys(e).forEach(n=>{let i=n,a=e[n];if("offset"!==n)switch(i=t.normalizePropertyName(i,o),a){case"!":a=r[n];break;case"*":a=s[n];break;default:a=t.normalizeStyleValue(n,i,a,o)}u[i]=a}),i||a.push(u),c=u,l=n}),o.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${o.join(e)}`)}return a}function ZT(e,t,n,i){switch(t){case"start":e.onStart(()=>i(n&&zT(n,"start",e)));break;case"done":e.onDone(()=>i(n&&zT(n,"done",e)));break;case"destroy":e.onDestroy(()=>i(n&&zT(n,"destroy",e)))}}function zT(e,t,n){const i=n.totalTime,r=GT(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==i?e.totalTime:i,!!n.disabled),s=e._data;return null!=s&&(r._data=s),r}function GT(e,t,n,i,r="",s=0,o){return{element:e,triggerName:t,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function HT(e,t,n){let i;return e instanceof Map?(i=e.get(t),i||e.set(t,i=n)):(i=e[t],i||(i=e[t]=n)),i}function YT(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let $T=(e,t)=>!1,WT=(e,t)=>!1,KT=(e,t,n)=>[];const QT=qT();(QT||"undefined"!=typeof Element)&&($T=UT()?(e,t)=>{for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:(e,t)=>e.contains(t),WT=(()=>{if(QT||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):WT}})(),KT=(e,t,n)=>{let i=[];if(n){const n=e.querySelectorAll(t);for(let e=0;e<n.length;e++)i.push(n[e])}else{const n=e.querySelector(t);n&&i.push(n)}return i});let JT=null,XT=!1;function eE(e){JT||(JT=("undefined"!=typeof document?document.body:null)||{},XT=!!JT.style&&"WebkitAppearance"in JT.style);let t=!0;return JT.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in JT.style,!t&&XT)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in JT.style),t}const tE=WT,nE=$T,iE=KT;function rE(e){const t={};return Object.keys(e).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[i]=e[n]}),t}let sE=(()=>{class e{validateStyleProperty(e){return eE(e)}matchesElement(e,t){return tE(e,t)}containsElement(e,t){return nE(e,t)}query(e,t,n){return iE(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,i,r,s=[],o){return new MT(n,i)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class oE{}function aE(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:lE(parseFloat(t[1]),t[2])}function lE(e,t){switch(t){case"s":return 1e3*e;default:return e}}function cE(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let i,r=0,s="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};i=lE(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(r=lE(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else i=e;if(!n){let n=!1,s=t.length;i<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),r<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(s,0,`The provided timing value "${e}" is invalid.`)}return{duration:i,delay:r,easing:s}}(e,t,n)}function uE(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function hE(e,t,n={}){if(t)for(let i in e)n[i]=e[i];else uE(e,n);return n}function dE(e,t,n){return n?t+":"+n+";":""}function pE(e){let t="";for(let n=0;n<e.style.length;n++){const i=e.style.item(n);t+=dE(0,i,e.style.getPropertyValue(i))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=dE(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n]));e.setAttribute("style",t)}function fE(e,t,n){e.style&&(Object.keys(t).forEach(i=>{const r=CE(i);n&&!n.hasOwnProperty(i)&&(n[i]=e.style[r]),e.style[r]=t[i]}),qT()&&pE(e))}function mE(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=CE(t);e.style[n]=""}),qT()&&pE(e))}function gE(e){return Array.isArray(e)?1==e.length?e[0]:AT(e):e}oE.NOOP=new sE;const _E=new RegExp("{{\\s*(.+?)\\s*}}","g");function yE(e){let t=[];if("string"==typeof e){let n;for(;n=_E.exec(e);)t.push(n[1]);_E.lastIndex=0}return t}function vE(e,t,n){const i=e.toString(),r=i.replace(_E,(e,i)=>{let r=t[i];return t.hasOwnProperty(i)||(n.push(`Please provide a value for the animation param ${i}`),r=""),r.toString()});return r==i?e:r}function bE(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const wE=/-+([a-z0-9])/g;function CE(e){return e.replace(wE,(...e)=>e[1].toUpperCase())}function SE(e,t){return 0===e||0===t}function kE(e,t,n){const i=Object.keys(n);if(i.length&&t.length){let s=t[0],o=[];if(i.forEach(e=>{s.hasOwnProperty(e)||o.push(e),s[e]=n[e]}),o.length)for(var r=1;r<t.length;r++){let n=t[r];o.forEach(function(t){n[t]=EE(e,t)})}}return t}function TE(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function EE(e,t){return window.getComputedStyle(e)[t]}function xE(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,t,n){if(":"==e[0]){const i=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof i)return void t.push(i);e=i}const i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const r=i[1],s=i[2],o=i[3];t.push(DE(r,o)),"<"!=s[0]||"*"==r&&"*"==o||t.push(DE(o,r))}(e,n,t)):n.push(e),n}const IE=new Set(["true","1"]),AE=new Set(["false","0"]);function DE(e,t){const n=IE.has(e)||AE.has(e),i=IE.has(t)||AE.has(t);return(r,s)=>{let o="*"==e||e==r,a="*"==t||t==s;return!o&&n&&"boolean"==typeof r&&(o=r?IE.has(e):AE.has(e)),!a&&i&&"boolean"==typeof s&&(a=s?IE.has(t):AE.has(t)),o&&a}}const RE=new RegExp("s*:selfs*,?","g");function OE(e,t,n){return new PE(e).build(t,n)}class PE{constructor(e){this._driver=e}build(e,t){const n=new NE(t);return this._resetContextStyleTimingState(n),TE(this,gE(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,i=t.depCount=0;const r=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,i=n.name;i.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,r.push(this.visitState(n,t))}),n.name=i}else if(1==e.type){const r=this.visitTransition(e,t);n+=r.queryCount,i+=r.depCount,s.push(r)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:r,transitions:s,queryCount:n,depCount:i,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(n.containsDynamicStyles){const r=new Set,s=i||{};if(n.styles.forEach(e=>{if(FE(e)){const t=e;Object.keys(t).forEach(e=>{yE(t[e]).forEach(e=>{s.hasOwnProperty(e)||r.add(e)})})}}),r.size){const n=bE(r.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=TE(this,gE(e.animation),t);return{type:1,matchers:xE(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:LE(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>TE(this,e,t)),options:LE(e.options)}}visitGroup(e,t){const n=t.currentTime;let i=0;const r=e.steps.map(e=>{t.currentTime=n;const r=TE(this,e,t);return i=Math.max(i,t.currentTime),r});return t.currentTime=i,{type:3,steps:r,options:LE(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return ME(cE(e,t).duration,0,"");const i=e;if(i.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=ME(0,0,"");return e.dynamic=!0,e.strValue=i,e}return n=n||cE(i,t),ME(n.duration,n.delay,n.easing)}(e.timings,t.errors);let i;t.currentAnimateTimings=n;let r=e.styles?e.styles:DT({});if(5==r.type)i=this.visitKeyframes(r,t);else{let r=e.styles,s=!1;if(!r){s=!0;const e={};n.easing&&(e.easing=n.easing),r=DT(e)}t.currentTime+=n.duration+n.delay;const o=this.visitStyle(r,t);o.isEmptyStep=s,i=o}return t.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?"*"==e?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let i=!1,r=null;return n.forEach(e=>{if(FE(e)){const t=e,n=t.easing;if(n&&(r=n,delete t.easing),!i)for(let e in t)if(t[e].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let i=t.currentTime,r=t.currentTime;n&&r>0&&(r-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=t.collectedStyles[t.currentQuerySelector],o=s[n];let a=!0;o&&(r!=i&&r>=o.startTime&&i<=o.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${i}ms"`),a=!1),r=o.startTime),a&&(s[n]={startTime:r,endTime:i}),t.options&&function(e,t,n){const i=t.params||{},r=yE(e);r.length&&r.forEach(e=>{i.hasOwnProperty(e)||n.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[n],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let i=0;const r=[];let s=!1,o=!1,a=0;const l=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let l=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(FE(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(FE(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),c=0;return null!=l&&(i++,c=n.offset=l),o=o||c<0||c>1,s=s||c<a,a=c,r.push(c),n});o&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&t.errors.push("Please ensure that all keyframe offsets are in order");const c=e.steps.length;let u=0;i>0&&i<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(u=1/(c-1));const h=c-1,d=t.currentTime,p=t.currentAnimateTimings,f=p.duration;return l.forEach((e,i)=>{const s=u>0?i==h?1:u*i:r[i],o=s*f;t.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(e,t),e.offset=s,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:TE(this,gE(e.animation),t),options:LE(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:LE(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:LE(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[r,s]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>":self"==e);return t&&(e=e.replace(RE,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,e=>".ng-trigger-"+e.substr(1)).replace(/:animating/g,".ng-animating"),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+r:r,HT(t.collectedStyles,t.currentQuerySelector,{});const o=TE(this,gE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:r,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:o,originalSelector:e.selector,options:LE(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:cE(e.timings,t.errors,!0);return{type:12,animation:TE(this,gE(e.animation),t),timings:n,options:null}}}class NE{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function FE(e){return!Array.isArray(e)&&"object"==typeof e}function LE(e){var t;return e?(e=uE(e)).params&&(e.params=(t=e.params)?uE(t):null):e={},e}function ME(e,t,n){return{duration:e,delay:t,easing:n}}function VE(e,t,n,i,r,s,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class UE{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const qE=new RegExp(":enter","g"),BE=new RegExp(":leave","g");function jE(e,t,n,i,r,s={},o={},a,l,c=[]){return(new ZE).buildKeyframes(e,t,n,i,r,s,o,a,l,c)}class ZE{buildKeyframes(e,t,n,i,r,s,o,a,l,c=[]){l=l||new UE;const u=new GE(e,t,l,i,r,c,[]);u.options=a,u.currentTimeline.setStyles([s],null,u.errors,a),TE(this,n,u);const h=u.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(o).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([o],null,u.errors,a)}return h.length?h.map(e=>e.buildKeyframes()):[VE(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const i=t.createSubContext(e.options),r=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,i,i.options);r!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let i=t.currentTimeline.currentTime;const r=null!=n.duration?aE(n.duration):null,s=null!=n.delay?aE(n.delay):null;return 0!==r&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,r,s);i=Math.max(i,n.duration+n.delay)}),i}visitReference(e,t){t.updateOptions(e.options,!0),TE(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let i=t;const r=e.options;if(r&&(r.params||r.delay)&&(i=t.createSubContext(r),i.transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=zE);const e=aE(r.delay);i.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>TE(this,e,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let i=t.currentTimeline.currentTime;const r=e.options&&e.options.delay?aE(e.options.delay):0;e.steps.forEach(s=>{const o=t.createSubContext(e.options);r&&o.delayNextStep(r),TE(this,s,o),i=Math.max(i,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return cE(t.params?vE(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),i.snapshotCurrentStyles());const r=e.style;5==r.type?this.visitKeyframes(r,t):(t.incrementTime(n.duration),this.visitStyle(r,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,i=t.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const r=i&&i.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(r):n.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,i=t.currentTimeline.duration,r=n.duration,s=t.createSubContext().currentTimeline;s.easing=n.easing,e.styles.forEach(e=>{s.forwardTime((e.offset||0)*r),s.setStyles(e.styles,e.easing,t.errors,t.options),s.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(i+r),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,i=e.options||{},r=i.delay?aE(i.delay):0;r&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=zE);let s=n;const o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=o.length;let a=null;o.forEach((n,i)=>{t.currentQueryIndex=i;const o=t.createSubContext(e.options,n);r&&o.delayNextStep(r),n===t.element&&(a=o.currentTimeline),TE(this,e.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,i=t.currentTimeline,r=e.timings,s=Math.abs(r.duration),o=s*(t.currentQueryTotal-1);let a=s*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=t.currentTimeline;a&&l.delayNextStep(a);const c=l.currentTime;TE(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=i.currentTime-c+(i.startTime-n.currentTimeline.startTime)}}const zE={};class GE{constructor(e,t,n,i,r,s,o,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=r,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=zE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new HE(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let i=this.options;null!=n.duration&&(i.duration=aE(n.duration)),null!=n.delay&&(i.delay=aE(n.delay));const r=n.params;if(r){let e=i.params;e||(e=this.options.params={}),Object.keys(r).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=vE(r[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const i=t||this.element,r=new GE(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(e),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(e){return this.previousNode=zE,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},r=new YE(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(r),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,i,r,s){let o=[];if(i&&o.push(this.element),e.length>0){e=(e=e.replace(qE,"."+this._enterClassName)).replace(BE,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),o.push(...t)}return r||0!=o.length||s.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),o}}class HE{constructor(e,t,n,i){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new HE(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||"*",this._currentKeyframe[e]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,i){t&&(this._previousKeyframe.easing=t);const r=i&&i.params||{},s=function(e,t){const n={};let i;return e.forEach(e=>{"*"===e?(i=i||Object.keys(t),i.forEach(e=>{n[e]="*"})):hE(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(s).forEach(e=>{const t=vE(s[e],r,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:"*"),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],i=e._styleSummary[t];(!n||i.time>n.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((r,s)=>{const o=hE(r,!0);Object.keys(o).forEach(n=>{const i=o[n];"!"==i?e.add(n):"*"==i&&t.add(n)}),n||(o.offset=s/this.duration),i.push(o)});const r=e.size?bE(e.values()):[],s=t.size?bE(t.values()):[];if(n){const e=i[0],t=uE(e);e.offset=0,t.offset=1,i=[e,t]}return VE(this.element,i,r,s,this.duration,this.startTime,this.easing,!1)}}class YE extends HE{constructor(e,t,n,i,r,s,o=!1){super(e,t,s.delay),this.keyframes=n,this.preStyleProps=i,this.postStyleProps=r,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const r=[],s=n+t,o=t/s,a=hE(e[0],!1);a.offset=0,r.push(a);const l=hE(e[0],!1);l.offset=$E(o),r.push(l);const c=e.length-1;for(let i=1;i<=c;i++){let o=hE(e[i],!1);o.offset=$E((t+o.offset*n)/s),r.push(o)}n=s,t=0,i="",e=r}return VE(this.element,e,this.preStyleProps,this.postStyleProps,n,t,i,!0)}}function $E(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class WE{}class KE extends WE{normalizePropertyName(e,t){return CE(e)}normalizeStyleValue(e,t,n,i){let r="";const s=n.toString().trim();if(QE[t]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&i.push(`Please provide a CSS unit value for ${e}:${n}`)}return s+r}}const QE=(()=>function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function JE(e,t,n,i,r,s,o,a,l,c,u,h,d){return{type:0,element:e,triggerName:t,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:d}}const XE={};class ex{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,i){return function(e,t,n,i,r){return e.some(e=>e(t,n,i,r))}(this.ast.matchers,e,t,n,i)}buildStyles(e,t,n){const i=this._stateStyles["*"],r=this._stateStyles[e],s=i?i.buildStyles(t,n):{};return r?r.buildStyles(t,n):s}build(e,t,n,i,r,s,o,a,l,c){const u=[],h=this.ast.options&&this.ast.options.params||XE,d=this.buildStyles(n,o&&o.params||XE,u),p=a&&a.params||XE,f=this.buildStyles(i,p,u),m=new Set,g=new Map,_=new Map,y="void"===i,v={params:Object.assign(Object.assign({},h),p)},b=c?[]:jE(e,t,this.ast.animation,r,s,d,f,v,l,u);let w=0;if(b.forEach(e=>{w=Math.max(e.duration+e.delay,w)}),u.length)return JE(t,this._triggerName,n,i,y,d,f,[],[],g,_,w,u);b.forEach(e=>{const n=e.element,i=HT(g,n,{});e.preStyleProps.forEach(e=>i[e]=!0);const r=HT(_,n,{});e.postStyleProps.forEach(e=>r[e]=!0),n!==t&&m.add(n)});const C=bE(m.values());return JE(t,this._triggerName,n,i,y,d,f,b,C,g,_,w)}}class tx{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n={},i=uE(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(i[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const r=e;Object.keys(r).forEach(e=>{let s=r[e];s.length>1&&(s=vE(s,i,t));const o=this.normalizer.normalizePropertyName(e,t);s=this.normalizer.normalizeStyleValue(e,o,s,t),n[o]=s})}}),n}}class nx{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new tx(e.style,e.options&&e.options.params||{},n)}),ix(this.states,"true","1"),ix(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new ex(e,t,this.states))}),this.fallbackTransition=new ex(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,i){return this.transitionFactories.find(r=>r.match(e,t,n,i))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function ix(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const rx=new UE;class sx{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],i=OE(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,n){const i=e.element,r=jT(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(i,r,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const i=[],r=this._animations[e];let s;const o=new Map;if(r?(s=jE(this._driver,t,r,"ng-enter","ng-leave",{},{},n,rx,i),s.forEach(e=>{const t=HT(o,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),s=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);o.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,"*")})});const a=BT(s.map(e=>{const t=o.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,i){const r=GT(t,"","","");return ZT(this._getPlayer(e),n,r,i),()=>{}}command(e,t,n,i){if("register"==n)return void this.register(e,i[0]);if("create"==n)return void this.create(e,t,i[0]||{});const r=this._getPlayer(e);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const ox=[],ax={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},lx={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class cx{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=null!=(i=n?e.value:e)?i:null,n){const t=uE(e);delete t.value,this.options=t}else this.options={};var i;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const ux=new cx("void");class hx{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,yx(t,this._hostClassName)}listen(e,t,n,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(r=n)&&"done"!=r)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var r;const s=HT(this._elementListeners,e,[]),o={name:t,phase:n,callback:i};s.push(o);const a=HT(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(yx(e,"ng-trigger"),yx(e,"ng-trigger-"+t),a[t]=ux),()=>{this._engine.afterFlush(()=>{const e=s.indexOf(o);e>=0&&s.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,i=!0){const r=this._getTrigger(t),s=new px(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(yx(e,"ng-trigger"),yx(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,o={}));let a=o[t];const l=new cx(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[t]=l,a||(a=ux),"void"!==l.value&&a.value===l.value){if(!function(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!t.hasOwnProperty(i)||e[i]!==t[i])return!1}return!0}(a.params,l.params)){const t=[],n=r.matchStyles(a.value,a.params,t),i=r.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{mE(e,n),fE(e,i)})}return}const c=HT(this._engine.playersByElement,e,[]);c.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let u=r.matchTransition(a.value,l.value,e,l.params),h=!1;if(!u){if(!i)return;u=r.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:u,fromState:a,toState:l,player:s,isFallbackTransition:h}),h||(yx(e,"ng-animate-queued"),s.onStart(()=>{vx(e,"ng-animate-queued")})),s.onDone(()=>{let t=this.players.indexOf(s);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(s);e>=0&&n.splice(e,1)}}),this.players.push(s),c.push(s),s}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,".ng-trigger",!0);n.forEach(e=>{if(e.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,t,n,i){const r=this._engine.statesByElement.get(e);if(r){const s=[];if(Object.keys(r).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,"void",i);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&BT(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const i=new Set;t.forEach(t=>{const r=t.name;if(i.has(r))return;i.add(r);const s=this._triggers[r].fallbackTransition,o=n[r]||ux,a=new cx("void"),l=new px(this.id,r,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:r,transition:s,fromState:o,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)i=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)n.markElementAsRemoved(this.id,e,!1,t);else{const i=e.__ng_removed;i&&i!==ax||(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){yx(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const r=n.element,s=this._elementListeners.get(r);s&&s.forEach(t=>{if(t.name==n.triggerName){const i=GT(r,n.triggerName,n.fromState.value,n.toState.value);i._data=e,ZT(n.player,t.phase,i,t.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,i=t.transition.ast.depCount;return 0==n||0==i?n-i:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t,t}}class dx{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new hx(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,t)){this._namespaceList.splice(r+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let i=this._namespaceLookup[e];i&&i.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let i=0;i<e.length;i++){const r=n[e[i]].namespaceId;if(r){const e=this._fetchNamespace(r);e&&t.add(e)}}}return t}trigger(e,t,n,i){if(fx(t)){const r=this._fetchNamespace(e);if(r)return r.trigger(t,n,i),!0}return!1}insertNode(e,t,n,i){if(!fx(t))return;const r=t.__ng_removed;if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const i=this._fetchNamespace(e);i&&i.insertNode(t,n)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),yx(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),vx(e,"ng-animate-disabled"))}removeNode(e,t,n,i){if(fx(t)){const r=e?this._fetchNamespace(e):null;if(r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),n){const n=this.namespacesByHostElement.get(t);n&&n.id!==e&&n.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,n,i){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,i,r){return fx(t)?this._fetchNamespace(e).listen(t,n,i,r):()=>{}}_buildInstruction(e,t,n,i,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,i,e.fromState.options,e.toState.options,t,r)}destroyInnerAnimations(e){let t=this.driver.query(e,".ng-trigger",!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,".ng-animating",!0),t.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return BT(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e.__ng_removed;if(t&&t.setForRemoval){if(e.__ng_removed=ax,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)yx(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?BT(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new UE,i=[],r=new Map,s=[],o=new Map,a=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(e=>{c.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let n=0;n<t.length;n++)c.add(t[n])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=_x(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((e,t)=>{const n="ng-enter"+f++;p.set(t,n),e.forEach(e=>yx(e,n))});const m=[],g=new Set,_=new Set;for(let D=0;D<this.collectedLeaveElements.length;D++){const e=this.collectedLeaveElements[D],t=e.__ng_removed;t&&t.setForRemoval&&(m.push(e),g.add(e),t.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>g.add(e)):_.add(e))}const y=new Map,v=_x(h,Array.from(g));v.forEach((e,t)=>{const n="ng-leave"+f++;y.set(t,n),e.forEach(e=>yx(e,n))}),e.push(()=>{d.forEach((e,t)=>{const n=p.get(t);e.forEach(e=>vx(e,n))}),v.forEach((e,t)=>{const n=y.get(t);e.forEach(e=>vx(e,n))}),m.forEach(e=>{this.processLeaveNode(e)})});const b=[],w=[];for(let D=this._namespaceList.length-1;D>=0;D--)this._namespaceList[D].drainQueuedTransitions(t).forEach(e=>{const t=e.player,r=e.element;if(b.push(t),this.collectedEnterElements.length){const e=r.__ng_removed;if(e&&e.setForMove)return void t.destroy()}const c=!u||!this.driver.containsElement(u,r),h=y.get(r),d=p.get(r),f=this._buildInstruction(e,n,d,h,c);if(f.errors&&f.errors.length)w.push(f);else{if(c)return t.onStart(()=>mE(r,f.fromStyles)),t.onDestroy(()=>fE(r,f.toStyles)),void i.push(t);if(e.isFallbackTransition)return t.onStart(()=>mE(r,f.fromStyles)),t.onDestroy(()=>fE(r,f.toStyles)),void i.push(t);f.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(r,f.timelines),s.push({instruction:f,player:t,element:r}),f.queriedElements.forEach(e=>HT(o,e,[]).push(t)),f.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),f.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let i=l.get(t);i||l.set(t,i=new Set),n.forEach(e=>i.add(e))})}});if(w.length){const e=[];w.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),b.forEach(e=>e.destroy()),this.reportError(e)}const C=new Map,S=new Map;s.forEach(e=>{const t=e.element;n.has(t)&&(S.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,C))}),i.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{HT(C,t,[]).push(e),e.destroy()})});const k=m.filter(e=>Cx(e,a,l)),T=new Map;gx(T,this.driver,_,l,"*").forEach(e=>{Cx(e,a,l)&&k.push(e)});const E=new Map;d.forEach((e,t)=>{gx(E,this.driver,new Set(e),a,"!")}),k.forEach(e=>{const t=T.get(e),n=E.get(e);T.set(e,Object.assign(Object.assign({},t),n))});const x=[],I=[],A={};s.forEach(e=>{const{element:t,player:s,instruction:o}=e;if(n.has(t)){if(c.has(t))return s.onDestroy(()=>fE(t,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void i.push(s);let e=A;if(S.size>1){let n=t;const i=[];for(;n=n.parentNode;){const t=S.get(n);if(t){e=t;break}i.push(n)}i.forEach(t=>S.set(t,e))}const n=this._buildAnimation(s.namespaceId,o,C,r,E,T);if(s.setRealPlayer(n),e===A)x.push(s);else{const t=this.playersByElement.get(e);t&&t.length&&(s.parentPlayer=BT(t)),i.push(s)}}else mE(t,o.fromStyles),s.onDestroy(()=>fE(t,o.toStyles)),I.push(s),c.has(t)&&i.push(s)}),I.forEach(e=>{const t=r.get(e.element);if(t&&t.length){const n=BT(t);e.setRealPlayer(n)}}),i.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let D=0;D<m.length;D++){const e=m[D],t=e.__ng_removed;if(vx(e,"ng-leave"),t&&t.hasAnimation)continue;let n=[];if(o.size){let t=o.get(e);t&&t.length&&n.push(...t);let i=this.driver.query(e,".ng-animating",!0);for(let e=0;e<i.length;e++){let t=o.get(i[e]);t&&t.length&&n.push(...t)}}const i=n.filter(e=>!e.destroyed);i.length?bx(this,e,i):this.processLeaveNode(e)}return m.length=0,x.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),x}elementContainsData(e,t){let n=!1;const i=t.__ng_removed;return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,i,r){let s=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(s=t)}else{const t=this.playersByElement.get(e);if(t){const e=!r||"void"==r;t.forEach(t=>{t.queued||(e||t.triggerName==i)&&s.push(t)})}}return(n||i)&&(s=s.filter(e=>!(n&&n!=e.namespaceId||i&&i!=e.triggerName))),s}_beforeAnimationBuild(e,t,n){const i=t.element,r=t.isRemovalTransition?void 0:e,s=t.isRemovalTransition?void 0:t.triggerName;for(const o of t.timelines){const e=o.element,a=e!==i,l=HT(n,e,[]);this._getPreviousPlayers(e,a,r,s,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)})}mE(i,t.fromStyles)}_buildAnimation(e,t,n,i,r,s){const o=t.triggerName,a=t.element,l=[],c=new Set,u=new Set,h=t.timelines.map(t=>{const h=t.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new MT(t.duration,t.delay);const p=h!==a,f=function(e){const t=[];return wx(e,t),t}((n.get(h)||ox).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===h),m=r.get(h),g=s.get(h),_=jT(0,this._normalizer,0,t.keyframes,m,g),y=this._buildPlayer(t,_,f);if(t.subTimeline&&i&&u.add(h),p){const t=new px(e,o,h);t.setRealPlayer(y),l.push(t)}return y});l.forEach(e=>{HT(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,t,n){let i;if(e instanceof Map){if(i=e.get(t),i){if(i.length){const e=i.indexOf(n);i.splice(e,1)}0==i.length&&e.delete(t)}}else if(i=e[t],i){if(i.length){const e=i.indexOf(n);i.splice(e,1)}0==i.length&&delete e[t]}return i}(this.playersByQueriedElement,e.element,e))}),c.forEach(e=>yx(e,"ng-animating"));const d=BT(h);return d.onDestroy(()=>{c.forEach(e=>vx(e,"ng-animating")),fE(a,t.toStyles)}),u.forEach(e=>{HT(i,e,[]).push(d)}),d}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new MT(e.duration,e.delay)}}class px{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new MT,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>ZT(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){HT(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function fx(e){return e&&1===e.nodeType}function mx(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function gx(e,t,n,i,r){const s=[];n.forEach(e=>s.push(mx(e)));const o=[];i.forEach((n,i)=>{const s={};n.forEach(e=>{const n=s[e]=t.computeStyle(i,e,r);n&&0!=n.length||(i.__ng_removed=lx,o.push(i))}),e.set(i,s)});let a=0;return n.forEach(e=>mx(e,s[a++])),o}function _x(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const i=new Set(t),r=new Map;function s(e){if(!e)return 1;let t=r.get(e);if(t)return t;const o=e.parentNode;return t=n.has(o)?o:i.has(o)?1:s(o),r.set(e,t),t}return t.forEach(e=>{const t=s(e);1!==t&&n.get(t).push(e)}),n}function yx(e,t){if(e.classList)e.classList.add(t);else{let n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function vx(e,t){if(e.classList)e.classList.remove(t);else{let n=e.$$classes;n&&delete n[t]}}function bx(e,t,n){BT(n).onDone(()=>e.processLeaveNode(t))}function wx(e,t){for(let n=0;n<e.length;n++){const i=e[n];i instanceof VT?wx(i.players,t):t.push(i)}}function Cx(e,t,n){const i=n.get(e);if(!i)return!1;let r=t.get(e);return r?i.forEach(e=>r.add(e)):t.set(e,i),n.delete(e),!0}class Sx{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new dx(e,t,n),this._timelineEngine=new sx(e,t,n),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,n,i,r){const s=e+"-"+i;let o=this._triggerCache[s];if(!o){const e=[],t=OE(this._driver,r,e);if(e.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);o=function(e,t,n){return new nx(e,t,n)}(i,t,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(t,i,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,i){this._transitionEngine.insertNode(e,t,n,i)}onRemove(e,t,n,i){this._transitionEngine.removeNode(e,t,i||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,i){if("@"==n.charAt(0)){const[e,r]=YT(n);this._timelineEngine.command(e,t,r,i)}else this._transitionEngine.trigger(e,t,n,i)}listen(e,t,n,i,r){if("@"==n.charAt(0)){const[e,i]=YT(n);return this._timelineEngine.listen(e,t,i,r)}return this._transitionEngine.listen(e,t,n,i,r)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function kx(e,t){let n=null,i=null;return Array.isArray(t)&&t.length?(n=Ex(t[0]),t.length>1&&(i=Ex(t[t.length-1]))):t&&(n=Ex(t)),n||i?new Tx(e,n,i):null}class Tx{constructor(e,t,n){this._element=e,this._startStyles=t,this._endStyles=n,this._state=0;let i=Tx.initialStylesByElement.get(e);i||Tx.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&fE(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(fE(this._element,this._initialStyles),this._endStyles&&(fE(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Tx.initialStylesByElement.delete(this._element),this._startStyles&&(mE(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(mE(this._element,this._endStyles),this._endStyles=null),fE(this._element,this._initialStyles),this._state=3)}}function Ex(e){let t=null;const n=Object.keys(e);for(let i=0;i<n.length;i++){const r=n[i];xx(r)&&(t=t||{},t[r]=e[r])}return t}function xx(e){return"display"===e||"position"===e}Tx.initialStylesByElement=new WeakMap;class Ix{constructor(e,t,n,i,r,s,o){this._element=e,this._name=t,this._duration=n,this._delay=i,this._easing=r,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(e,t){const n=Nx(e,"").trim();n.length&&(function(e,t){let n=0;for(let i=0;i<e.length;i++)","===e.charAt(i)&&n++}(n),t=`${n}, ${t}`),Px(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Ox(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Ax(this._element,this._name,"paused")}resume(){Ax(this._element,this._name,"running")}setPosition(e){const t=Dx(this._element,this._name);this._position=e*this._duration,Px(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Ox(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=Nx(e,"").split(","),i=Rx(n,t);i>=0&&(n.splice(i,1),Px(e,"",n.join(",")))}(this._element,this._name))}}function Ax(e,t,n){Px(e,"PlayState",n,Dx(e,t))}function Dx(e,t){const n=Nx(e,"");return n.indexOf(",")>0?Rx(n.split(","),t):Rx([n],t)}function Rx(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function Ox(e,t,n){n?e.removeEventListener("animationend",t):e.addEventListener("animationend",t)}function Px(e,t,n,i){const r="animation"+t;if(null!=i){const t=e.style[r];if(t.length){const e=t.split(",");e[i]=n,n=e.join(",")}}e.style[r]=n}function Nx(e,t){return e.style["animation"+t]||""}class Fx{constructor(e,t,n,i,r,s,o,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=i,this._delay=r,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=i+r,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Ix(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:EE(this.element,n))})}this.currentSnapshot=e}}class Lx extends MT{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=rE(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class Mx{constructor(){this._count=0}validateStyleProperty(e){return eE(e)}matchesElement(e,t){return tE(e,t)}containsElement(e,t){return nE(e,t)}query(e,t,n){return iE(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>rE(e));let i=`@keyframes ${t} {\n`,r="";n.forEach(e=>{r=" ";const t=parseFloat(e.offset);i+=`${r}${100*t}% {\n`,r+=" ",Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(i+=`${r}animation-timing-function: ${n};\n`));default:return void(i+=`${r}${t}: ${n};\n`)}}),i+=`${r}}\n`}),i+="}\n";const s=document.createElement("style");return s.textContent=i,s}animate(e,t,n,i,r,s=[],o){const a=s.filter(e=>e instanceof Fx),l={};SE(n,i)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const c=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=kE(e,t,l));if(0==n)return new Lx(e,c);const u="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,u,t);(function(e){var t;const n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(e).appendChild(h);const d=kx(e,t),p=new Fx(e,t,u,n,i,r,c,d);return p.onDestroy(()=>{var e;(e=h).parentNode.removeChild(e)}),p}}class Vx{constructor(e,t,n,i){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:EE(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class Ux{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(qx().toString()),this._cssKeyframesDriver=new Mx}validateStyleProperty(e){return eE(e)}matchesElement(e,t){return tE(e,t)}containsElement(e,t){return nE(e,t)}query(e,t,n){return iE(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,i,r,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,i,r,s);const a={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(a.easing=r);const l={},c=s.filter(e=>e instanceof Vx);SE(n,i)&&c.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const u=kx(e,t=kE(e,t=t.map(e=>hE(e,!1)),l));return new Vx(e,t,a,u)}}function qx(){return UT()&&Element.prototype.animate||{}}let Bx=(()=>{class e extends ET{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:i.ifc.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?AT(e):e;return zx(this._renderer,null,t,"register",[n]),new jx(t,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.FYo),i.LFG(o))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class jx extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Zx(this._id,e,t||{},this._renderer)}}class Zx{constructor(e,t,n,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return zx(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function zx(e,t,n,i,r){return e.setProperty(t,`@@${n}:${i}`,r)}let Gx=(()=>{class e{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new Hx("",n,this.engine),this._rendererCache.set(n,e)),e}const i=t.id,r=t.id+"-"+this._currentId;this._currentId++,this.engine.register(r,e);const s=t=>{Array.isArray(t)?t.forEach(s):this.engine.registerTrigger(i,r,e,t.name,t)};return t.data.animation.forEach(s),new Yx(this,r,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.FYo),i.LFG(Sx),i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class Hx{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,i=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,i){this.delegate.setAttribute(e,t,n,i)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,i){this.delegate.setStyle(e,t,n,i)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&"@.disabled"==t?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Yx extends Hx{constructor(e,t,n,i){super(t,n,i),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&"@.disabled"==t?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const i=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let r=t.substr(1),s="";return"@"!=r.charAt(0)&&([r,s]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(r)),this.engine.listen(this.namespaceId,i,r,s,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}let $x=(()=>{class e extends Sx{constructor(e,t,n){super(e.body,t,n)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o),i.LFG(oE),i.LFG(WE))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const Wx=new i.OlP("AnimationModuleType"),Kx=[{provide:ET,useClass:Bx},{provide:WE,useFactory:function(){return new KE}},{provide:Sx,useClass:$x},{provide:i.FYo,useFactory:function(e,t,n){return new Gx(e,t,n)},deps:[Ye,Sx,i.R0b]}],Qx=[{provide:oE,useFactory:function(){return"function"==typeof qx()?new Ux:new Mx}},{provide:Wx,useValue:"BrowserAnimations"},...Kx],Jx=[{provide:oE,useClass:sE},{provide:Wx,useValue:"NoopAnimations"},...Kx];let Xx=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?Jx:Qx}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:Qx,imports:[lt]}),e})();function eI(e,t){if(1&e&&i._UZ(0,"mat-pseudo-checkbox",4),2&e){const e=i.oxw();i.Q6J("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function tI(e,t){if(1&e&&(i.TgZ(0,"span",5),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.hij("(",e.group.label,")")}}const nI=["*"];let iI=(()=>{class e{}return e.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",e.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",e.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",e.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",e})(),rI=(()=>{class e{}return e.COMPLEX="375ms",e.ENTERING="225ms",e.EXITING="195ms",e})();const sI=new i.GfV("12.2.13"),oI=new i.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let aI=(()=>{class e{constructor(e,t,n){this._hasDoneGlobalChecks=!1,this._document=n,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=t,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!(!(0,i.X6Q)()||Gk())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const t=getComputedStyle(e);t&&"none"!==t.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&sI.full!==TT.full&&console.warn("The Angular Material version ("+sI.full+") does not match the Angular CDK version ("+TT.full+").\nPlease ensure the versions of these two packages exactly match.")}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(bT),i.LFG(oI,8),i.LFG(o))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[kT],kT]}),e})();function lI(e){return class extends e{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=hk(e)}}}function cI(e,t){return class extends e{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const t=e||this.defaultColor;t!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),t&&this._elementRef.nativeElement.classList.add(`mat-${t}`),this._color=t)}}}function uI(e){return class extends e{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=hk(e)}}}function hI(e,t=0){return class extends e{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?dk(e):this.defaultTabIndex}}}function dI(e){return class extends e{constructor(...e){super(...e),this.stateChanges=new ht.xQ,this.errorState=!1}updateErrorState(){const e=this.errorState,t=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);t!==e&&(this.errorState=t,this.stateChanges.next())}}}function pI(e){return class extends e{constructor(...e){super(...e),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new bt.y(e=>{this._isInitialized?this._notifySubscriber(e):this._pendingSubscribers.push(e)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(e){e.next(),e.complete()}}}const fI=new i.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return(0,i.f3M)(i.soG)}});class mI{constructor(){this._localeChanges=new ht.xQ,this.localeChanges=this._localeChanges}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return null==e||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,t){return this.getYear(e)-this.getYear(t)||this.getMonth(e)-this.getMonth(t)||this.getDate(e)-this.getDate(t)}sameDate(e,t){if(e&&t){let n=this.isValid(e),i=this.isValid(t);return n&&i?!this.compareDate(e,t):n==i}return e==t}clampDate(e,t,n){return t&&this.compareDate(e,t)<0?t:n&&this.compareDate(e,n)>0?n:e}}const gI=new i.OlP("mat-date-formats");let _I;try{_I="undefined"!=typeof Intl}catch(nb){_I=!1}const yI={long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"]},vI=CI(31,e=>String(e+1)),bI={long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"]},wI=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function CI(e,t){const n=Array(e);for(let i=0;i<e;i++)n[i]=t(i);return n}let SI=(()=>{class e extends mI{constructor(e,t){super(),this.useUtcForDisplay=!0,super.setLocale(e),this.useUtcForDisplay=!t.TRIDENT,this._clampDate=t.TRIDENT||t.EDGE}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){if(_I){const t=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return CI(12,e=>this._stripDirectionalityCharacters(this._format(t,new Date(2017,e,1))))}return yI[e]}getDateNames(){if(_I){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return CI(31,t=>this._stripDirectionalityCharacters(this._format(e,new Date(2017,0,t+1))))}return vI}getDayOfWeekNames(e){if(_I){const t=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return CI(7,e=>this._stripDirectionalityCharacters(this._format(t,new Date(2017,0,e+1))))}return bI[e]}getYearName(e){if(_I){const t=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._stripDirectionalityCharacters(this._format(t,e))}return String(this.getYear(e))}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,t,n){let i=this._createDateWithOverflow(e,t,n);return i.getMonth(),i}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,t){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");if(_I){this._clampDate&&(e.getFullYear()<1||e.getFullYear()>9999)&&(e=this.clone(e)).setFullYear(Math.max(1,Math.min(9999,e.getFullYear()))),t=Object.assign(Object.assign({},t),{timeZone:"utc"});const n=new Intl.DateTimeFormat(this.locale,t);return this._stripDirectionalityCharacters(this._format(n,e))}return this._stripDirectionalityCharacters(e.toDateString())}addCalendarYears(e,t){return this.addCalendarMonths(e,12*t)}addCalendarMonths(e,t){let n=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+t,this.getDate(e));return this.getMonth(n)!=((this.getMonth(e)+t)%12+12)%12&&(n=this._createDateWithOverflow(this.getYear(n),this.getMonth(n),0)),n}addCalendarDays(e,t){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+t)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(wI.test(e)){let t=new Date(e);if(this.isValid(t))return t}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,t,n){const i=new Date;return i.setFullYear(e,t,n),i.setHours(0,0,0,0),i}_2digit(e){return("00"+e).slice(-2)}_stripDirectionalityCharacters(e){return e.replace(/[\u200e\u200f]/g,"")}_format(e,t){const n=new Date;return n.setUTCFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setUTCHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e.format(n)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(fI,8),i.LFG(Nk))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),kI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[{provide:mI,useClass:SI}],imports:[[Fk]]}),e})();const TI={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let EI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[{provide:gI,useValue:TI}],imports:[[kI]]}),e})(),xI=(()=>{class e{isErrorState(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e})();class II{constructor(e,t,n){this._renderer=e,this.element=t,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const AI={enterDuration:225,exitDuration:150},DI=Bk({passive:!0}),RI=["mousedown","touchstart"],OI=["mouseup","mouseleave","touchend","touchcancel"];class PI{constructor(e,t,n,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=gk(n))}fadeInRipple(e,t,n={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=Object.assign(Object.assign({},AI),n.animation);n.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const s=n.radius||function(e,t,n){const i=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),r=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(i*i+r*r)}(e,t,i),o=e-i.left,a=t-i.top,l=r.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=o-s+"px",c.style.top=a-s+"px",c.style.height=2*s+"px",c.style.width=2*s+"px",null!=n.color&&(c.style.backgroundColor=n.color),c.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const u=new II(this,c,n);return u.state=0,this._activeRipples.add(u),n.persistent||(this._mostRecentTransientRipple=u),this._runTimeoutOutsideZone(()=>{const e=u===this._mostRecentTransientRipple;u.state=1,n.persistent||e&&this._isPointerDown||u.fadeOut()},l),u}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const n=e.element,i=Object.assign(Object.assign({},AI),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,n.parentNode.removeChild(n)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=gk(e);t&&t!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(RI))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(OI),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=oT(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||t||n||(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!aT(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let e=0;e<t.length;e++)this.fadeInRipple(t[e].clientX,t[e].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(e=>{this._triggerElement.addEventListener(e,this,DI)})})}_removeTriggerEvents(){this._triggerElement&&(RI.forEach(e=>{this._triggerElement.removeEventListener(e,this,DI)}),this._pointerUpEventsRegistered&&OI.forEach(e=>{this._triggerElement.removeEventListener(e,this,DI)}))}}const NI=new i.OlP("mat-ripple-global-options");let FI=(()=>{class e{constructor(e,t,n,i,r){this._elementRef=e,this._animationMode=r,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new PI(this,t,e,n)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,t=0,n){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,t,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(i.R0b),i.Y36(Nk),i.Y36(NI,8),i.Y36(Wx,8))},e.\u0275dir=i.lG2({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,t){2&e&&i.ekj("mat-ripple-unbounded",t.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),e})(),LI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[aI,Fk],aI]}),e})(),MI=(()=>{class e{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Wx,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,t){2&e&&i.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===t.state)("mat-pseudo-checkbox-checked","checked"===t.state)("mat-pseudo-checkbox-disabled",t.disabled)("_mat-animation-noopable","NoopAnimations"===t._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,t){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),e})(),VI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[aI]]}),e})();const UI=new i.OlP("MAT_OPTION_PARENT_COMPONENT"),qI=lI(class{});let BI=0,jI=(()=>{class e extends qI{constructor(e){var t;super(),this._labelId="mat-optgroup-label-"+BI++,this._inert=null!==(t=null==e?void 0:e.inertGroups)&&void 0!==t&&t}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(UI,8))},e.\u0275dir=i.lG2({type:e,inputs:{label:"label"},features:[i.qOj]}),e})();const ZI=new i.OlP("MatOptgroup");let zI=0;class GI{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let HI=(()=>{class e{constructor(e,t,n,r){this._element=e,this._changeDetectorRef=t,this._parent=n,this.group=r,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+zI++,this.onSelectionChange=new i.vpe,this._stateChanges=new ht.xQ}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=hk(e)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,t){const n=this._getHostElement();"function"==typeof n.focus&&n.focus(t)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){13!==e.keyCode&&32!==e.keyCode||Ek(e)||(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new GI(this,e))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(void 0),i.Y36(jI))},e.\u0275dir=i.lG2({type:e,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),e})(),YI=(()=>{class e extends HI{constructor(e,t,n,i){super(e,t,n,i)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(UI,8),i.Y36(ZI,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,t){1&e&&i.NdJ("click",function(){return t._selectViaInteraction()})("keydown",function(e){return t._handleKeydown(e)}),2&e&&(i.Ikx("id",t.id),i.uIk("tabindex",t._getTabIndex())("aria-selected",t._getAriaSelected())("aria-disabled",t.disabled.toString()),i.ekj("mat-selected",t.selected)("mat-option-multiple",t.multiple)("mat-active",t.active)("mat-option-disabled",t.disabled))},exportAs:["matOption"],features:[i.qOj],ngContentSelectors:nI,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,t){1&e&&(i.F$t(),i.YNc(0,eI,1,2,"mat-pseudo-checkbox",0),i.TgZ(1,"span",1),i.Hsn(2),i.qZA(),i.YNc(3,tI,2,1,"span",2),i._UZ(4,"div",3)),2&e&&(i.Q6J("ngIf",t.multiple),i.xp6(3),i.Q6J("ngIf",t.group&&t.group._inert),i.xp6(1),i.Q6J("matRippleTrigger",t._getHostElement())("matRippleDisabled",t.disabled||t.disableRipple))},directives:[ue,FI,MI],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),e})();function $I(e,t,n){if(n.length){let i=t.toArray(),r=n.toArray(),s=0;for(let t=0;t<e+1;t++)i[t].group&&i[t].group===r[s]&&s++;return s}return 0}let WI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[LI,ke,aI,VI]]}),e})();var KI=n(9105);function QI(e,t,n,i){return(0,KI.m)(n)&&(i=n,n=void 0),i?QI(e,t,n).pipe((0,Pt.U)(e=>(0,mt.k)(e)?i(...e):i(e))):new bt.y(i=>{JI(e,t,function(e){i.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},i,n)})}function JI(e,t,n,i,r){let s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){const i=e;e.addEventListener(t,n,r),s=()=>i.removeEventListener(t,n,r)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){const i=e;e.on(t,n),s=()=>i.off(t,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){const i=e;e.addListener(t,n),s=()=>i.removeListener(t,n)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,o=e.length;s<o;s++)JI(e[s],t,n,i,r)}i.add(s)}const XI=["underline"],eA=["connectionContainer"],tA=["inputContainer"],nA=["label"];function iA(e,t){1&e&&(i.ynx(0),i.TgZ(1,"div",14),i._UZ(2,"div",15),i._UZ(3,"div",16),i._UZ(4,"div",17),i.qZA(),i.TgZ(5,"div",18),i._UZ(6,"div",15),i._UZ(7,"div",16),i._UZ(8,"div",17),i.qZA(),i.BQk())}function rA(e,t){1&e&&(i.TgZ(0,"div",19),i.Hsn(1,1),i.qZA())}function sA(e,t){if(1&e&&(i.ynx(0),i.Hsn(1,2),i.TgZ(2,"span"),i._uU(3),i.qZA(),i.BQk()),2&e){const e=i.oxw(2);i.xp6(3),i.Oqu(e._control.placeholder)}}function oA(e,t){1&e&&i.Hsn(0,3,["*ngSwitchCase","true"])}function aA(e,t){1&e&&(i.TgZ(0,"span",23),i._uU(1," *"),i.qZA())}function lA(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"label",20,21),i.NdJ("cdkObserveContent",function(){return i.CHM(e),i.oxw().updateOutlineGap()}),i.YNc(2,sA,4,1,"ng-container",12),i.YNc(3,oA,1,0,"ng-content",12),i.YNc(4,aA,2,0,"span",22),i.qZA()}if(2&e){const e=i.oxw();i.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),i.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),i.uIk("for",e._control.id)("aria-owns",e._control.id),i.xp6(2),i.Q6J("ngSwitchCase",!1),i.xp6(1),i.Q6J("ngSwitchCase",!0),i.xp6(1),i.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function cA(e,t){1&e&&(i.TgZ(0,"div",24),i.Hsn(1,4),i.qZA())}function uA(e,t){if(1&e&&(i.TgZ(0,"div",25,26),i._UZ(2,"span",27),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function hA(e,t){if(1&e&&(i.TgZ(0,"div"),i.Hsn(1,5),i.qZA()),2&e){const e=i.oxw();i.Q6J("@transitionMessages",e._subscriptAnimationState)}}function dA(e,t){if(1&e&&(i.TgZ(0,"div",31),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.Q6J("id",e._hintLabelId),i.xp6(1),i.Oqu(e.hintLabel)}}function pA(e,t){if(1&e&&(i.TgZ(0,"div",28),i.YNc(1,dA,2,2,"div",29),i.Hsn(2,6),i._UZ(3,"div",30),i.Hsn(4,7),i.qZA()),2&e){const e=i.oxw();i.Q6J("@transitionMessages",e._subscriptAnimationState),i.xp6(1),i.Q6J("ngIf",e.hintLabel)}}const fA=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],mA=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let gA=0;const _A=new i.OlP("MatError");let yA=(()=>{class e{constructor(e,t){this.id="mat-error-"+gA++,e||t.nativeElement.setAttribute("aria-live","polite")}}return e.\u0275fac=function(t){return new(t||e)(i.$8M("aria-live"),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(e,t){2&e&&i.uIk("id",t.id)},inputs:{id:"id"},features:[i._Bn([{provide:_A,useExisting:e}])]}),e})();const vA={transitionMessages:xT("transitionMessages",[RT("enter",DT({opacity:1,transform:"translateY(0%)"})),PT("void => enter",[DT({opacity:0,transform:"translateY(-5px)"}),IT("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let bA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e}),e})();const wA=new i.OlP("MatHint");let CA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e,selectors:[["mat-label"]]}),e})(),SA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e,selectors:[["mat-placeholder"]]}),e})();const kA=new i.OlP("MatPrefix");let TA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e,selectors:[["","matPrefix",""]],features:[i._Bn([{provide:kA,useExisting:e}])]}),e})();const EA=new i.OlP("MatSuffix");let xA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e,selectors:[["","matSuffix",""]],features:[i._Bn([{provide:EA,useExisting:e}])]}),e})(),IA=0;const AA=cI(class{constructor(e){this._elementRef=e}},"primary"),DA=new i.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),RA=new i.OlP("MatFormField");let OA=(()=>{class e extends AA{constructor(e,t,n,i,r,s,o,a){super(e),this._changeDetectorRef=t,this._dir=i,this._defaults=r,this._platform=s,this._ngZone=o,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ht.xQ,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+IA++,this._labelId="mat-form-field-label-"+IA++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=r&&r.appearance?r.appearance:"legacy",this._hideRequiredMarker=!(!r||null==r.hideRequiredMarker)&&r.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const t=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&t!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=hk(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(jt(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Dk(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Dk(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,JC.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(jt(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(jt(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Dk(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const t=this._control?this._control.ngControl:null;return t&&t[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,QI(this._label.nativeElement,"transitionend").pipe(Ut(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const t=this._hintChildren?this._hintChildren.find(e=>"start"===e.align):null,n=this._hintChildren?this._hintChildren.find(e=>"end"===e.align):null;t?e.push(t.id):this._hintLabel&&e.push(this._hintLabelId),n&&e.push(n.id)}else this._errorChildren&&e.push(...this._errorChildren.map(e=>e.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!e||!e.children.length||!e.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let t=0,n=0;const i=this._connectionContainerRef.nativeElement,r=i.querySelectorAll(".mat-form-field-outline-start"),s=i.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const r=i.getBoundingClientRect();if(0===r.width&&0===r.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const s=this._getStartEnd(r),o=e.children,a=this._getStartEnd(o[0].getBoundingClientRect());let l=0;for(let e=0;e<o.length;e++)l+=o[e].offsetWidth;t=Math.abs(a-s)-5,n=l>0?.75*l+10:0}for(let o=0;o<r.length;o++)r[o].style.width=`${t}px`;for(let o=0;o<s.length;o++)s[o].style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const t=e.getRootNode();return t&&t!==e}return document.documentElement.contains(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(i.SBq),i.Y36(ST,8),i.Y36(DA,8),i.Y36(Nk),i.Y36(i.R0b),i.Y36(Wx,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-form-field"]],contentQueries:function(e,t,n){if(1&e&&(i.Suo(n,bA,5),i.Suo(n,bA,7),i.Suo(n,CA,5),i.Suo(n,CA,7),i.Suo(n,SA,5),i.Suo(n,_A,5),i.Suo(n,wA,5),i.Suo(n,kA,5),i.Suo(n,EA,5)),2&e){let e;i.iGM(e=i.CRH())&&(t._controlNonStatic=e.first),i.iGM(e=i.CRH())&&(t._controlStatic=e.first),i.iGM(e=i.CRH())&&(t._labelChildNonStatic=e.first),i.iGM(e=i.CRH())&&(t._labelChildStatic=e.first),i.iGM(e=i.CRH())&&(t._placeholderChild=e.first),i.iGM(e=i.CRH())&&(t._errorChildren=e),i.iGM(e=i.CRH())&&(t._hintChildren=e),i.iGM(e=i.CRH())&&(t._prefixChildren=e),i.iGM(e=i.CRH())&&(t._suffixChildren=e)}},viewQuery:function(e,t){if(1&e&&(i.Gf(XI,5),i.Gf(eA,7),i.Gf(tA,5),i.Gf(nA,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.underlineRef=e.first),i.iGM(e=i.CRH())&&(t._connectionContainerRef=e.first),i.iGM(e=i.CRH())&&(t._inputContainerRef=e.first),i.iGM(e=i.CRH())&&(t._label=e.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,t){2&e&&i.ekj("mat-form-field-appearance-standard","standard"==t.appearance)("mat-form-field-appearance-fill","fill"==t.appearance)("mat-form-field-appearance-outline","outline"==t.appearance)("mat-form-field-appearance-legacy","legacy"==t.appearance)("mat-form-field-invalid",t._control.errorState)("mat-form-field-can-float",t._canLabelFloat())("mat-form-field-should-float",t._shouldLabelFloat())("mat-form-field-has-label",t._hasFloatingLabel())("mat-form-field-hide-placeholder",t._hideControlPlaceholder())("mat-form-field-disabled",t._control.disabled)("mat-form-field-autofilled",t._control.autofilled)("mat-focused",t._control.focused)("ng-untouched",t._shouldForward("untouched"))("ng-touched",t._shouldForward("touched"))("ng-pristine",t._shouldForward("pristine"))("ng-dirty",t._shouldForward("dirty"))("ng-valid",t._shouldForward("valid"))("ng-invalid",t._shouldForward("invalid"))("ng-pending",t._shouldForward("pending"))("_mat-animation-noopable",!t._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[i._Bn([{provide:RA,useExisting:e}]),i.qOj],ngContentSelectors:mA,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,t){1&e&&(i.F$t(fA),i.TgZ(0,"div",0),i.TgZ(1,"div",1,2),i.NdJ("click",function(e){return t._control.onContainerClick&&t._control.onContainerClick(e)}),i.YNc(3,iA,9,0,"ng-container",3),i.YNc(4,rA,2,0,"div",4),i.TgZ(5,"div",5,6),i.Hsn(7),i.TgZ(8,"span",7),i.YNc(9,lA,5,16,"label",8),i.qZA(),i.qZA(),i.YNc(10,cA,2,0,"div",9),i.qZA(),i.YNc(11,uA,3,4,"div",10),i.TgZ(12,"div",11),i.YNc(13,hA,2,1,"div",12),i.YNc(14,pA,5,2,"div",13),i.qZA(),i.qZA()),2&e&&(i.xp6(3),i.Q6J("ngIf","outline"==t.appearance),i.xp6(1),i.Q6J("ngIf",t._prefixChildren.length),i.xp6(5),i.Q6J("ngIf",t._hasFloatingLabel()),i.xp6(1),i.Q6J("ngIf",t._suffixChildren.length),i.xp6(1),i.Q6J("ngIf","outline"!=t.appearance),i.xp6(1),i.Q6J("ngSwitch",t._getDisplayedMessages()),i.xp6(1),i.Q6J("ngSwitchCase","error"),i.xp6(1),i.Q6J("ngSwitchCase","hint"))},directives:[ue,fe,me,kk],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[vA.transitionMessages]},changeDetection:0}),e})(),PA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[ke,aI,Tk],aI]}),e})();class NA{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new FA(e,this.durationSelector))}}class FA extends Nt.Ds{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:t}=this;n=t(e)}catch(t){return this.destination.error(t)}const i=(0,Nt.ft)(n,new Nt.IY(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var LA=n(6561);function MA(e){const{index:t,period:n,subscriber:i}=e;if(i.next(t),!i.closed){if(-1===n)return i.complete();e.index=t+1,this.schedule(e,n)}}function VA(e,t=Uo.P){return n=()=>function(e=0,t,n){let i=-1;return(0,LA.k)(t)?i=Number(t)<1?1:Number(t):(0,ft.K)(t)&&(n=t),(0,ft.K)(n)||(n=Uo.P),new bt.y(t=>{const r=(0,LA.k)(e)?e:+e-n.now();return n.schedule(MA,r,{index:0,period:i,subscriber:t})})}(e,t),function(e){return e.lift(new NA(n))};var n}const UA=Bk({passive:!0});let qA=(()=>{class e{constructor(e,t){this._platform=e,this._ngZone=t,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Dt.E;const t=gk(e),n=this._monitoredElements.get(t);if(n)return n.subject;const i=new ht.xQ,r="cdk-text-field-autofilled",s=e=>{"cdk-text-field-autofill-start"!==e.animationName||t.classList.contains(r)?"cdk-text-field-autofill-end"===e.animationName&&t.classList.contains(r)&&(t.classList.remove(r),this._ngZone.run(()=>i.next({target:e.target,isAutofilled:!1}))):(t.classList.add(r),this._ngZone.run(()=>i.next({target:e.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{t.addEventListener("animationstart",s,UA),t.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(t,{subject:i,unlisten:()=>{t.removeEventListener("animationstart",s,UA)}}),i}stopMonitoring(e){const t=gk(e),n=this._monitoredElements.get(t);n&&(n.unlisten(),n.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}ngOnDestroy(){this._monitoredElements.forEach((e,t)=>this.stopMonitoring(t))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Nk),i.LFG(i.R0b))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(Nk),i.LFG(i.R0b))},token:e,providedIn:"root"}),e})(),BA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[Fk]]}),e})();const jA=new i.OlP("MAT_INPUT_VALUE_ACCESSOR"),ZA=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let zA=0;const GA=dI(class{constructor(e,t,n,i){this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=i}});let HA=(()=>{class e extends GA{constructor(e,t,n,i,r,s,o,a,l,c){super(s,i,r,n),this._elementRef=e,this._platform=t,this._autofillMonitor=a,this._formField=c,this._uid="mat-input-"+zA++,this.focused=!1,this.stateChanges=new ht.xQ,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(e=>Mk().has(e));const u=this._elementRef.nativeElement,h=u.nodeName.toLowerCase();this._inputValueAccessor=o||u,this._previousNativeValue=this.value,this.id=this.id,t.IOS&&l.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",e=>{const t=e.target;t.value||0!==t.selectionStart||0!==t.selectionEnd||(t.setSelectionRange(1,1),t.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===h,this._isTextarea="textarea"===h,this._isInFormField=!!c,this._isNativeSelect&&(this.controlType=u.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=hk(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required}set required(e){this._required=hk(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&Mk().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=hk(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var e,t;const n=(null===(t=null===(e=this._formField)||void 0===e?void 0:e._hideControlPlaceholder)||void 0===t?void 0:t.call(e))?null:this.placeholder;if(n!==this._previousPlaceholder){const e=this._elementRef.nativeElement;this._previousPlaceholder=n,n?e.setAttribute("placeholder",n):e.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){ZA.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(Nk),i.Y36(Hs,10),i.Y36(vo,8),i.Y36(Eo,8),i.Y36(xI),i.Y36(jA,10),i.Y36(qA),i.Y36(i.R0b),i.Y36(RA,8))},e.\u0275dir=i.lG2({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(e,t){1&e&&i.NdJ("focus",function(){return t._focusChanged(!0)})("blur",function(){return t._focusChanged(!1)})("input",function(){return t._onInput()}),2&e&&(i.Ikx("disabled",t.disabled)("required",t.required),i.uIk("id",t.id)("data-placeholder",t.placeholder)("readonly",t.readonly&&!t._isNativeSelect||null)("aria-invalid",t.empty&&t.required?null:t.errorState)("aria-required",t.required),i.ekj("mat-input-server",t._isServer)("mat-native-select-inline",t._isInlineSelect()))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[i._Bn([{provide:bA,useExisting:e}]),i.qOj,i.TTD]}),e})(),YA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[xI],imports:[[BA,PA,aI],BA,PA]}),e})();const $A=["mat-button",""],WA=["*"],KA=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],QA=cI(lI(uI(class{constructor(e){this._elementRef=e}})));let JA=(()=>{class e extends QA{constructor(e,t,n){super(e),this._focusMonitor=t,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const i of KA)this._hasHostAttributes(i)&&this._getHostElement().classList.add(i);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,t){e?this._focusMonitor.focusVia(this._getHostElement(),e,t):this._getHostElement().focus(t)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(e=>this._getHostElement().hasAttribute(e))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(yT),i.Y36(Wx,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,t){if(1&e&&i.Gf(FI,5),2&e){let e;i.iGM(e=i.CRH())&&(t.ripple=e.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,t){2&e&&(i.uIk("disabled",t.disabled||null),i.ekj("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-button-disabled",t.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[i.qOj],attrs:$A,ngContentSelectors:WA,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"span",0),i.Hsn(1),i.qZA(),i._UZ(2,"span",1),i._UZ(3,"span",2)),2&e&&(i.xp6(2),i.ekj("mat-button-ripple-round",t.isRoundButton||t.isIconButton),i.Q6J("matRippleDisabled",t._isRippleDisabled())("matRippleCentered",t.isIconButton)("matRippleTrigger",t._getHostElement()))},directives:[FI],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),e})(),XA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[LI,aI],aI]}),e})();function eD(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Please enter a valid email address "),i.qZA())}function tD(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Email is "),i.TgZ(2,"strong"),i._uU(3,"required"),i.qZA(),i.qZA())}function nD(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Please enter a valid password "),i.qZA())}function iD(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Password is "),i.TgZ(2,"strong"),i._uU(3,"required"),i.qZA(),i.qZA())}let rD=(()=>{class e{constructor(e){this.authService=e,this.emailFormControl=new fo("",[As.required,As.email]),this.passwordFormControl=new fo("",[As.required,As.pattern("^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$")]),this.matcher=new Po}ngOnInit(){}login(){this.authService.SignIn(this.emailFormControl.value,this.passwordFormControl.value)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(uk))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-login"]],decls:22,vars:8,consts:[[1,"loginView"],[1,"loginBlock"],[1,"formBlock"],[1,"loginSection"],[1,"formInputs"],["appearance","outline"],["type","email","required","","matInput","","placeholder","Ex. pat@example.com",3,"formControl","errorStateMatcher"],[4,"ngIf"],["type","password","placeholder","Password","required","","matInput","",1,"formControl",3,"formControl","errorStateMatcher"],[1,"formGroup"],["mat-raised-button","",3,"click"]],template:function(e,t){1&e&&(i._UZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i.TgZ(4,"h3"),i._uU(5,"Sign In"),i.qZA(),i.TgZ(6,"div",4),i.TgZ(7,"mat-form-field",5),i.TgZ(8,"mat-label"),i._uU(9,"Email"),i.qZA(),i._UZ(10,"input",6),i.YNc(11,eD,2,0,"mat-error",7),i.YNc(12,tD,4,0,"mat-error",7),i.qZA(),i.TgZ(13,"mat-form-field",5),i.TgZ(14,"mat-label"),i._uU(15,"Password"),i.qZA(),i._UZ(16,"input",8),i.YNc(17,nD,2,0,"mat-error",7),i.YNc(18,iD,4,0,"mat-error",7),i.qZA(),i.qZA(),i.TgZ(19,"div",9),i.TgZ(20,"button",10),i.NdJ("click",function(){return t.login()}),i._uU(21,"Login"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(10),i.Q6J("formControl",t.emailFormControl)("errorStateMatcher",t.matcher),i.xp6(1),i.Q6J("ngIf",t.emailFormControl.hasError("email")&&!t.emailFormControl.hasError("required")),i.xp6(1),i.Q6J("ngIf",t.emailFormControl.hasError("required")),i.xp6(4),i.Q6J("formControl",t.passwordFormControl)("errorStateMatcher",t.matcher),i.xp6(1),i.Q6J("ngIf",t.passwordFormControl.hasError("password")&&!t.passwordFormControl.hasError("required")),i.xp6(1),i.Q6J("ngIf",t.passwordFormControl.hasError("required")))},directives:[OA,CA,HA,Ss,Do,$s,ko,ue,JA,yA],styles:[".loginView[_ngcontent-%COMP%]{opacity:.7;min-height:100vh;filter:blur(80px);-webkit-filter:blur(80px)}.loginBlock[_ngcontent-%COMP%], .loginView[_ngcontent-%COMP%]{background:url(background.7498634540f0a8bf6351.png) no-repeat}.loginBlock[_ngcontent-%COMP%]{position:absolute;top:200px;right:200px;left:200px;height:calc(100vh - 400px);background-size:cover;border-radius:8px;max-width:1000px;margin-left:auto;margin-right:auto}.loginBlock[_ngcontent-%COMP%]   .formBlock[_ngcontent-%COMP%]{position:absolute;right:0;width:45%;background:#fff;height:100%;max-width:400px;border-radius:0 8px 8px 0;align-items:center;display:grid}.loginBlock[_ngcontent-%COMP%]   .formBlock[_ngcontent-%COMP%]   .loginSection[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{justify-content:center;display:flex;align-items:center;font-size:24px}.loginBlock[_ngcontent-%COMP%]   .formBlock[_ngcontent-%COMP%]   .loginSection[_ngcontent-%COMP%]   .formInputs[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px;height:180px}.loginBlock[_ngcontent-%COMP%]   .formBlock[_ngcontent-%COMP%]   .loginSection[_ngcontent-%COMP%]   .formInputs[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{height:80px;width:100%}.loginBlock[_ngcontent-%COMP%]   .formBlock[_ngcontent-%COMP%]   .loginSection[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]{display:flex;justify-content:center}.loginBlock[_ngcontent-%COMP%]   .formBlock[_ngcontent-%COMP%]   .loginSection[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px;color:#79d3d1}"]}),e})();const sD=["mat-sort-header",""];function oD(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",3),i.NdJ("@arrowPosition.start",function(){return i.CHM(e),i.oxw()._disableViewStateAnimation=!0})("@arrowPosition.done",function(){return i.CHM(e),i.oxw()._disableViewStateAnimation=!1}),i._UZ(1,"div",4),i.TgZ(2,"div",5),i._UZ(3,"div",6),i._UZ(4,"div",7),i._UZ(5,"div",8),i.qZA(),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("@arrowOpacity",e._getArrowViewState())("@arrowPosition",e._getArrowViewState())("@allowChildren",e._getArrowDirectionState()),i.xp6(2),i.Q6J("@indicator",e._getArrowDirectionState()),i.xp6(1),i.Q6J("@leftPointer",e._getArrowDirectionState()),i.xp6(1),i.Q6J("@rightPointer",e._getArrowDirectionState())}}const aD=["*"],lD=new i.OlP("MAT_SORT_DEFAULT_OPTIONS"),cD=pI(lI(class{}));let uD=(()=>{class e extends cD{constructor(e){super(),this._defaultOptions=e,this.sortables=new Map,this._stateChanges=new ht.xQ,this.start="asc",this._direction="",this.sortChange=new i.vpe}get direction(){return this._direction}set direction(e){this._direction=e}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=hk(e)}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){var t,n,i;if(!e)return"";const r=null!==(n=null!==(t=null==e?void 0:e.disableClear)&&void 0!==t?t:this.disableClear)&&void 0!==n?n:!!(null===(i=this._defaultOptions)||void 0===i?void 0:i.disableClear);let s=function(e,t){let n=["asc","desc"];return"desc"==e&&n.reverse(),t||n.push(""),n}(e.start||this.start,r),o=s.indexOf(this.direction)+1;return o>=s.length&&(o=0),s[o]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(lD,8))},e.\u0275dir=i.lG2({type:e,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"],active:["matSortActive","active"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[i.qOj,i.TTD]}),e})();const hD=rI.ENTERING+" "+iI.STANDARD_CURVE,dD={indicator:xT("indicator",[RT("active-asc, asc",DT({transform:"translateY(0px)"})),RT("active-desc, desc",DT({transform:"translateY(10px)"})),PT("active-asc <=> active-desc",IT(hD))]),leftPointer:xT("leftPointer",[RT("active-asc, asc",DT({transform:"rotate(-45deg)"})),RT("active-desc, desc",DT({transform:"rotate(45deg)"})),PT("active-asc <=> active-desc",IT(hD))]),rightPointer:xT("rightPointer",[RT("active-asc, asc",DT({transform:"rotate(45deg)"})),RT("active-desc, desc",DT({transform:"rotate(-45deg)"})),PT("active-asc <=> active-desc",IT(hD))]),arrowOpacity:xT("arrowOpacity",[RT("desc-to-active, asc-to-active, active",DT({opacity:1})),RT("desc-to-hint, asc-to-hint, hint",DT({opacity:.54})),RT("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",DT({opacity:0})),PT("* => asc, * => desc, * => active, * => hint, * => void",IT("0ms")),PT("* <=> *",IT(hD))]),arrowPosition:xT("arrowPosition",[PT("* => desc-to-hint, * => desc-to-active",IT(hD,OT([DT({transform:"translateY(-25%)"}),DT({transform:"translateY(0)"})]))),PT("* => hint-to-desc, * => active-to-desc",IT(hD,OT([DT({transform:"translateY(0)"}),DT({transform:"translateY(25%)"})]))),PT("* => asc-to-hint, * => asc-to-active",IT(hD,OT([DT({transform:"translateY(25%)"}),DT({transform:"translateY(0)"})]))),PT("* => hint-to-asc, * => active-to-asc",IT(hD,OT([DT({transform:"translateY(0)"}),DT({transform:"translateY(-25%)"})]))),RT("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",DT({transform:"translateY(0)"})),RT("hint-to-desc, active-to-desc, desc",DT({transform:"translateY(-25%)"})),RT("hint-to-asc, active-to-asc, asc",DT({transform:"translateY(25%)"}))]),allowChildren:xT("allowChildren",[PT("* <=> *",[FT("@*",NT(),{optional:!0})])])};let pD=(()=>{class e{constructor(){this.changes=new ht.xQ}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e})();const fD={provide:pD,deps:[[new i.FiY,new i.tp0,pD]],useFactory:function(e){return e||new pD}},mD=lI(class{});let gD=(()=>{class e extends mD{constructor(e,t,n,i,r,s,o){super(),this._intl=e,this._changeDetectorRef=t,this._sort=n,this._columnDef=i,this._focusMonitor=r,this._elementRef=s,this._ariaDescriber=o,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this._sortActionDescription="Sort",this._handleStateChanges()}get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(e){this._updateSortActionDescription(e)}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=hk(e)}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector('[role="button"]'),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{const t=!!e;t!==this._showIndicatorHint&&(this._setIndicatorHintVisible(t),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe()}_setIndicatorHintVisible(e){this._isDisabled()&&e||(this._showIndicatorHint=e,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(e){this._viewState=e||{},this._disableViewStateAnimation&&(this._viewState={toState:e.toState})}_toggleOnInteraction(){this._sort.sort(this),"hint"!==this._viewState.toState&&"active"!==this._viewState.toState||(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(e){this._isDisabled()||32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){const e=this._viewState.fromState;return(e?`${e}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(e){var t,n;this._sortButton&&(null===(t=this._ariaDescriber)||void 0===t||t.removeDescription(this._sortButton,this._sortActionDescription),null===(n=this._ariaDescriber)||void 0===n||n.describe(this._sortButton,e)),this._sortActionDescription=e}_handleStateChanges(){this._rerenderSubscription=(0,JC.T)(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),"hint"!==this._viewState.toState&&"active"!==this._viewState.toState||(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&"active"===this._viewState.toState&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(pD),i.Y36(i.sBO),i.Y36(uD,8),i.Y36("MAT_SORT_HEADER_COLUMN_DEF",8),i.Y36(yT),i.Y36(i.SBq),i.Y36(Kk,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(e,t){1&e&&i.NdJ("click",function(){return t._handleClick()})("keydown",function(e){return t._handleKeydown(e)})("mouseenter",function(){return t._setIndicatorHintVisible(!0)})("mouseleave",function(){return t._setIndicatorHintVisible(!1)}),2&e&&(i.uIk("aria-sort",t._getAriaSortAttribute()),i.ekj("mat-sort-header-disabled",t._isDisabled()))},inputs:{disabled:"disabled",arrowPosition:"arrowPosition",sortActionDescription:"sortActionDescription",disableClear:"disableClear",id:["mat-sort-header","id"],start:"start"},exportAs:["matSortHeader"],features:[i.qOj],attrs:sD,ngContentSelectors:aD,decls:4,vars:6,consts:[["role","button",1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],["class","mat-sort-header-arrow",4,"ngIf"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.Hsn(2),i.qZA(),i.YNc(3,oD,6,6,"div",2),i.qZA()),2&e&&(i.ekj("mat-sort-header-sorted",t._isSorted())("mat-sort-header-position-before","before"==t.arrowPosition),i.uIk("tabindex",t._isDisabled()?null:0),i.xp6(3),i.Q6J("ngIf",t._renderArrow()))},directives:[ue],styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}\n"],encapsulation:2,data:{animation:[dD.indicator,dD.leftPointer,dD.rightPointer,dD.arrowOpacity,dD.arrowPosition,dD.allowChildren]},changeDetection:0}),e})(),_D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[fD],imports:[[ke,aI]]}),e})();var yD=n(6465),vD=n(6102);function bD(e){return e&&"function"==typeof e.connect}new class extends vD.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,i=-1,r=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++i<r&&(e=t.shift()));if(this.active=!1,n){for(;++i<r&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends yD.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}}),n(4581);class wD{applyChanges(e,t,n,i,r){e.forEachOperation((e,i,s)=>{let o,a;if(null==e.previousIndex){const r=n(e,i,s);o=t.createEmbeddedView(r.templateRef,r.context,r.index),a=1}else null==s?(t.remove(i),a=3):(o=t.get(i),t.move(o,s),a=2);r&&r({context:null==o?void 0:o.context,operation:a,record:e})})}detach(){}}class CD{constructor(e=!1,t,n=!0){this._multiple=e,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ht.xQ,t&&t.length&&(e?t.forEach(e=>this._markSelected(e)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}let SD=(()=>{class e{constructor(){this._listeners=[]}notify(e,t){for(let n of this._listeners)n(e,t)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(t=>e!==t)}}ngOnDestroy(){this._listeners=[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e})();const kD=new i.OlP("_ViewRepeater");let TD=(()=>{class e{constructor(e,t,n){this._ngZone=e,this._platform=t,this._scrolled=new ht.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new bt.y(t=>{this._globalSubscription||this._addGlobalListener();const n=e>0?this._scrolled.pipe(VA(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,ut.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Ht(e=>!e||n.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((n,i)=>{this._scrollableContainsElement(i,e)&&t.push(i)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let n=gk(t),i=e.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>QI(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.R0b),i.LFG(Nk),i.LFG(o,8))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(i.R0b),i.LFG(Nk),i.LFG(o,8))},token:e,providedIn:"root"}),e})(),ED=(()=>{class e{constructor(e,t,n){this._platform=e,this._change=new ht.xQ,this._changeListener=e=>{this._change.next(e)},this._document=n,t.runOutsideAngular(()=>{if(e.isBrowser){const e=this._getWindow();e.addEventListener("resize",this._changeListener),e.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+t,height:n,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,t=this._getWindow(),n=e.documentElement,i=n.getBoundingClientRect();return{top:-i.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,left:-i.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(VA(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Nk),i.LFG(i.R0b),i.LFG(o,8))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(Nk),i.LFG(i.R0b),i.LFG(o,8))},token:e,providedIn:"root"}),e})(),xD=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})(),ID=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[kT,Fk,xD],kT,xD]}),e})();class AD{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class DD extends AD{constructor(e,t,n,i){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=i}}class RD extends AD{constructor(e,t,n){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class OD extends AD{constructor(e){super(),this.element=e instanceof i.SBq?e.nativeElement:e}}class PD{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof DD?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof RD?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof OD?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ND extends PD{constructor(e,t,n,i,r){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=i,this.attachDomPortal=e=>{const t=e.element,n=this._document.createComment("dom-portal");t.parentNode.insertBefore(n,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(t,n)})},this._document=r}attachComponentPortal(e){const t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let n;return e.viewContainerRef?(n=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=t.create(e.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=e,n}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context);return n.rootNodes.forEach(e=>this.outletElement.appendChild(e)),n.detectChanges(),this.setDisposeFn(()=>{let e=t.indexOf(n);-1!==e&&t.remove(e)}),this._attachedPortal=e,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let FD=(()=>{class e extends PD{constructor(e,t,n){super(),this._componentFactoryResolver=e,this._viewContainerRef=t,this._isInitialized=!1,this.attached=new i.vpe,this.attachDomPortal=e=>{const t=e.element,n=this._document.createComment("dom-portal");e.setAttachedHost(this),t.parentNode.insertBefore(n,t),this._getRootNode().appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(t,n)})},this._document=n}get portal(){return this._attachedPortal}set portal(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const t=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),i=t.createComponent(n,t.length,e.injector||t.injector);return t!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(e){e.setAttachedHost(this);const t=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=t,this.attached.emit(t),t}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i._Vd),i.Y36(i.s_b),i.Y36(o))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[i.qOj]}),e})(),LD=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})();class MD{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new VD(e,this.predicate,this.inclusive))}}class VD extends gt.L{constructor(e,t,n){super(e),this.predicate=t,this.inclusive=n,this.index=0}_next(e){const t=this.destination;let n;try{n=this.predicate(e,this.index++)}catch(i){return void t.error(i)}this.nextOrComplete(e,n)}nextOrComplete(e,t){const n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())}}const UD=jk();class qD{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=mk(-this._previousScrollPosition.left),e.style.top=mk(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,t=e.style,n=this._document.body.style,i=t.scrollBehavior||"",r=n.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),UD&&(t.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),UD&&(t.scrollBehavior=i,n.scrollBehavior=r)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}class BD{constructor(e,t,n,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class jD{enable(){}disable(){}attach(){}}function ZD(e,t){return t.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function zD(e,t){return t.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class GD{constructor(e,t,n,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:n}=this._viewportRuler.getViewportSize();ZD(e,[{width:t,height:n,bottom:n,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let HD=(()=>{class e{constructor(e,t,n,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this.noop=()=>new jD,this.close=e=>new BD(this._scrollDispatcher,this._ngZone,this._viewportRuler,e),this.block=()=>new qD(this._viewportRuler,this._document),this.reposition=e=>new GD(this._scrollDispatcher,this._viewportRuler,this._ngZone,e),this._document=i}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(TD),i.LFG(ED),i.LFG(i.R0b),i.LFG(o))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(TD),i.LFG(ED),i.LFG(i.R0b),i.LFG(o))},token:e,providedIn:"root"}),e})();class YD{constructor(e){if(this.scrollStrategy=new jD,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class $D{constructor(e,t,n,i,r){this.offsetX=n,this.offsetY=i,this.panelClass=r,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class WD{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let KD=(()=>{class e{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this.detach()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(o))},token:e,providedIn:"root"}),e})(),QD=(()=>{class e extends KD{constructor(e){super(e),this._keydownListener=e=>{const t=this._attachedOverlays;for(let n=t.length-1;n>-1;n--)if(t[n]._keydownEvents.observers.length>0){t[n]._keydownEvents.next(e);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(o))},token:e,providedIn:"root"}),e})(),JD=(()=>{class e extends KD{constructor(e,t){super(e),this._platform=t,this._cursorStyleIsSet=!1,this._pointerDownListener=e=>{this._pointerDownEventTarget=zk(e)},this._clickListener=e=>{const t=zk(e),n="click"===e.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:t;this._pointerDownEventTarget=null;const i=this._attachedOverlays.slice();for(let r=i.length-1;r>-1;r--){const s=i[r];if(!(s._outsidePointerEvents.observers.length<1)&&s.hasAttached()){if(s.overlayElement.contains(t)||s.overlayElement.contains(n))break;s._outsidePointerEvents.next(e)}}}}add(e){if(super.add(e),!this._isAttached){const e=this._document.body;e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=e.style.cursor,e.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o),i.LFG(Nk))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(o),i.LFG(Nk))},token:e,providedIn:"root"}),e})(),XD=(()=>{class e{constructor(e,t){this._platform=t,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){if(this._platform.isBrowser||Gk()){const e=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]');for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),Gk()?e.setAttribute("platform","test"):this._platform.isBrowser||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o),i.LFG(Nk))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(o),i.LFG(Nk))},token:e,providedIn:"root"}),e})();class eR{constructor(e,t,n,i,r,s,o,a,l){this._portalOutlet=e,this._host=t,this._pane=n,this._config=i,this._ngZone=r,this._keyboardDispatcher=s,this._document=o,this._location=a,this._outsideClickDispatcher=l,this._backdropElement=null,this._backdropClick=new ht.xQ,this._attachments=new ht.xQ,this._detachments=new ht.xQ,this._locationChanges=mn.w.EMPTY,this._backdropClickHandler=e=>this._backdropClick.next(e),this._keydownEvents=new ht.xQ,this._outsidePointerEvents=new ht.xQ,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ut(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=mk(this._config.width),e.height=mk(this._config.height),e.minWidth=mk(this._config.minWidth),e.minHeight=mk(this._config.minHeight),e.maxWidth=mk(this._config.maxWidth),e.maxHeight=mk(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(!e)return;let t;const n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),this._disposeBackdrop(e)),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(e,t,n){const i=e.classList;fk(t).forEach(e=>{e&&(n?i.add(e):i.remove(e))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Dk((0,JC.T)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.parentNode&&e.parentNode.removeChild(e),this._backdropElement===e&&(this._backdropElement=null))}}const tR=/([A-Za-z%]+)$/;class nR{constructor(e,t,n,i,r){this._viewportRuler=t,this._document=n,this._platform=i,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ht.xQ,this._resizeSubscription=mn.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,i=[];let r;for(let s of this._preferredPositions){let o=this._getOriginPoint(e,s),a=this._getOverlayPoint(o,t,s),l=this._getOverlayFit(a,t,n,s);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,o);this._canFitWithFlexibleDimensions(l,a,n)?i.push({position:s,origin:o,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(o,s)}):(!r||r.overlayFit.visibleArea<l.visibleArea)&&(r={overlayFit:l,overlayPoint:a,originPoint:o,position:s,overlayRect:t})}if(i.length){let e=null,t=-1;for(const n of i){const i=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);i>t&&(t=i,e=n)}return this._isPushed=!1,void this._applyPosition(e.position,e.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(r.position,r.originPoint);this._applyPosition(r.position,r.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&iR(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let n,i;if("center"==t.originX)n=e.left+e.width/2;else{const i=this._isRtl()?e.right:e.left,r=this._isRtl()?e.left:e.right;n="start"==t.originX?i:r}return i="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:n,y:i}}_getOverlayPoint(e,t,n){let i,r;return i="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,r="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+i,y:e.y+r}}_getOverlayFit(e,t,n,i){const r=sR(t);let{x:s,y:o}=e,a=this._getOffset(i,"x"),l=this._getOffset(i,"y");a&&(s+=a),l&&(o+=l);let c=0-o,u=o+r.height-n.height,h=this._subtractOverflows(r.width,0-s,s+r.width-n.width),d=this._subtractOverflows(r.height,c,u),p=h*d;return{visibleArea:p,isCompletelyWithinViewport:r.width*r.height===p,fitsInViewportVertically:d===r.height,fitsInViewportHorizontally:h==r.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const i=n.bottom-t.y,r=n.right-t.x,s=rR(this._overlayRef.getConfig().minHeight),o=rR(this._overlayRef.getConfig().minWidth),a=e.fitsInViewportHorizontally||null!=o&&o<=r;return(e.fitsInViewportVertically||null!=s&&s<=i)&&a}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=sR(t),r=this._viewportRect,s=Math.max(e.x+i.width-r.width,0),o=Math.max(e.y+i.height-r.height,0),a=Math.max(r.top-n.top-e.y,0),l=Math.max(r.left-n.left-e.x,0);let c=0,u=0;return c=i.width<=r.width?l||-s:e.x<this._viewportMargin?r.left-n.left-e.x:0,u=i.height<=r.height?a||-o:e.y<this._viewportMargin?r.top-n.top-e.y:0,this._previousPushAmount={x:c,y:u},{x:e.x+c,y:e.y+u}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const t=this._getScrollVisibility(),n=new WD(e,t);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,i=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let r=0;r<t.length;r++)t[r].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,i=this._isRtl();let r,s,o,a,l,c;if("top"===t.overlayY)s=e.y,r=n.height-s+this._viewportMargin;else if("bottom"===t.overlayY)o=n.height-e.y+2*this._viewportMargin,r=n.height-o+this._viewportMargin;else{const t=Math.min(n.bottom-e.y+n.top,e.y),i=this._lastBoundingBoxSize.height;r=2*t,s=e.y-t,r>i&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-i/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)c=n.width-e.x+this._viewportMargin,a=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)l=e.x,a=n.right-e.x;else{const t=Math.min(n.right-e.x+n.left,e.x),i=this._lastBoundingBoxSize.width;a=2*t,l=e.x-t,a>i&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.x-i/2)}return{top:s,left:l,bottom:o,right:c,width:a,height:r}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const e=this._overlayRef.getConfig().maxHeight,r=this._overlayRef.getConfig().maxWidth;i.height=mk(n.height),i.top=mk(n.top),i.bottom=mk(n.bottom),i.width=mk(n.width),i.left=mk(n.left),i.right=mk(n.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",e&&(i.maxHeight=mk(e)),r&&(i.maxWidth=mk(r))}this._lastBoundingBoxSize=n,iR(this._boundingBox.style,i)}_resetBoundingBoxStyles(){iR(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){iR(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},i=this._hasExactPosition(),r=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){const i=this._viewportRuler.getViewportScrollPosition();iR(n,this._getExactOverlayY(t,e,i)),iR(n,this._getExactOverlayX(t,e,i))}else n.position="static";let o="",a=this._getOffset(t,"x"),l=this._getOffset(t,"y");a&&(o+=`translateX(${a}px) `),l&&(o+=`translateY(${l}px)`),n.transform=o.trim(),s.maxHeight&&(i?n.maxHeight=mk(s.maxHeight):r&&(n.maxHeight="")),s.maxWidth&&(i?n.maxWidth=mk(s.maxWidth):r&&(n.maxWidth="")),iR(this._pane.style,n)}_getExactOverlayY(e,t,n){let i={top:"",bottom:""},r=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n));let s=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return r.y-=s,"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":i.top=mk(r.y),i}_getExactOverlayX(e,t,n){let i,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),i=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===i?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=mk(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(e=>e.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:zD(e,n),isOriginOutsideView:ZD(e,n),isOverlayClipped:zD(t,n),isOverlayOutsideView:ZD(t,n)}}_subtractOverflows(e,...t){return t.reduce((e,t)=>e-Math.max(t,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&fk(e).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof i.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function iR(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function rR(e){if("number"!=typeof e&&null!=e){const[t,n]=e.split(tR);return n&&"px"!==n?null:parseFloat(t)}return e||null}function sR(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}class oR{constructor(e,t,n,i,r,s,o){this._preferredPositions=[],this._positionStrategy=new nR(n,i,r,s,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,n,i){const r=new $D(e,t,n,i);return this._preferredPositions.push(r),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}class aR{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:i,height:r,maxWidth:s,maxHeight:o}=n,a=!("100%"!==i&&"100vw"!==i||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==r&&"100vh"!==r||o&&"100%"!==o&&"100vh"!==o);e.position=this._cssPosition,e.marginLeft=a?"0":this._leftOffset,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,a?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let lR=(()=>{class e{constructor(e,t,n,i){this._viewportRuler=e,this._document=t,this._platform=n,this._overlayContainer=i}global(){return new aR}connectedTo(e,t,n){return new oR(t,n,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new nR(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(ED),i.LFG(o),i.LFG(Nk),i.LFG(XD))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(ED),i.LFG(o),i.LFG(Nk),i.LFG(XD))},token:e,providedIn:"root"}),e})(),cR=0,uR=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l,c,u){this.scrollStrategies=e,this._overlayContainer=t,this._componentFactoryResolver=n,this._positionBuilder=i,this._keyboardDispatcher=r,this._injector=s,this._ngZone=o,this._document=a,this._directionality=l,this._location=c,this._outsideClickDispatcher=u}create(e){const t=this._createHostElement(),n=this._createPaneElement(t),i=this._createPortalOutlet(n),r=new YD(e);return r.direction=r.direction||this._directionality.value,new eR(i,t,n,r,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const t=this._document.createElement("div");return t.id="cdk-overlay-"+cR++,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(i.z2F)),new ND(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(HD),i.LFG(XD),i.LFG(i._Vd),i.LFG(lR),i.LFG(QD),i.LFG(i.zs3),i.LFG(i.R0b),i.LFG(o),i.LFG(ST),i.LFG(w),i.LFG(JD))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const hR=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],dR=new i.OlP("cdk-connected-overlay-scroll-strategy");let pR=(()=>{class e{constructor(e){this.elementRef=e}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),e})(),fR=(()=>{class e{constructor(e,t,n,r,s){this._overlay=e,this._dir=s,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=mn.w.EMPTY,this._attachSubscription=mn.w.EMPTY,this._detachSubscription=mn.w.EMPTY,this._positionSubscription=mn.w.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new i.vpe,this.positionChange=new i.vpe,this.attach=new i.vpe,this.detach=new i.vpe,this.overlayKeydown=new i.vpe,this.overlayOutsideClick=new i.vpe,this._templatePortal=new RD(t,n),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=hk(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=hk(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=hk(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=hk(e)}get push(){return this._push}set push(e){this._push=hk(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){this.positions&&this.positions.length||(this.positions=hR);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(e=>{this.overlayKeydown.next(e),27!==e.keyCode||this.disableClose||Ek(e)||(e.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(e=>{this.overlayOutsideClick.next(e)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),t=new YD({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(t.width=this.width),(this.height||0===this.height)&&(t.height=this.height),(this.minWidth||0===this.minWidth)&&(t.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(t.minHeight=this.minHeight),this.backdropClass&&(t.backdropClass=this.backdropClass),this.panelClass&&(t.panelClass=this.panelClass),t}_updatePositionStrategy(e){const t=this.positions.map(e=>({originX:e.originX,originY:e.originY,overlayX:e.overlayX,overlayY:e.overlayY,offsetX:e.offsetX||this.offsetX,offsetY:e.offsetY||this.offsetY,panelClass:e.panelClass||void 0}));return e.setOrigin(this.origin.elementRef).withPositions(t).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(e),e}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(e,t=!1){return n=>n.lift(new MD(e,t))}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(uR),i.Y36(i.Rgc),i.Y36(i.s_b),i.Y36(dR),i.Y36(ST,8))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[i.TTD]}),e})();const mR={provide:dR,deps:[uR],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};let gR=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[uR,mR],imports:[[kT,LD,ID],ID]}),e})();function _R(e,t){}class yR{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const vR={dialogContainer:xT("dialogContainer",[RT("void, exit",DT({opacity:0,transform:"scale(0.7)"})),RT("enter",DT({transform:"none"})),PT("* => enter",IT("150ms cubic-bezier(0, 0, 0.2, 1)",DT({transform:"none",opacity:1}))),PT("* => void, * => exit",IT("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",DT({opacity:0})))])};let bR=(()=>{class e extends PD{constructor(e,t,n,r,s,o){super(),this._elementRef=e,this._focusTrapFactory=t,this._changeDetectorRef=n,this._config=s,this._focusMonitor=o,this._animationStateChanged=new i.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=e=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(e)),this._ariaLabelledBy=s.ariaLabelledBy||null,this._document=r}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const t=Zk(),n=this._elementRef.nativeElement;t&&t!==this._document.body&&t!==n&&!n.contains(t)||(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=Zk())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,t=Zk();return e===t||e.contains(t)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(rT),i.Y36(i.sBO),i.Y36(o,8),i.Y36(yR),i.Y36(yT))},e.\u0275dir=i.lG2({type:e,viewQuery:function(e,t){if(1&e&&i.Gf(FD,7),2&e){let e;i.iGM(e=i.CRH())&&(t._portalOutlet=e.first)}},features:[i.qOj]}),e})(),wR=(()=>{class e extends bR{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:t}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:t}))}_onAnimationStart({toState:e,totalTime:t}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:t}):"exit"!==e&&"void"!==e||this._animationStateChanged.next({state:"closing",totalTime:t})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,t){1&e&&i.WFA("@dialogContainer.start",function(e){return t._onAnimationStart(e)})("@dialogContainer.done",function(e){return t._onAnimationDone(e)}),2&e&&(i.Ikx("id",t._id),i.uIk("role",t._config.role)("aria-labelledby",t._config.ariaLabel?null:t._ariaLabelledBy)("aria-label",t._config.ariaLabel)("aria-describedby",t._config.ariaDescribedBy||null),i.d8E("@dialogContainer",t._state))},features:[i.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,t){1&e&&i.YNc(0,_R,0,0,"ng-template",0)},directives:[FD],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[vR.dialogContainer]}}),e})(),CR=0;class SR{constructor(e,t,n="mat-dialog-"+CR++){this._overlayRef=e,this._containerInstance=t,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new ht.xQ,this._afterClosed=new ht.xQ,this._beforeClosed=new ht.xQ,this._state=0,t._id=n,t._animationStateChanged.pipe(Ht(e=>"opened"===e.state),Ut(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Ht(e=>"closed"===e.state),Ut(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Ht(e=>27===e.keyCode&&!this.disableClose&&!Ek(e))).subscribe(e=>{e.preventDefault(),kR(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():kR(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Ht(e=>"closing"===e.state),Ut(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function kR(e,t,n){return void 0!==e._containerInstance&&(e._containerInstance._closeInteractionType=t),e.close(n)}const TR=new i.OlP("MatDialogData"),ER=new i.OlP("mat-dialog-default-options"),xR=new i.OlP("mat-dialog-scroll-strategy"),IR={provide:xR,deps:[uR],useFactory:function(e){return()=>e.scrollStrategies.block()}};let AR=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l){this._overlay=e,this._injector=t,this._defaultOptions=n,this._parentDialog=i,this._overlayContainer=r,this._dialogRefConstructor=o,this._dialogContainerType=a,this._dialogDataToken=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ht.xQ,this._afterOpenedAtThisLevel=new ht.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=Rt(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(jt(void 0))),this._scrollStrategy=s}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,t){(t=function(e,t){return Object.assign(Object.assign({},t),e)}(t,this._defaultOptions||new yR)).id&&this.getDialogById(t.id);const n=this._createOverlay(t),i=this._attachDialogContainer(n,t),r=this._attachDialogContent(e,i,n,t);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(r),r.afterClosed().subscribe(()=>this._removeOpenDialog(r)),this.afterOpened.next(r),i._initializeWithAttachedContent(),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const t=this._getOverlayConfig(e);return this._overlay.create(t)}_getOverlayConfig(e){const t=new YD({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(t.backdropClass=e.backdropClass),t}_attachDialogContainer(e,t){const n=i.zs3.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:yR,useValue:t}]}),r=new DD(this._dialogContainerType,t.viewContainerRef,n,t.componentFactoryResolver);return e.attach(r).instance}_attachDialogContent(e,t,n,r){const s=new this._dialogRefConstructor(n,t,r.id);if(e instanceof i.Rgc)t.attachTemplatePortal(new RD(e,null,{$implicit:r.data,dialogRef:s}));else{const n=this._createInjector(r,s,t),i=t.attachComponentPortal(new DD(e,r.viewContainerRef,n));s.componentInstance=i.instance}return s.updateSize(r.width,r.height).updatePosition(r.position),s}_createInjector(e,t,n){const r=e&&e.viewContainerRef&&e.viewContainerRef.injector,s=[{provide:this._dialogContainerType,useValue:n},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:t}];return!e.direction||r&&r.get(ST,null,i.XFs.Optional)||s.push({provide:ST,useValue:{value:e.direction,change:(0,ut.of)()}}),i.zs3.create({parent:r||this._injector,providers:s})}_removeOpenDialog(e){const t=this.openDialogs.indexOf(e);t>-1&&(this.openDialogs.splice(t,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((e,t)=>{e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const t=e.parentElement.children;for(let n=t.length-1;n>-1;n--){let i=t[n];i===e||"SCRIPT"===i.nodeName||"STYLE"===i.nodeName||i.hasAttribute("aria-live")||(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let t=e.length;for(;t--;)e[t].close()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(uR),i.Y36(i.zs3),i.Y36(void 0),i.Y36(void 0),i.Y36(XD),i.Y36(void 0),i.Y36(i.DyG),i.Y36(i.DyG),i.Y36(i.OlP))},e.\u0275dir=i.lG2({type:e}),e})(),DR=(()=>{class e extends AR{constructor(e,t,n,i,r,s,o){super(e,t,i,s,o,r,SR,wR,TR)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(uR),i.LFG(i.zs3),i.LFG(w,8),i.LFG(ER,8),i.LFG(xR),i.LFG(e,12),i.LFG(XD))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),RR=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[DR,IR],imports:[[gR,LD,aI],aI]}),e})();var OR=n(8819);class PR{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new NR(e,this.observables,this.project))}}class NR extends _t{constructor(e,t,n){super(e),this.observables=t,this.project=n,this.toRespond=[];const i=t.length;this.values=new Array(i);for(let r=0;r<i;r++)this.toRespond.push(r);for(let r=0;r<i;r++)this.add(wt(this,t[r],void 0,r))}notifyNext(e,t,n){this.values[n]=t;const i=this.toRespond;if(i.length>0){const e=i.indexOf(n);-1!==e&&i.splice(e,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}class FR{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new LR(e,this.predicate))}}class LR extends gt.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}let MR="";function VR(e){MR=e}class UR{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,Fo.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,Fo.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class qR{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,Fo.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const BR=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new UR(t)}}catch(t){}return new qR},jR=BR("localStorage"),ZR=BR("sessionStorage"),zR=new Mo.Yd("@firebase/database"),GR=function(){let e=1;return function(){return e++}}(),HR=function(e){const t=(0,Fo.dS)(e),n=new Fo.gQ;n.update(t);const i=n.digest();return Fo.US.encodeByteArray(i)},YR=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=YR.apply(null,i):t+="object"==typeof i?(0,Fo.Pz)(i):i,t+=" "}return t};let $R=null,WR=!0;const KR=function(e,t){(0,Fo.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(zR.logLevel=Mo.in.VERBOSE,$R=zR.log.bind(zR),t&&ZR.set("logging_enabled",!0)):"function"==typeof e?$R=e:($R=null,ZR.remove("logging_enabled"))},QR=function(...e){if(!0===WR&&(WR=!1,null===$R&&!0===ZR.get("logging_enabled")&&KR(!0)),$R){const t=YR.apply(null,e);$R(t)}},JR=function(e){return function(...t){QR(e,...t)}},XR=function(...e){const t="FIREBASE INTERNAL ERROR: "+YR(...e);zR.error(t)},eO=function(...e){const t=`FIREBASE FATAL ERROR: ${YR(...e)}`;throw zR.error(t),new Error(t)},tO=function(...e){const t="FIREBASE WARNING: "+YR(...e);zR.warn(t)},nO=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},iO="[MIN_NAME]",rO="[MAX_NAME]",sO=function(e,t){if(e===t)return 0;if(e===iO||t===rO)return-1;if(t===iO||e===rO)return 1;{const n=pO(e),i=pO(t);return null!==n?null!==i?n-i==0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},oO=function(e,t){return e===t?0:e<t?-1:1},aO=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,Fo.Pz)(t))},lO=function(e){if("object"!=typeof e||null===e)return(0,Fo.Pz)(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=(0,Fo.Pz)(t[i]),n+=":",n+=lO(e[t[i]]);return n+="}",n},cO=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)i.push(e.substring(r,r+t>n?n:r+t));return i};function uO(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const hO=function(e){let t,n,i,r,s;(0,Fo.hu)(!nO(e),"Invalid JSON number"),0===e?(n=0,i=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=r+1023,i=Math.round(e*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,i=Math.round(e/Math.pow(2,-1074))));const o=[];for(s=52;s;s-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();const a=o.join("");let l="";for(s=0;s<64;s+=8){let e=parseInt(a.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},dO=new RegExp("^-?(0*)\\d{1,10}$"),pO=function(e){if(dO.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},fO=function(e){try{e()}catch(t){setTimeout(()=>{throw tO("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},mO=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class gO{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){tO(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class _O{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(QR("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tO(e)}}let yO=(()=>{class e{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return e.OWNER="owner",e})();const vO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/;class bO{constructor(e,t,n,i,r=!1,s="",o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jR.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jR.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function wO(e,t,n){let i;if((0,Fo.hu)("string"==typeof t,"typeof type must == string"),(0,Fo.hu)("object"==typeof n,"typeof params must == object"),"websocket"===t)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return uO(n,(e,t)=>{r.push(e+"="+t)}),i+r.join("&")}class CO{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,Fo.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,Fo.p$)(this.counters_)}}const SO={},kO={};function TO(e){const t=e.toString();return SO[t]||(SO[t]=new CO),SO[t]}class EO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&fO(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class xO{constructor(e,t,n,i,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=JR(e),this.stats_=TO(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),wO(t,"long_polling",e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new EO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if((0,Fo.Yr)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new IO((...e)=>{const[t,n,i,r,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=n,this.password=i;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_()}},(...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&vO.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xO.forceAllow_=!0}static forceDisallow(){xO.forceDisallow_=!0}static isAvailable(){return!((0,Fo.Yr)()||!xO.forceAllow_&&(xO.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,Fo.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,Fo.h$)(t),i=cO(n,1840);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,Fo.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,Fo.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class IO{constructor(e,t,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Fo.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=GR(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=IO.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(r){QR("frame writing exception"),r.stack&&QR(r.stack),QR(r)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||QR("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),n()})}addTag(e,t){(0,Fo.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{QR("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}let AO=null;"undefined"!=typeof MozWebSocket?AO=MozWebSocket:"undefined"!=typeof WebSocket&&(AO=WebSocket);let DO=(()=>{class e{constructor(t,n,i,r,s,o,a){this.connId=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=JR(this.connId),this.stats_=TO(n),this.connURL=e.connectionURL_(n,o,a,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,t,n,i){const r={v:"5"};return!(0,Fo.Yr)()&&"undefined"!=typeof location&&location.hostname&&vO.test(location.hostname)&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),i&&(r.ac=i),wO(e,"websocket",r)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jR.set("previous_websocket_failure",!0);try{if((0,Fo.Yr)()){const e={headers:{"User-Agent":`Firebase/5/${MR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const t=process.env,n=0===this.connURL.indexOf("wss://")?t.HTTPS_PROXY||t.https_proxy:t.HTTP_PROXY||t.http_proxy;n&&(e.proxy={origin:n}),this.mySock=new AO(this.connURL,[],e)}else this.mySock=new AO(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&e.length>1&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==AO&&!e.forceDisallow_}static previouslyFailed(){return jR.isInMemoryStorage||!0===jR.get("previous_websocket_failure")}markConnectionHealthy(){jR.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,Fo.cI)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,Fo.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,Fo.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=cO(t,16384);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e})();class RO{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[xO,DO]}initTransports_(e){const t=DO&&DO.isAvailable();let n=t&&!DO.previouslyFailed();if(e.webSocketOnly&&(t||tO("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[DO];else{const e=this.transports_=[];for(const t of RO.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class OO{constructor(e,t,n,i,r,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=JR("c:"+this.id+":"),this.transportManager_=new RO(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=mO(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=aO("t",e),n=aO("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=aO("t",e),n=aO("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=aO("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?XR("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):XR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&tO("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),mO(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mO(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jR.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class PO{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class NO{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,Fo.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===t&&(!n||n===i[r].context))return void i.splice(r,1)}validateEventType_(e){(0,Fo.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class FO extends NO{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,Fo.uI)()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new FO}getInitialEvent(e){return(0,Fo.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class LO{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function MO(){return new LO("")}function VO(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function UO(e){return e.pieces_.length-e.pieceNum_}function qO(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new LO(e.pieces_,t)}function BO(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function jO(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function ZO(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new LO(t,0)}function zO(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof LO)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new LO(n,0)}function GO(e){return e.pieceNum_>=e.pieces_.length}function HO(e,t){const n=VO(e),i=VO(t);if(null===n)return t;if(n===i)return HO(qO(e),qO(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function YO(e,t){const n=jO(e,0),i=jO(t,0);for(let r=0;r<n.length&&r<i.length;r++){const e=sO(n[r],i[r]);if(0!==e)return e}return n.length===i.length?0:n.length<i.length?-1:1}function $O(e,t){if(UO(e)!==UO(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function WO(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(UO(e)>UO(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class KO{constructor(e,t){this.errorPrefix_=t,this.parts_=jO(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,Fo.ug)(this.parts_[n]);QO(this)}}function QO(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+JO(e))}function JO(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class XO extends NO{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new XO}getInitialEvent(e){return(0,Fo.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}let eP,tP=(()=>{class e extends PO{constructor(t,n,i,r,s,o,a,l){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=JR("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=1e3,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,Fo.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");XO.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&FO.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_((0,Fo.Pz)(r)),(0,Fo.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new Fo.BH,n={p:e._path.toString(),q:e._queryObject},i={action:"g",request:n,onComplete:e=>{const i=e.d;"ok"===e.s?(this.onDataUpdate_(n.p,i,!1,null),t.resolve(i)):t.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const e=this.outstandingGets_[r];void 0!==e&&i===e&&(delete this.outstandingGets_[r],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+r+" timed out on connection"),t.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,i){this.initConnection_();const r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),(0,Fo.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Fo.hu)(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");const o={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(t){const n=t.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i};t.tag&&(s.q=n._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,s=>{const o=s.d,a=s.s;e.warnOnListenWarnings_(o,n),(this.listens.get(i)&&this.listens.get(i).get(r))===t&&(this.log_("listen response",s),"ok"!==a&&this.removeListen_(i,r),t.onComplete&&t.onComplete(a,o))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&(0,Fo.r3)(e,"w")){const n=(0,Fo.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();tO(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,Fo.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,Fo.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),(0,Fo.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,e=>{i&&setTimeout(()=>{i(e.s,e.d)},Math.floor(0))})}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();const s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{"ok"!==e.s&&this.log_("reportStats","Error sending stats: "+e.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,Fo.Pz)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):XR("Unrecognized action received from server: "+(0,Fo.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,Fo.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ko.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const n=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),r=t.onRealtimeDisconnect_.bind(t),s=t.id+":"+e.nextConnectionId_++,o=t.lastSessionId;let a=!1,l=null;const c=function(){l?l.close():(a=!0,r())};t.realtime_={close:c,sendRequest:function(e){(0,Fo.hu)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)}};const u=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[e,c]=yield Promise.all([t.authTokenProvider_.getToken(u),t.appCheckTokenProvider_.getToken(u)]);a?QR("getToken() completed but was canceled"):(QR("getToken() completed. Creating connection."),t.authToken_=e&&e.accessToken,t.appCheckToken_=c&&c.token,l=new OO(s,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,n,i,r,e=>{tO(e+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},o))}catch(XR){t.log_("Failed to get token: "+XR),a||(t.repoInfo_.nodeAdmin&&tO(XR),c())}}})()}interrupt(e){QR("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){QR("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,Fo.xb)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>lO(e)).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new LO(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){QR("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){QR("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,Fo.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+MR.replace(/\./g,"-")]=1,(0,Fo.uI)()?e["framework.cordova"]=1:(0,Fo.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=FO.getInstance().currentlyOnline();return(0,Fo.xb)(this.interruptReasons_)&&e}}return e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e})();class nP{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nP(e,t)}}class iP{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new nP(iO,e),i=new nP(iO,t);return 0!==this.compare(n,i)}minPost(){return nP.MIN}}class rP extends iP{static get __EMPTY_NODE(){return eP}static set __EMPTY_NODE(e){eP=e}compare(e,t){return sO(e.name,t.name)}isDefinedOn(e){throw(0,Fo.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nP.MIN}maxPost(){return new nP(rO,eP)}makePost(e,t){return(0,Fo.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new nP(e,eP)}toString(){return".key"}}const sP=new rP;class oP{constructor(e,t,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let aP,lP=(()=>{class e{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=null!=i?i:e.RED,this.left=null!=r?r:cP.EMPTY_NODE,this.right=null!=s?s:cP.EMPTY_NODE}copy(t,n,i,r,s){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return cP.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return cP.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})();class cP{constructor(e,t=cP.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new cP(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,lP.BLACK,null,null))}remove(e){return new cP(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,lP.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new oP(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new oP(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new oP(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new oP(this.root_,null,this.comparator_,!0,e)}}function uP(e,t){return sO(e.name,t.name)}function hP(e,t){return sO(e,t)}cP.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new lP(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const dP=function(e){return"number"==typeof e?"number:"+hO(e):"string:"+e},pP=function(e){if(e.isLeafNode()){const t=e.val();(0,Fo.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,Fo.r3)(t,".sv"),"Priority must be a string or number.")}else(0,Fo.hu)(e===aP||e.isEmpty(),"priority of unexpected type.");(0,Fo.hu)(e===aP||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let fP,mP,gP,_P=(()=>{class e{constructor(t,n=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,Fo.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),pP(this.priorityNode_)}static set __childrenNodeConstructor(e){fP=e}static get __childrenNodeConstructor(){return fP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return GO(t)?this:".priority"===VO(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const i=VO(t);return null===i?n:n.isEmpty()&&".priority"!==i?this:((0,Fo.hu)(".priority"!==i||1===UO(t),".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(qO(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+dP(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?hO(this.value_):this.value_,this.lazyHash_=HR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,Fo.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,i=typeof this.value_,r=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(i);return(0,Fo.hu)(r>=0,"Unknown leaf type: "+n),(0,Fo.hu)(s>=0,"Unknown leaf type: "+i),r===s?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}return e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e})();const yP=new class extends iP{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?sO(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nP.MIN}maxPost(){return new nP(rO,new _P("[PRIORITY-POST]",gP))}makePost(e,t){const n=mP(e);return new nP(t,new _P("[PRIORITY-POST]",n))}toString(){return".priority"}},vP=Math.log(2);class bP{constructor(e){this.count=parseInt(Math.log(e+1)/vP,10),this.current_=this.count-1;const t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const wP=function(e,t,n,i){e.sort(t);const r=function(t,i){const s=i-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new lP(a,o.node,lP.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=r(t,l),u=r(l+1,i);return o=e[l],a=n?n(o):o,new lP(a,o.node,lP.BLACK,c,u)}},s=function(t){let i=null,s=null,o=e.length;const a=function(t,i){const s=o-t,a=o;o-=t;const c=r(s+1,a),u=e[s],h=n?n(u):u;l(new lP(h,u.node,i,null,c))},l=function(e){i?(i.left=e,i=e):(s=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,lP.BLACK):(a(i,lP.BLACK),a(i,lP.RED))}return s}(new bP(e.length));return new cP(i||t,s)};let CP;const SP={};class kP{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,Fo.hu)(SP&&yP,"ChildrenNode.ts has not been loaded"),CP=CP||new kP({".priority":SP},{".priority":yP}),CP}get(e){const t=(0,Fo.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof cP?t:null}hasIndex(e){return(0,Fo.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,Fo.hu)(e!==sP,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=t.getIterator(nP.Wrap);let s,o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),n.push(o),o=r.getNext();s=i?wP(n,e.getCompare()):SP;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new kP(c,l)}addToIndexes(e,t){const n=(0,Fo.UI)(this.indexes_,(n,i)=>{const r=(0,Fo.DV)(this.indexSet_,i);if((0,Fo.hu)(r,"Missing index implementation for "+i),n===SP){if(r.isDefinedOn(e.node)){const n=[],i=t.getIterator(nP.Wrap);let s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),wP(n,r.getCompare())}return SP}{const i=t.get(e.name);let r=n;return i&&(r=r.remove(new nP(e.name,i))),r.insert(e,e.node)}});return new kP(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,Fo.UI)(this.indexes_,n=>{if(n===SP)return n;{const i=t.get(e.name);return i?n.remove(new nP(e.name,i)):n}});return new kP(n,this.indexSet_)}}let TP,EP=(()=>{class e{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&pP(this.priorityNode_),this.children_.isEmpty()&&(0,Fo.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return TP||(TP=new e(new cP(hP),null,kP.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||TP}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?TP:t}}getChild(e){const t=VO(e);return null===t?this:this.getImmediateChild(t).getChild(qO(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(t,n){if((0,Fo.hu)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);{const i=new nP(t,n);let r,s;n.isEmpty()?(r=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?TP:this.priorityNode_;return new e(r,o,s)}}updateChild(e,t){const n=VO(e);if(null===n)return t;{(0,Fo.hu)(".priority"!==VO(e)||1===UO(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(qO(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(yP,(o,a)=>{n[o]=a.val(t),i++,s&&e.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!t&&s&&r<2*i){const e=[];for(const t in n)e[t]=n[t];return e}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+dP(this.getPriority().val())+":"),this.forEachChild(yP,(t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)}),this.lazyHash_=""===e?"":HR(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new nP(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new nP(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new nP(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,nP.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,nP.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===xP?-1:0}withIndex(t){if(t===sP||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===sP||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(yP),n=t.getIterator(yP);let i=e.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=e.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(e){return e===sP?null:this.indexMap_.get(e.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})();const xP=new class extends EP{constructor(){super(new cP(hP),EP.EMPTY_NODE,kP.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return EP.EMPTY_NODE}isEmpty(){return!1}};function IP(e,t=null){if(null===e)return EP.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,Fo.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new _P(e,IP(t));if(e instanceof Array){let n=EP.EMPTY_NODE;return uO(e,(t,i)=>{if((0,Fo.r3)(e,t)&&"."!==t.substring(0,1)){const e=IP(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(IP(t))}{const n=[];let i=!1;if(uO(e,(e,t)=>{if("."!==e.substring(0,1)){const r=IP(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new nP(e,r)))}}),0===n.length)return EP.EMPTY_NODE;const r=wP(n,uP,e=>e.name,hP);if(i){const e=wP(n,yP.getCompare());return new EP(r,IP(t),new kP({".priority":e},{".priority":yP}))}return new EP(r,IP(t),kP.Default)}}Object.defineProperties(nP,{MIN:{value:new nP(iO,EP.EMPTY_NODE)},MAX:{value:new nP(rO,xP)}}),rP.__EMPTY_NODE=EP.EMPTY_NODE,_P.__childrenNodeConstructor=EP,aP=xP,gP=xP,mP=IP;class AP extends iP{constructor(e){super(),this.indexPath_=e,(0,Fo.hu)(!GO(e)&&".priority"!==VO(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?sO(e.name,t.name):r}makePost(e,t){const n=IP(e),i=EP.EMPTY_NODE.updateChild(this.indexPath_,n);return new nP(t,i)}maxPost(){const e=EP.EMPTY_NODE.updateChild(this.indexPath_,xP);return new nP(rO,e)}toString(){return jO(this.indexPath_,0).join("/")}}const DP=new class extends iP{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?sO(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nP.MIN}maxPost(){return nP.MAX}makePost(e,t){const n=IP(e);return new nP(t,n)}toString(){return".value"}},RP="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",OP=function(){let e=0;const t=[];return function(n){const i=n===e;let r;e=n;const s=new Array(8);for(r=7;r>=0;r--)s[r]=RP.charAt(n%64),n=Math.floor(n/64);(0,Fo.hu)(0===n,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=RP.charAt(t[r]);return(0,Fo.hu)(20===o.length,"nextPushId: Length should be 20."),o}}(),PP=function(e){if("2147483647"===e)return"-";const t=pO(e);if(null!=t)return""+(t+1);const n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e.charAt(s);if(n.length<786)return n.push("-"),n.join("");let i=n.length-1;for(;i>=0&&"z"===n[i];)i--;if(-1===i)return rO;const r=RP.charAt(RP.indexOf(n[i])+1);return n[i]=r,n.slice(0,i+1).join("")},NP=function(e){if("-2147483648"===e)return iO;const t=pO(e);if(null!=t)return""+(t-1);const n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e.charAt(i);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=RP.charAt(RP.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function FP(e){return{type:"value",snapshotNode:e}}function LP(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function MP(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function VP(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class UP{constructor(e){this.index_=e}updateChild(e,t,n,i,r,s){(0,Fo.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(i).equals(n.getChild(i))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(MP(t,o)):(0,Fo.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(LP(t,n)):s.trackChildChange(VP(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(yP,(e,i)=>{t.hasChild(e)||n.trackChildChange(MP(e,i))}),t.isLeafNode()||t.forEachChild(yP,(t,i)=>{if(e.hasChild(t)){const r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(VP(t,i,r))}else n.trackChildChange(LP(t,i))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?EP.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class qP{constructor(e){this.indexedFilter_=new UP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=qP.getStartPost_(e),this.endPost_=qP.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,n,i,r,s){return this.matches(new nP(t,n))||(n=EP.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=EP.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(EP.EMPTY_NODE);const r=this;return t.forEachChild(yP,(e,t)=>{r.matches(new nP(e,t))||(i=i.updateImmediateChild(e,EP.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class BP{constructor(e){this.rangedFilter_=new qP(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,n,i,r,s){return this.rangedFilter_.matches(new nP(t,n))||(n=EP.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=EP.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=EP.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();let r;if(r=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),t)<=0:this.index_.compare(t,this.rangedFilter_.getEndPost())<=0,!r)break;i=i.updateImmediateChild(t.name,t.node),n++}}else{let e,n,r,s;if(i=t.withIndex(this.index_),i=i.updatePriority(EP.EMPTY_NODE),this.reverse_){s=i.getReverseIterator(this.index_),e=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const t=this.index_.getCompare();r=(e,n)=>t(n,e)}else s=i.getIterator(this.index_),e=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),r=this.index_.getCompare();let o=0,a=!1;for(;s.hasNext();){const t=s.getNext();!a&&r(e,t)<=0&&(a=!0),a&&o<this.limit_&&r(t,n)<=0?o++:i=i.updateImmediateChild(t.name,EP.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,r){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;(0,Fo.hu)(o.numChildren()===this.limit_,"");const a=new nP(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=i.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=r&&r.trackChildChange(VP(t,n,e)),o.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(MP(t,e));const n=o.updateImmediateChild(t,EP.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=r&&r.trackChildChange(LP(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=r&&(r.trackChildChange(MP(l.name,l.node)),r.trackChildChange(LP(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,EP.EMPTY_NODE)):e}}class jP{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yP}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Fo.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Fo.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:iO}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Fo.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Fo.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rO}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Fo.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yP}copy(){const e=new jP;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ZP(e,t,n){const i=e.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=n?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function zP(e,t,n){const i=e.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==n?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function GP(e,t){const n=e.copy();return n.index_=t,n}function HP(e){const t={};if(e.isDefault())return t;let n;return e.index_===yP?n="$priority":e.index_===DP?n="$value":e.index_===sP?n="$key":((0,Fo.hu)(e.index_ instanceof AP,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,Fo.Pz)(n),e.startSet_&&(t.startAt=(0,Fo.Pz)(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+(0,Fo.Pz)(e.indexStartName_))),e.endSet_&&(t.endAt=(0,Fo.Pz)(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+(0,Fo.Pz)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function YP(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==yP&&(t.i=e.index_.toString()),t}class $P extends PO{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=JR("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,Fo.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const s=$P.getListenId_(e,n),o={};this.listens_[s]=o;const a=HP(e._queryParams);this.restRequest_(r+".json",a,(e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(r,a,!1,n),(0,Fo.DV)(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}})}unlisten(e,t){const n=$P.getListenId_(e,t);delete this.listens_[n]}get(e){const t=HP(e._queryParams),n=e._path.toString(),i=new Fo.BH;return this.restRequest_(n+".json",t,(e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,r])=>{i&&i.accessToken&&(t.auth=i.accessToken),r&&r.token&&(t.ac=r.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,Fo.xO)(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=(0,Fo.cI)(o.responseText)}catch(e){tO("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,t)}else 401!==o.status&&404!==o.status&&tO("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()})}}class WP{constructor(){this.rootNode_=EP.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function KP(){return{value:null,children:new Map}}function QP(e,t,n){if(GO(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=VO(t);e.children.has(i)||e.children.set(i,KP()),QP(e.children.get(i),t=qO(t),n)}}function JP(e,t){if(GO(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(yP,(t,n)=>{QP(e,new LO(t),n)}),JP(e,t)}}if(e.children.size>0){const n=VO(t);return t=qO(t),e.children.has(n)&&JP(e.children.get(n),t)&&e.children.delete(n),0===e.children.size}return!0}function XP(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,i)=>{XP(i,new LO(t.toString()+"/"+e),n)})}class eN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&uO(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class tN{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new eN(e);const n=1e4+2e4*Math.random();mO(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;uO(e,(e,i)=>{i>0&&(0,Fo.r3)(this.statsToReport_,e)&&(t[e]=i,n=!0)}),n&&this.server_.reportStats(t),mO(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var nN=(()=>(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(nN||(nN={})),nN))();function iN(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class rN{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=nN.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(GO(this.path)){if(null!=this.affectedTree.value)return(0,Fo.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new LO(e));return new rN(MO(),t,this.revert)}}return(0,Fo.hu)(VO(this.path)===e,"operationForChild called for unrelated child."),new rN(qO(this.path),this.affectedTree,this.revert)}}class sN{constructor(e,t){this.source=e,this.path=t,this.type=nN.LISTEN_COMPLETE}operationForChild(e){return GO(this.path)?new sN(this.source,MO()):new sN(this.source,qO(this.path))}}class oN{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=nN.OVERWRITE}operationForChild(e){return GO(this.path)?new oN(this.source,MO(),this.snap.getImmediateChild(e)):new oN(this.source,qO(this.path),this.snap)}}class aN{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=nN.MERGE}operationForChild(e){if(GO(this.path)){const t=this.children.subtree(new LO(e));return t.isEmpty()?null:t.value?new oN(this.source,MO(),t.value):new aN(this.source,MO(),t)}return(0,Fo.hu)(VO(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new aN(this.source,qO(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class lN{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(GO(e))return this.isFullyInitialized()&&!this.filtered_;const t=VO(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class cN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function uN(e,t,n,i,r,s){const o=i.filter(e=>e.type===n);o.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw(0,Fo.g5)("Should only compare child_ events.");const i=new nP(t.childName,t.snapshotNode),r=new nP(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n)),o.forEach(n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);r.forEach(r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))})})}function hN(e,t){return{eventCache:e,serverCache:t}}function dN(e,t,n,i){return hN(new lN(t,n,i),e.serverCache)}function pN(e,t,n,i){return hN(e.eventCache,new lN(t,n,i))}function fN(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function mN(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let gN;class _N{constructor(e,t=(()=>(gN||(gN=new cP(oO)),gN))()){this.value=e,this.children=t}static fromObject(e){let t=new _N(null);return uO(e,(e,n)=>{t=t.set(new LO(e),n)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:MO(),value:this.value};if(GO(e))return null;{const n=VO(e),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(qO(e),t);return null!=r?{path:zO(new LO(n),r.path),value:r.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(GO(e))return this;{const t=VO(e),n=this.children.get(t);return null!==n?n.subtree(qO(e)):new _N(null)}}set(e,t){if(GO(e))return new _N(t,this.children);{const n=VO(e),i=(this.children.get(n)||new _N(null)).set(qO(e),t),r=this.children.insert(n,i);return new _N(this.value,r)}}remove(e){if(GO(e))return this.children.isEmpty()?new _N(null):new _N(null,this.children);{const t=VO(e),n=this.children.get(t);if(n){const i=n.remove(qO(e));let r;return r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty()?new _N(null):new _N(this.value,r)}return this}}get(e){if(GO(e))return this.value;{const t=VO(e),n=this.children.get(t);return n?n.get(qO(e)):null}}setTree(e,t){if(GO(e))return t;{const n=VO(e),i=(this.children.get(n)||new _N(null)).setTree(qO(e),t);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new _N(this.value,r)}}fold(e){return this.fold_(MO(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((i,r)=>{n[i]=r.fold_(zO(e,i),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,MO(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(GO(e))return null;{const i=VO(e),r=this.children.get(i);return r?r.findOnPath_(qO(e),zO(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,MO(),t)}foreachOnPath_(e,t,n){if(GO(e))return this;{this.value&&n(t,this.value);const i=VO(e),r=this.children.get(i);return r?r.foreachOnPath_(qO(e),zO(t,i),n):new _N(null)}}foreach(e){this.foreach_(MO(),e)}foreach_(e,t){this.children.inorderTraversal((n,i)=>{i.foreach_(zO(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class yN{constructor(e){this.writeTree_=e}static empty(){return new yN(new _N(null))}}function vN(e,t,n){if(GO(t))return new yN(new _N(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const o=HO(r,t);return s=s.updateChild(o,n),new yN(e.writeTree_.set(r,s))}{const i=new _N(n),r=e.writeTree_.setTree(t,i);return new yN(r)}}}function bN(e,t,n){let i=e;return uO(n,(e,n)=>{i=vN(i,zO(t,e),n)}),i}function wN(e,t){if(GO(t))return yN.empty();{const n=e.writeTree_.setTree(t,new _N(null));return new yN(n)}}function CN(e,t){return null!=SN(e,t)}function SN(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(HO(n.path,t)):null}function kN(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(yP,(e,n)=>{t.push(new nP(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new nP(e,n.value))}),t}function TN(e,t){if(GO(t))return e;{const n=SN(e,t);return new yN(null!=n?new _N(n):e.writeTree_.subtree(t))}}function EN(e){return e.writeTree_.isEmpty()}function xN(e,t){return IN(MO(),e.writeTree_,t)}function IN(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((t,r)=>{".priority"===t?((0,Fo.hu)(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=IN(zO(e,t),r,n)}),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(zO(e,".priority"),i)),n}}function AN(e,t){return qN(t,e)}function DN(e,t){if(e.snap)return WO(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&WO(zO(e.path,n),t))return!0;return!1}function RN(e){return e.visible}function ON(e,t,n){let i=yN.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const e=s.path;let t;if(s.snap)WO(n,e)?(t=HO(n,e),i=vN(i,t,s.snap)):WO(e,n)&&(t=HO(e,n),i=vN(i,MO(),s.snap.getChild(t)));else{if(!s.children)throw(0,Fo.g5)("WriteRecord should have .snap or .children");if(WO(n,e))t=HO(n,e),i=bN(i,t,s.children);else if(WO(e,n))if(t=HO(e,n),GO(t))i=bN(i,MO(),s.children);else{const e=(0,Fo.DV)(s.children,VO(t));if(e){const n=e.getChild(qO(t));i=vN(i,MO(),n)}}}}}return i}function PN(e,t,n,i,r){if(i||r){const s=TN(e.visibleWrites,t);return!r&&EN(s)?n:r||null!=n||CN(s,MO())?xN(ON(e.allWrites,function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(WO(e.path,t)||WO(t,e.path))},t),n||EP.EMPTY_NODE):null}{const i=SN(e.visibleWrites,t);if(null!=i)return i;{const i=TN(e.visibleWrites,t);return EN(i)?n:null!=n||CN(i,MO())?xN(i,n||EP.EMPTY_NODE):null}}}function NN(e,t,n,i){return PN(e.writeTree,e.treePath,t,n,i)}function FN(e,t){return function(e,t,n){let i=EP.EMPTY_NODE;const r=SN(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(yP,(e,t)=>{i=i.updateImmediateChild(e,t)}),i;if(n){const r=TN(e.visibleWrites,t);return n.forEachChild(yP,(e,t)=>{const n=xN(TN(r,new LO(e)),t);i=i.updateImmediateChild(e,n)}),kN(r).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}return kN(TN(e.visibleWrites,t)).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}(e.writeTree,e.treePath,t)}function LN(e,t,n,i){return function(e,t,n,i,r){(0,Fo.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=zO(t,n);if(CN(e.visibleWrites,s))return null;{const t=TN(e.visibleWrites,s);return EN(t)?r.getChild(n):xN(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function MN(e,t){return function(e,t){return SN(e.visibleWrites,t)}(e.writeTree,zO(e.treePath,t))}function VN(e,t,n){return function(e,t,n,i){const r=zO(t,n),s=SN(e.visibleWrites,r);return null!=s?s:i.isCompleteForChild(n)?xN(TN(e.visibleWrites,r),i.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function UN(e,t){return qN(zO(e.treePath,t),e.writeTree)}function qN(e,t){return{treePath:e,writeTree:t}}class BN{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,Fo.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,Fo.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,VP(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,MP(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,LP(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw(0,Fo.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,VP(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const jN=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class ZN{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new lN(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return VN(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:mN(this.viewCache_),r=function(e,t,n,i,r,s){return function(e,t,n,i,r,s,o){let a;const l=TN(e.visibleWrites,t),c=SN(l,MO());if(null!=c)a=c;else{if(null==n)return[];a=xN(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let r=n.getNext();for(;r&&e.length<1;)0!==t(r,i)&&e.push(r),r=n.getNext();return e}}(e.writeTree,e.treePath,t,n,0,r,s)}(this.writes_,i,t,0,n,e);return 0===r.length?null:r[0]}}function zN(e,t,n,i,r,s){const o=t.eventCache;if(null!=MN(i,n))return t;{let a,l;if(GO(n))if((0,Fo.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=mN(t),r=FN(i,n instanceof EP?n:EP.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{const n=NN(i,mN(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=VO(n);if(".priority"===c){(0,Fo.hu)(1===UO(n),"Can't have a priority with additional path components");const r=o.getNode();l=t.serverCache.getNode();const s=LN(i,n,r,l);a=null!=s?e.filter.updatePriority(r,s):o.getNode()}else{const u=qO(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=LN(i,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=VN(i,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,r,s):o.getNode()}}return dN(t,a,o.isFullyInitialized()||GO(n),e.filter.filtersNodes())}}function GN(e,t,n,i,r,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(GO(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),e,null)}else{const e=VO(n);if(!l.isCompleteForPath(n)&&UO(n)>1)return t;const r=qO(n),s=l.getNode().getImmediateChild(e).updateChild(r,i);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,r,jN,null)}const h=pN(t,c,l.isFullyInitialized()||GO(n),u.filtersNodes());return zN(e,h,n,r,new ZN(r,h,s),a)}function HN(e,t,n,i,r,s,o){const a=t.eventCache;let l,c;const u=new ZN(r,t,s);if(GO(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,o),l=dN(t,c,!0,e.filter.filtersNodes());else{const r=VO(n);if(".priority"===r)c=e.filter.updatePriority(t.eventCache.getNode(),i),l=dN(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=qO(n),c=a.getNode().getImmediateChild(r);let h;if(GO(s))h=i;else{const e=u.getCompleteChild(r);h=null!=e?".priority"===BO(s)&&e.getChild(ZO(s)).isEmpty()?e:e.updateChild(s,i):EP.EMPTY_NODE}l=c.equals(h)?t:dN(t,e.filter.updateChild(a.getNode(),r,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function YN(e,t){return e.eventCache.isCompleteForChild(t)}function $N(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function WN(e,t,n,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=GO(n)?i:new _N(null).setTree(n,i);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,i)=>{if(u.hasChild(n)){const l=$N(0,t.serverCache.getNode().getImmediateChild(n),i);c=GN(e,c,new LO(n),l,r,s,o,a)}}),l.children.inorderTraversal((n,i)=>{const l=!t.serverCache.isCompleteForChild(n)&&void 0===i.value;if(!u.hasChild(n)&&!l){const l=$N(0,t.serverCache.getNode().getImmediateChild(n),i);c=GN(e,c,new LO(n),l,r,s,o,a)}}),c}class KN{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new UP(n.getIndex()),r=(s=n).loadsAllData()?new UP(s.getIndex()):s.hasLimit()?new BP(s):new qP(s);var s;this.processor_=function(e){return{filter:e}}(r);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(EP.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(EP.EMPTY_NODE,a.getNode(),null),u=new lN(l,o.isFullyInitialized(),i.filtersNodes()),h=new lN(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=hN(h,u),this.eventGenerator_=new cN(this.query_)}get query(){return this.query_}}function QN(e,t){const n=mN(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!GO(t)&&!n.getImmediateChild(VO(t)).isEmpty())?n.getChild(t):null}function JN(e){return 0===e.eventRegistrations_.length}function XN(e,t,n){const i=[];if(n){(0,Fo.hu)(null==t,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,r);t&&i.push(t)})}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){const r=e.eventRegistrations_[i];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function eF(e,t,n,i){t.type===nN.MERGE&&null!==t.source.queryId&&((0,Fo.hu)(mN(e.viewCache_),"We should always have a full cache before handling merges"),(0,Fo.hu)(fN(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=function(e,t,n,i,r){const s=new BN;let o,a;if(n.type===nN.OVERWRITE){const l=n;l.source.fromUser?o=HN(e,t,l.path,l.snap,i,r,s):((0,Fo.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!GO(l.path),o=GN(e,t,l.path,l.snap,i,r,a,s))}else if(n.type===nN.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,i,r,s,o){let a=t;return i.foreach((i,l)=>{const c=zO(n,i);YN(t,VO(c))&&(a=HN(e,a,c,l,r,s,o))}),i.foreach((i,l)=>{const c=zO(n,i);YN(t,VO(c))||(a=HN(e,a,c,l,r,s,o))}),a}(e,t,l.path,l.children,i,r,s):((0,Fo.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=WN(e,t,l.path,l.children,i,r,a,s))}else if(n.type===nN.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,i,r,s){let o;if(null!=MN(i,n))return t;{const a=new ZN(i,t,r),l=t.eventCache.getNode();let c;if(GO(n)||".priority"===VO(n)){let n;if(t.serverCache.isFullyInitialized())n=NN(i,mN(t));else{const e=t.serverCache.getNode();(0,Fo.hu)(e instanceof EP,"serverChildren would be complete if leaf node"),n=FN(i,e)}n=n,c=e.filter.updateFullNode(l,n,s)}else{const r=VO(n);let u=VN(i,r,t.serverCache);null==u&&t.serverCache.isCompleteForChild(r)&&(u=l.getImmediateChild(r)),c=null!=u?e.filter.updateChild(l,r,u,qO(n),a,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(l,r,EP.EMPTY_NODE,qO(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=NN(i,mN(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=MN(i,MO()),dN(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,i,r,s):function(e,t,n,i,r,s,o){if(null!=MN(r,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(GO(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return GN(e,t,n,l.getNode().getChild(n),r,s,a,o);if(GO(n)){let i=new _N(null);return l.getNode().forEachChild(sP,(e,t)=>{i=i.set(new LO(e),t)}),WN(e,t,n,i,r,s,a,o)}return t}{let c=new _N(null);return i.foreach((e,t)=>{const i=zO(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))}),WN(e,t,n,c,r,s,a,o)}}(e,t,a.path,a.affectedTree,i,r,s)}else{if(n.type!==nN.LISTEN_COMPLETE)throw(0,Fo.g5)("Unknown operation type: "+n.type);o=function(e,t,n,i,r){const s=t.serverCache;return zN(e,pN(t,s.getNode(),s.isFullyInitialized()||GO(n),s.isFiltered()),n,i,jN,r)}(e,t,n.path,i,s)}const l=s.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=fN(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(FP(fN(t)))}}(t,o,l),{viewCache:o,changes:l}}(e.processor_,r,t,n,i);var o,a;return o=e.processor_,(0,Fo.hu)((a=s.viewCache).eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),(0,Fo.hu)(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),(0,Fo.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,tF(e,s.changes,s.viewCache.eventCache.getNode(),null)}function tF(e,t,n,i){return function(e,t,n,i){const r=[],s=[];return t.forEach(t=>{"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push({type:"child_moved",snapshotNode:t.snapshotNode,childName:t.childName})}),uN(e,r,"child_removed",t,i,n),uN(e,r,"child_added",t,i,n),uN(e,r,"child_moved",s,i,n),uN(e,r,"child_changed",t,i,n),uN(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,i?[i]:e.eventRegistrations_)}let nF,iF;class rF{constructor(){this.views=new Map}}function sF(e,t,n,i){const r=t.source.queryId;if(null!==r){const s=e.views.get(r);return(0,Fo.hu)(null!=s,"SyncTree gave us an op for an invalid query."),eF(s,t,n,i)}{let r=[];for(const s of e.views.values())r=r.concat(eF(s,t,n,i));return r}}function oF(e,t,n,i,r){const s=e.views.get(t._queryIdentifier);if(!s){let e=NN(n,r?i:null),s=!1;e?s=!0:i instanceof EP?(e=FN(n,i),s=!1):(e=EP.EMPTY_NODE,s=!1);const o=hN(new lN(e,s,!1),new lN(i,r,!1));return new KN(t,o)}return s}function aF(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function lF(e,t){let n=null;for(const i of e.views.values())n=n||QN(i,t);return n}function cF(e,t){return t._queryParams.loadsAllData()?dF(e):e.views.get(t._queryIdentifier)}function uF(e,t){return null!=cF(e,t)}function hF(e){return null!=dF(e)}function dF(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let pF=1;class fF{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _N(null),this.pendingWriteTree_={visibleWrites:yN.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function mF(e,t,n,i,r){return function(e,t,n,i,r){(0,Fo.hu)(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=vN(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?wF(e,new oN({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function gF(e,t,n=!1){const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);(0,Fo.hu)(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&DN(t,i.path)?r=!1:WO(i.path,t.path)&&(s=!0)),o--}return!!r&&(s?(function(e){e.visibleWrites=ON(e.allWrites,RN,MO()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(i.snap?e.visibleWrites=wN(e.visibleWrites,i.path):uO(i.children,t=>{e.visibleWrites=wN(e.visibleWrites,zO(i.path,t))}),!0))}(e.pendingWriteTree_,t)){let t=new _N(null);return null!=i.snap?t=t.set(MO(),!0):uO(i.children,e=>{t=t.set(new LO(e),!0)}),wF(e,new rN(i.path,t,n))}return[]}function _F(e,t,n){return wF(e,new oN({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function yF(e,t,n,i){const r=t._path,s=e.syncPointTree_.get(r);let o=[];if(s&&("default"===t._queryIdentifier||uF(s,t))){const a=function(e,t,n,i){const r=t._queryIdentifier,s=[];let o=[];const a=hF(e);if("default"===r)for(const[l,c]of e.views.entries())o=o.concat(XN(c,n,i)),JN(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(r);t&&(o=o.concat(XN(t,n,i)),JN(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!hF(e)&&s.push(new((0,Fo.hu)(nF,"Reference.ts has not been loaded"),nF)(t._repo,t._path)),{removed:s,events:o}}(s,t,n,i);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(r));const l=a.removed;o=a.events;const c=-1!==l.findIndex(e=>e._queryParams.loadsAllData()),u=e.syncPointTree_.findOnPath(r,(e,t)=>hF(t));if(c&&!u){const t=e.syncPointTree_.subtree(r);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&hF(t))return[dF(t)];{let e=[];return t&&(e=aF(t)),uO(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const i=n[t],r=i.query,s=kF(e,i);e.listenProvider_.startListening(DF(r),TF(e,r),s.hashFn,s.onComplete)}}}if(!u&&l.length>0&&!i)if(c){const n=null;e.listenProvider_.stopListening(DF(t),n)}else l.forEach(t=>{const n=e.queryToTagMap.get(EF(t));e.listenProvider_.stopListening(DF(t),n)});!function(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const t=EF(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,l)}return o}function vF(e,t,n){const i=t._path;let r=null,s=!1;e.syncPointTree_.foreachOnPath(i,(e,t)=>{const n=HO(e,i);r=r||lF(t,n),s=s||hF(t)});let o,a=e.syncPointTree_.get(i);a?(s=s||hF(a),r=r||lF(a,MO())):(a=new rF,e.syncPointTree_=e.syncPointTree_.set(i,a)),null!=r?o=!0:(o=!1,r=EP.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((e,t)=>{const n=lF(t,MO());n&&(r=r.updateImmediateChild(e,n))}));const l=uF(a,t);if(!l&&!t._queryParams.loadsAllData()){const n=EF(t);(0,Fo.hu)(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=pF++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let c=function(e,t,n,i,r,s){const o=oF(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(yP,(e,t)=>{i.push(LP(e,t))}),n.isFullyInitialized()&&i.push(FP(n.getNode())),tF(e,i,n.getNode(),t)}(o,n)}(a,t,n,AN(e.pendingWriteTree_,i),r,o);if(!l&&!s){const n=cF(a,t);c=c.concat(function(e,t,n){const i=t._path,r=TF(e,t),s=kF(e,n),o=e.listenProvider_.startListening(DF(t),r,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(i);if(r)(0,Fo.hu)(!hF(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold((e,t,n)=>{if(!GO(e)&&t&&hF(t))return[dF(t).query];{let e=[];return t&&(e=e.concat(aF(t).map(e=>e.query))),uO(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const i=t[n];e.listenProvider_.stopListening(DF(i),TF(e,i))}}return o}(e,t,n))}return c}function bF(e,t,n){const i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(e,n)=>{const i=lF(n,HO(e,t));if(i)return i});return PN(i,t,r,n,!0)}function wF(e,t){return CF(t,e.syncPointTree_,null,AN(e.pendingWriteTree_,MO()))}function CF(e,t,n,i){if(GO(e.path))return SF(e,t,n,i);{const r=t.get(MO());null==n&&null!=r&&(n=lF(r,MO()));let s=[];const o=VO(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=UN(i,o);s=s.concat(CF(a,l,e,t))}return r&&(s=s.concat(sF(r,e,i,n))),s}}function SF(e,t,n,i){const r=t.get(MO());null==n&&null!=r&&(n=lF(r,MO()));let s=[];return t.children.inorderTraversal((t,r)=>{const o=n?n.getImmediateChild(t):null,a=UN(i,t),l=e.operationForChild(t);l&&(s=s.concat(SF(l,r,o,a)))}),r&&(s=s.concat(sF(r,e,i,n))),s}function kF(e,t){const n=t.query,i=TF(e,n);return{hashFn:()=>(function(e){return e.viewCache_.serverCache.getNode()}(t)||EP.EMPTY_NODE).hash(),onComplete:t=>{if("ok"===t)return i?function(e,t,n){const i=xF(e,n);if(i){const n=IF(i),r=n.path,s=n.queryId,o=HO(r,t);return AF(e,r,new sN(iN(s),o))}return[]}(e,n._path,i):function(e,t){return wF(e,new sN({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return yF(e,n,null,i)}}}}function TF(e,t){const n=EF(t);return e.queryToTagMap.get(n)}function EF(e){return e._path.toString()+"$"+e._queryIdentifier}function xF(e,t){return e.tagToQueryMap.get(t)}function IF(e){const t=e.indexOf("$");return(0,Fo.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new LO(e.substr(0,t))}}function AF(e,t,n){const i=e.syncPointTree_.get(t);return(0,Fo.hu)(i,"Missing sync point for query tag that we're tracking"),sF(i,n,AN(e.pendingWriteTree_,t),null)}function DF(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,Fo.hu)(iF,"Reference.ts has not been loaded"),iF)(e._repo,e._path):e}class RF{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new RF(t)}node(){return this.node_}}class OF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=zO(this.path_,e);return new OF(this.syncTree_,t)}node(){return bF(this.syncTree_,this.path_)}}const PF=function(e,t,n){return e&&"object"==typeof e?((0,Fo.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?NF(e[".sv"],t,n):"object"==typeof e[".sv"]?FF(e[".sv"],t):void(0,Fo.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},NF=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:(0,Fo.hu)(!1,"Unexpected server value: "+e)}},FF=function(e,t,n){e.hasOwnProperty("increment")||(0,Fo.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!=typeof i&&(0,Fo.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,Fo.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!=typeof s?i:s+i},LF=function(e,t,n,i){return VF(t,new OF(n,e),i)},MF=function(e,t,n){return VF(e,new RF(t),n)};function VF(e,t,n){const i=e.getPriority().val(),r=PF(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const i=e,s=PF(i.getValue(),t,n);return s!==i.getValue()||r!==i.getPriority().val()?new _P(s,IP(r)):e}{const i=e;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new _P(r))),i.forEachChild(yP,(e,i)=>{const r=VF(i,t.getImmediateChild(e),n);r!==i&&(s=s.updateImmediateChild(e,r))}),s}}class UF{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function qF(e,t){let n=t instanceof LO?t:new LO(t),i=e,r=VO(n);for(;null!==r;){const e=(0,Fo.DV)(i.node.children,r)||{children:{},childCount:0};i=new UF(r,i,e),n=qO(n),r=VO(n)}return i}function BF(e){return e.node.value}function jF(e,t){e.node.value=t,YF(e)}function ZF(e){return e.node.childCount>0}function zF(e,t){uO(e.node.children,(n,i)=>{t(new UF(n,e,i))})}function GF(e,t,n,i){n&&!i&&t(e),zF(e,e=>{GF(e,t,!0,i)}),n&&i&&t(e)}function HF(e){return new LO(null===e.parent?e.name:HF(e.parent)+"/"+e.name)}function YF(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===BF(e)&&!ZF(e)}(n),r=(0,Fo.r3)(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,YF(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,YF(e))}(e.parent,e.name,e)}const $F=/[\[\].#$\/\u0000-\u001F\u007F]/,WF=/[\[\].#$\u0000-\u001F\u007F]/,KF=function(e){return"string"==typeof e&&0!==e.length&&!$F.test(e)},QF=function(e){return"string"==typeof e&&0!==e.length&&!WF.test(e)},JF=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!nO(e)||e&&"object"==typeof e&&(0,Fo.r3)(e,".sv")},XF=function(e,t,n,i){i&&void 0===t||eL((0,Fo.gK)(e,"value"),t,n)},eL=function(e,t,n){const i=n instanceof LO?new KO(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+JO(i));if("function"==typeof t)throw new Error(e+"contains a function "+JO(i)+" with contents = "+t.toString());if(nO(t))throw new Error(e+"contains "+t.toString()+" "+JO(i));if("string"==typeof t&&t.length>10485760/3&&(0,Fo.ug)(t)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+JO(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,r=!1;if(uO(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!KF(t)))throw new Error(e+" contains an invalid key ("+t+") "+JO(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,Fo.ug)(t),QO(e)}(i,t),eL(e,s,i),function(e){const t=e.parts_.pop();e.byteLength_-=(0,Fo.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)}),n&&r)throw new Error(e+' contains ".value" child '+JO(i)+" in addition to actual children.")}},tL=function(e,t,n,i){if(i&&void 0===t)return;const r=(0,Fo.gK)(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];uO(t,(e,t)=>{const i=new LO(e);if(eL(r,t,zO(n,i)),".priority"===BO(i)&&!JF(t))throw new Error(r+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(i)}),function(e,t){let n,i;for(n=0;n<t.length;n++){i=t[n];const r=jO(i);for(let t=0;t<r.length;t++)if(".priority"===r[t]&&t===r.length-1);else if(!KF(r[t]))throw new Error(e+"contains an invalid key ("+r[t]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(YO);let r=null;for(n=0;n<t.length;n++){if(i=t[n],null!==r&&WO(r,i))throw new Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},nL=function(e,t,n){if(!n||void 0!==t){if(nO(t))throw new Error((0,Fo.gK)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!JF(t))throw new Error((0,Fo.gK)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},iL=function(e,t,n,i){if(!(i&&void 0===n||KF(n)))throw new Error((0,Fo.gK)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},rL=function(e,t,n,i){if(!(i&&void 0===n||QF(n)))throw new Error((0,Fo.gK)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},sL=function(e,t){if(".info"===VO(t))throw new Error(e+" failed = Can't modify data under /.info/")},oL=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!KF(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),QF(e)}(n))throw new Error((0,Fo.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class aL{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lL(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null===n||$O(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function cL(e,t,n){lL(e,n),hL(e,e=>$O(e,t))}function uL(e,t,n){lL(e,n),hL(e,e=>WO(e,t)||WO(t,e))}function hL(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];r&&(t(r.path)?(dL(e.eventLists_[i]),e.eventLists_[i]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function dL(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();$R&&QR("event: "+n.toString()),fO(i)}}}class pL{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new aL,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=KP(),this.transactionQueueTree_=new UF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fL(e){const t=e.infoData_.getNode(new LO(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function mL(e){return(t=(t={timestamp:fL(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function gL(e,t,n,i,r){e.dataUpdateCount++;const s=new LO(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(i){const t=(0,Fo.UI)(n,e=>IP(e));o=function(e,t,n,i){const r=xF(e,i);if(r){const i=IF(r),s=i.path,o=i.queryId,a=HO(s,t),l=_N.fromObject(n);return AF(e,s,new aN(iN(o),a,l))}return[]}(e.serverSyncTree_,s,t,r)}else{const t=IP(n);o=function(e,t,n,i){const r=xF(e,i);if(null!=r){const i=IF(r),s=i.path,o=i.queryId,a=HO(s,t);return AF(e,s,new oN(iN(o),a,n))}return[]}(e.serverSyncTree_,s,t,r)}else if(i){const t=(0,Fo.UI)(n,e=>IP(e));o=function(e,t,n){const i=_N.fromObject(n);return wF(e,new aN({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,s,t)}else{const t=IP(n);o=_F(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=AL(e,s)),uL(e.eventQueue_,a,o)}function _L(e,t){yL(e,"connected",t),!1===t&&function(e){TL(e,"onDisconnectEvents");const t=mL(e),n=KP();XP(e.onDisconnect_,MO(),(i,r)=>{const s=LF(i,r,e.serverSyncTree_,t);QP(n,i,s)});let i=[];XP(n,MO(),(t,n)=>{i=i.concat(_F(e.serverSyncTree_,t,n));const r=NL(e,t);AL(e,r)}),e.onDisconnect_=KP(),uL(e.eventQueue_,MO(),i)}(e)}function yL(e,t,n){const i=new LO("/.info/"+t),r=IP(n);e.infoData_.updateSnapshot(i,r);const s=_F(e.infoSyncTree_,i,r);uL(e.eventQueue_,i,s)}function vL(e){return e.nextWriteId_++}function bL(e,t,n,i,r){TL(e,"set",{path:t.toString(),value:n,priority:i});const s=mL(e),o=IP(n,i),a=bF(e.serverSyncTree_,t),l=MF(o,a,s),c=vL(e),u=mF(e.serverSyncTree_,t,l,c,!0);lL(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,i)=>{const s="ok"===n;s||tO("set at "+t+" failed: "+n);const o=gF(e.serverSyncTree_,c,!s);uL(e.eventQueue_,t,o),EL(0,r,n,i)});const h=NL(e,t);AL(e,h),uL(e.eventQueue_,h,[])}function wL(e,t,n){e.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&JP(e.onDisconnect_,t),EL(0,n,i,r)})}function CL(e,t,n,i){const r=IP(n);e.server_.onDisconnectPut(t.toString(),r.val(!0),(n,s)=>{"ok"===n&&QP(e.onDisconnect_,t,r),EL(0,i,n,s)})}function SL(e,t,n){let i;i=".info"===VO(t._path)?yF(e.infoSyncTree_,t,n):yF(e.serverSyncTree_,t,n),cL(e.eventQueue_,t._path,i)}function kL(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}function TL(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),QR(n,...t)}function EL(e,t,n,i){t&&fO(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let r=e;i&&(r+=": "+i);const s=new Error(r);s.code=e,t(s)}})}function xL(e,t,n){return bF(e.serverSyncTree_,t,n)||EP.EMPTY_NODE}function IL(e,t=e.transactionQueueTree_){if(t||PL(e,t),BF(t)){const n=RL(e,t);(0,Fo.hu)(n.length>0,"Sending zero length transaction queue"),n.every(e=>0===e.status)&&function(e,t,n){const i=n.map(e=>e.currentWriteId),r=xL(e,t,i);let s=r;const o=r.hash();for(let c=0;c<n.length;c++){const e=n[c];(0,Fo.hu)(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const i=HO(t,e.path);s=s.updateChild(i,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,i=>{TL(e,"transaction put response",{path:l.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(gF(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();PL(e,qF(e.transactionQueueTree_,t)),IL(e,e.transactionQueueTree_),uL(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)fO(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)n[e].status=3===n[e].status?4:0;else{tO("transaction at "+l.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}AL(e,t)}},o)}(e,HF(t),n)}else ZF(t)&&zF(t,t=>{IL(e,t)})}function AL(e,t){const n=DL(e,t),i=HF(n);return function(e,t,n){if(0===t.length)return;const i=[];let r=[];const s=t.filter(e=>0===e.status).map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){const a=t[o],l=HO(n,a.path);let c,u=!1;if((0,Fo.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)u=!0,c=a.abortReason,r=r.concat(gF(e.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status)if(a.retryCount>=25)u=!0,c="maxretry",r=r.concat(gF(e.serverSyncTree_,a.currentWriteId,!0));else{const n=xL(e,a.path,s);a.currentInputSnapshot=n;const i=t[o].update(n.val());if(void 0!==i){eL("transaction failed: Data returned ",i,a.path);let t=IP(i);"object"==typeof i&&null!=i&&(0,Fo.r3)(i,".priority")||(t=t.updatePriority(n.getPriority()));const o=a.currentWriteId,l=mL(e),c=MF(t,n,l);a.currentOutputSnapshotRaw=t,a.currentOutputSnapshotResolved=c,a.currentWriteId=vL(e),s.splice(s.indexOf(o),1),r=r.concat(mF(e.serverSyncTree_,a.path,c,a.currentWriteId,a.applyLocally)),r=r.concat(gF(e.serverSyncTree_,o,!0))}else u=!0,c="nodata",r=r.concat(gF(e.serverSyncTree_,a.currentWriteId,!0))}uL(e.eventQueue_,n,r),r=[],u&&(t[o].status=2,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete&&i.push("nodata"===c?()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot):()=>t[o].onComplete(new Error(c),!1,null)))}PL(e,e.transactionQueueTree_);for(let o=0;o<i.length;o++)fO(i[o]);IL(e,e.transactionQueueTree_)}(e,RL(e,n),i),i}function DL(e,t){let n,i=e.transactionQueueTree_;for(n=VO(t);null!==n&&void 0===BF(i);)i=qF(i,n),n=VO(t=qO(t));return i}function RL(e,t){const n=[];return OL(e,t,n),n.sort((e,t)=>e.order-t.order),n}function OL(e,t,n){const i=BF(t);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);zF(t,t=>{OL(e,t,n)})}function PL(e,t){const n=BF(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,jF(t,n.length>0?n:void 0)}zF(t,t=>{PL(e,t)})}function NL(e,t){const n=HF(DL(e,t)),i=qF(e.transactionQueueTree_,t);return function(e,t,n){let i=e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,t=>{FL(e,t)}),FL(e,i),GF(i,t=>{FL(e,t)}),n}function FL(e,t){const n=BF(t);if(n){const i=[];let r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,Fo.hu)(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):((0,Fo.hu)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(gF(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?jF(t,void 0):n.length=s+1,uL(e.eventQueue_,HF(t),r);for(let e=0;e<i.length;e++)fO(i[e])}}const LL=function(e,t){const n=ML(e),i=n.namespace;return"firebase.com"===n.domain&&eO(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||eO("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&tO("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new bO(n.host,n.secure,i,t,"ws"===n.scheme||"wss"===n.scheme,"",i!==n.subdomain),path:new LO(n.pathString)}},ML=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(r=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(i){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):tO(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};class VL{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Fo.Pz)(this.snapshot.exportVal())}}class UL{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qL{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,Fo.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class BL{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Fo.BH;return wL(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){sL("OnDisconnect.remove",this._path);const e=new Fo.BH;return CL(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){sL("OnDisconnect.set",this._path),XF("OnDisconnect.set",e,this._path,!1);const t=new Fo.BH;return CL(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){sL("OnDisconnect.setWithPriority",this._path),XF("OnDisconnect.setWithPriority",e,this._path,!1),nL("OnDisconnect.setWithPriority",t,!1);const n=new Fo.BH;return function(e,t,n,i,r){const s=IP(n,i);e.server_.onDisconnectPut(t.toString(),s.val(!0),(n,i)=>{"ok"===n&&QP(e.onDisconnect_,t,s),EL(0,r,n,i)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){sL("OnDisconnect.update",this._path),tL("OnDisconnect.update",e,this._path,!1);const t=new Fo.BH;return function(e,t,n,i){if((0,Fo.xb)(n))return QR("onDisconnect().update() called with empty data.  Don't do anything."),void EL(0,i,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(r,s)=>{"ok"===r&&uO(n,(n,i)=>{const r=IP(i);QP(e.onDisconnect_,zO(t,n),r)}),EL(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class jL{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return GO(this._path)?null:BO(this._path)}get ref(){return new HL(this._repo,this._path)}get _queryIdentifier(){const e=YP(this._queryParams),t=lO(e);return"{}"===t?"default":t}get _queryObject(){return YP(this._queryParams)}isEqual(e){if(!((e=(0,Fo.m9)(e))instanceof jL))return!1;const t=this._repo===e._repo,n=$O(this._path,e._path);return t&&n&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function ZL(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function zL(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===sP){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==iO)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(e.hasEnd()){if(e.getIndexEndName()!==rO)throw new Error(i);if("string"!=typeof n)throw new Error(r)}}else if(e.getIndex()===yP){if(null!=t&&!JF(t)||null!=n&&!JF(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Fo.hu)(e.getIndex()instanceof AP||e.getIndex()===DP,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function GL(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class HL extends jL{constructor(e,t){super(e,t,new jP,!1)}get parent(){const e=ZO(this._path);return null===e?null:new HL(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class YL{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new LO(e),n=KL(this.ref,e);return new YL(this._node.getChild(t),n,yP)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(t,n)=>e(new YL(n,KL(this.ref,t),yP)))}hasChild(e){const t=new LO(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function $L(e,t){return(e=(0,Fo.m9)(e))._checkNotDeleted("ref"),void 0!==t?KL(e._root,t):e._root}function WL(e,t){(e=(0,Fo.m9)(e))._checkNotDeleted("refFromURL");const n=LL(t,e._repo.repoInfo_.nodeAdmin);oL("refFromURL",n);const i=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||i.host===e._repo.repoInfo_.host||eO("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+e._repo.repoInfo_.host+")"),$L(e,n.path.toString())}function KL(e,t){var n;return null===VO((e=(0,Fo.m9)(e))._path)?((n=t)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),rL("child","path",n,!1)):rL("child","path",t,!1),new HL(e._repo,zO(e._path,t))}function QL(e,t){e=(0,Fo.m9)(e),sL("set",e._path),XF("set",t,e._path,!1);const n=new Fo.BH;return bL(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}class JL{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new VL("value",this,new YL(e.snapshotNode,new HL(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new UL(this,e,t):null}matches(e){return e instanceof JL&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class XL{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new UL(this,e,t):null}createEvent(e,t){(0,Fo.hu)(null!=e.childName,"Child events should have a childName.");const n=KL(new HL(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new VL(e.type,this,new YL(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof XL&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function eM(e,t,n,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const t=n,i=(n,i)=>{SL(e._repo,e,a),t(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}const o=new qL(n,s||void 0),a="value"===t?new JL(o):new XL(t,o);return function(e,t,n){let i;i=".info"===VO(t._path)?vF(e.infoSyncTree_,t,n):vF(e.serverSyncTree_,t,n),cL(e.eventQueue_,t._path,i)}(e._repo,e,a),()=>SL(e._repo,e,a)}function tM(e,t,n,i){return eM(e,"value",t,n,i)}function nM(e,t,n,i){return eM(e,"child_added",t,n,i)}function iM(e,t,n,i){return eM(e,"child_changed",t,n,i)}function rM(e,t,n,i){return eM(e,"child_moved",t,n,i)}function sM(e,t,n,i){return eM(e,"child_removed",t,n,i)}function oM(e,t,n){let i=null;const r=n?new qL(n):null;"value"===t?i=new JL(r):t&&(i=new XL(t,r)),SL(e._repo,e,i)}class aM{}class lM extends aM{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){XF("endAt",this._value,e._path,!0);const t=zP(e._queryParams,this._value,this._key);if(GL(t),zL(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jL(e._repo,e._path,t,e._orderByCalled)}}class cM extends aM{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){XF("endBefore",this._value,e._path,!1);const t=function(e,t,n){let i,r;return e.index_===sP?("string"==typeof t&&(t=NP(t)),r=zP(e,t,n)):(i=null==n?iO:NP(n),r=zP(e,t,i)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(GL(t),zL(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jL(e._repo,e._path,t,e._orderByCalled)}}class uM extends aM{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){XF("startAt",this._value,e._path,!0);const t=ZP(e._queryParams,this._value,this._key);if(GL(t),zL(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new jL(e._repo,e._path,t,e._orderByCalled)}}class hM extends aM{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){XF("startAfter",this._value,e._path,!1);const t=function(e,t,n){let i;if(e.index_===sP)"string"==typeof t&&(t=PP(t)),i=ZP(e,t,n);else{let r;r=null==n?rO:PP(n),i=ZP(e,t,r)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(GL(t),zL(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new jL(e._repo,e._path,t,e._orderByCalled)}}class dM extends aM{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new jL(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class pM extends aM{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new jL(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class fM extends aM{constructor(e){super(),this._path=e}_apply(e){ZL(e,"orderByChild");const t=new LO(this._path);if(GO(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new AP(t),i=GP(e._queryParams,n);return zL(i),new jL(e._repo,e._path,i,!0)}}class mM extends aM{_apply(e){ZL(e,"orderByKey");const t=GP(e._queryParams,sP);return zL(t),new jL(e._repo,e._path,t,!0)}}class gM extends aM{_apply(e){ZL(e,"orderByPriority");const t=GP(e._queryParams,yP);return zL(t),new jL(e._repo,e._path,t,!0)}}class _M extends aM{_apply(e){ZL(e,"orderByValue");const t=GP(e._queryParams,DP);return zL(t),new jL(e._repo,e._path,t,!0)}}class yM extends aM{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(XF("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new lM(this._value,this._key)._apply(new uM(this._value,this._key)._apply(e))}}function vM(e,...t){let n=(0,Fo.m9)(e);for(const i of t)n=i._apply(n);return n}!function(e){(0,Fo.hu)(!nF,"__referenceConstructor has already been defined"),nF=e}(HL),function(e){(0,Fo.hu)(!iF,"__referenceConstructor has already been defined"),iF=e}(HL);const bM={};function wM(e,t,n,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||eO("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),QR("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=LL(s,r),c=l.repoInfo;"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,l=LL(s,r),c=l.repoInfo):o=!l.repoInfo.secure;const u=r&&o?new yO(yO.OWNER):new _O(e.name,e.options,t);oL("Invalid Firebase Database URL",l),GO(l.path)||eO("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,i){let r=bM[t.name];r||(r={},bM[t.name]=r);let s=r[e.toURLString()];return s&&eO("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new pL(e,!1,n,i),r[e.toURLString()]=s,s}(c,e,u,new gO(e.name,n));return new CM(h,e)}class CM{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(e,t,n){if(e.stats_=TO(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new $P(e.repoInfo_,(t,n,i,r)=>{gL(e,t,n,i,r)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>_L(e,!0),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Fo.Pz)(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new tP(e.repoInfo_,t,(t,n,i,r)=>{gL(e,t,n,i,r)},t=>{_L(e,t)},t=>{!function(e,t){uO(t,(t,n)=>{yL(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(t,n){const i=t.toString();return kO[i]||(kO[i]=new tN(e.stats_,e.server_)),kO[i]}(e.repoInfo_),e.infoData_=new WP,e.infoSyncTree_=new fF({startListening:(t,n,i,r)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=_F(e.infoSyncTree_,t._path,o),setTimeout(()=>{r("ok")},0)),s},stopListening:()=>{}}),yL(e,"connected",!1),e.serverSyncTree_=new fF({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,(n,i)=>{const s=r(n,i);uL(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new HL(this._repo,MO())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=bM[t];n&&n[e.key]===e||eO(`Database ${t}(${e.repoInfo_}) has already been deleted.`),kL(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&eO("Cannot call "+e+" on a deleted database.")}}function SM(e,t){KR(e,t)}class kM{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}tP.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},tP.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},VR(Lo.SDK_VERSION),(0,Lo._registerComponent)(new Vo.wA("database",(e,{instanceIdentifier:t})=>wM(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Lo.registerVersion)("@firebase/database","0.12.7",void 0),(0,Lo.registerVersion)("@firebase/database","0.12.7","esm2017");const TM=new Mo.Yd("@firebase/database-compat"),EM=function(e){TM.warn("FIREBASE WARNING: "+e)};class xM{constructor(e){this._delegate=e}cancel(e){(0,Fo.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Fo.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),t=>e(t)),t}remove(e){(0,Fo.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Fo.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),t=>e(t)),t}set(e,t){(0,Fo.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Fo.Wj)("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){(0,Fo.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Fo.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);const i=this._delegate.setWithPriority(e,t);return n&&i.then(()=>n(null),e=>n(e)),i}update(e,t){if((0,Fo.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,EM("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Fo.Wj)("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then(()=>t(null),e=>t(e)),n}}class IM{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,Fo.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class AM{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,Fo.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Fo.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Fo.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Fo.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,Fo.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),rL("DataSnapshot.child","path",e,!1),new AM(this._database,this._delegate.child(e))}hasChild(e){return(0,Fo.Dv)("DataSnapshot.hasChild",1,1,arguments.length),rL("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,Fo.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,Fo.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Fo.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new AM(this._database,t)))}hasChildren(){return(0,Fo.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Fo.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Fo.Dv)("DataSnapshot.ref",0,0,arguments.length),new RM(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class DM{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,i){var r;(0,Fo.Dv)("Query.on",2,4,arguments.length),(0,Fo.Wj)("Query.on","callback",t,!1);const s=DM.getCancelAndContextArgs_("Query.on",n,i),o=(e,n)=>{t.call(s.context,new AM(this.database,e),n)};o.userCallback=t,o.context=s.context;const a=null===(r=s.cancel)||void 0===r?void 0:r.bind(s.context);switch(e){case"value":return tM(this._delegate,o,a),t;case"child_added":return nM(this._delegate,o,a),t;case"child_removed":return sM(this._delegate,o,a),t;case"child_changed":return iM(this._delegate,o,a),t;case"child_moved":return rM(this._delegate,o,a),t;default:throw new Error((0,Fo.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if((0,Fo.Dv)("Query.off",0,3,arguments.length),function(e,t,n){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Fo.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,Fo.Wj)("Query.off","callback",t,!0),(0,Fo.lb)("Query.off","context",n,!0),t){const i=()=>{};i.userCallback=t,i.context=n,oM(this._delegate,e,i)}else oM(this._delegate,e)}get(){return function(e){return function(e,t){const n=function(e,t){const n=t._path;let i=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{const r=HO(e,n);i=i||lF(t,r)});let r=e.syncPointTree_.get(n);r?i=i||lF(r,MO()):(r=new rF,e.syncPointTree_=e.syncPointTree_.set(n,r));const s=null!=i,o=s?new lN(i,!0,!1):null;return fN(oF(r,t,AN(e.pendingWriteTree_,t._path),s?o.getNode():EP.EMPTY_NODE,s).viewCache_)}(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then(n=>{const i=IP(n).withIndex(t._queryParams.getIndex()),r=_F(e.serverSyncTree_,t._path,i);return cL(e.eventQueue_,t._path,r),Promise.resolve(i)},n=>(TL(e,"get for query "+(0,Fo.Pz)(t)+" failed: "+n),Promise.reject(new Error(n))))}((e=(0,Fo.m9)(e))._repo,e).then(t=>new YL(t,new HL(e._repo,e._path),e._queryParams.getIndex()))}(this._delegate).then(e=>new AM(this.database,e))}once(e,t,n,i){(0,Fo.Dv)("Query.once",1,4,arguments.length),(0,Fo.Wj)("Query.once","callback",t,!0);const r=DM.getCancelAndContextArgs_("Query.once",n,i),s=new Fo.BH,o=(e,n)=>{const i=new AM(this.database,e);t&&t.call(r.context,i,n),s.resolve(i)};o.userCallback=t,o.context=r.context;const a=e=>{r.cancel&&r.cancel.call(r.context,e),s.reject(e)};switch(e){case"value":tM(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":nM(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":sM(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":iM(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":rM(this._delegate,o,a,{onlyOnce:!0});break;default:throw new Error((0,Fo.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return(0,Fo.Dv)("Query.limitToFirst",1,1,arguments.length),new DM(this.database,vM(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new dM(e)}(e)))}limitToLast(e){return(0,Fo.Dv)("Query.limitToLast",1,1,arguments.length),new DM(this.database,vM(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new pM(e)}(e)))}orderByChild(e){return(0,Fo.Dv)("Query.orderByChild",1,1,arguments.length),new DM(this.database,vM(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return rL("orderByChild","path",e,!1),new fM(e)}(e)))}orderByKey(){return(0,Fo.Dv)("Query.orderByKey",0,0,arguments.length),new DM(this.database,vM(this._delegate,new mM))}orderByPriority(){return(0,Fo.Dv)("Query.orderByPriority",0,0,arguments.length),new DM(this.database,vM(this._delegate,new gM))}orderByValue(){return(0,Fo.Dv)("Query.orderByValue",0,0,arguments.length),new DM(this.database,vM(this._delegate,new _M))}startAt(e=null,t){return(0,Fo.Dv)("Query.startAt",0,2,arguments.length),new DM(this.database,vM(this._delegate,function(e=null,t){return iL("startAt","key",t,!0),new uM(e,t)}(e,t)))}startAfter(e=null,t){return(0,Fo.Dv)("Query.startAfter",0,2,arguments.length),new DM(this.database,vM(this._delegate,function(e,t){return iL("startAfter","key",t,!0),new hM(e,t)}(e,t)))}endAt(e=null,t){return(0,Fo.Dv)("Query.endAt",0,2,arguments.length),new DM(this.database,vM(this._delegate,function(e,t){return iL("endAt","key",t,!0),new lM(e,t)}(e,t)))}endBefore(e=null,t){return(0,Fo.Dv)("Query.endBefore",0,2,arguments.length),new DM(this.database,vM(this._delegate,function(e,t){return iL("endBefore","key",t,!0),new cM(e,t)}(e,t)))}equalTo(e,t){return(0,Fo.Dv)("Query.equalTo",1,2,arguments.length),new DM(this.database,vM(this._delegate,function(e,t){return iL("equalTo","key",t,!0),new yM(e,t)}(e,t)))}toString(){return(0,Fo.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Fo.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,Fo.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof DM))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const i={cancel:void 0,context:void 0};if(t&&n)i.cancel=t,(0,Fo.Wj)(e,"cancel",i.cancel,!0),i.context=n,(0,Fo.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,Fo.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new RM(this.database,new HL(this._delegate._repo,this._delegate._path))}}class RM extends DM{constructor(e,t){super(e,new jL(t._repo,t._path,new jP,!1)),this.database=e,this._delegate=t}getKey(){return(0,Fo.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,Fo.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new RM(this.database,KL(this._delegate,e))}getParent(){(0,Fo.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new RM(this.database,e):null}getRoot(){return(0,Fo.Dv)("Reference.root",0,0,arguments.length),new RM(this.database,this._delegate.root)}set(e,t){(0,Fo.Dv)("Reference.set",1,2,arguments.length),(0,Fo.Wj)("Reference.set","onComplete",t,!0);const n=QL(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}update(e,t){if((0,Fo.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,EM("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}sL("Reference.update",this._delegate._path),(0,Fo.Wj)("Reference.update","onComplete",t,!0);const n=function(e,t){tL("update",t,e._path,!1);const n=new Fo.BH;return function(e,t,n,i){TL(e,"update",{path:t.toString(),value:n});let r=!0;const s=mL(e),o={};if(uO(n,(n,i)=>{r=!1,o[n]=LF(zO(t,n),IP(i),e.serverSyncTree_,s)}),r)QR("update() called with empty data.  Don't do anything."),EL(0,i,"ok",void 0);else{const r=vL(e),s=function(e,t,n,i){!function(e,t,n,i){(0,Fo.hu)(i>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:i,visible:!0}),e.visibleWrites=bN(e.visibleWrites,t,n),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i);const r=_N.fromObject(n);return wF(e,new aN({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,t,o,r);lL(e.eventQueue_,s),e.server_.merge(t.toString(),n,(n,s)=>{const o="ok"===n;o||tO("update at "+t+" failed: "+n);const a=gF(e.serverSyncTree_,r,!o),l=a.length>0?AL(e,t):t;uL(e.eventQueue_,l,a),EL(0,i,n,s)}),uO(n,n=>{const i=NL(e,zO(t,n));AL(e,i)}),uL(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){(0,Fo.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Fo.Wj)("Reference.setWithPriority","onComplete",n,!0);const i=function(e,t,n){if(sL("setWithPriority",e._path),XF("setWithPriority",t,e._path,!1),nL("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const i=new Fo.BH;return bL(e._repo,e._path,t,n,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return n&&i.then(()=>n(null),e=>n(e)),i}remove(e){(0,Fo.Dv)("Reference.remove",0,1,arguments.length),(0,Fo.Wj)("Reference.remove","onComplete",e,!0);const t=function(e){return sL("remove",e._path),QL(e,null)}(this._delegate);return e&&t.then(()=>e(null),t=>e(t)),t}transaction(e,t,n){(0,Fo.Dv)("Reference.transaction",1,3,arguments.length),(0,Fo.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,Fo.Wj)("Reference.transaction","onComplete",t,!0),function(e,t,n,i){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,Fo.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n);const i=function(e,t,n){var i;if(e=(0,Fo.m9)(e),sL("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const r=null===(i=null==n?void 0:n.applyLocally)||void 0===i||i,s=new Fo.BH,o=tM(e,()=>{});return function(t,n,i,r,o,a){TL(t,"transaction on "+n);const l={path:n,update:i,onComplete:(t,n,i)=>{let r=null;t?s.reject(t):(r=new YL(i,new HL(e._repo,e._path),yP),s.resolve(new kM(n,r)))},status:null,order:GR(),applyLocally:a,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=xL(t,n,void 0);l.currentInputSnapshot=c;const u=l.update(c.val());if(void 0===u)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{eL("transaction failed: Data returned ",u,l.path),l.status=0;const e=qF(t.transactionQueueTree_,n),i=BF(e)||[];let r;i.push(l),jF(e,i),"object"==typeof u&&null!==u&&(0,Fo.r3)(u,".priority")?(r=(0,Fo.DV)(u,".priority"),(0,Fo.hu)(JF(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):r=(bF(t.serverSyncTree_,n)||EP.EMPTY_NODE).getPriority().val();const s=mL(t),o=IP(u,r),a=MF(o,c,s);l.currentOutputSnapshotRaw=o,l.currentOutputSnapshotResolved=a,l.currentWriteId=vL(t);const h=mF(t.serverSyncTree_,n,a,l.currentWriteId,l.applyLocally);uL(t.eventQueue_,n,h),IL(t,t.transactionQueueTree_)}}(e._repo,e._path,t,0,o,r),s.promise}(this._delegate,e,{applyLocally:n}).then(e=>new IM(e.committed,new AM(this.database,e.snapshot)));return t&&i.then(e=>t(null,e.committed,e.snapshot),e=>t(e,!1,null)),i}setPriority(e,t){(0,Fo.Dv)("Reference.setPriority",1,2,arguments.length),(0,Fo.Wj)("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=(0,Fo.m9)(e),sL("setPriority",e._path),nL("setPriority",t,!1);const n=new Fo.BH;return bL(e._repo,zO(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}push(e,t){(0,Fo.Dv)("Reference.push",0,2,arguments.length),(0,Fo.Wj)("Reference.push","onComplete",t,!0);const n=function(e,t){e=(0,Fo.m9)(e),sL("push",e._path),XF("push",t,e._path,!0);const n=fL(e._repo),i=OP(n),r=KL(e,i),s=KL(e,i);let o;return o=null!=t?QL(s,t).then(()=>s):Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}(this._delegate,e),i=n.then(e=>new RM(this.database,e));t&&i.then(()=>t(null),e=>t(e));const r=new RM(this.database,n);return r.then=i.then.bind(i),r.catch=i.catch.bind(i,void 0),r}onDisconnect(){return sL("Reference.onDisconnect",this._delegate._path),new xM(new BL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class OM{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,n={}){!function(e,t,n,i={}){(e=(0,Fo.m9)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&eO("Cannot call useEmulator() after instance has already been initialized.");const r=e._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&eO('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new yO(yO.OWNER);else if(i.mockUserToken){const t="string"==typeof i.mockUserToken?i.mockUserToken:(0,Fo.Sg)(i.mockUserToken,e.app.options.projectId);s=new yO(t)}!function(e,t,n,i){e.repoInfo_=new bO(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),i&&(e.authTokenProvider_=i)}(r,t,n,s)}(this._delegate,e,t,n)}ref(e){if((0,Fo.Dv)("database.ref",0,1,arguments.length),e instanceof RM){const t=WL(this._delegate,e.toString());return new RM(this,t)}{const t=$L(this._delegate,e);return new RM(this,t)}}refFromURL(e){(0,Fo.Dv)("database.refFromURL",1,1,arguments.length);const t=WL(this._delegate,e);return new RM(this,t)}goOffline(){return(0,Fo.Dv)("database.goOffline",0,0,arguments.length),function(e){(e=(0,Fo.m9)(e))._checkNotDeleted("goOffline"),kL(e._repo)}(this._delegate)}goOnline(){return(0,Fo.Dv)("database.goOnline",0,0,arguments.length),function(e){var t;(e=(0,Fo.m9)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume("repo_interrupt")}(this._delegate)}}OM.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:e=>function(e){return{".sv":{increment:e}}}(e)};var PM=Object.freeze({__proto__:null,initStandalone:function({app:e,url:t,version:n,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){VR(n);const o=new Vo.zt("auth-internal",new Vo.H0("database-standalone"));return o.setComponent(new Vo.wA("auth-internal",()=>i,"PRIVATE")),{instance:new OM(wM(e,o,void 0,t,s),e),namespace:r}}});const NM=OM.ServerValue;function FM(e){return null==e}function LM(e){return"function"==typeof e.set}function MM(e,t){return LM(t)?t:e.ref(t)}function VM(e,t){if("string"==typeof e)return t.stringCase();if(LM(e))return t.firebaseCase();if("function"==typeof e.exportVal)return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof e)}function UM(e,t,n="on",i=Uo.z){return new bt.y(r=>{let s=null;return s=e[n](t,(e,t)=>{i.schedule(()=>{r.next({snapshot:e,prevKey:t})}),"once"===n&&i.schedule(()=>r.complete())},e=>{i.schedule(()=>r.error(e))}),"on"===n?{unsubscribe(){null!=s&&e.off(t,s)}}:{unsubscribe(){}}}).pipe((0,Pt.U)(e=>{const{snapshot:n,prevKey:i}=e;let r=null;return n.exists()&&(r=n.key),{type:t,payload:n,prevKey:i,key:r}}),(0,OR.B)())}function qM(e,t){const n=e.length;for(let i=0;i<n;i++)if(e[i].payload.key===t)return i;return-1}function BM(e,t){const{payload:n,prevKey:i,key:r}=t,s=qM(e,r),o=function(e,t){if(FM(t))return 0;{const n=qM(e,t);return-1===n?e.length:n+1}}(e,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let n=null;t.payload.forEach(t=>{const i={payload:t,type:"value",prevKey:n,key:t.key};return n=t.key,e=[...e,i],!1})}return e;case"child_added":if(s>-1){const r=e[s-1];(r&&r.key||null)!==i&&(e=e.filter(e=>e.payload.key!==n.key)).splice(o,0,t)}else{if(null==i)return[t,...e];(e=e.slice()).splice(o,0,t)}return e;case"child_removed":return e.filter(e=>e.payload.key!==n.key);case"child_changed":return e.map(e=>e.payload.key===r?t:e);case"child_moved":if(s>-1){const t=e.splice(s,1)[0];return(e=e.slice()).splice(o,0,t),e}return e;default:return e}}function jM(e){return(FM(e)||0===e.length)&&(e=["child_added","child_removed","child_changed","child_moved"]),e}function ZM(e,t,n){return function(e,t,n){return UM(e,"value","once",n).pipe(Ft(i=>{const r=[(0,ut.of)(i)];return t.forEach(t=>r.push(UM(e,t,"on",n))),(0,JC.T)(...r).pipe(Zt(BM,[]))}),zo())}(e,t=jM(t),n)}function zM(e,t,n){const i=(t=jM(t)).map(t=>UM(e,t,"on",n));return(0,JC.T)(...i)}function GM(e,t){return function(n,i){return VM(n,{stringCase:()=>e.child(n)[t](i),firebaseCase:()=>n[t](i),snapshotCase:()=>n.ref[t](i)})}}function HM(e){return function(t){return t?VM(t,{stringCase:()=>e.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):e.remove()}}function YM(e,t){return function(){return UM(e,"value","on",t)}}!function(e){e.INTERNAL.registerComponent(new Vo.wA("database-compat",(e,{instanceIdentifier:t})=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new OM(i,n)},"PUBLIC").setServiceProps({Reference:RM,Query:DM,Database:OM,DataSnapshot:AM,enableLogging:SM,INTERNAL:PM,ServerValue:NM}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.1.7")}(Wo.Z);const $M=new i.OlP("angularfire2.realtimeDatabaseURL"),WM=new i.OlP("angularfire2.database.use-emulator");let KM=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l,c,u,h,d,p,f){this.schedulers=s;const m=o,g=(0,$o.on)(e,r,t);a&&GS(g,r,l,u,h,d,c,p),this.database=(0,$o.cc)(`${g.name}.database.${n}`,"AngularFireDatabase",g.name,()=>{const e=r.runOutsideAngular(()=>g.database(n||void 0));return m&&e.useEmulator(...m),e},[m])}list(e,t){const n=this.schedulers.ngZone.runOutsideAngular(()=>MM(this.database,e));let i=n;return t&&(i=t(n)),function(e,t){const n=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>e.ref);return{query:e,update:GM(i,"update"),set:GM(i,"set"),push:e=>i.push(e),remove:HM(i),snapshotChanges:t=>ZM(e,t,n).pipe(qo.iC),stateChanges:t=>zM(e,t,n).pipe(qo.iC),auditTrail:t=>function(e,t,n){return function(e,t,n){return function(e,t){return UM(e,"value","on",t).pipe((0,Pt.U)(e=>{let t;return e.payload.forEach(e=>(t=e.key,!1)),{data:e,lastKeyToLoad:t}}))}(e,n).pipe(function(...e){return t=>{let n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new PR(e,n))}}(t),(0,Pt.U)(([e,t])=>{const n=e.lastKeyToLoad,i=t.map(e=>e.key);return{actions:t,lastKeyToLoad:n,loadedKeys:i}}),(i=e=>-1===e.loadedKeys.indexOf(e.lastKeyToLoad),e=>e.lift(new FR(i))),(0,Pt.U)(e=>e.actions));var i}(e,zM(e,t).pipe(Zt((e,t)=>[...e,t],[])),n)}(e,t,n).pipe(qo.iC),valueChanges:(t,i)=>ZM(e,t,n).pipe((0,Pt.U)(e=>e.map(e=>i&&i.idField?Object.assign(Object.assign({},e.payload.val()),{[i.idField]:e.key}):e.payload.val())),qo.iC)}}(i,this)}object(e){return function(e,t){return{query:e,snapshotChanges:()=>YM(e,t.schedulers.outsideAngular)().pipe(qo.iC),update:t=>e.ref.update(t),set:t=>e.ref.set(t),remove:()=>e.ref.remove(),valueChanges:()=>YM(e,t.schedulers.outsideAngular)().pipe(qo.iC,(0,Pt.U)(e=>e.payload.exists()?e.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>MM(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return e.\u0275fac=function(t){return new(t||e)(i.LFG($o.Dh),i.LFG($o.xv,8),i.LFG($M,8),i.LFG(i.Lbi),i.LFG(i.R0b),i.LFG(qo.HU),i.LFG(WM,8),i.LFG(HS,8),i.LFG(US,8),i.LFG(qS,8),i.LFG(BS,8),i.LFG(jS,8),i.LFG(ZS,8),i.LFG(zS,8),i.LFG(MS,8))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),QM=(()=>{class e{constructor(){VS.Z.registerVersion("angularfire",qo.q4.full,"rtdb-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[KM]}),e})(),JM=(()=>{class e{constructor(e){this.db=e,this.contactsRef$=e.list("Contact"),this.favoritesRef$=e.list("Favorites")}getAll(){return this.contactsRef$}getFavorites(){return this.favoritesRef$}search(){}addToFavorites(e,t){let n={name:e.name,lastName:e.lastName,value:e.value,type:e.type,birthday:e.birthday},i=t.find(t=>t.name===e.name&&t.lastName===e.lastName&&t.value===e.value);i?this.removeFromFavorites(i.key||""):this.createFavorite(n)}createFavorite(e){return this.favoritesRef$.push(e)}removeFromFavorites(e){return this.favoritesRef$.remove(e)}create(e){return this.contactsRef$.push(e)}update(e,t){return this.contactsRef$.update(e,t)}delete(e){return this.contactsRef$.remove(e)}deleteAll(){return this.contactsRef$.remove()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(KM))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var XM=n(205);class eV{}class tV{}class nV{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),i=n.toLowerCase(),r=e.slice(t+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const i=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof nV?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new nV;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof nV?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...n),this.headers.set(t,i);break;case"d":const r=e.value;if(r){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===r.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class iV{encodeKey(e){return rV(e)}encodeValue(e){return rV(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function rV(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function sV(e){return`${e}`}class oV{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new iV,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(e=>{const i=e.indexOf("="),[r,s]=-1==i?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,i)),t.decodeValue(e.slice(i+1))],o=n.get(r)||[];o.push(s),n.set(r,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const i=e[n];Array.isArray(i)?i.forEach(e=>{t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new oV({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(sV(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(sV(e.value));-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class aV{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function lV(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function cV(e){return"undefined"!=typeof Blob&&e instanceof Blob}function uV(e){return"undefined"!=typeof FormData&&e instanceof FormData}class hV{constructor(e,t,n,i){let r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new nV),this.context||(this.context=new aV),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new oV,this.urlWithParams=t}serializeBody(){return null===this.body?null:lV(this.body)||cV(this.body)||uV(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof oV?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||uV(this.body)?null:cV(this.body)?this.body.type||null:lV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof oV?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),c)),new hV(n,i,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var dV=(()=>((dV=dV||{})[dV.Sent=0]="Sent",dV[dV.UploadProgress=1]="UploadProgress",dV[dV.ResponseHeader=2]="ResponseHeader",dV[dV.DownloadProgress=3]="DownloadProgress",dV[dV.Response=4]="Response",dV[dV.User=5]="User",dV))();class pV{constructor(e,t=200,n="OK"){this.headers=e.headers||new nV,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class fV extends pV{constructor(e={}){super(e),this.type=dV.ResponseHeader}clone(e={}){return new fV({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class mV extends pV{constructor(e={}){super(e),this.type=dV.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new mV({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class gV extends pV{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function _V(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let yV=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let i;if(e instanceof hV)i=e;else{let r,s;r=n.headers instanceof nV?n.headers:new nV(n.headers),n.params&&(s=n.params instanceof oV?n.params:new oV({fromObject:n.params})),i=new hV(e,t,void 0!==n.body?n.body:null,{headers:r,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=(0,ut.of)(i).pipe(Xt(e=>this.handler.handle(e)));if(e instanceof hV||"events"===n.observe)return r;const s=r.pipe(Ht(e=>e instanceof mV));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return s.pipe((0,Pt.U)(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe((0,Pt.U)(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe((0,Pt.U)(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe((0,Pt.U)(e=>e.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new oV).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,_V(n,t))}post(e,t,n={}){return this.request("POST",e,_V(n,t))}put(e,t,n={}){return this.request("PUT",e,_V(n,t))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(eV))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class vV{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const bV=new i.OlP("HTTP_INTERCEPTORS");let wV=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const CV=/^\)\]\}',?\n/;let SV=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new bt.y(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const i=e.serializeBody();let r=null;const s=()=>{if(null!==r)return r;const t=1223===n.status?204:n.status,i=n.statusText||"OK",s=new nV(n.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return r=new fV({headers:s,status:t,statusText:i,url:o}),r},o=()=>{let{headers:i,status:r,statusText:o,url:a}=s(),l=null;204!==r&&(l=void 0===n.response?n.responseText:n.response),0===r&&(r=l?200:0);let c=r>=200&&r<300;if("json"===e.responseType&&"string"==typeof l){const e=l;l=l.replace(CV,"");try{l=""!==l?JSON.parse(l):null}catch(XR){l=e,c&&(c=!1,l={error:XR,text:l})}}c?(t.next(new mV({body:l,headers:i,status:r,statusText:o,url:a||void 0})),t.complete()):t.error(new gV({error:l,headers:i,status:r,statusText:o,url:a||void 0}))},a=e=>{const{url:i}=s(),r=new gV({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:i||void 0});t.error(r)};let l=!1;const c=i=>{l||(t.next(s()),l=!0);let r={type:dV.DownloadProgress,loaded:i.loaded};i.lengthComputable&&(r.total=i.total),"text"===e.responseType&&n.responseText&&(r.partialText=n.responseText),t.next(r)},u=e=>{let n={type:dV.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),e.reportProgress&&(n.addEventListener("progress",c),null!==i&&n.upload&&n.upload.addEventListener("progress",u)),n.send(i),t.next({type:dV.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),e.reportProgress&&(n.removeEventListener("progress",c),null!==i&&n.upload&&n.upload.removeEventListener("progress",u)),n.readyState!==n.DONE&&n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Ae))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const kV=new i.OlP("XSRF_COOKIE_NAME"),TV=new i.OlP("XSRF_HEADER_NAME");class EV{}let xV=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=se(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o),i.LFG(i.Lbi),i.LFG(kV))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),IV=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const i=this.tokenService.getToken();return null===i||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,i)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(EV),i.LFG(TV))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),AV=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(bV,[]);this.chain=e.reduceRight((e,t)=>new vV(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(tV),i.LFG(i.zs3))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),DV=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:IV,useClass:wV}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:kV,useValue:t.cookieName}:[],t.headerName?{provide:TV,useValue:t.headerName}:[]]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[IV,{provide:bV,useExisting:IV,multi:!0},{provide:EV,useClass:xV},{provide:kV,useValue:"XSRF-TOKEN"},{provide:TV,useValue:"X-XSRF-TOKEN"}]}),e})(),RV=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[yV,{provide:eV,useClass:AV},SV,{provide:tV,useExisting:SV}],imports:[[DV.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})();const OV=["*"];function PV(e){return Error(`Unable to find icon with the name "${e}"`)}function NV(e){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${e}".`)}function FV(e){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${e}".`)}class LV{constructor(e,t,n){this.url=e,this.svgText=t,this.options=n}}let MV=(()=>{class e{constructor(e,t,n,i){this._httpClient=e,this._sanitizer=t,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(e,t,n){return this.addSvgIconInNamespace("",e,t,n)}addSvgIconLiteral(e,t,n){return this.addSvgIconLiteralInNamespace("",e,t,n)}addSvgIconInNamespace(e,t,n,i){return this._addSvgIconConfig(e,t,new LV(n,null,i))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,t,n,r){const s=this._sanitizer.sanitize(i.q3G.HTML,n);if(!s)throw FV(n);return this._addSvgIconConfig(e,t,new LV("",s,r))}addSvgIconSet(e,t){return this.addSvgIconSetInNamespace("",e,t)}addSvgIconSetLiteral(e,t){return this.addSvgIconSetLiteralInNamespace("",e,t)}addSvgIconSetInNamespace(e,t,n){return this._addSvgIconSetConfig(e,new LV(t,null,n))}addSvgIconSetLiteralInNamespace(e,t,n){const r=this._sanitizer.sanitize(i.q3G.HTML,t);if(!r)throw FV(t);return this._addSvgIconSetConfig(e,new LV("",r,n))}registerFontClassAlias(e,t=e){return this._fontCssClassesByAlias.set(e,t),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const t=this._sanitizer.sanitize(i.q3G.RESOURCE_URL,e);if(!t)throw NV(e);const n=this._cachedIconsByUrl.get(t);return n?(0,ut.of)(VV(n)):this._loadSvgIconFromConfig(new LV(e,null)).pipe((0,pn.b)(e=>this._cachedIconsByUrl.set(t,e)),(0,Pt.U)(e=>VV(e)))}getNamedSvgIcon(e,t=""){const n=UV(t,e);let i=this._svgIconConfigs.get(n);if(i)return this._getSvgFromConfig(i);if(i=this._getIconConfigFromResolvers(t,e),i)return this._svgIconConfigs.set(n,i),this._getSvgFromConfig(i);const r=this._iconSetConfigs.get(t);return r?this._getSvgFromIconSetConfigs(e,r):(0,XM._)(PV(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?(0,ut.of)(VV(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,Pt.U)(e=>VV(e)))}_getSvgFromIconSetConfigs(e,t){const n=this._extractIconWithNameFromAnySet(e,t);return n?(0,ut.of)(n):gs(t.filter(e=>!e.svgText).map(e=>this._loadSvgIconSetFromConfig(e).pipe(Wt(t=>{const n=this._sanitizer.sanitize(i.q3G.RESOURCE_URL,e.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${t.message}`)),(0,ut.of)(null)})))).pipe((0,Pt.U)(()=>{const n=this._extractIconWithNameFromAnySet(e,t);if(!n)throw PV(e);return n}))}_extractIconWithNameFromAnySet(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.svgText&&i.svgText.indexOf(e)>-1){const t=this._svgElementFromConfig(i),n=this._extractSvgIconFromSet(t,e,i.options);if(n)return n}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,pn.b)(t=>e.svgText=t),(0,Pt.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?(0,ut.of)(null):this._fetchIcon(e).pipe((0,pn.b)(t=>e.svgText=t))}_extractSvgIconFromSet(e,t,n){const i=e.querySelector(`[id="${t}"]`);if(!i)return null;const r=i.cloneNode(!0);if(r.removeAttribute("id"),"svg"===r.nodeName.toLowerCase())return this._setSvgAttributes(r,n);if("symbol"===r.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(r),n);const s=this._svgElementFromString("<svg></svg>");return s.appendChild(r),this._setSvgAttributes(s,n)}_svgElementFromString(e){const t=this._document.createElement("DIV");t.innerHTML=e;const n=t.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(e){const t=this._svgElementFromString("<svg></svg>"),n=e.attributes;for(let i=0;i<n.length;i++){const{name:e,value:r}=n[i];"id"!==e&&t.setAttribute(e,r)}for(let i=0;i<e.childNodes.length;i++)e.childNodes[i].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[i].cloneNode(!0));return t}_setSvgAttributes(e,t){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),t&&t.viewBox&&e.setAttribute("viewBox",t.viewBox),e}_fetchIcon(e){var t;const{url:n,options:r}=e,s=null!==(t=null==r?void 0:r.withCredentials)&&void 0!==t&&t;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(i.q3G.RESOURCE_URL,n);if(!o)throw NV(n);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(gn(()=>this._inProgressUrlFetches.delete(o)),(0,OR.B)());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(e,t,n){return this._svgIconConfigs.set(UV(e,t),n),this}_addSvgIconSetConfig(e,t){const n=this._iconSetConfigs.get(e);return n?n.push(t):this._iconSetConfigs.set(e,[t]),this}_svgElementFromConfig(e){if(!e.svgElement){const t=this._svgElementFromString(e.svgText);this._setSvgAttributes(t,e.options),e.svgElement=t}return e.svgElement}_getIconConfigFromResolvers(e,t){for(let i=0;i<this._resolvers.length;i++){const r=this._resolvers[i](t,e);if(r)return(n=r).url&&n.options?new LV(r.url,null,r.options):new LV(r,null)}var n}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(yV,8),i.LFG(it),i.LFG(o,8),i.LFG(i.qLn))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(yV,8),i.LFG(it),i.LFG(o,8),i.LFG(i.qLn))},token:e,providedIn:"root"}),e})();function VV(e){return e.cloneNode(!0)}function UV(e,t){return e+":"+t}const qV=cI(class{constructor(e){this._elementRef=e}}),BV=new i.OlP("mat-icon-location",{providedIn:"root",factory:function(){const e=(0,i.f3M)(o),t=e?e.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),jV=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ZV=jV.map(e=>`[${e}]`).join(", "),zV=/^url\(['"]?#(.*?)['"]?\)$/;let GV=(()=>{class e extends qV{constructor(e,t,n,i,r){super(e),this._iconRegistry=t,this._location=i,this._errorHandler=r,this._inline=!1,this._currentIconFetch=mn.w.EMPTY,n||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=hk(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const t=this._cleanupFontValue(e);t!==this._fontSet&&(this._fontSet=t,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const t=this._cleanupFontValue(e);t!==this._fontIcon&&(this._fontIcon=t,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const t=e.querySelectorAll("style");for(let i=0;i<t.length;i++)t[i].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let t=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();t--;){const n=e.childNodes[t];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||e.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,t=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();t!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),t&&e.classList.add(t),this._previousFontSetClass=t),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const t=this._elementsWithExternalReferences;t&&t.forEach((t,n)=>{t.forEach(t=>{n.setAttribute(t.name,`url('${e}#${t.value}')`)})})}_cacheChildrenWithExternalReferences(e){const t=e.querySelectorAll(ZV),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let i=0;i<t.length;i++)jV.forEach(e=>{const r=t[i],s=r.getAttribute(e),o=s?s.match(zV):null;if(o){let t=n.get(r);t||(t=[],n.set(r,t)),t.push({name:e,value:o[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[t,n]=this._splitIconName(e);t&&(this._svgNamespace=t),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,t).pipe(Ut(1)).subscribe(e=>this._setSvgElement(e),e=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${t}:${n}! ${e.message}`))})}}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(MV),i.$8M("aria-hidden"),i.Y36(BV),i.Y36(i.qLn))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,t){2&e&&(i.uIk("data-mat-icon-type",t._usingFontIcon()?"font":"svg")("data-mat-icon-name",t._svgName||t.fontIcon)("data-mat-icon-namespace",t._svgNamespace||t.fontSet),i.ekj("mat-icon-inline",t.inline)("mat-icon-no-color","primary"!==t.color&&"accent"!==t.color&&"warn"!==t.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[i.qOj],ngContentSelectors:OV,decls:1,vars:0,template:function(e,t){1&e&&(i.F$t(),i.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),e})(),HV=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[aI],aI]}),e})();const YV=["mat-calendar-body",""];function $V(e,t){if(1&e&&(i.TgZ(0,"tr",2),i.TgZ(1,"td",3),i._uU(2),i.qZA(),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Udp("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),i.uIk("colspan",e.numCols),i.xp6(1),i.hij(" ",e.label," ")}}function WV(e,t){if(1&e&&(i.TgZ(0,"td",3),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.Udp("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),i.uIk("colspan",e._firstRowOffset),i.xp6(1),i.hij(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function KV(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",7),i.NdJ("click",function(t){const n=i.CHM(e).$implicit;return i.oxw(2)._cellClicked(n,t)}),i.TgZ(1,"div",8),i._uU(2),i.qZA(),i._UZ(3,"div",9),i.qZA()}if(2&e){const e=t.$implicit,n=t.index,r=i.oxw().index,s=i.oxw();i.Udp("width",s._cellWidth)("padding-top",s._cellPadding)("padding-bottom",s._cellPadding),i.ekj("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",s._isActiveCell(r,n))("mat-calendar-body-range-start",s._isRangeStart(e.compareValue))("mat-calendar-body-range-end",s._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",s._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",s._isComparisonBridgeStart(e.compareValue,r,n))("mat-calendar-body-comparison-bridge-end",s._isComparisonBridgeEnd(e.compareValue,r,n))("mat-calendar-body-comparison-start",s._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",s._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",s._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",s._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",s._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",s._isInPreview(e.compareValue)),i.Q6J("ngClass",e.cssClasses)("tabindex",s._isActiveCell(r,n)?0:-1),i.uIk("data-mat-row",r)("data-mat-col",n)("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-selected",s._isSelected(e.compareValue)),i.xp6(1),i.ekj("mat-calendar-body-selected",s._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",s._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",s.todayValue===e.compareValue),i.xp6(1),i.hij(" ",e.displayValue," ")}}function QV(e,t){if(1&e&&(i.TgZ(0,"tr",4),i.YNc(1,WV,2,6,"td",5),i.YNc(2,KV,4,46,"td",6),i.qZA()),2&e){const e=t.$implicit,n=t.index,r=i.oxw();i.xp6(1),i.Q6J("ngIf",0===n&&r._firstRowOffset),i.xp6(1),i.Q6J("ngForOf",e)}}function JV(e,t){if(1&e&&(i.TgZ(0,"th",5),i.TgZ(1,"abbr",6),i._uU(2),i.qZA(),i.qZA()),2&e){const e=t.$implicit;i.uIk("aria-label",e.long),i.xp6(1),i.uIk("title",e.long),i.xp6(1),i.Oqu(e.narrow)}}const XV=["*"];function eU(e,t){}function tU(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"mat-month-view",5),i.NdJ("activeDateChange",function(t){return i.CHM(e),i.oxw().activeDate=t})("_userSelection",function(t){return i.CHM(e),i.oxw()._dateSelected(t)}),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)}}function nU(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"mat-year-view",6),i.NdJ("activeDateChange",function(t){return i.CHM(e),i.oxw().activeDate=t})("monthSelected",function(t){return i.CHM(e),i.oxw()._monthSelectedInYearView(t)})("selectedChange",function(t){return i.CHM(e),i.oxw()._goToDateInView(t,"month")}),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function iU(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"mat-multi-year-view",7),i.NdJ("activeDateChange",function(t){return i.CHM(e),i.oxw().activeDate=t})("yearSelected",function(t){return i.CHM(e),i.oxw()._yearSelectedInMultiYearView(t)})("selectedChange",function(t){return i.CHM(e),i.oxw()._goToDateInView(t,"year")}),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function rU(e,t){}const sU=["button"];function oU(e,t){1&e&&(i.O4$(),i.TgZ(0,"svg",3),i._UZ(1,"path",4),i.qZA())}const aU=[[["","matDatepickerToggleIcon",""]]],lU=["[matDatepickerToggleIcon]"];let cU=(()=>{class e{constructor(){this.changes=new ht.xQ,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,t){return`${e} \u2013 ${t}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e})();class uU{constructor(e,t,n,i,r={},s=e,o){this.value=e,this.displayValue=t,this.ariaLabel=n,this.enabled=i,this.cssClasses=r,this.compareValue=s,this.rawValue=o}}let hU=(()=>{class e{constructor(e,t){this._elementRef=e,this._ngZone=t,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new i.vpe,this.previewChange=new i.vpe,this._enterHandler=e=>{if(this._skipNextFocus&&"focus"===e.type)this._skipNextFocus=!1;else if(e.target&&this.isRange){const t=this._getCellFromElement(e.target);t&&this._ngZone.run(()=>this.previewChange.emit({value:t.enabled?t:null,event:e}))}},this._leaveHandler=e=>{null!==this.previewEnd&&this.isRange&&e.target&&dU(e.target)&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:e}))},t.runOutsideAngular(()=>{const t=e.nativeElement;t.addEventListener("mouseenter",this._enterHandler,!0),t.addEventListener("focus",this._enterHandler,!0),t.addEventListener("mouseleave",this._leaveHandler,!0),t.addEventListener("blur",this._leaveHandler,!0)})}_cellClicked(e,t){e.enabled&&this.selectedValueChange.emit({value:e.value,event:t})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){const t=e.numCols,{rows:n,numCols:i}=this;(e.rows||t)&&(this._firstRowOffset=n&&n.length&&n[0].length?i-n[0].length:0),(e.cellAspectRatio||t||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/i+"%"),!t&&this._cellWidth||(this._cellWidth=100/i+"%")}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mouseenter",this._enterHandler,!0),e.removeEventListener("focus",this._enterHandler,!0),e.removeEventListener("mouseleave",this._leaveHandler,!0),e.removeEventListener("blur",this._leaveHandler,!0)}_isActiveCell(e,t){let n=e*this.numCols+t;return e&&(n-=this._firstRowOffset),n==this.activeCell}_focusActiveCell(e=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ut(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");t&&(e||(this._skipNextFocus=!0),t.focus())})})}_isRangeStart(e){return pU(e,this.startValue,this.endValue)}_isRangeEnd(e){return fU(e,this.startValue,this.endValue)}_isInRange(e){return mU(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return pU(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,t,n){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let i=this.rows[t][n-1];if(!i){const e=this.rows[t-1];i=e&&e[e.length-1]}return i&&!this._isRangeEnd(i.compareValue)}_isComparisonBridgeEnd(e,t,n){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let i=this.rows[t][n+1];if(!i){const e=this.rows[t+1];i=e&&e[0]}return i&&!this._isRangeStart(i.compareValue)}_isComparisonEnd(e){return fU(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return mU(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return pU(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return fU(e,this.previewStart,this.previewEnd)}_isInPreview(e){return mU(e,this.previewStart,this.previewEnd,this.isRange)}_getCellFromElement(e){let t;if(dU(e)?t=e:dU(e.parentNode)&&(t=e.parentNode),t){const e=t.getAttribute("data-mat-row"),n=t.getAttribute("data-mat-col");if(e&&n)return this.rows[parseInt(e)][parseInt(n)]}return null}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(i.R0b))},e.\u0275cmp=i.Xpm({type:e,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",previewStart:"previewStart",previewEnd:"previewEnd",label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange"},exportAs:["matCalendarBody"],features:[i.TTD],attrs:YV,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell",3,"ngClass","tabindex","mat-calendar-body-disabled","mat-calendar-body-active","mat-calendar-body-range-start","mat-calendar-body-range-end","mat-calendar-body-in-range","mat-calendar-body-comparison-bridge-start","mat-calendar-body-comparison-bridge-end","mat-calendar-body-comparison-start","mat-calendar-body-comparison-end","mat-calendar-body-in-comparison-range","mat-calendar-body-preview-start","mat-calendar-body-preview-end","mat-calendar-body-in-preview","width","paddingTop","paddingBottom","click",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],[1,"mat-calendar-body-cell-preview"]],template:function(e,t){1&e&&(i.YNc(0,$V,3,6,"tr",0),i.YNc(1,QV,3,2,"tr",1)),2&e&&(i.Q6J("ngIf",t._firstRowOffset<t.labelMinRequiredCells),i.xp6(1),i.Q6J("ngForOf",t.rows))},directives:[ue,le,oe],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell{position:relative;height:0;line-height:0;text-align:center;outline:none;cursor:pointer}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected),.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){outline:dotted 2px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}@media(hover: none){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){background-color:transparent}}\n'],encapsulation:2,changeDetection:0}),e})();function dU(e){return"TD"===e.nodeName}function pU(e,t,n){return null!==n&&t!==n&&e<n&&e===t}function fU(e,t,n){return null!==t&&t!==n&&e>=t&&e===n}function mU(e,t,n,i){return i&&null!==t&&null!==n&&t!==n&&e>=t&&e<=n}class gU{constructor(e,t){this.start=e,this.end=t}}let _U=(()=>{class e{constructor(e,t){this.selection=e,this._adapter=t,this._selectionChanged=new ht.xQ,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,t){const n=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:t,oldValue:n})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(void 0),i.LFG(mI))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),yU=(()=>{class e extends _U{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const t=new e(this._adapter);return t.updateSelection(this.selection,this),t}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(mI))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const vU={provide:_U,deps:[[new i.FiY,new i.tp0,_U],mI],useFactory:function(e,t){return e||new yU(t)}},bU=new i.OlP("MAT_DATE_RANGE_SELECTION_STRATEGY");let wU=(()=>{class e{constructor(e,t,n,r,s){this._changeDetectorRef=e,this._dateFormats=t,this._dateAdapter=n,this._dir=r,this._rangeStrategy=s,this._rerenderSubscription=mn.w.EMPTY,this.selectedChange=new i.vpe,this._userSelection=new i.vpe,this.activeDateChange=new i.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){const t=this._activeDate,n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),this._hasSameMonthAndYear(t,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof gU?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(jt(null)).subscribe(()=>this._init())}ngOnChanges(e){const t=e.comparisonStart||e.comparisonEnd;t&&!t.firstChange&&this._setRanges(this.selected)}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){const t=e.value,n=this._dateAdapter.getYear(this.activeDate),i=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.createDate(n,i,t);let s,o;this._selected instanceof gU?(s=this._getDateInCurrentMonth(this._selected.start),o=this._getDateInCurrentMonth(this._selected.end)):s=o=this._getDateInCurrentMonth(this._selected),s===t&&o===t||this.selectedChange.emit(r),this._userSelection.emit({value:r,event:e.event}),this._previewStart=this._previewEnd=null,this._changeDetectorRef.markForCheck()}_handleCalendarBodyKeydown(e){const t=this._activeDate,n=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,n?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,n?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&e.preventDefault());case 27:return void(null==this._previewEnd||Ek(e)||(this._previewStart=this._previewEnd=null,this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e}),e.preventDefault(),e.stopPropagation()));default:return}this._dateAdapter.compareDate(t,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){32!==e.keyCode&&13!==e.keyCode||(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_previewChanged({event:e,value:t}){if(this._rangeStrategy){const n=this._rangeStrategy.createPreview(t?t.rawValue:null,this.selected,e);this._previewStart=this._getCellCompareValue(n.start),this._previewEnd=this._getCellCompareValue(n.end),this._changeDetectorRef.detectChanges()}}_initWeekdays(){const e=this._dateAdapter.getFirstDayOfWeek(),t=this._dateAdapter.getDayOfWeekNames("narrow");let n=this._dateAdapter.getDayOfWeekNames("long").map((e,n)=>({long:e,narrow:t[n]}));this._weekdays=n.slice(e).concat(n.slice(0,e))}_createWeekCells(){const e=this._dateAdapter.getNumDaysInMonth(this.activeDate),t=this._dateAdapter.getDateNames();this._weeks=[[]];for(let n=0,i=this._firstWeekOffset;n<e;n++,i++){7==i&&(this._weeks.push([]),i=0);const e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),n+1),r=this._shouldEnableDate(e),s=this._dateAdapter.format(e,this._dateFormats.display.dateA11yLabel),o=this.dateClass?this.dateClass(e,"month"):void 0;this._weeks[this._weeks.length-1].push(new uU(n+1,t[n],s,r,o,this._getCellCompareValue(e),e))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,t){return!(!e||!t||this._dateAdapter.getMonth(e)!=this._dateAdapter.getMonth(t)||this._dateAdapter.getYear(e)!=this._dateAdapter.getYear(t))}_getCellCompareValue(e){if(e){const t=this._dateAdapter.getYear(e),n=this._dateAdapter.getMonth(e),i=this._dateAdapter.getDate(e);return new Date(t,n,i).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(e){e instanceof gU?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.sBO),i.Y36(gI,8),i.Y36(mI,8),i.Y36(ST,8),i.Y36(bU,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-month-view"]],viewQuery:function(e,t){if(1&e&&i.Gf(hU,5),2&e){let e;i.iGM(e=i.CRH())&&(t._matCalendarBody=e.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[i.TTD],decls:7,vars:13,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","selectedValueChange","previewChange","keyup","keydown"],["scope","col"],[1,"mat-calendar-abbr"]],template:function(e,t){1&e&&(i.TgZ(0,"table",0),i.TgZ(1,"thead",1),i.TgZ(2,"tr"),i.YNc(3,JV,3,3,"th",2),i.qZA(),i.TgZ(4,"tr"),i._UZ(5,"th",3),i.qZA(),i.qZA(),i.TgZ(6,"tbody",4),i.NdJ("selectedValueChange",function(e){return t._dateSelected(e)})("previewChange",function(e){return t._previewChanged(e)})("keyup",function(e){return t._handleCalendarBodyKeyup(e)})("keydown",function(e){return t._handleCalendarBodyKeydown(e)}),i.qZA(),i.qZA()),2&e&&(i.xp6(3),i.Q6J("ngForOf",t._weekdays),i.xp6(3),i.Q6J("label",t._monthLabel)("rows",t._weeks)("todayValue",t._todayDate)("startValue",t._rangeStart)("endValue",t._rangeEnd)("comparisonStart",t._comparisonRangeStart)("comparisonEnd",t._comparisonRangeEnd)("previewStart",t._previewStart)("previewEnd",t._previewEnd)("isRange",t._isRange)("labelMinRequiredCells",3)("activeCell",t._dateAdapter.getDate(t.activeDate)-1))},directives:[le,hU],encapsulation:2,changeDetection:0}),e})(),CU=(()=>{class e{constructor(e,t,n){this._changeDetectorRef=e,this._dateAdapter=t,this._dir=n,this._rerenderSubscription=mn.w.EMPTY,this.selectedChange=new i.vpe,this.yearSelected=new i.vpe,this.activeDateChange=new i.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let t=this._activeDate;const n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),SU(this._dateAdapter,t,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof gU?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(jt(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const e=this._dateAdapter.getYear(this._activeDate)-kU(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let t=0,n=[];t<24;t++)n.push(e+t),4==n.length&&(this._years.push(n.map(e=>this._createCellForYear(e))),n=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){const t=e.value;this.yearSelected.emit(this._dateAdapter.createDate(t,0,1));let n=this._dateAdapter.getMonth(this.activeDate),i=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(t,n,1));this.selectedChange.emit(this._dateAdapter.createDate(t,n,Math.min(this._dateAdapter.getDate(this.activeDate),i)))}_handleCalendarBodyKeydown(e){const t=this._activeDate,n=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-kU(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-kU(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-240:-24);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?240:24);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(t,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){32!==e.keyCode&&13!==e.keyCode||(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return kU(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_createCellForYear(e){const t=this._dateAdapter.createDate(e,0,1),n=this._dateAdapter.getYearName(t),i=this.dateClass?this.dateClass(t,"multi-year"):void 0;return new uU(e,n,n,this._shouldEnableYear(e),i)}_shouldEnableYear(e){if(null==e||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let t=this._dateAdapter.createDate(e,0,1);this._dateAdapter.getYear(t)==e;t=this._dateAdapter.addCalendarDays(t,1))if(this.dateFilter(t))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(e){if(this._selectedYear=null,e instanceof gU){const t=e.start||e.end;t&&(this._selectedYear=this._dateAdapter.getYear(t))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.sBO),i.Y36(mI,8),i.Y36(ST,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-multi-year-view"]],viewQuery:function(e,t){if(1&e&&i.Gf(hU,5),2&e){let e;i.iGM(e=i.CRH())&&(t._matCalendarBody=e.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(e,t){1&e&&(i.TgZ(0,"table",0),i.TgZ(1,"thead",1),i.TgZ(2,"tr"),i._UZ(3,"th",2),i.qZA(),i.qZA(),i.TgZ(4,"tbody",3),i.NdJ("selectedValueChange",function(e){return t._yearSelected(e)})("keyup",function(e){return t._handleCalendarBodyKeyup(e)})("keydown",function(e){return t._handleCalendarBodyKeydown(e)}),i.qZA(),i.qZA()),2&e&&(i.xp6(4),i.Q6J("rows",t._years)("todayValue",t._todayYear)("startValue",t._selectedYear)("endValue",t._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",t._getActiveCell()))},directives:[hU],encapsulation:2,changeDetection:0}),e})();function SU(e,t,n,i,r){const s=e.getYear(t),o=e.getYear(n),a=TU(e,i,r);return Math.floor((s-a)/24)===Math.floor((o-a)/24)}function kU(e,t,n,i){return function(e,t){return(e%24+24)%24}(e.getYear(t)-TU(e,n,i))}function TU(e,t,n){let i=0;return n?i=e.getYear(n)-24+1:t&&(i=e.getYear(t)),i}let EU=(()=>{class e{constructor(e,t,n,r){this._changeDetectorRef=e,this._dateFormats=t,this._dateAdapter=n,this._dir=r,this._rerenderSubscription=mn.w.EMPTY,this.selectedChange=new i.vpe,this.monthSelected=new i.vpe,this.activeDateChange=new i.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let t=this._activeDate;const n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),this._dateAdapter.getYear(t)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof gU?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(jt(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){const t=e.value,n=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1);this.monthSelected.emit(n);const i=this._dateAdapter.getNumDaysInMonth(n);this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,Math.min(this._dateAdapter.getDate(this.activeDate),i)))}_handleCalendarBodyKeydown(e){const t=this._activeDate,n=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,n?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,n?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(t,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){32!==e.keyCode&&13!==e.keyCode||(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(t=>t.map(t=>this._createCellForMonth(t,e[t]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_createCellForMonth(e,t){const n=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),i=this._dateAdapter.format(n,this._dateFormats.display.monthYearA11yLabel),r=this.dateClass?this.dateClass(n,"year"):void 0;return new uU(e,t.toLocaleUpperCase(),i,this._shouldEnableMonth(e),r)}_shouldEnableMonth(e){const t=this._dateAdapter.getYear(this.activeDate);if(null==e||this._isYearAndMonthAfterMaxDate(t,e)||this._isYearAndMonthBeforeMinDate(t,e))return!1;if(!this.dateFilter)return!0;for(let n=this._dateAdapter.createDate(t,e,1);this._dateAdapter.getMonth(n)==e;n=this._dateAdapter.addCalendarDays(n,1))if(this.dateFilter(n))return!0;return!1}_isYearAndMonthAfterMaxDate(e,t){if(this.maxDate){const n=this._dateAdapter.getYear(this.maxDate),i=this._dateAdapter.getMonth(this.maxDate);return e>n||e===n&&t>i}return!1}_isYearAndMonthBeforeMinDate(e,t){if(this.minDate){const n=this._dateAdapter.getYear(this.minDate),i=this._dateAdapter.getMonth(this.minDate);return e<n||e===n&&t<i}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(e){this._selectedMonth=e instanceof gU?this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._getMonthInCurrentYear(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.sBO),i.Y36(gI,8),i.Y36(mI,8),i.Y36(ST,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-year-view"]],viewQuery:function(e,t){if(1&e&&i.Gf(hU,5),2&e){let e;i.iGM(e=i.CRH())&&(t._matCalendarBody=e.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(e,t){1&e&&(i.TgZ(0,"table",0),i.TgZ(1,"thead",1),i.TgZ(2,"tr"),i._UZ(3,"th",2),i.qZA(),i.qZA(),i.TgZ(4,"tbody",3),i.NdJ("selectedValueChange",function(e){return t._monthSelected(e)})("keyup",function(e){return t._handleCalendarBodyKeyup(e)})("keydown",function(e){return t._handleCalendarBodyKeydown(e)}),i.qZA(),i.qZA()),2&e&&(i.xp6(4),i.Q6J("label",t._yearLabel)("rows",t._months)("todayValue",t._todayMonth)("startValue",t._selectedMonth)("endValue",t._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",t._dateAdapter.getMonth(t.activeDate)))},directives:[hU],encapsulation:2,changeDetection:0}),e})(),xU=0,IU=(()=>{class e{constructor(e,t,n,i,r){this._intl=e,this.calendar=t,this._dateAdapter=n,this._dateFormats=i,this._buttonDescriptionId="mat-calendar-button-"+xU++,this.calendar.stateChanges.subscribe(()=>r.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const e=this._dateAdapter.getYear(this.calendar.activeDate)-kU(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),t=e+24-1,n=this._dateAdapter.getYearName(this._dateAdapter.createDate(e,0,1)),i=this._dateAdapter.getYearName(this._dateAdapter.createDate(t,0,1));return this._intl.formatYearRange(n,i)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,t){return"month"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(t)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(t):"year"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(t):SU(this._dateAdapter,e,t,this.calendar.minDate,this.calendar.maxDate)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(cU),i.Y36((0,i.Gpc)(()=>AU)),i.Y36(mI,8),i.Y36(gI,8),i.Y36(i.sBO))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:XV,decls:10,vars:10,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","cdkAriaLive","polite",1,"mat-calendar-period-button",3,"click"],[1,"mat-calendar-arrow"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"button",2),i.NdJ("click",function(){return t.currentPeriodClicked()}),i.TgZ(3,"span"),i._uU(4),i.qZA(),i._UZ(5,"div",3),i.qZA(),i._UZ(6,"div",4),i.Hsn(7),i.TgZ(8,"button",5),i.NdJ("click",function(){return t.previousClicked()}),i.qZA(),i.TgZ(9,"button",6),i.NdJ("click",function(){return t.nextClicked()}),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(2),i.uIk("aria-label",t.periodButtonLabel)("aria-describedby",t._buttonDescriptionId),i.xp6(1),i.uIk("id",t._buttonDescriptionId),i.xp6(1),i.Oqu(t.periodButtonText),i.xp6(1),i.ekj("mat-calendar-invert","month"!==t.calendar.currentView),i.xp6(3),i.Q6J("disabled",!t.previousEnabled()),i.uIk("aria-label",t.prevButtonLabel),i.xp6(1),i.Q6J("disabled",!t.nextEnabled()),i.uIk("aria-label",t.nextButtonLabel))},directives:[JA,mT],encapsulation:2,changeDetection:0}),e})(),AU=(()=>{class e{constructor(e,t,n,r){this._dateAdapter=t,this._dateFormats=n,this._changeDetectorRef=r,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new i.vpe,this.yearSelected=new i.vpe,this.monthSelected=new i.vpe,this.viewChanged=new i.vpe(!0),this._userSelection=new i.vpe,this.stateChanges=new ht.xQ,this._intlChanges=e.changes.subscribe(()=>{r.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){this._selected=e instanceof gU?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){const t=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),t&&this.viewChanged.emit(t)}ngAfterContentInit(){this._calendarHeaderPortal=new DD(this.headerComponent||IU),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){const t=e.minDate||e.maxDate||e.dateFilter;if(t&&!t.firstChange){const e=this._getCurrentViewComponent();e&&(this._changeDetectorRef.detectChanges(),e._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){const t=e.value;(this.selected instanceof gU||t&&!this._dateAdapter.sameDate(t,this.selected))&&this.selectedChange.emit(t),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,t){this.activeDate=e,this.currentView=t}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(cU),i.Y36(mI,8),i.Y36(gI,8),i.Y36(i.sBO))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-calendar"]],viewQuery:function(e,t){if(1&e&&(i.Gf(wU,5),i.Gf(EU,5),i.Gf(CU,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.monthView=e.first),i.iGM(e=i.CRH())&&(t.yearView=e.first),i.iGM(e=i.CRH())&&(t.multiYearView=e.first)}},hostAttrs:[1,"mat-calendar"],inputs:{startView:"startView",startAt:"startAt",selected:"selected",minDate:"minDate",maxDate:"maxDate",headerComponent:"headerComponent",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[i._Bn([vU]),i.TTD],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(e,t){1&e&&(i.YNc(0,eU,0,0,"ng-template",0),i.TgZ(1,"div",1),i.YNc(2,tU,1,8,"mat-month-view",2),i.YNc(3,nU,1,6,"mat-year-view",3),i.YNc(4,iU,1,6,"mat-multi-year-view",4),i.qZA()),2&e&&(i.Q6J("cdkPortalOutlet",t._calendarHeaderPortal),i.xp6(1),i.Q6J("ngSwitch",t.currentView),i.xp6(1),i.Q6J("ngSwitchCase","month"),i.xp6(1),i.Q6J("ngSwitchCase","year"),i.xp6(1),i.Q6J("ngSwitchCase","multi-year"))},directives:[FD,vT,fe,me,wU,EU,CU],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(33% / 7 - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top-width:5px;border-top-style:solid;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}.mat-calendar-abbr{text-decoration:none}\n'],encapsulation:2,changeDetection:0}),e})();const DU={transformPanel:xT("transformPanel",[PT("void => enter-dropdown",IT("120ms cubic-bezier(0, 0, 0.2, 1)",OT([DT({opacity:0,transform:"scale(1, 0.8)"}),DT({opacity:1,transform:"scale(1, 1)"})]))),PT("void => enter-dialog",IT("150ms cubic-bezier(0, 0, 0.2, 1)",OT([DT({opacity:0,transform:"scale(0.7)"}),DT({transform:"none",opacity:1})]))),PT("* => void",IT("100ms linear",DT({opacity:0})))]),fadeInCalendar:xT("fadeInCalendar",[RT("void",DT({opacity:0})),RT("enter",DT({opacity:1})),PT("void => *",IT("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let RU=0;const OU=new i.OlP("mat-datepicker-scroll-strategy"),PU={provide:OU,deps:[uR],useFactory:function(e){return()=>e.scrollStrategies.reposition()}},NU=cI(class{constructor(e){this._elementRef=e}});let FU=(()=>{class e extends NU{constructor(e,t,n,i,r,s){super(e),this._changeDetectorRef=t,this._globalModel=n,this._dateAdapter=i,this._rangeSelectionStrategy=r,this._subscriptions=new mn.w,this._animationDone=new ht.xQ,this._actionsPortal=null,this._closeButtonText=s.closeCalendarLabel}ngOnInit(){this._model=this._actionsPortal?this._globalModel.clone():this._globalModel,this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){const t=this._model.selection,n=e.value,i=t instanceof gU;if(i&&this._rangeSelectionStrategy){const i=this._rangeSelectionStrategy.selectionFinished(n,t,e.event);this._model.updateSelection(i,this)}else!n||!i&&this._dateAdapter.sameDate(n,t)||this._model.add(n);this._model&&!this._model.isComplete()||this._actionsPortal||this.datepicker.close()}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(_U),i.Y36(mI),i.Y36(bU,8),i.Y36(cU))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-datepicker-content"]],viewQuery:function(e,t){if(1&e&&i.Gf(AU,5),2&e){let e;i.iGM(e=i.CRH())&&(t._calendar=e.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(e,t){1&e&&i.WFA("@transformPanel.done",function(){return t._animationDone.next()}),2&e&&(i.d8E("@transformPanel",t._animationState),i.ekj("mat-datepicker-content-touch",t.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[i.qOj],decls:5,vars:20,consts:[["cdkTrapFocus","",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","yearSelected","monthSelected","viewChanged","_userSelection"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"mat-calendar",1),i.NdJ("yearSelected",function(e){return t.datepicker._selectYear(e)})("monthSelected",function(e){return t.datepicker._selectMonth(e)})("viewChanged",function(e){return t.datepicker._viewChanged(e)})("_userSelection",function(e){return t._handleUserSelection(e)}),i.qZA(),i.YNc(2,rU,0,0,"ng-template",2),i.TgZ(3,"button",3),i.NdJ("focus",function(){return t._closeButtonFocused=!0})("blur",function(){return t._closeButtonFocused=!1})("click",function(){return t.datepicker.close()}),i._uU(4),i.qZA(),i.qZA()),2&e&&(i.ekj("mat-datepicker-content-container-with-actions",t._actionsPortal),i.xp6(1),i.Q6J("id",t.datepicker.id)("ngClass",t.datepicker.panelClass)("startAt",t.datepicker.startAt)("startView",t.datepicker.startView)("minDate",t.datepicker._getMinDate())("maxDate",t.datepicker._getMaxDate())("dateFilter",t.datepicker._getDateFilter())("headerComponent",t.datepicker.calendarHeaderComponent)("selected",t._getSelected())("dateClass",t.datepicker.dateClass)("comparisonStart",t.comparisonStart)("comparisonEnd",t.comparisonEnd)("@fadeInCalendar","enter"),i.xp6(1),i.Q6J("cdkPortalOutlet",t._actionsPortal),i.xp6(1),i.ekj("cdk-visually-hidden",!t._closeButtonFocused),i.Q6J("color",t.color||"primary"),i.xp6(1),i.Oqu(t._closeButtonText))},directives:[sT,AU,oe,FD,JA],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}\n"],encapsulation:2,data:{animation:[DU.transformPanel,DU.fadeInCalendar]},changeDetection:0}),e})(),LU=(()=>{class e{constructor(e,t,n,r,s,o,a,l,c){this._overlay=t,this._ngZone=n,this._viewContainerRef=r,this._dateAdapter=o,this._dir=a,this._model=c,this._inputStateChanges=mn.w.EMPTY,this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new i.vpe,this.monthSelected=new i.vpe,this.viewChanged=new i.vpe(!0),this.openedStream=new i.vpe,this.closedStream=new i.vpe,this._opened=!1,this.id="mat-datepicker-"+RU++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new ht.xQ,this._scrollStrategy=s}get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}get touchUi(){return this._touchUi}set touchUi(e){this._touchUi=hk(e)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){const t=hk(e);t!==this._disabled&&(this._disabled=t,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(e){this._restoreFocus=hk(e)}get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=function(e,t=/\s+/){const n=[];if(null!=e){const i=Array.isArray(e)?e:`${e}`.split(t);for(const e of i){const t=`${e}`.trim();t&&n.push(t)}}return n}(e)}get opened(){return this._opened}set opened(e){hk(e)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}ngOnChanges(e){const t=e.xPosition||e.yPosition;if(t&&!t.firstChange&&this._overlayRef){const e=this._overlayRef.getConfig().positionStrategy;e instanceof nR&&(this._setConnectedPositions(e),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal=e}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null)}open(){this._opened||this.disabled||(this._focusedElementBeforeOpen=Zk(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened)return;if(this._componentRef){const e=this._componentRef.instance;e._startExitAnimation(),e._animationDone.pipe(Ut(1)).subscribe(()=>this._destroyOverlay())}const e=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(e)):e()}_applyPendingSelection(){var e,t;null===(t=null===(e=this._componentRef)||void 0===e?void 0:e.instance)||void 0===t||t._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._actionsPortal=this._actionsPortal}_openOverlay(){this._destroyOverlay();const e=this.touchUi,t=this.datepickerInput.getOverlayLabelId(),n=new DD(FU,this._viewContainerRef),i=this._overlayRef=this._overlay.create(new YD({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(e?"dialog":"popup")})),r=i.overlayElement;r.setAttribute("role","dialog"),t&&r.setAttribute("aria-labelledby",t),e&&r.setAttribute("aria-modal","true"),this._getCloseStream(i).subscribe(e=>{e&&e.preventDefault(),this.close()}),this._componentRef=i.attach(n),this._forwardContentValues(this._componentRef.instance),e||this._ngZone.onStable.pipe(Ut(1)).subscribe(()=>i.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){const t="end"===this.xPosition?"end":"start",n="start"===t?"end":"start",i="above"===this.yPosition?"bottom":"top",r="top"===i?"bottom":"top";return e.withPositions([{originX:t,originY:r,overlayX:t,overlayY:i},{originX:t,originY:i,overlayX:t,overlayY:r},{originX:n,originY:r,overlayX:n,overlayY:i},{originX:n,originY:i,overlayX:n,overlayY:r}])}_getCloseStream(e){return(0,JC.T)(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(Ht(e=>27===e.keyCode&&!Ek(e)||this.datepickerInput&&Ek(e,"altKey")&&38===e.keyCode)))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(uR),i.Y36(i.R0b),i.Y36(i.s_b),i.Y36(OU),i.Y36(mI,8),i.Y36(ST,8),i.Y36(o,8),i.Y36(_U))},e.\u0275dir=i.lG2({type:e,inputs:{startView:"startView",xPosition:"xPosition",yPosition:"yPosition",startAt:"startAt",color:"color",touchUi:"touchUi",disabled:"disabled",restoreFocus:"restoreFocus",panelClass:"panelClass",opened:"opened",calendarHeaderComponent:"calendarHeaderComponent",dateClass:"dateClass"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[i.TTD]}),e})(),MU=(()=>{class e extends LU{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[i._Bn([vU,{provide:LU,useExisting:e}]),i.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),e})();class VU{constructor(e,t){this.target=e,this.targetElement=t,this.value=this.target.value}}let UU=(()=>{class e{constructor(e,t,n){this._elementRef=e,this._dateAdapter=t,this._dateFormats=n,this.dateChange=new i.vpe,this.dateInput=new i.vpe,this.stateChanges=new ht.xQ,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=mn.w.EMPTY,this._localeSubscription=mn.w.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=e=>{const t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value));return!t||this._matchesFilter(t)?null:{matDatepickerFilter:!0}},this._minValidator=e=>{const t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),n=this._getMinDate();return!n||!t||this._dateAdapter.compareDate(n,t)<=0?null:{matDatepickerMin:{min:n,actual:t}}},this._maxValidator=e=>{const t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),n=this._getMaxDate();return!n||!t||this._dateAdapter.compareDate(n,t)>=0?null:{matDatepickerMax:{max:n,actual:t}}},this._lastValueValid=!1,this._localeSubscription=t.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){const t=hk(e),n=this._elementRef.nativeElement;this._disabled!==t&&(this._disabled=t,this.stateChanges.next(void 0)),t&&this._isInitialized&&n.blur&&n.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(e=>{if(this._shouldHandleChangeEvent(e)){const t=this._getValueFromModel(e.selection);this._lastValueValid=this._isValidValue(t),this._cvaOnChange(t),this._onTouched(),this._formatValue(t),this.dateInput.emit(new VU(this,this._elementRef.nativeElement)),this.dateChange.emit(new VU(this,this._elementRef.nativeElement))}})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){(function(e,t){const n=Object.keys(e);for(let i of n){const{previousValue:n,currentValue:r}=e[i];if(!t.isDateInstance(n)||!t.isDateInstance(r))return!0;if(!t.sameDate(n,r))return!0}return!1})(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){e.altKey&&40===e.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){const t=this._lastValueValid;let n=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(n),n=this._dateAdapter.getValidDateOrNull(n),this._dateAdapter.sameDate(n,this.value)?(e&&!this.value&&this._cvaOnChange(n),t!==this._lastValueValid&&this._validatorOnChange()):(this._assignValue(n),this._cvaOnChange(n),this.dateInput.emit(new VU(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new VU(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){const t=this._getDateFilter();return!t||t(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(mI,8),i.Y36(gI,8))},e.\u0275dir=i.lG2({type:e,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[i.TTD]}),e})();const qU={provide:bs,useExisting:(0,i.Gpc)(()=>jU),multi:!0},BU={provide:Es,useExisting:(0,i.Gpc)(()=>jU),multi:!0};let jU=(()=>{class e extends UU{constructor(e,t,n,i){super(e,t,n),this._formField=i,this._closedSubscription=mn.w.EMPTY,this._validator=As.compose(super._getValidators())}set matDatepicker(e){e&&(this._datepicker=e,this._closedSubscription=e.closedStream.subscribe(()=>this._onTouched()),this._registerModel(e.registerInput(this)))}get min(){return this._min}set min(e){const t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(t,this._min)||(this._min=t,this._validatorOnChange())}get max(){return this._max}set max(e){const t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(t,this._max)||(this._max=t,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(e){const t=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==t&&this._validatorOnChange()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(mI,8),i.Y36(gI,8),i.Y36(RA,8))},e.\u0275dir=i.lG2({type:e,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(e,t){1&e&&i.NdJ("input",function(e){return t._onInput(e.target.value)})("change",function(){return t._onChange()})("blur",function(){return t._onBlur()})("keydown",function(e){return t._onKeydown(e)}),2&e&&(i.Ikx("disabled",t.disabled),i.uIk("aria-haspopup",t._datepicker?"dialog":null)("aria-owns",(null==t._datepicker?null:t._datepicker.opened)&&t._datepicker.id||null)("min",t.min?t._dateAdapter.toIso8601(t.min):null)("max",t.max?t._dateAdapter.toIso8601(t.max):null)("data-mat-calendar",t._datepicker?t._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[i._Bn([qU,BU,{provide:jA,useExisting:e}]),i.qOj]}),e})(),ZU=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e,selectors:[["","matDatepickerToggleIcon",""]]}),e})(),zU=(()=>{class e{constructor(e,t,n){this._intl=e,this._changeDetectorRef=t,this._stateChanges=mn.w.EMPTY;const i=Number(n);this.tabIndex=i||0===i?i:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=hk(e)}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.datepicker?this.datepicker.stateChanges:(0,ut.of)(),t=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:(0,ut.of)(),n=this.datepicker?(0,JC.T)(this.datepicker.openedStream,this.datepicker.closedStream):(0,ut.of)();this._stateChanges.unsubscribe(),this._stateChanges=(0,JC.T)(this._intl.changes,e,t,n).subscribe(()=>this._changeDetectorRef.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(cU),i.Y36(i.sBO),i.$8M("tabindex"))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-datepicker-toggle"]],contentQueries:function(e,t,n){if(1&e&&i.Suo(n,ZU,5),2&e){let e;i.iGM(e=i.CRH())&&(t._customIcon=e.first)}},viewQuery:function(e,t){if(1&e&&i.Gf(sU,5),2&e){let e;i.iGM(e=i.CRH())&&(t._button=e.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t._open(e)}),2&e&&(i.uIk("tabindex",null)("data-mat-calendar",t.datepicker?t.datepicker.id:null),i.ekj("mat-datepicker-toggle-active",t.datepicker&&t.datepicker.opened)("mat-accent",t.datepicker&&"accent"===t.datepicker.color)("mat-warn",t.datepicker&&"warn"===t.datepicker.color))},inputs:{tabIndex:"tabIndex",disabled:"disabled",datepicker:["for","datepicker"],ariaLabel:["aria-label","ariaLabel"],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[i.TTD],ngContentSelectors:lU,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(e,t){1&e&&(i.F$t(aU),i.TgZ(0,"button",0,1),i.YNc(2,oU,2,0,"svg",2),i.Hsn(3),i.qZA()),2&e&&(i.Q6J("disabled",t.disabled)("disableRipple",t.disableRipple),i.uIk("aria-haspopup",t.datepicker?"dialog":null)("aria-label",t.ariaLabel||t._intl.openCalendarLabel)("tabindex",t.disabled?-1:t.tabIndex),i.xp6(2),i.Q6J("ngIf",!t._customIcon))},directives:[JA,ue],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}\n"],encapsulation:2,changeDetection:0}),e})(),GU=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[cU,PU],imports:[[ke,XA,gR,wT,LD,aI],xD]}),e})();const HU=["trigger"],YU=["panel"];function $U(e,t){if(1&e&&(i.TgZ(0,"span",8),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.placeholder)}}function WU(e,t){if(1&e&&(i.TgZ(0,"span",12),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.triggerValue)}}function KU(e,t){1&e&&i.Hsn(0,0,["*ngSwitchCase","true"])}function QU(e,t){if(1&e&&(i.TgZ(0,"span",9),i.YNc(1,WU,2,1,"span",10),i.YNc(2,KU,1,0,"ng-content",11),i.qZA()),2&e){const e=i.oxw();i.Q6J("ngSwitch",!!e.customTrigger),i.xp6(2),i.Q6J("ngSwitchCase",!0)}}function JU(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",13),i.TgZ(1,"div",14,15),i.NdJ("@transformPanel.done",function(t){return i.CHM(e),i.oxw()._panelDoneAnimatingStream.next(t.toState)})("keydown",function(t){return i.CHM(e),i.oxw()._handleKeydown(t)}),i.Hsn(3,1),i.qZA(),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("@transformPanelWrap",void 0),i.xp6(1),i.Gre("mat-select-panel ",e._getPanelTheme(),""),i.Udp("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),i.Q6J("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),i.uIk("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const XU=[[["mat-select-trigger"]],"*"],eq=["mat-select-trigger","*"],tq={transformPanelWrap:xT("transformPanelWrap",[PT("* => void",FT("@transformPanel",[NT()],{optional:!0}))]),transformPanel:xT("transformPanel",[RT("void",DT({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),RT("showing",DT({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),RT("showing-multiple",DT({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),PT("void => *",IT("120ms cubic-bezier(0, 0, 0.2, 1)")),PT("* => void",IT("100ms 25ms linear",DT({opacity:0})))])};let nq=0;const iq=new i.OlP("mat-select-scroll-strategy"),rq=new i.OlP("MAT_SELECT_CONFIG"),sq={provide:iq,deps:[uR],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};class oq{constructor(e,t){this.source=e,this.value=t}}const aq=uI(hI(lI(dI(class{constructor(e,t,n,i,r){this._elementRef=e,this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=i,this.ngControl=r}})))),lq=new i.OlP("MatSelectTrigger");let cq=(()=>{class e extends aq{constructor(e,t,n,r,s,o,a,l,c,u,h,d,p,f){var m,g,_;super(s,r,a,l,u),this._viewportRuler=e,this._changeDetectorRef=t,this._ngZone=n,this._dir=o,this._parentFormField=c,this._liveAnnouncer=p,this._defaultOptions=f,this._panelOpen=!1,this._compareWith=(e,t)=>e===t,this._uid="mat-select-"+nq++,this._triggerAriaLabelledBy=null,this._destroy=new ht.xQ,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+nq++,this._panelDoneAnimatingStream=new ht.xQ,this._overlayPanelClass=(null===(m=this._defaultOptions)||void 0===m?void 0:m.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(_=null===(g=this._defaultOptions)||void 0===g?void 0:g.disableOptionCentering)&&void 0!==_&&_,this.ariaLabel="",this.optionSelectionChanges=Rt(()=>{const e=this.options;return e?e.changes.pipe(jt(e),Ft(()=>(0,JC.T)(...e.map(e=>e.onSelectionChange)))):this._ngZone.onStable.pipe(Ut(1),Ft(()=>this.optionSelectionChanges))}),this.openedChange=new i.vpe,this._openedStream=this.openedChange.pipe(Ht(e=>e),(0,Pt.U)(()=>{})),this._closedStream=this.openedChange.pipe(Ht(e=>!e),(0,Pt.U)(()=>{})),this.selectionChange=new i.vpe,this.valueChange=new i.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==f?void 0:f.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=f.typeaheadDebounceInterval),this._scrollStrategyFactory=d,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(h)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required}set required(e){this._required=hk(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=hk(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=hk(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=dk(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new CD(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(zo(),Dk(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Dk(this._destroy)).subscribe(e=>{e.added.forEach(e=>e.select()),e.removed.forEach(e=>e.deselect())}),this.options.changes.pipe(jt(null),Dk(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby();if(e!==this._triggerAriaLabelledBy){const t=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?t.setAttribute("aria-labelledby",e):t.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this.value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var e,t;return this.multiple?(null===(e=this._selectionModel)||void 0===e?void 0:e.selected)||[]:null===(t=this._selectionModel)||void 0===t?void 0:t.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(e=>e.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const t=e.keyCode,n=40===t||38===t||37===t||39===t,i=13===t||32===t,r=this._keyManager;if(!r.isTyping()&&i&&!Ek(e)||(this.multiple||e.altKey)&&n)e.preventDefault(),this.open();else if(!this.multiple){const t=this.selected;r.onKeydown(e);const n=this.selected;n&&t!==n&&this._liveAnnouncer.announce(n.viewValue,1e4)}}_handleOpenKeydown(e){const t=this._keyManager,n=e.keyCode,i=40===n||38===n,r=t.isTyping();if(i&&e.altKey)e.preventDefault(),this.close();else if(r||13!==n&&32!==n||!t.activeItem||Ek(e))if(!r&&this._multiple&&65===n&&e.ctrlKey){e.preventDefault();const t=this.options.some(e=>!e.disabled&&!e.selected);this.options.forEach(e=>{e.disabled||(t?e.select():e.deselect())})}else{const n=t.activeItemIndex;t.onKeydown(e),this._multiple&&i&&e.shiftKey&&t.activeItem&&t.activeItemIndex!==n&&t.activeItem._selectViaInteraction()}else e.preventDefault(),t.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Ut(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(e=>e.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(e=>this._selectValue(e)),this._sortValues();else{const t=this._selectValue(e);t?this._keyManager.updateActiveItem(t):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(e){const t=this.options.find(t=>{if(this._selectionModel.isSelected(t))return!1;try{return null!=t.value&&this._compareWith(t.value,e)}catch(XR){return!1}});return t&&this._selectionModel.select(t),t}_initKeyManager(){this._keyManager=new Xk(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Dk(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Dk(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):this._panelOpen||this.multiple||!this._keyManager.activeItem||this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=(0,JC.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Dk(e)).subscribe(e=>{this._onSelect(e.source,e.isUserInput),e.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,JC.T)(...this.options.map(e=>e._stateChanges)).pipe(Dk(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,t){const n=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(n!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),n!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((t,n)=>this.sortComparator?this.sortComparator(t,n,e):e.indexOf(t)-e.indexOf(n)),this.stateChanges.next()}}_propagateChanges(e){let t=null;t=this.multiple?this.selected.map(e=>e.value):this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(this._getChangeEvent(t)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null===(e=this.options)||void 0===e?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){var e;if(this.ariaLabel)return null;const t=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var e;if(this.ariaLabel)return null;const t=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();let n=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(ED),i.Y36(i.sBO),i.Y36(i.R0b),i.Y36(xI),i.Y36(i.SBq),i.Y36(ST,8),i.Y36(vo,8),i.Y36(Eo,8),i.Y36(RA,8),i.Y36(Hs,10),i.$8M("tabindex"),i.Y36(iq),i.Y36(fT),i.Y36(rq,8))},e.\u0275dir=i.lG2({type:e,viewQuery:function(e,t){if(1&e&&(i.Gf(HU,5),i.Gf(YU,5),i.Gf(fR,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.trigger=e.first),i.iGM(e=i.CRH())&&(t.panel=e.first),i.iGM(e=i.CRH())&&(t._overlayDir=e.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[i.qOj,i.TTD]}),e})(),uq=(()=>{class e extends cq{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,t,n){const i=this._getItemHeight();return Math.min(Math.max(0,i*e-t+i/2),n)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Dk(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(Ut(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const t=$I(e,this.options,this.optionGroups),n=this._getItemHeight();var i,r,s;this.panel.nativeElement.scrollTop=0===e&&1===t?0:(r=n,(i=(e+t)*n)<(s=this.panel.nativeElement.scrollTop)?i:i+r>s+256?Math.max(0,i-256+r):s)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new oq(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),t=this._viewportRuler.getViewportSize(),n=this._isRtl(),i=this.multiple?56:32;let r;if(this.multiple)r=40;else if(this.disableOptionCentering)r=16;else{let e=this._selectionModel.selected[0]||this.options.first;r=e&&e.group?32:16}n||(r*=-1);const s=0-(e.left+r-(n?i:0)),o=e.right+r-t.width+(n?0:i);s>0?r+=s+8:o>0&&(r-=o+8),this._overlayDir.offsetX=Math.round(r),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,t,n){const i=this._getItemHeight(),r=(i-this._triggerRect.height)/2,s=Math.floor(256/i);let o;return this.disableOptionCentering?0:(o=0===this._scrollTop?e*i:this._scrollTop===n?(e-(this._getItemCount()-s))*i+(i-(this._getItemCount()*i-256)%i):t-i/2,Math.round(-1*o-r))}_checkOverlayWithinViewport(e){const t=this._getItemHeight(),n=this._viewportRuler.getViewportSize(),i=this._triggerRect.top-8,r=n.height-this._triggerRect.bottom-8,s=Math.abs(this._offsetY),o=Math.min(this._getItemCount()*t,256)-s-this._triggerRect.height;o>r?this._adjustPanelUp(o,r):s>i?this._adjustPanelDown(s,i,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,t){const n=Math.round(e-t);this._scrollTop-=n,this._offsetY-=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,t,n){const i=Math.round(e-t);if(this._scrollTop+=i,this._offsetY+=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=n)return this._scrollTop=n,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),t=this._getItemCount(),n=Math.min(t*e,256),i=t*e-n;let r;r=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),r+=$I(r,this.options,this.optionGroups);const s=n/2;this._scrollTop=this._calculateOverlayScroll(r,s,i),this._offsetY=this._calculateOverlayOffsetY(r,s,i),this._checkOverlayWithinViewport(i)}_getOriginBasedOnOption(){const e=this._getItemHeight(),t=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-t+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-select"]],contentQueries:function(e,t,n){if(1&e&&(i.Suo(n,lq,5),i.Suo(n,YI,5),i.Suo(n,ZI,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.customTrigger=e.first),i.iGM(e=i.CRH())&&(t.options=e),i.iGM(e=i.CRH())&&(t.optionGroups=e)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,t){1&e&&i.NdJ("keydown",function(e){return t._handleKeydown(e)})("focus",function(){return t._onFocus()})("blur",function(){return t._onBlur()}),2&e&&(i.uIk("id",t.id)("tabindex",t.tabIndex)("aria-controls",t.panelOpen?t.id+"-panel":null)("aria-expanded",t.panelOpen)("aria-label",t.ariaLabel||null)("aria-required",t.required.toString())("aria-disabled",t.disabled.toString())("aria-invalid",t.errorState)("aria-describedby",t._ariaDescribedby||null)("aria-activedescendant",t._getAriaActiveDescendant()),i.ekj("mat-select-disabled",t.disabled)("mat-select-invalid",t.errorState)("mat-select-required",t.required)("mat-select-empty",t.empty)("mat-select-multiple",t.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[i._Bn([{provide:bA,useExisting:e},{provide:UI,useExisting:e}]),i.qOj],ngContentSelectors:eq,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,t){if(1&e&&(i.F$t(XU),i.TgZ(0,"div",0,1),i.NdJ("click",function(){return t.toggle()}),i.TgZ(3,"div",2),i.YNc(4,$U,2,1,"span",3),i.YNc(5,QU,3,2,"span",4),i.qZA(),i.TgZ(6,"div",5),i._UZ(7,"div",6),i.qZA(),i.qZA(),i.YNc(8,JU,4,14,"ng-template",7),i.NdJ("backdropClick",function(){return t.close()})("attach",function(){return t._onAttached()})("detach",function(){return t.close()})),2&e){const e=i.MAs(1);i.uIk("aria-owns",t.panelOpen?t.id+"-panel":null),i.xp6(3),i.Q6J("ngSwitch",t.empty),i.uIk("id",t._valueId),i.xp6(1),i.Q6J("ngSwitchCase",!0),i.xp6(1),i.Q6J("ngSwitchCase",!1),i.xp6(3),i.Q6J("cdkConnectedOverlayPanelClass",t._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",t._scrollStrategy)("cdkConnectedOverlayOrigin",e)("cdkConnectedOverlayOpen",t.panelOpen)("cdkConnectedOverlayPositions",t._positions)("cdkConnectedOverlayMinWidth",null==t._triggerRect?null:t._triggerRect.width)("cdkConnectedOverlayOffsetY",t._offsetY)}},directives:[pR,fe,me,fR,ge,oe],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[tq.transformPanelWrap,tq.transformPanel]},changeDetection:0}),e})(),hq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[sq],imports:[[ke,gR,WI,aI],xD,PA,WI,aI]}),e})(),dq=(()=>{class e{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=hk(e)}get inset(){return this._inset}set inset(e){this._inset=hk(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,t){2&e&&(i.uIk("aria-orientation",t.vertical?"vertical":"horizontal"),i.ekj("mat-divider-vertical",t.vertical)("mat-divider-horizontal",!t.vertical)("mat-divider-inset",t.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,t){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),e})(),pq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[aI],aI]}),e})();const fq=new i.OlP("CdkAccordion");let mq=0,gq=(()=>{class e{constructor(e,t,n){this.accordion=e,this._changeDetectorRef=t,this._expansionDispatcher=n,this._openCloseAllSubscription=mn.w.EMPTY,this.closed=new i.vpe,this.opened=new i.vpe,this.destroyed=new i.vpe,this.expandedChange=new i.vpe,this.id="cdk-accordion-child-"+mq++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=n.listen((e,t)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===t&&this.id!==e&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=hk(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=hk(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(fq,12),i.Y36(i.sBO),i.Y36(SD))},e.\u0275dir=i.lG2({type:e,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[i._Bn([{provide:fq,useValue:void 0}])]}),e})(),_q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})();const yq=["body"];function vq(e,t){}const bq=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],wq=["mat-expansion-panel-header","*","mat-action-row"];function Cq(e,t){if(1&e&&i._UZ(0,"span",2),2&e){const e=i.oxw();i.Q6J("@indicatorRotate",e._getExpandedState())}}const Sq=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],kq=["mat-panel-title","mat-panel-description","*"],Tq=new i.OlP("MAT_ACCORDION"),Eq={indicatorRotate:xT("indicatorRotate",[RT("collapsed, void",DT({transform:"rotate(0deg)"})),RT("expanded",DT({transform:"rotate(180deg)"})),PT("expanded <=> collapsed, void => collapsed",IT("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),bodyExpansion:xT("bodyExpansion",[RT("collapsed, void",DT({height:"0px",visibility:"hidden"})),RT("expanded",DT({height:"*",visibility:"visible"})),PT("expanded <=> collapsed, void => collapsed",IT("225ms cubic-bezier(0.4,0.0,0.2,1)"))])};let xq=(()=>{class e{constructor(e){this._template=e}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.Rgc))},e.\u0275dir=i.lG2({type:e,selectors:[["ng-template","matExpansionPanelContent",""]]}),e})(),Iq=0;const Aq=new i.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let Dq=(()=>{class e extends gq{constructor(e,t,n,r,s,o,a){super(e,t,n),this._viewContainerRef=r,this._animationMode=o,this._hideToggle=!1,this.afterExpand=new i.vpe,this.afterCollapse=new i.vpe,this._inputChanges=new ht.xQ,this._headerId="mat-expansion-panel-header-"+Iq++,this._bodyAnimationDone=new ht.xQ,this.accordion=e,this._document=s,this._bodyAnimationDone.pipe(zo((e,t)=>e.fromState===t.fromState&&e.toState===t.toState)).subscribe(e=>{"void"!==e.fromState&&("expanded"===e.toState?this.afterExpand.emit():"collapsed"===e.toState&&this.afterCollapse.emit())}),a&&(this.hideToggle=a.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=hk(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(jt(null),Ht(()=>this.expanded&&!this._portal),Ut(1)).subscribe(()=>{this._portal=new RD(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,t=this._body.nativeElement;return e===t||t.contains(e)}return!1}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Tq,12),i.Y36(i.sBO),i.Y36(SD),i.Y36(i.s_b),i.Y36(o),i.Y36(Wx,8),i.Y36(Aq,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-expansion-panel"]],contentQueries:function(e,t,n){if(1&e&&i.Suo(n,xq,5),2&e){let e;i.iGM(e=i.CRH())&&(t._lazyContent=e.first)}},viewQuery:function(e,t){if(1&e&&i.Gf(yq,5),2&e){let e;i.iGM(e=i.CRH())&&(t._body=e.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,t){2&e&&i.ekj("mat-expanded",t.expanded)("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-expansion-panel-spacing",t._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[i._Bn([{provide:Tq,useValue:void 0}]),i.qOj,i.TTD],ngContentSelectors:wq,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,t){1&e&&(i.F$t(bq),i.Hsn(0),i.TgZ(1,"div",0,1),i.NdJ("@bodyExpansion.done",function(e){return t._bodyAnimationDone.next(e)}),i.TgZ(3,"div",2),i.Hsn(4,1),i.YNc(5,vq,0,0,"ng-template",3),i.qZA(),i.Hsn(6,2),i.qZA()),2&e&&(i.xp6(1),i.Q6J("@bodyExpansion",t._getExpandedState())("id",t.id),i.uIk("aria-labelledby",t._headerId),i.xp6(4),i.Q6J("cdkPortalOutlet",t._portal))},directives:[FD],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Eq.bodyExpansion]},changeDetection:0}),e})();class Rq{}const Oq=hI(Rq);let Pq=(()=>{class e extends Oq{constructor(e,t,n,i,r,s,o){super(),this.panel=e,this._element=t,this._focusMonitor=n,this._changeDetectorRef=i,this._animationMode=s,this._parentChangeSubscription=mn.w.EMPTY;const a=e.accordion?e.accordion._stateChanges.pipe(Ht(e=>!(!e.hideToggle&&!e.togglePosition))):Dt.E;this.tabIndex=parseInt(o||"")||0,this._parentChangeSubscription=(0,JC.T)(e.opened,e.closed,a,e._inputChanges.pipe(Ht(e=>!!(e.hideToggle||e.disabled||e.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Ht(()=>e._containsFocus())).subscribe(()=>n.focusVia(t,"program")),r&&(this.expandedHeight=r.expandedHeight,this.collapsedHeight=r.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:Ek(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,t){e?this._focusMonitor.focusVia(this._element,e,t):this._element.nativeElement.focus(t)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Dq,1),i.Y36(i.SBq),i.Y36(yT),i.Y36(i.sBO),i.Y36(Aq,8),i.Y36(Wx,8),i.$8M("tabindex"))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,t){1&e&&i.NdJ("click",function(){return t._toggle()})("keydown",function(e){return t._keydown(e)}),2&e&&(i.uIk("id",t.panel._headerId)("tabindex",t.tabIndex)("aria-controls",t._getPanelId())("aria-expanded",t._isExpanded())("aria-disabled",t.panel.disabled),i.Udp("height",t._getHeaderHeight()),i.ekj("mat-expanded",t._isExpanded())("mat-expansion-toggle-indicator-after","after"===t._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===t._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[i.qOj],ngContentSelectors:kq,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,t){1&e&&(i.F$t(Sq),i.TgZ(0,"span",0),i.Hsn(1),i.Hsn(2,1),i.Hsn(3,2),i.qZA(),i.YNc(4,Cq,1,1,"span",1)),2&e&&(i.xp6(4),i.Q6J("ngIf",t._showToggle()))},directives:[ue],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[Eq.indicatorRotate]},changeDetection:0}),e})(),Nq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),e})(),Fq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.lG2({type:e,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),e})(),Lq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[ke,aI,_q,LD]]}),e})();function Mq(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"mat-expansion-panel",25),i.NdJ("opened",function(){return i.CHM(e),i.oxw().panelOpenState=!0})("closed",function(){return i.CHM(e),i.oxw().panelOpenState=!1}),i.TgZ(1,"mat-expansion-panel-header"),i.TgZ(2,"mat-panel-title"),i._uU(3),i.qZA(),i.TgZ(4,"mat-panel-description"),i._uU(5),i.qZA(),i.qZA(),i._UZ(6,"mat-divider",26),i.TgZ(7,"div",27),i.TgZ(8,"p"),i.TgZ(9,"b"),i._uU(10,"Name:"),i.qZA(),i._uU(11),i.qZA(),i.TgZ(12,"p"),i.TgZ(13,"b"),i._uU(14,"Last name:"),i.qZA(),i._uU(15),i.qZA(),i.TgZ(16,"p"),i.TgZ(17,"b"),i._uU(18,"Birthdate:"),i.qZA(),i._uU(19),i.ALo(20,"date"),i.qZA(),i.TgZ(21,"b"),i._uU(22),i.qZA(),i._uU(23),i.TgZ(24,"div",28),i.TgZ(25,"a",22),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw().removeContactFromList(t)}),i._UZ(26,"mat-icon",29),i._uU(27," Remove"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.$implicit;i.xp6(3),i.hij(" ",e.name+" "+e.lastName," "),i.xp6(2),i.hij(" ",e.value," "),i.xp6(6),i.hij(" ",e.name,""),i.xp6(4),i.hij(" ",e.lastName,""),i.xp6(4),i.hij(" ",i.xi3(20,7,e.birthday,"dd.MM.YYYY"),""),i.xp6(3),i.Oqu(e.type),i.xp6(1),i.hij(" ",e.value," ")}}function Vq(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Please enter your name "),i.qZA())}function Uq(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Name is "),i.TgZ(2,"strong"),i._uU(3,"required"),i.qZA(),i.qZA())}function qq(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Please enter your last name "),i.qZA())}function Bq(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Last name is "),i.TgZ(2,"strong"),i._uU(3,"required"),i.qZA(),i.qZA())}function jq(e,t){if(1&e&&(i.TgZ(0,"mat-option",30),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e," ")}}function Zq(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Please enter your name "),i.qZA())}function zq(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Name is "),i.TgZ(2,"strong"),i._uU(3,"required"),i.qZA(),i.qZA())}let Gq=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.data=t,this.contactService=n,this.types=["mobile","phone","email","pager"],this.newContacts=[],this.contactInfo=new mo({name:new fo("",As.compose([As.required,As.maxLength(20)])),lastName:new fo("",As.compose([As.required,As.maxLength(30)])),type:new fo(As.required),birthday:new fo("",As.required),value:new fo("",As.required)}),this.matcher=new Po,this.panelOpenState=!1}ngOnInit(){const e=new Date;this.maxDate=new Date,this.maxDate.setUTCFullYear(e.getFullYear()-18,e.getMonth(),e.getDate()),this.maxDate.setDate(this.maxDate.getDate())}create(){this.newContacts.length>0&&this.contactInfo.valid?(this.createMultipleContacts(),this.createSingleContact()):this.newContacts.length>0&&!this.contactInfo.valid?this.createMultipleContacts():this.createSingleContact()}createMultipleContacts(){for(let e of this.newContacts){let t={name:e.name,lastName:e.lastName,type:e.type,birthday:e.birthday.toString(),value:e.value};this.contactService.create(t)}}createSingleContact(){var e,t,n,i,r;let s={name:null===(e=this.contactInfo.get("name"))||void 0===e?void 0:e.value,lastName:null===(t=this.contactInfo.get("lastName"))||void 0===t?void 0:t.value,type:null===(n=this.contactInfo.get("type"))||void 0===n?void 0:n.value,birthday:null===(i=this.contactInfo.get("birthday"))||void 0===i?void 0:i.value.toString(),value:null===(r=this.contactInfo.get("value"))||void 0===r?void 0:r.value};this.contactService.create(s),this.dialogRef.close()}addToContactList(){var e,t,n,i,r;if(this.contactInfo.valid){let s={name:null===(e=this.contactInfo.get("name"))||void 0===e?void 0:e.value,lastName:null===(t=this.contactInfo.get("lastName"))||void 0===t?void 0:t.value,type:null===(n=this.contactInfo.get("type"))||void 0===n?void 0:n.value,birthday:null===(i=this.contactInfo.get("birthday"))||void 0===i?void 0:i.value,value:null===(r=this.contactInfo.get("value"))||void 0===r?void 0:r.value};this.newContacts.push(s),this.contactInfo.reset()}}removeContactFromList(e){this.newContacts=this.newContacts.filter(t=>t!==e)}close(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(SR),i.Y36(TR),i.Y36(JM))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-edit-contact"]],decls:52,vars:18,consts:[[1,"editHeading"],["mat-stroked-button","",3,"click"],["svgIcon","cross"],[1,"basic-container"],[1,"newUsers"],[3,"opened","closed",4,"ngFor","ngForOf"],[1,"formInputs",3,"formGroup"],[1,"info"],["appearance","outline"],["type","text","required","","matInput","","formControlName","name",3,"errorStateMatcher"],[4,"ngIf"],["type","text","required","","matInput","","formControlName","lastName",3,"errorStateMatcher"],["appearance","outline",1,"birthday"],["matInput","","readonly","","formControlName","birthday",3,"matDatepicker","max","click"],["matPrefix","",3,"for"],["picker",""],["matSuffix","",3,"click"],["svgIcon","pencil"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["type","text","required","","matInput","","formControlName","value",3,"errorStateMatcher"],[1,"buttons"],[3,"click"],["svgIcon","user-add"],["mat-flat-button","",3,"disabled","click"],[3,"opened","closed"],[1,"line"],[1,"userInformation"],[1,"remove"],["svgIcon","trash"],[3,"value"]],template:function(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"section",0),i.TgZ(1,"h2"),i._uU(2,"Add contact"),i.qZA(),i.TgZ(3,"button",1),i.NdJ("click",function(){return t.close()}),i._UZ(4,"mat-icon",2),i.qZA(),i.qZA(),i.TgZ(5,"section",3),i.TgZ(6,"div",4),i.YNc(7,Mq,28,10,"mat-expansion-panel",5),i.qZA(),i.TgZ(8,"form",6),i.TgZ(9,"h4"),i._uU(10,"Basic info"),i.qZA(),i.TgZ(11,"div",7),i.TgZ(12,"mat-form-field",8),i.TgZ(13,"mat-label"),i._uU(14,"Name"),i.qZA(),i._UZ(15,"input",9),i.YNc(16,Vq,2,0,"mat-error",10),i.YNc(17,Uq,4,0,"mat-error",10),i.qZA(),i.TgZ(18,"mat-form-field",8),i.TgZ(19,"mat-label"),i._uU(20,"Last name"),i.qZA(),i._UZ(21,"input",11),i.YNc(22,qq,2,0,"mat-error",10),i.YNc(23,Bq,4,0,"mat-error",10),i.qZA(),i.TgZ(24,"mat-form-field",12),i.TgZ(25,"input",13),i.NdJ("click",function(){return i.CHM(e),i.MAs(28).open()}),i.qZA(),i._UZ(26,"mat-datepicker-toggle",14),i._UZ(27,"mat-datepicker",null,15),i.TgZ(29,"span",16),i.NdJ("click",function(){return i.CHM(e),i.MAs(28).open()}),i._UZ(30,"mat-icon",17),i.qZA(),i.qZA(),i.qZA(),i.TgZ(31,"h4"),i._uU(32,"Contact info"),i.qZA(),i.TgZ(33,"div",7),i.TgZ(34,"mat-form-field",8),i.TgZ(35,"mat-label"),i._uU(36,"Type"),i.qZA(),i.TgZ(37,"mat-select",18),i.YNc(38,jq,2,2,"mat-option",19),i.qZA(),i.qZA(),i.TgZ(39,"mat-form-field",8),i.TgZ(40,"mat-label"),i._uU(41,"Value"),i.qZA(),i._UZ(42,"input",20),i.YNc(43,Zq,2,0,"mat-error",10),i.YNc(44,zq,4,0,"mat-error",10),i.qZA(),i.qZA(),i._UZ(45,"mat-divider"),i.TgZ(46,"section",21),i.TgZ(47,"a",22),i.NdJ("click",function(){return t.addToContactList()}),i._UZ(48,"mat-icon",23),i._uU(49," Add another"),i.qZA(),i.TgZ(50,"button",24),i.NdJ("click",function(){return t.create()}),i._uU(51,"Create contact"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=i.MAs(28);i.xp6(7),i.Q6J("ngForOf",t.newContacts),i.xp6(1),i.Q6J("formGroup",t.contactInfo),i.xp6(7),i.Q6J("errorStateMatcher",t.matcher),i.xp6(1),i.Q6J("ngIf",t.contactInfo.hasError("name")&&!t.contactInfo.hasError("required")),i.xp6(1),i.Q6J("ngIf",t.contactInfo.hasError("required")),i.xp6(4),i.Q6J("errorStateMatcher",t.matcher),i.xp6(1),i.Q6J("ngIf",t.contactInfo.hasError("lastName")&&!t.contactInfo.hasError("required")),i.xp6(1),i.Q6J("ngIf",t.contactInfo.hasError("required")),i.xp6(2),i.Q6J("matDatepicker",e)("max",t.maxDate),i.xp6(1),i.Q6J("for",e),i.xp6(12),i.Q6J("ngForOf",t.types),i.xp6(4),i.Q6J("errorStateMatcher",t.matcher),i.xp6(1),i.Q6J("ngIf",t.contactInfo.hasError("value")&&!t.contactInfo.hasError("required")),i.xp6(1),i.Q6J("ngIf",t.contactInfo.hasError("required")),i.xp6(3),i.ekj("disabled",!!t.contactInfo.invalid||null),i.xp6(3),i.Q6J("disabled",t.contactInfo.invalid&&!(t.newContacts.length>0))}},directives:[JA,GV,le,bo,Ws,Eo,OA,CA,HA,Ss,Do,$s,Io,ue,jU,zU,TA,MU,xA,uq,dq,Dq,Pq,Fq,Nq,yA,YI],pipes:[Se],styles:[".newUsers[_ngcontent-%COMP%]{margin-bottom:20px}a.disabled[_ngcontent-%COMP%]{color:gray;cursor:not-allowed}a[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}a[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:5px}.line[_ngcontent-%COMP%]{border-top-color:gray;margin-bottom:10px}.userInformation[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),e})();const Hq=[[["caption"]],[["colgroup"],["col"]]],Yq=["caption","colgroup, col"];function $q(e){return class extends e{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=hk(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const Wq=new i.OlP("CDK_TABLE");let Kq=(()=>{class e{constructor(e){this.template=e}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.Rgc))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdkCellDef",""]]}),e})(),Qq=(()=>{class e{constructor(e){this.template=e}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.Rgc))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdkHeaderCellDef",""]]}),e})(),Jq=(()=>{class e{constructor(e){this.template=e}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.Rgc))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdkFooterCellDef",""]]}),e})();class Xq{}const eB=$q(Xq);let tB=(()=>{class e extends eB{constructor(e){super(),this._table=e,this._stickyEnd=!1}get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const t=this._stickyEnd;this._stickyEnd=hk(e),this._hasStickyChanged=t!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Wq,8))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,t,n){if(1&e&&(i.Suo(n,Kq,5),i.Suo(n,Qq,5),i.Suo(n,Jq,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.cell=e.first),i.iGM(e=i.CRH())&&(t.headerCell=e.first),i.iGM(e=i.CRH())&&(t.footerCell=e.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[i._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:e}]),i.qOj]}),e})();class nB{constructor(e,t){const n=t.nativeElement.classList;for(const i of e._columnCssClassName)n.add(i)}}let iB=(()=>{class e extends nB{constructor(e,t){super(e,t)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(tB),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[i.qOj]}),e})(),rB=(()=>{class e extends nB{constructor(e,t){var n;if(super(e,t),1===(null===(n=e._table)||void 0===n?void 0:n._elementRef.nativeElement.nodeType)){const n=e._table._elementRef.nativeElement.getAttribute("role");t.nativeElement.setAttribute("role","grid"===n||"treegrid"===n?"gridcell":"cell")}}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(tB),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[i.qOj]}),e})();class sB{constructor(){this.tasks=[],this.endTasks=[]}}const oB=new i.OlP("_COALESCED_STYLE_SCHEDULER");let aB=(()=>{class e{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new ht.xQ}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new sB,this._getScheduleObservable().pipe(Dk(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new sB;for(const t of e.tasks)t();for(const t of e.endTasks)t()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,ct.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Ut(1))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),lB=(()=>{class e{constructor(e,t){this.template=e,this._differs=t}ngOnChanges(e){if(!this._columnsDiffer){const t=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(t).create(),this._columnsDiffer.diff(t)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof hB?e.headerCell.template:this instanceof fB?e.footerCell.template:e.cell.template}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.Rgc),i.Y36(i.ZZ4))},e.\u0275dir=i.lG2({type:e,features:[i.TTD]}),e})();class cB extends lB{}const uB=$q(cB);let hB=(()=>{class e extends uB{constructor(e,t,n){super(e,t),this._table=n}ngOnChanges(e){super.ngOnChanges(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.Rgc),i.Y36(i.ZZ4),i.Y36(Wq,8))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[i.qOj,i.TTD]}),e})();class dB extends lB{}const pB=$q(dB);let fB=(()=>{class e extends pB{constructor(e,t,n){super(e,t),this._table=n}ngOnChanges(e){super.ngOnChanges(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.Rgc),i.Y36(i.ZZ4),i.Y36(Wq,8))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[i.qOj,i.TTD]}),e})(),mB=(()=>{class e extends lB{constructor(e,t,n){super(e,t),this._table=n}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.Rgc),i.Y36(i.ZZ4),i.Y36(Wq,8))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[i.qOj]}),e})(),gB=(()=>{class e{constructor(t){this._viewContainer=t,e.mostRecentCellOutlet=this}ngOnDestroy(){e.mostRecentCellOutlet===this&&(e.mostRecentCellOutlet=null)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b))},e.\u0275dir=i.lG2({type:e,selectors:[["","cdkCellOutlet",""]]}),e.mostRecentCellOutlet=null,e})(),_B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,t){1&e&&i.GkF(0,0)},directives:[gB],encapsulation:2}),e})(),yB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,t){1&e&&i.GkF(0,0)},directives:[gB],encapsulation:2}),e})(),vB=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.Rgc))},e.\u0275dir=i.lG2({type:e,selectors:[["ng-template","cdkNoDataRow",""]]}),e})();const bB=["top","bottom","left","right"];class wB{constructor(e,t,n,i,r=!0,s=!0,o){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=n,this._coalescedStyleScheduler=i,this._isBrowser=r,this._needsPositionStickyOnElement=s,this._positionListener=o,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const n=[];for(const i of e)if(i.nodeType===i.ELEMENT_NODE){n.push(i);for(let e=0;e<i.children.length;e++)n.push(i.children[e])}this._coalescedStyleScheduler.schedule(()=>{for(const e of n)this._removeStickyStyle(e,t)})}updateStickyColumns(e,t,n,i=!0){if(!e.length||!this._isBrowser||!t.some(e=>e)&&!n.some(e=>e))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const r=e[0],s=r.children.length,o=this._getCellWidths(r,i),a=this._getStickyStartColumnPositions(o,t),l=this._getStickyEndColumnPositions(o,n),c=t.lastIndexOf(!0),u=n.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const i="rtl"===this.direction,r=i?"right":"left",h=i?"left":"right";for(const o of e)for(let e=0;e<s;e++){const i=o.children[e];t[e]&&this._addStickyStyle(i,r,a[e],e===c),n[e]&&this._addStickyStyle(i,h,l[e],e===u)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===c?[]:o.slice(0,c+1).map((e,n)=>t[n]?e:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===u?[]:o.slice(u).map((e,t)=>n[t+u]?e:null).reverse()}))})}stickRows(e,t,n){if(!this._isBrowser)return;const i="bottom"===n?e.slice().reverse():e,r="bottom"===n?t.slice().reverse():t,s=[],o=[],a=[];for(let c=0,u=0;c<i.length;c++){if(!r[c])continue;s[c]=u;const e=i[c];a[c]=this._isNativeHtmlTable?Array.from(e.children):[e];const t=e.getBoundingClientRect().height;u+=t,o[c]=t}const l=r.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{var e,t;for(let o=0;o<i.length;o++){if(!r[o])continue;const e=s[o],t=o===l;for(const i of a[o])this._addStickyStyle(i,n,e,t)}"top"===n?null===(e=this._positionListener)||void 0===e||e.stickyHeaderRowsUpdated({sizes:o,offsets:s,elements:a}):null===(t=this._positionListener)||void 0===t||t.stickyFooterRowsUpdated({sizes:o,offsets:s,elements:a})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const n=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(e=>!e)?this._removeStickyStyle(n,["bottom"]):this._addStickyStyle(n,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const n of t)e.style[n]="",e.classList.remove(this._borderCellCss[n]);bB.some(n=>-1===t.indexOf(n)&&e.style[n])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,n,i){e.classList.add(this._stickCellCss),i&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${n}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let n=0;for(const i of bB)e.style[i]&&(n+=t[i]);return n?`${n}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const n=[],i=e.children;for(let r=0;r<i.length;r++)n.push(i[r].getBoundingClientRect().width);return this._cachedCellWidths=n,n}_getStickyStartColumnPositions(e,t){const n=[];let i=0;for(let r=0;r<e.length;r++)t[r]&&(n[r]=i,i+=e[r]);return n}_getStickyEndColumnPositions(e,t){const n=[];let i=0;for(let r=e.length;r>0;r--)t[r]&&(n[r]=i,i+=e[r]);return n}}const CB=new i.OlP("CDK_SPL");let SB=(()=>{class e{constructor(e,t){this.viewContainer=e,this.elementRef=t}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,selectors:[["","rowOutlet",""]]}),e})(),kB=(()=>{class e{constructor(e,t){this.viewContainer=e,this.elementRef=t}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,selectors:[["","headerRowOutlet",""]]}),e})(),TB=(()=>{class e{constructor(e,t){this.viewContainer=e,this.elementRef=t}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,selectors:[["","footerRowOutlet",""]]}),e})(),EB=(()=>{class e{constructor(e,t){this.viewContainer=e,this.elementRef=t}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,selectors:[["","noDataRowOutlet",""]]}),e})(),xB=(()=>{class e{constructor(e,t,n,r,s,o,a,l,c,u,h){this._differs=e,this._changeDetectorRef=t,this._elementRef=n,this._dir=s,this._platform=a,this._viewRepeater=l,this._coalescedStyleScheduler=c,this._viewportRuler=u,this._stickyPositioningListener=h,this._onDestroy=new ht.xQ,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new i.vpe,this.viewChange=new pt({start:0,end:Number.MAX_VALUE}),r||this._elementRef.nativeElement.setAttribute("role","table"),this._document=o,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=hk(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=hk(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,t)=>this.trackBy?this.trackBy(t.dataIndex,t.data):t),this._viewportRuler.change().pipe(Dk(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const e=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||e,this._forceRecalculateCellWidths=e,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){this._rowOutlet.viewContainer.clear(),this._noDataRowOutlet.viewContainer.clear(),this._headerRowOutlet.viewContainer.clear(),this._footerRowOutlet.viewContainer.clear(),this._cachedRenderRowsMap.clear(),this._onDestroy.next(),this._onDestroy.complete(),bD(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const t=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,t,(e,t,n)=>this._getEmbeddedViewArgs(e.item,n),e=>e.item.data,e=>{1===e.operation&&e.context&&this._renderCellTemplateForItem(e.record.item.rowDef,e.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(e=>{t.get(e.currentIndex).context.$implicit=e.item.data}),this._updateNoDataRow(),this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),t=this._elementRef.nativeElement.querySelector("thead");t&&(t.style.display=e.length?"":"none");const n=this._headerRowDefs.map(e=>e.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,n,"top"),this._headerRowDefs.forEach(e=>e.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),t=this._elementRef.nativeElement.querySelector("tfoot");t&&(t.style.display=e.length?"":"none");const n=this._footerRowDefs.map(e=>e.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,n,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,n),this._footerRowDefs.forEach(e=>e.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),t=this._getRenderedRows(this._rowOutlet),n=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...t,...n],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((e,t)=>{this._addStickyColumnStyles([e],this._headerRowDefs[t])}),this._rowDefs.forEach(e=>{const n=[];for(let i=0;i<t.length;i++)this._renderRows[i].rowDef===e&&n.push(t[i]);this._addStickyColumnStyles(n,e)}),n.forEach((e,t)=>{this._addStickyColumnStyles([e],this._footerRowDefs[t])}),Array.from(this._columnDefsByName.values()).forEach(e=>e.resetStickyChanged())}_getAllRenderRows(){const e=[],t=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let n=0;n<this._data.length;n++){let i=this._data[n];const r=this._getRenderRowsForData(i,n,t.get(i));this._cachedRenderRowsMap.has(i)||this._cachedRenderRowsMap.set(i,new WeakMap);for(let t=0;t<r.length;t++){let n=r[t];const i=this._cachedRenderRowsMap.get(n.data);i.has(n.rowDef)?i.get(n.rowDef).push(n):i.set(n.rowDef,[n]),e.push(n)}}return e}_getRenderRowsForData(e,t,n){return this._getRowDefs(e,t).map(i=>{const r=n&&n.has(i)?n.get(i):[];if(r.length){const e=r.shift();return e.dataIndex=t,e}return{data:e,rowDef:i,dataIndex:t}})}_cacheColumnDefs(){this._columnDefsByName.clear(),IB(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(e=>{this._columnDefsByName.has(e.name),this._columnDefsByName.set(e.name,e)})}_cacheRowDefs(){this._headerRowDefs=IB(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=IB(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=IB(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(e=>!e.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(e,t)=>e||!!t.getColumnsDiff(),t=this._rowDefs.reduce(e,!1);t&&this._forceRenderDataRows();const n=this._headerRowDefs.reduce(e,!1);n&&this._forceRenderHeaderRows();const i=this._footerRowDefs.reduce(e,!1);return i&&this._forceRenderFooterRows(),t||n||i}_switchDataSource(e){this._data=[],bD(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;var t;bD(this.dataSource)?e=this.dataSource.connect(this):(t=this.dataSource)&&(t instanceof bt.y||"function"==typeof t.lift&&"function"==typeof t.subscribe)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=(0,ut.of)(this.dataSource)),this._renderChangeSubscription=e.pipe(Dk(this._onDestroy)).subscribe(e=>{this._data=e||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,t)=>this._renderRow(this._headerRowOutlet,e,t)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,t)=>this._renderRow(this._footerRowOutlet,e,t)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,t){const n=Array.from(t.columns||[]).map(e=>this._columnDefsByName.get(e)),i=n.map(e=>e.sticky),r=n.map(e=>e.stickyEnd);this._stickyStyler.updateStickyColumns(e,i,r,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const t=[];for(let n=0;n<e.viewContainer.length;n++){const i=e.viewContainer.get(n);t.push(i.rootNodes[0])}return t}_getRowDefs(e,t){if(1==this._rowDefs.length)return[this._rowDefs[0]];let n=[];if(this.multiTemplateDataRows)n=this._rowDefs.filter(n=>!n.when||n.when(t,e));else{let i=this._rowDefs.find(n=>n.when&&n.when(t,e))||this._defaultRowDef;i&&n.push(i)}return n}_getEmbeddedViewArgs(e,t){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:t}}_renderRow(e,t,n,i={}){const r=e.viewContainer.createEmbeddedView(t.template,i,n);return this._renderCellTemplateForItem(t,i),r}_renderCellTemplateForItem(e,t){for(let n of this._getCellTemplates(e))gB.mostRecentCellOutlet&&gB.mostRecentCellOutlet._viewContainer.createEmbeddedView(n,t);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let t=0,n=e.length;t<n;t++){const i=e.get(t).context;i.count=n,i.first=0===t,i.last=t===n-1,i.even=t%2==0,i.odd=!i.even,this.multiTemplateDataRows?(i.dataIndex=this._renderRows[t].dataIndex,i.renderIndex=t):i.index=this._renderRows[t].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,t=>{const n=this._columnDefsByName.get(t);return e.extractCellTemplate(n)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),t=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const n of t){const t=this._document.createElement(n.tag);t.setAttribute("role","rowgroup");for(const e of n.outlets)t.appendChild(e.elementRef.nativeElement);e.appendChild(t)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(e,t)=>e||t.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new wB(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:(0,ut.of)()).pipe(Dk(this._onDestroy)).subscribe(e=>{this._stickyStyler.direction=e,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(e=>!e._table||e._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(e){const t=0===this._rowOutlet.viewContainer.length;if(t!==this._isShowingNoDataRow){const n=this._noDataRowOutlet.viewContainer;t?n.createEmbeddedView(e.templateRef):n.clear(),this._isShowingNoDataRow=t}}}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.ZZ4),i.Y36(i.sBO),i.Y36(i.SBq),i.$8M("role"),i.Y36(ST,8),i.Y36(o),i.Y36(Nk),i.Y36(kD),i.Y36(oB),i.Y36(ED),i.Y36(CB,12))},e.\u0275cmp=i.Xpm({type:e,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,t,n){if(1&e&&(i.Suo(n,vB,5),i.Suo(n,tB,5),i.Suo(n,mB,5),i.Suo(n,hB,5),i.Suo(n,fB,5)),2&e){let e;i.iGM(e=i.CRH())&&(t._noDataRow=e.first),i.iGM(e=i.CRH())&&(t._contentColumnDefs=e),i.iGM(e=i.CRH())&&(t._contentRowDefs=e),i.iGM(e=i.CRH())&&(t._contentHeaderRowDefs=e),i.iGM(e=i.CRH())&&(t._contentFooterRowDefs=e)}},viewQuery:function(e,t){if(1&e&&(i.Gf(SB,7),i.Gf(kB,7),i.Gf(TB,7),i.Gf(EB,7)),2&e){let e;i.iGM(e=i.CRH())&&(t._rowOutlet=e.first),i.iGM(e=i.CRH())&&(t._headerRowOutlet=e.first),i.iGM(e=i.CRH())&&(t._footerRowOutlet=e.first),i.iGM(e=i.CRH())&&(t._noDataRowOutlet=e.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,t){2&e&&i.ekj("cdk-table-fixed-layout",t.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[i._Bn([{provide:Wq,useExisting:e},{provide:kD,useClass:wD},{provide:oB,useClass:aB},{provide:CB,useValue:null}])],ngContentSelectors:Yq,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,t){1&e&&(i.F$t(Hq),i.Hsn(0),i.Hsn(1,1),i.GkF(2,0),i.GkF(3,1),i.GkF(4,2),i.GkF(5,3))},directives:[kB,SB,EB,TB],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),e})();function IB(e,t){return e.concat(Array.from(t))}let AB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[ID]]}),e})();const DB=[[["caption"]],[["colgroup"],["col"]]],RB=["caption","colgroup, col"];let OB=(()=>{class e extends xB{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(e,t){2&e&&i.ekj("mat-table-fixed-layout",t.fixedLayout)},exportAs:["matTable"],features:[i._Bn([{provide:kD,useClass:wD},{provide:xB,useExisting:e},{provide:Wq,useExisting:e},{provide:oB,useClass:aB},{provide:CB,useValue:null}]),i.qOj],ngContentSelectors:RB,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,t){1&e&&(i.F$t(DB),i.Hsn(0),i.Hsn(1,1),i.GkF(2,0),i.GkF(3,1),i.GkF(4,2),i.GkF(5,3))},directives:[kB,SB,EB,TB],styles:['mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-row::after,mat-header-row::after,mat-footer-row::after{display:inline-block;min-height:inherit;content:""}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:-webkit-sticky !important;position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n'],encapsulation:2}),e})(),PB=(()=>{class e extends Kq{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275dir=i.lG2({type:e,selectors:[["","matCellDef",""]],features:[i._Bn([{provide:Kq,useExisting:e}]),i.qOj]}),e})(),NB=(()=>{class e extends Qq{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275dir=i.lG2({type:e,selectors:[["","matHeaderCellDef",""]],features:[i._Bn([{provide:Qq,useExisting:e}]),i.qOj]}),e})(),FB=(()=>{class e extends tB{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275dir=i.lG2({type:e,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[i._Bn([{provide:tB,useExisting:e},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:e}]),i.qOj]}),e})(),LB=(()=>{class e extends iB{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275dir=i.lG2({type:e,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[i.qOj]}),e})(),MB=(()=>{class e extends rB{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275dir=i.lG2({type:e,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[i.qOj]}),e})(),VB=(()=>{class e extends hB{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275dir=i.lG2({type:e,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[i._Bn([{provide:hB,useExisting:e}]),i.qOj]}),e})(),UB=(()=>{class e extends mB{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275dir=i.lG2({type:e,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[i._Bn([{provide:mB,useExisting:e}]),i.qOj]}),e})(),qB=(()=>{class e extends _B{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[i._Bn([{provide:_B,useExisting:e}]),i.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,t){1&e&&i.GkF(0,0)},directives:[gB],encapsulation:2}),e})(),BB=(()=>{class e extends yB{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[i._Bn([{provide:yB,useExisting:e}]),i.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,t){1&e&&i.GkF(0,0)},directives:[gB],encapsulation:2}),e})(),jB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[AB,aI],aI]}),e})();class ZB extends class extends class{}{constructor(e=[]){super(),this._renderData=new pt([]),this._filter=new pt(""),this._internalPageChanges=new ht.xQ,this._renderChangesSubscription=null,this.sortingDataAccessor=(e,t)=>{const n=e[t];if(pk(n)){const e=Number(n);return e<9007199254740991?e:n}return n},this.sortData=(e,t)=>{const n=t.active,i=t.direction;return n&&""!=i?e.sort((e,t)=>{let r=this.sortingDataAccessor(e,n),s=this.sortingDataAccessor(t,n);const o=typeof r,a=typeof s;o!==a&&("number"===o&&(r+=""),"number"===a&&(s+=""));let l=0;return null!=r&&null!=s?r>s?l=1:r<s&&(l=-1):null!=r?l=1:null!=s&&(l=-1),l*("asc"==i?1:-1)}):e},this.filterPredicate=(e,t)=>{const n=Object.keys(e).reduce((t,n)=>t+e[n]+"\u25ec","").toLowerCase(),i=t.trim().toLowerCase();return-1!=n.indexOf(i)},this._data=new pt(e),this._updateChangeSubscription()}get data(){return this._data.value}set data(e){this._data.next(e),this._renderChangesSubscription||this._filterData(e)}get filter(){return this._filter.value}set filter(e){this._filter.next(e),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(e){this._sort=e,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(e){this._paginator=e,this._updateChangeSubscription()}_updateChangeSubscription(){var e;const t=this._sort?(0,JC.T)(this._sort.sortChange,this._sort.initialized):(0,ut.of)(null),n=this._paginator?(0,JC.T)(this._paginator.page,this._internalPageChanges,this._paginator.initialized):(0,ut.of)(null),i=kt([this._data,this._filter]).pipe((0,Pt.U)(([e])=>this._filterData(e))),r=kt([i,t]).pipe((0,Pt.U)(([e])=>this._orderData(e))),s=kt([r,n]).pipe((0,Pt.U)(([e])=>this._pageData(e)));null===(e=this._renderChangesSubscription)||void 0===e||e.unsubscribe(),this._renderChangesSubscription=s.subscribe(e=>this._renderData.next(e))}_filterData(e){return this.filteredData=null==this.filter||""===this.filter?e:e.filter(e=>this.filterPredicate(e,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(e){return this.sort?this.sortData(e.slice(),this.sort):e}_pageData(e){if(!this.paginator)return e;const t=this.paginator.pageIndex*this.paginator.pageSize;return e.slice(t,t+this.paginator.pageSize)}_updatePaginator(e){Promise.resolve().then(()=>{const t=this.paginator;if(t&&(t.length=e,t.pageIndex>0)){const e=Math.ceil(t.length/t.pageSize)-1||0,n=Math.min(t.pageIndex,e);n!==t.pageIndex&&(t.pageIndex=n,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){var e;null===(e=this._renderChangesSubscription)||void 0===e||e.unsubscribe(),this._renderChangesSubscription=null}}{}const zB=new Set;let GB,HB=(()=>{class e{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):YB}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function(e){if(!zB.has(e))try{GB||(GB=document.createElement("style"),GB.setAttribute("type","text/css"),document.head.appendChild(GB)),GB.sheet&&(GB.sheet.insertRule(`@media ${e} {body{ }}`,0),zB.add(e))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Nk))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(Nk))},token:e,providedIn:"root"}),e})();function YB(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let $B=(()=>{class e{constructor(e,t){this._mediaMatcher=e,this._zone=t,this._queries=new Map,this._destroySubject=new ht.xQ}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return WB(fk(e)).some(e=>this._registerQuery(e).mql.matches)}observe(e){let t=kt(WB(fk(e)).map(e=>this._registerQuery(e).observable));return t=At(t.pipe(Ut(1)),t.pipe(xk(1),_k(0))),t.pipe((0,Pt.U)(e=>{const t={matches:!1,breakpoints:{}};return e.forEach(({matches:e,query:n})=>{t.matches=t.matches||e,t.breakpoints[n]=e}),t}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const t=this._mediaMatcher.matchMedia(e),n={observable:new bt.y(e=>{const n=t=>this._zone.run(()=>e.next(t));return t.addListener(n),()=>{t.removeListener(n)}}).pipe(jt(t),(0,Pt.U)(({matches:t})=>({query:e,matches:t})),Dk(this._destroySubject)),mql:t};return this._queries.set(e,n),n}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(HB),i.LFG(i.R0b))},e.\u0275prov=i.Yz7({factory:function(){return new e(i.LFG(HB),i.LFG(i.R0b))},token:e,providedIn:"root"}),e})();function WB(e){return e.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const KB={tooltipState:xT("state",[RT("initial, void, hidden",DT({opacity:0,transform:"scale(0)"})),RT("visible",DT({transform:"scale(1)"})),PT("* => visible",IT("200ms cubic-bezier(0, 0, 0.2, 1)",OT([DT({opacity:0,transform:"scale(0)",offset:0}),DT({opacity:.5,transform:"scale(0.99)",offset:.5}),DT({opacity:1,transform:"scale(1)",offset:1})]))),PT("* => hidden",IT("100ms cubic-bezier(0, 0, 0.2, 1)",DT({opacity:0})))])},QB=Bk({passive:!0}),JB=new i.OlP("mat-tooltip-scroll-strategy"),XB={provide:JB,deps:[uR],useFactory:function(e){return()=>e.scrollStrategies.reposition({scrollThrottle:20})}},ej=new i.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let tj=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l,c,u,h){this._overlay=e,this._elementRef=t,this._scrollDispatcher=n,this._viewContainerRef=i,this._ngZone=r,this._platform=s,this._ariaDescriber=o,this._focusMonitor=a,this._dir=c,this._defaultOptions=u,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new ht.xQ,this._handleKeydown=e=>{this._isTooltipVisible()&&27===e.keyCode&&!Ek(e)&&(e.preventDefault(),e.stopPropagation(),this._ngZone.run(()=>this.hide(0)))},this._scrollStrategy=l,this._document=h,u&&(u.position&&(this.position=u.position),u.touchGestures&&(this.touchGestures=u.touchGestures)),c.change.pipe(Dk(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),r.runOutsideAngular(()=>{t.nativeElement.addEventListener("keydown",this._handleKeydown)})}get position(){return this._position}set position(e){var t;e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),null===(t=this._tooltipInstance)||void 0===t||t.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(e){this._disabled=hk(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Dk(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),e.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach(([t,n])=>{e.removeEventListener(t,n,QB)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const t=this._createOverlay();this._detach(),this._portal=this._portal||new DD(this._tooltipComponent,this._viewContainerRef),this._tooltipInstance=t.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(Dk(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(e)}hide(e=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(e)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const e=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),t=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(e);return t.positionChanges.pipe(Dk(this._destroyed)).subscribe(e=>{this._updateCurrentPositionClass(e.connectionPair),this._tooltipInstance&&e.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:t,panelClass:`${this._cssClassPrefix}-tooltip-panel`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Dk(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Dk(this._destroyed)).subscribe(()=>{var e;return null===(e=this._tooltipInstance)||void 0===e?void 0:e._handleBodyInteraction()}),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const t=e.getConfig().positionStrategy,n=this._getOrigin(),i=this._getOverlayPosition();t.withPositions([this._addOffset(Object.assign(Object.assign({},n.main),i.main)),this._addOffset(Object.assign(Object.assign({},n.fallback),i.fallback))])}_addOffset(e){return e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,t=this.position;let n;"above"==t||"below"==t?n={originX:"center",originY:"above"==t?"top":"bottom"}:"before"==t||"left"==t&&e||"right"==t&&!e?n={originX:"start",originY:"center"}:("after"==t||"right"==t&&e||"left"==t&&!e)&&(n={originX:"end",originY:"center"});const{x:i,y:r}=this._invertPosition(n.originX,n.originY);return{main:n,fallback:{originX:i,originY:r}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,t=this.position;let n;"above"==t?n={overlayX:"center",overlayY:"bottom"}:"below"==t?n={overlayX:"center",overlayY:"top"}:"before"==t||"left"==t&&e||"right"==t&&!e?n={overlayX:"end",overlayY:"center"}:("after"==t||"right"==t&&e||"left"==t&&!e)&&(n={overlayX:"start",overlayY:"center"});const{x:i,y:r}=this._invertPosition(n.overlayX,n.overlayY);return{main:n,fallback:{overlayX:i,overlayY:r}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Ut(1),Dk(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,t){return"above"===this.position||"below"===this.position?"top"===t?t="bottom":"bottom"===t&&(t="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:t}}_updateCurrentPositionClass(e){const{overlayY:t,originX:n,originY:i}=e;let r;if(r="center"===t?this._dir&&"rtl"===this._dir.value?"end"===n?"left":"right":"start"===n?"left":"right":"bottom"===t&&"top"===i?"above":"below",r!==this._currentPosition){const e=this._overlayRef;if(e){const t=`${this._cssClassPrefix}-tooltip-panel-`;e.removePanelClass(t+this._currentPosition),e.addPanelClass(t+r)}this._currentPosition=r}}_setupPointerEnterEventsIfNeeded(){!this._disabled&&this.message&&this._viewInitialized&&!this._passiveListeners.length&&(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",()=>this.hide()],["wheel",e=>this._wheelListener(e)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const t=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",t],["touchcancel",t])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([e,t])=>{this._elementRef.nativeElement.addEventListener(e,t,QB)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const t=this._document.elementFromPoint(e.clientX,e.clientY),n=this._elementRef.nativeElement;t===n||n.contains(t)||this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const t=this._elementRef.nativeElement,n=t.style;("on"===e||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName)&&(n.userSelect=n.msUserSelect=n.webkitUserSelect=n.MozUserSelect="none"),"on"!==e&&t.draggable||(n.webkitUserDrag="none"),n.touchAction="none",n.webkitTapHighlightColor="transparent"}}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(uR),i.Y36(i.SBq),i.Y36(TD),i.Y36(i.s_b),i.Y36(i.R0b),i.Y36(Nk),i.Y36(Kk),i.Y36(yT),i.Y36(void 0),i.Y36(ST),i.Y36(void 0),i.Y36(o))},e.\u0275dir=i.lG2({type:e,inputs:{showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),e})(),nj=(()=>{class e extends tj{constructor(e,t,n,i,r,s,o,a,l,c,u,h){super(e,t,n,i,r,s,o,a,l,c,u,h),this._tooltipComponent=rj}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(uR),i.Y36(i.SBq),i.Y36(TD),i.Y36(i.s_b),i.Y36(i.R0b),i.Y36(Nk),i.Y36(Kk),i.Y36(yT),i.Y36(JB),i.Y36(ST,8),i.Y36(ej,8),i.Y36(o))},e.\u0275dir=i.lG2({type:e,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[i.qOj]}),e})(),ij=(()=>{class e{constructor(e){this._changeDetectorRef=e,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new ht.xQ}show(e){clearTimeout(this._hideTimeoutId),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=void 0,this._onShow(),this._markForCheck()},e)}hide(e){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=void 0,this._markForCheck()},e)}afterHidden(){return this._onHide}isVisible(){return"visible"===this._visibility}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(e){const t=e.toState;"hidden"!==t||this.isVisible()||this._onHide.next(),"visible"!==t&&"hidden"!==t||(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_onShow(){}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.sBO))},e.\u0275dir=i.lG2({type:e}),e})(),rj=(()=>{class e extends ij{constructor(e,t){super(e),this._breakpointObserver=t,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)")}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.sBO),i.Y36($B))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,t){2&e&&i.Udp("zoom","visible"===t._visibility?1:null)},features:[i.qOj],decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0),i.NdJ("@state.start",function(){return t._animationStart()})("@state.done",function(e){return t._animationDone(e)}),i.ALo(1,"async"),i._uU(2),i.qZA()),2&e){let e;i.ekj("mat-tooltip-handset",null==(e=i.lcZ(1,5,t._isHandset))?null:e.matches),i.Q6J("ngClass",t.tooltipClass)("@state",t._visibility),i.xp6(2),i.Oqu(t.message)}},directives:[oe],pipes:[Ce],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[KB.tooltipState]},changeDetection:0}),e})(),sj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[XB],imports:[[wT,ke,gR,aI],aI,xD]}),e})();function oj(e,t){if(1&e&&(i.TgZ(0,"mat-option",19),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e," ")}}function aj(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"mat-form-field",16),i.TgZ(1,"mat-select",17),i.NdJ("selectionChange",function(t){return i.CHM(e),i.oxw(2)._changePageSize(t.value)}),i.YNc(2,oj,2,2,"mat-option",18),i.qZA(),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("appearance",e._formFieldAppearance)("color",e.color),i.xp6(1),i.Q6J("value",e.pageSize)("disabled",e.disabled)("aria-label",e._intl.itemsPerPageLabel),i.xp6(1),i.Q6J("ngForOf",e._displayedPageSizeOptions)}}function lj(e,t){if(1&e&&(i.TgZ(0,"div",20),i._uU(1),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Oqu(e.pageSize)}}function cj(e,t){if(1&e&&(i.TgZ(0,"div",12),i.TgZ(1,"div",13),i._uU(2),i.qZA(),i.YNc(3,aj,3,6,"mat-form-field",14),i.YNc(4,lj,2,1,"div",15),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.hij(" ",e._intl.itemsPerPageLabel," "),i.xp6(1),i.Q6J("ngIf",e._displayedPageSizeOptions.length>1),i.xp6(1),i.Q6J("ngIf",e._displayedPageSizeOptions.length<=1)}}function uj(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",21),i.NdJ("click",function(){return i.CHM(e),i.oxw().firstPage()}),i.O4$(),i.TgZ(1,"svg",7),i._UZ(2,"path",22),i.qZA(),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),i.uIk("aria-label",e._intl.firstPageLabel)}}function hj(e,t){if(1&e){const e=i.EpF();i.O4$(),i.kcU(),i.TgZ(0,"button",23),i.NdJ("click",function(){return i.CHM(e),i.oxw().lastPage()}),i.O4$(),i.TgZ(1,"svg",7),i._UZ(2,"path",24),i.qZA(),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),i.uIk("aria-label",e._intl.lastPageLabel)}}let dj=(()=>{class e{constructor(){this.changes=new ht.xQ,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,t,n)=>{if(0==n||0==t)return`0 of ${n}`;const i=e*t;return`${i+1} \u2013 ${i<(n=Math.max(n,0))?Math.min(i+t,n):i+t} of ${n}`}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e})();const pj={provide:dj,deps:[[new i.FiY,new i.tp0,dj]],useFactory:function(e){return e||new dj}},fj=new i.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),mj=lI(pI(class{}));let gj=(()=>{class e extends mj{constructor(e,t,n){if(super(),this._intl=e,this._changeDetectorRef=t,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new i.vpe,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),n){const{pageSize:e,pageSizeOptions:t,hidePageSize:i,showFirstLastButtons:r}=n;null!=e&&(this._pageSize=e),null!=t&&(this._pageSizeOptions=t),null!=i&&(this._hidePageSize=i),null!=r&&(this._showFirstLastButtons=r)}}get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(dk(e),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=dk(e),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(dk(e),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(e=>dk(e)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(e){this._hidePageSize=hk(e)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(e){this._showFirstLastButtons=hk(e)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex++,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex--,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const t=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(t)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,t)=>e-t),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(dj),i.Y36(i.sBO),i.Y36(void 0))},e.\u0275dir=i.lG2({type:e,inputs:{pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",color:"color"},outputs:{page:"page"},features:[i.qOj]}),e})(),_j=(()=>{class e extends gj{constructor(e,t,n){super(e,t,n),n&&null!=n.formFieldAppearance&&(this._formFieldAppearance=n.formFieldAppearance)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(dj),i.Y36(i.sBO),i.Y36(fj,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[i.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.YNc(2,cj,5,3,"div",2),i.TgZ(3,"div",3),i.TgZ(4,"div",4),i._uU(5),i.qZA(),i.YNc(6,uj,3,5,"button",5),i.TgZ(7,"button",6),i.NdJ("click",function(){return t.previousPage()}),i.O4$(),i.TgZ(8,"svg",7),i._UZ(9,"path",8),i.qZA(),i.qZA(),i.kcU(),i.TgZ(10,"button",9),i.NdJ("click",function(){return t.nextPage()}),i.O4$(),i.TgZ(11,"svg",7),i._UZ(12,"path",10),i.qZA(),i.qZA(),i.YNc(13,hj,3,5,"button",11),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(2),i.Q6J("ngIf",!t.hidePageSize),i.xp6(3),i.hij(" ",t._intl.getRangeLabel(t.pageIndex,t.pageSize,t.length)," "),i.xp6(1),i.Q6J("ngIf",t.showFirstLastButtons),i.xp6(1),i.Q6J("matTooltip",t._intl.previousPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),i.uIk("aria-label",t._intl.previousPageLabel),i.xp6(3),i.Q6J("matTooltip",t._intl.nextPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),i.uIk("aria-label",t._intl.nextPageLabel),i.xp6(3),i.Q6J("ngIf",t.showFirstLastButtons))},directives:[ue,JA,nj,OA,uq,le,YI],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}\n"],encapsulation:2,changeDetection:0}),e})(),yj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[pj],imports:[[ke,XA,hq,sj,aI]]}),e})();const vj=function(){return["/contacts"]},bj=function(){return["/contacts/favorites"]},wj=function(){return["/directory"]};let Cj=(()=>{class e{constructor(e){this.authService=e}ngOnInit(){}logout(){this.authService.SignOut().then(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(uk))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-side-bar"]],decls:17,vars:6,consts:[[1,"sideBar"],["svgIcon","address-book",1,"logoIcon"],[1,"divider"],[1,"routes","routeClass"],[3,"routerLink"],["svgIcon","form",1,"icon"],["svgIcon","star",1,"icon"],["svgIcon","address-book",1,"icon"],[1,"logoutRoute","routeClass"],[3,"click"],["svgIcon","sign-out",1,"icon"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"mat-icon",1),i._UZ(2,"mat-divider",2),i.TgZ(3,"section",3),i.TgZ(4,"a",4),i._UZ(5,"mat-icon",5),i._uU(6,"Contacts"),i.qZA(),i.TgZ(7,"a",4),i._UZ(8,"mat-icon",6),i._uU(9,"Favorites"),i.qZA(),i.TgZ(10,"a",4),i._UZ(11,"mat-icon",7),i._uU(12,"Directory"),i.qZA(),i.qZA(),i.TgZ(13,"section",8),i.TgZ(14,"a",9),i.NdJ("click",function(){return t.logout()}),i._UZ(15,"mat-icon",10),i._uU(16,"Logout"),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(4),i.Q6J("routerLink",i.DdM(3,vj)),i.xp6(3),i.Q6J("routerLink",i.DdM(4,bj)),i.xp6(3),i.Q6J("routerLink",i.DdM(5,wj)))},directives:[GV,dq,$r],styles:[""]}),e})();const Sj=["empTbSort"];function kj(e,t){1&e&&(i.TgZ(0,"th",25),i._uU(1," Name "),i.qZA())}function Tj(e,t){if(1&e&&(i.TgZ(0,"td",26),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",e.name," ")}}function Ej(e,t){1&e&&(i.TgZ(0,"th",25),i._uU(1," Last name "),i.qZA())}function xj(e,t){if(1&e&&(i.TgZ(0,"td",26),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",e.lastName," ")}}function Ij(e,t){1&e&&(i.TgZ(0,"th",25),i._uU(1," Birthday "),i.qZA())}function Aj(e,t){if(1&e&&(i.TgZ(0,"td",26),i._uU(1),i.ALo(2,"date"),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",i.xi3(2,1,e.birthday,"dd.MM.yyyy")," ")}}function Dj(e,t){1&e&&(i.TgZ(0,"th",25),i._uU(1," Type "),i.qZA())}function Rj(e,t){if(1&e&&(i.TgZ(0,"td",26),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",e.type," ")}}function Oj(e,t){1&e&&(i.TgZ(0,"th",25),i._uU(1," Contact "),i.qZA())}function Pj(e,t){if(1&e&&(i.TgZ(0,"td",26),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",e.value," ")}}function Nj(e,t){1&e&&(i.TgZ(0,"th",27),i._uU(1," Action "),i.qZA())}const Fj=function(e){return[e]};function Lj(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",28),i.TgZ(1,"a",29),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw().delete(t)}),i._UZ(2,"mat-icon",30),i.qZA(),i.TgZ(3,"a",31),i._UZ(4,"mat-icon",32),i.qZA(),i.qZA()}if(2&e){const e=t.$implicit;i.xp6(3),i.Q6J("routerLink",i.VKq(1,Fj,"/contacts/"+e.key))}}function Mj(e,t){1&e&&i._UZ(0,"th",27)}function Vj(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",28),i.TgZ(1,"a",33),i.NdJ("click",function(){const t=i.CHM(e).$implicit,n=i.oxw();return n.addToFavorites(t,n.favorites)}),i._UZ(2,"mat-icon",34),i.qZA(),i.qZA()}if(2&e){const e=t.$implicit,n=i.oxw();i.xp6(2),i.Q6J("svgIcon",n.checkIfFavorite(e))}}function Uj(e,t){1&e&&i._UZ(0,"tr",35)}function qj(e,t){1&e&&i._UZ(0,"tr",36)}const Bj=function(){return[5,10,20]};let jj=(()=>{class e{constructor(e,t,n,i){this.authService=e,this.realtimeDb=t,this.dialog=n,this.contactService=i,this.displayedColumns=["name","lastName","birthday","type","value","action","favorites"],this.favorites=[],this.data=[],this.empTbSort=new uD,this.searchFormControl=new fo,this.contactsRef$=t.list("Contact")}ngAfterViewInit(){this.retrieveContacts(),this.retrieveFavorites()}retrieveContacts(){this.contactService.getAll().snapshotChanges().pipe((0,Pt.U)(e=>e.map(e=>Object.assign({key:e.payload.key},e.payload.val())))).subscribe(e=>{this.data=e,this.dataSource=new ZB(e),this.dataSource.sort=this.empTbSort,this.dataSource.paginator=this.paginator})}refresh(){this.retrieveContacts()}delete(e){e.key&&(this.contactService.addToFavorites(e,this.favorites),this.contactService.delete(e.key.toString()).then(()=>{this.refresh()}).catch(e=>console.log(e)))}addNewContact(){this.openModal(Gq)}openModal(e){this.dialog.open(e,{data:this.dataSource.length,panelClass:"matDialog-panelClass",restoreFocus:!1}).afterClosed().subscribe(e=>{e&&console.log(e)})}addToFavorites(e,t){this.contactService.addToFavorites(e,t),this.retrieveFavorites()}retrieveFavorites(){this.contactService.getFavorites().snapshotChanges().pipe((0,Pt.U)(e=>e.map(e=>Object.assign({key:e.payload.key},e.payload.val())))).subscribe(e=>{this.favorites=e})}checkIfFavorite(e){return this.favorites.find(t=>t.name===e.name&&t.lastName===e.lastName&&t.value===e.value)?"favorite":"star"}retrieveFilteredContacts(){let e=this.searchFormControl.value.toLowerCase(),t=[];this.data&&this.data.filter(n=>{var i,r,s,o,a;(n&&(null===(i=null==n?void 0:n.name)||void 0===i?void 0:i.toLowerCase().includes(e))||(null===(r=null==n?void 0:n.lastName)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(s=null==n?void 0:n.type)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(o=null==n?void 0:n.value)||void 0===o?void 0:o.toLowerCase().includes(e))||(null===(a=null==n?void 0:n.birthday)||void 0===a?void 0:a.includes(e)))&&t.push(n)}),this.dataSource=new ZB(t),this.dataSource.sort=this.empTbSort,this.dataSource.paginator=this.paginator}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(uk),i.Y36(KM),i.Y36(DR),i.Y36(JM))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-contacts"]],viewQuery:function(e,t){if(1&e&&(i.Gf(Sj,5),i.Gf(_j,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.empTbSort=e.first),i.iGM(e=i.CRH())&&(t.paginator=e.first)}},decls:41,vars:6,consts:[[1,"overview"],[1,"overviewContainer"],[1,"header"],["mat-raised-button","",3,"click"],[1,"search"],["appearance","outline"],["type","text","matInput","",3,"formControl","keyup"],["svgIcon","search","matSuffix",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["empTbSort","matSort"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastName"],["matColumnDef","birthday"],["matColumnDef","type"],["matColumnDef","value"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["class","rowIcons","mat-cell","",4,"matCellDef"],["matColumnDef","favorites"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"rowIcons"],[1,"trash",3,"click"],["svgIcon","trash"],[1,"edit",3,"routerLink"],["svgIcon","pencil"],[1,"edit",3,"click"],[3,"svgIcon"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"app-side-bar"),i.TgZ(2,"div",1),i.TgZ(3,"section",2),i.TgZ(4,"h2"),i._uU(5,"Address book"),i.qZA(),i.TgZ(6,"button",3),i.NdJ("click",function(){return t.addNewContact()}),i._uU(7,"Add"),i.qZA(),i.qZA(),i.TgZ(8,"section",4),i.TgZ(9,"mat-form-field",5),i.TgZ(10,"mat-label"),i._uU(11,"Search"),i.qZA(),i.TgZ(12,"input",6),i.NdJ("keyup",function(){return t.retrieveFilteredContacts()}),i.qZA(),i._UZ(13,"mat-icon",7),i.qZA(),i.qZA(),i.TgZ(14,"div",8),i.TgZ(15,"table",9,10),i.ynx(17,11),i.YNc(18,kj,2,0,"th",12),i.YNc(19,Tj,2,1,"td",13),i.BQk(),i.ynx(20,14),i.YNc(21,Ej,2,0,"th",12),i.YNc(22,xj,2,1,"td",13),i.BQk(),i.ynx(23,15),i.YNc(24,Ij,2,0,"th",12),i.YNc(25,Aj,3,4,"td",13),i.BQk(),i.ynx(26,16),i.YNc(27,Dj,2,0,"th",12),i.YNc(28,Rj,2,1,"td",13),i.BQk(),i.ynx(29,17),i.YNc(30,Oj,2,0,"th",12),i.YNc(31,Pj,2,1,"td",13),i.BQk(),i.ynx(32,18),i.YNc(33,Nj,2,0,"th",19),i.YNc(34,Lj,5,3,"td",20),i.BQk(),i.ynx(35,21),i.YNc(36,Mj,1,0,"th",19),i.YNc(37,Vj,3,1,"td",20),i.BQk(),i.YNc(38,Uj,1,0,"tr",22),i.YNc(39,qj,1,0,"tr",23),i.qZA(),i._UZ(40,"mat-paginator",24),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(12),i.Q6J("formControl",t.searchFormControl),i.xp6(3),i.Q6J("dataSource",t.dataSource),i.xp6(23),i.Q6J("matHeaderRowDef",t.displayedColumns),i.xp6(1),i.Q6J("matRowDefColumns",t.displayedColumns),i.xp6(1),i.Q6J("pageSizeOptions",i.DdM(5,Bj)))},directives:[Cj,JA,OA,CA,HA,Ss,$s,ko,GV,xA,OB,uD,FB,NB,PB,VB,UB,_j,LB,gD,MB,$r,qB,BB],pipes:[Se],styles:[".search[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-right:24px}.search[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:400px}"]}),e})(),Zj=(()=>{class e{constructor(e,t){this.authService=e,this.router=t,this.routeURL=this.router.url}canActivate(e,t){return new Promise((e,t)=>localStorage.getItem("X-token")||"/login"===this.routeURL?(this.routeURL=this.router.url,e(!0)):(this.routeURL="/login",this.router.navigate(["/login"]),e(!1)))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(uk),i.LFG(Yr))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function zj(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Please enter your name "),i.qZA())}function Gj(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Name is "),i.TgZ(2,"strong"),i._uU(3,"required"),i.qZA(),i.qZA())}function Hj(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Please enter your last name "),i.qZA())}function Yj(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Last name is "),i.TgZ(2,"strong"),i._uU(3,"required"),i.qZA(),i.qZA())}function $j(e,t){if(1&e&&(i.TgZ(0,"mat-option",20),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e," ")}}function Wj(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Please enter your name "),i.qZA())}function Kj(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," Name is "),i.TgZ(2,"strong"),i._uU(3,"required"),i.qZA(),i.qZA())}let Qj=(()=>{class e{constructor(e,t,n,i){this.contactService=e,this.route=t,this.dialogRef=n,this.currentContact=i,this.types=["mobile","phone","email","pager"],this.newContacts=[],this.contactInfo=new mo({name:new fo("",As.compose([As.required,As.maxLength(20)])),lastName:new fo("",As.compose([As.required,As.maxLength(30)])),type:new fo(As.required),birthday:new fo("",As.required),value:new fo("",As.required)}),this.matcher=new Po,this.contacts=[]}ngOnInit(){var e,t,n,i,r;const s=new Date;this.maxDate=new Date,this.maxDate.setUTCFullYear(s.getFullYear()-18,s.getMonth(),s.getDate()),this.maxDate.setDate(this.maxDate.getDate()),null===(e=this.contactInfo.get("name"))||void 0===e||e.setValue(this.currentContact.name),null===(t=this.contactInfo.get("lastName"))||void 0===t||t.setValue(this.currentContact.lastName),null===(n=this.contactInfo.get("birthday"))||void 0===n||n.setValue(new Date(this.currentContact.birthday)),null===(i=this.contactInfo.get("type"))||void 0===i||i.patchValue(this.currentContact.type),null===(r=this.contactInfo.get("value"))||void 0===r||r.patchValue(this.currentContact.value)}update(){this.changeContactInfo(),this.currentContact.key&&this.contactService.update(this.currentContact.key,this.currentContact).finally(()=>{this.dialogRef.close()})}changeContactInfo(){var e,t,n,i,r;this.currentContact.type=null===(e=this.contactInfo.get("type"))||void 0===e?void 0:e.value,this.currentContact.lastName=null===(t=this.contactInfo.get("lastName"))||void 0===t?void 0:t.value,this.currentContact.name=null===(n=this.contactInfo.get("name"))||void 0===n?void 0:n.value,this.currentContact.birthday=null===(i=this.contactInfo.get("birthday"))||void 0===i?void 0:i.value.toString(),this.currentContact.value=null===(r=this.contactInfo.get("value"))||void 0===r?void 0:r.value}close(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(JM),i.Y36(Ti),i.Y36(SR),i.Y36(TR))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-edit-contact"]],decls:45,vars:14,consts:[[1,"editHeading"],["mat-stroked-button","",3,"click"],["svgIcon","cross"],[1,"basic-container"],[1,"formInputs",3,"formGroup"],[1,"info"],["appearance","outline"],["type","text","required","","matInput","","formControlName","name",3,"errorStateMatcher"],[4,"ngIf"],["type","text","required","","matInput","","formControlName","lastName",3,"errorStateMatcher"],["appearance","outline",1,"birthday"],["matInput","","readonly","","formControlName","birthday",3,"matDatepicker","max","click"],["matPrefix","",3,"for"],["picker",""],["matSuffix","",3,"click"],["svgIcon","pencil"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["type","text","required","","matInput","","formControlName","value",3,"errorStateMatcher"],["mat-flat-button","",3,"click"],[3,"value"]],template:function(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"section",0),i.TgZ(1,"h2"),i._uU(2,"Edit contact"),i.qZA(),i.TgZ(3,"button",1),i.NdJ("click",function(){return t.close()}),i._UZ(4,"mat-icon",2),i.qZA(),i.qZA(),i.TgZ(5,"section",3),i.TgZ(6,"form",4),i.TgZ(7,"h4"),i._uU(8,"Basic info"),i.qZA(),i.TgZ(9,"div",5),i.TgZ(10,"mat-form-field",6),i.TgZ(11,"mat-label"),i._uU(12,"Name"),i.qZA(),i._UZ(13,"input",7),i.YNc(14,zj,2,0,"mat-error",8),i.YNc(15,Gj,4,0,"mat-error",8),i.qZA(),i.TgZ(16,"mat-form-field",6),i.TgZ(17,"mat-label"),i._uU(18,"Last name"),i.qZA(),i._UZ(19,"input",9),i.YNc(20,Hj,2,0,"mat-error",8),i.YNc(21,Yj,4,0,"mat-error",8),i.qZA(),i.TgZ(22,"mat-form-field",10),i.TgZ(23,"input",11),i.NdJ("click",function(){return i.CHM(e),i.MAs(26).open()}),i.qZA(),i._UZ(24,"mat-datepicker-toggle",12),i._UZ(25,"mat-datepicker",null,13),i.TgZ(27,"span",14),i.NdJ("click",function(){return i.CHM(e),i.MAs(26).open()}),i._UZ(28,"mat-icon",15),i.qZA(),i.qZA(),i.qZA(),i.TgZ(29,"h4"),i._uU(30,"Contact info"),i.qZA(),i.TgZ(31,"div",5),i.TgZ(32,"mat-form-field",6),i.TgZ(33,"mat-label"),i._uU(34,"Type"),i.qZA(),i.TgZ(35,"mat-select",16),i.YNc(36,$j,2,2,"mat-option",17),i.qZA(),i.qZA(),i.TgZ(37,"mat-form-field",6),i.TgZ(38,"mat-label"),i._uU(39,"Value"),i.qZA(),i._UZ(40,"input",18),i.YNc(41,Wj,2,0,"mat-error",8),i.YNc(42,Kj,4,0,"mat-error",8),i.qZA(),i.qZA(),i.TgZ(43,"button",19),i.NdJ("click",function(){return t.update()}),i._uU(44,"Update"),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=i.MAs(26);i.xp6(6),i.Q6J("formGroup",t.contactInfo),i.xp6(7),i.Q6J("errorStateMatcher",t.matcher),i.xp6(1),i.Q6J("ngIf",t.contactInfo.hasError("name")&&!t.contactInfo.hasError("required")),i.xp6(1),i.Q6J("ngIf",t.contactInfo.hasError("required")),i.xp6(4),i.Q6J("errorStateMatcher",t.matcher),i.xp6(1),i.Q6J("ngIf",t.contactInfo.hasError("lastName")&&!t.contactInfo.hasError("required")),i.xp6(1),i.Q6J("ngIf",t.contactInfo.hasError("required")),i.xp6(2),i.Q6J("matDatepicker",e)("max",t.maxDate),i.xp6(1),i.Q6J("for",e),i.xp6(12),i.Q6J("ngForOf",t.types),i.xp6(4),i.Q6J("errorStateMatcher",t.matcher),i.xp6(1),i.Q6J("ngIf",t.contactInfo.hasError("value")&&!t.contactInfo.hasError("required")),i.xp6(1),i.Q6J("ngIf",t.contactInfo.hasError("required"))}},directives:[JA,GV,bo,Ws,Eo,OA,CA,HA,Ss,Do,$s,Io,ue,jU,zU,TA,MU,xA,uq,le,yA,YI],styles:[""]}),e})(),Jj=(()=>{class e{constructor(e,t,n,i){this.contactService=e,this.route=t,this.dialog=n,this.router=i,this.types=["mobile","phone","email","pager"],this.newContacts=[],this.matcher=new Po,this.key="",this.contacts=[],this.currentContact={birthday:"",lastName:"",name:"",type:"",value:""},i.events.subscribe(e=>{this.key=this.route.snapshot.paramMap.get("key")||""})}ngOnInit(){const e=new Date;this.maxDate=new Date,this.maxDate.setUTCFullYear(e.getFullYear()-18,e.getMonth(),e.getDate()),this.maxDate.setDate(this.maxDate.getDate()),this.contactService.getAll().snapshotChanges().pipe((0,Pt.U)(e=>e.map(e=>Object.assign({key:e.payload.key},e.payload.val())))).subscribe(e=>{this.contacts=e,this.contacts.find(e=>e.key===this.key.toString())&&(this.currentContact=this.contacts.find(e=>e.key===this.key.toString()))})}update(){this.dialog.open(Qj,{data:this.currentContact,panelClass:"matDialog-panelClass",restoreFocus:!1}).afterClosed().subscribe(e=>{e&&console.log(e)})}close(){this.router.navigate(["/contacts"])}delete(){this.contactService.delete(this.key).finally(()=>{this.close()})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(JM),i.Y36(Ti),i.Y36(DR),i.Y36(Yr))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-contact-details"]],decls:45,vars:9,consts:[[1,"editHeading"],["mat-stroked-button","",3,"click"],["svgIcon","cross"],[1,"basic-container"],[1,"formInputs"],[1,"info"],[1,"detailsField"],[1,"buttons"],["mat-flat-button","",1,"delete",3,"click"],["svgIcon","trash"],["mat-flat-button","",3,"click"]],template:function(e,t){1&e&&(i.TgZ(0,"section",0),i.TgZ(1,"h2"),i._uU(2,"Contact details"),i.qZA(),i.TgZ(3,"button",1),i.NdJ("click",function(){return t.close()}),i._UZ(4,"mat-icon",2),i.qZA(),i.qZA(),i.TgZ(5,"section",3),i.TgZ(6,"div",4),i.TgZ(7,"h3"),i._uU(8,"Basic info"),i.qZA(),i.TgZ(9,"div",5),i.TgZ(10,"div",6),i.TgZ(11,"h5"),i._uU(12,"Name"),i.qZA(),i.TgZ(13,"span"),i._uU(14),i.qZA(),i.qZA(),i.TgZ(15,"div",6),i.TgZ(16,"h5"),i._uU(17,"Last name"),i.qZA(),i.TgZ(18,"span"),i._uU(19),i.qZA(),i.qZA(),i.TgZ(20,"div",6),i.TgZ(21,"h5"),i._uU(22,"Birthday"),i.qZA(),i.TgZ(23,"span"),i._uU(24),i.ALo(25,"date"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(26,"h3"),i._uU(27,"Contact info"),i.qZA(),i.TgZ(28,"div",5),i.TgZ(29,"div",6),i.TgZ(30,"h5"),i._uU(31,"Type"),i.qZA(),i.TgZ(32,"span"),i._uU(33),i.qZA(),i.qZA(),i.TgZ(34,"div",6),i.TgZ(35,"h5"),i._uU(36),i.qZA(),i.TgZ(37,"span"),i._uU(38),i.qZA(),i.qZA(),i.qZA(),i.TgZ(39,"div",7),i.TgZ(40,"button",8),i.NdJ("click",function(){return t.delete()}),i._UZ(41,"mat-icon",9),i._uU(42,"Delete contact"),i.qZA(),i.TgZ(43,"button",10),i.NdJ("click",function(){return t.update()}),i._uU(44,"Edit contact"),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(14),i.Oqu(t.currentContact.name),i.xp6(5),i.Oqu(t.currentContact.lastName),i.xp6(5),i.Oqu(i.xi3(25,6,t.currentContact.birthday,"dd.MM.yyyy")),i.xp6(9),i.Oqu(t.currentContact.type),i.xp6(3),i.Oqu(t.currentContact.type),i.xp6(2),i.Oqu(t.currentContact.value))},directives:[JA,GV],pipes:[Se],styles:[".detailsField[_ngcontent-%COMP%]{margin-bottom:36px}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.buttons[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})();const Xj=["empTbSort"];function eZ(e,t){1&e&&(i.TgZ(0,"th",16),i._uU(1," Name "),i.qZA())}function tZ(e,t){if(1&e&&(i.TgZ(0,"td",17),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",e.name," ")}}function nZ(e,t){1&e&&(i.TgZ(0,"th",16),i._uU(1," Last name "),i.qZA())}function iZ(e,t){if(1&e&&(i.TgZ(0,"td",17),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",e.lastName," ")}}function rZ(e,t){1&e&&(i.TgZ(0,"th",16),i._uU(1," Birthday "),i.qZA())}function sZ(e,t){if(1&e&&(i.TgZ(0,"td",17),i._uU(1),i.ALo(2,"date"),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",i.xi3(2,1,e.birthday,"dd.MM.yyyy")," ")}}function oZ(e,t){1&e&&(i.TgZ(0,"th",16),i._uU(1," Type "),i.qZA())}function aZ(e,t){if(1&e&&(i.TgZ(0,"td",17),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",e.type," ")}}function lZ(e,t){1&e&&(i.TgZ(0,"th",16),i._uU(1," Contact "),i.qZA())}function cZ(e,t){if(1&e&&(i.TgZ(0,"td",17),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",e.value," ")}}function uZ(e,t){1&e&&i._UZ(0,"tr",18)}function hZ(e,t){1&e&&i._UZ(0,"tr",19)}const dZ=function(){return[5,10,20]};let pZ=(()=>{class e{constructor(e){this.contactService=e,this.displayedColumns=["name","lastName","birthday","type","value"],this.empTbSort=new uD}ngAfterViewInit(){this.retrieveContacts()}retrieveContacts(){this.contactService.getFavorites().snapshotChanges().pipe((0,Pt.U)(e=>e.map(e=>Object.assign({key:e.payload.key},e.payload.val())))).subscribe(e=>{this.dataSource=new ZB(e),this.dataSource.sort=this.empTbSort,this.dataSource.paginator=this.paginator})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(JM))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-favorites"]],viewQuery:function(e,t){if(1&e&&(i.Gf(Xj,5),i.Gf(_j,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.empTbSort=e.first),i.iGM(e=i.CRH())&&(t.paginator=e.first)}},decls:27,vars:5,consts:[[1,"overview"],[1,"overviewContainer"],[1,"header"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["empTbSort","matSort"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastName"],["matColumnDef","birthday"],["matColumnDef","type"],["matColumnDef","value"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"app-side-bar"),i.TgZ(2,"div",1),i.TgZ(3,"section",2),i.TgZ(4,"h2"),i._uU(5,"Favorites"),i.qZA(),i.qZA(),i.TgZ(6,"div",3),i.TgZ(7,"table",4,5),i.ynx(9,6),i.YNc(10,eZ,2,0,"th",7),i.YNc(11,tZ,2,1,"td",8),i.BQk(),i.ynx(12,9),i.YNc(13,nZ,2,0,"th",7),i.YNc(14,iZ,2,1,"td",8),i.BQk(),i.ynx(15,10),i.YNc(16,rZ,2,0,"th",7),i.YNc(17,sZ,3,4,"td",8),i.BQk(),i.ynx(18,11),i.YNc(19,oZ,2,0,"th",7),i.YNc(20,aZ,2,1,"td",8),i.BQk(),i.ynx(21,12),i.YNc(22,lZ,2,0,"th",7),i.YNc(23,cZ,2,1,"td",8),i.BQk(),i.YNc(24,uZ,1,0,"tr",13),i.YNc(25,hZ,1,0,"tr",14),i.qZA(),i._UZ(26,"mat-paginator",15),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(7),i.Q6J("dataSource",t.dataSource),i.xp6(17),i.Q6J("matHeaderRowDef",t.displayedColumns),i.xp6(1),i.Q6J("matRowDefColumns",t.displayedColumns),i.xp6(1),i.Q6J("pageSizeOptions",i.DdM(4,dZ)))},directives:[Cj,OB,uD,FB,NB,PB,VB,UB,_j,LB,gD,MB,qB,BB],pipes:[Se],styles:[""]}),e})();const fZ=["*",[["mat-card-footer"]]],mZ=["*","mat-card-footer"];let gZ=(()=>{class e{constructor(e){this._animationMode=e}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Wx,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,t){2&e&&i.ekj("_mat-animation-noopable","NoopAnimations"===t._animationMode)},exportAs:["matCard"],ngContentSelectors:mZ,decls:2,vars:0,template:function(e,t){1&e&&(i.F$t(fZ),i.Hsn(0),i.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),e})(),_Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[aI],aI]}),e})();function yZ(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"mat-card",5),i.TgZ(1,"div"),i._uU(2),i.qZA(),i.TgZ(3,"div"),i.TgZ(4,"mat-icon",6),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw().deleteContact(t.key||"")}),i.qZA(),i.TgZ(5,"mat-icon",7),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw().editContact(t)}),i.qZA(),i.TgZ(6,"mat-icon",8),i.NdJ("click",function(){const t=i.CHM(e).$implicit,n=i.oxw();return n.addToFavorites(t,n.favorites)}),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.$implicit,n=i.oxw();i.xp6(2),i.AsE(" ",e.name," ",e.lastName," "),i.xp6(4),i.Q6J("svgIcon",n.checkIfFavorite(e))}}const vZ=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:rD},{path:"contacts/favorites",component:pZ,canActivate:[Zj]},{path:"contacts/:key",component:Jj,canActivate:[Zj]},{path:"contacts",component:jj,canActivate:[Zj]},{path:"directory",component:(()=>{class e{constructor(e,t){this.dialog=e,this.contactService=t,this.contacts=[],this.favorites=[]}ngAfterViewInit(){this.retrieveFavoritesAndContacts()}retrieveFavoritesAndContacts(){this.contactService.getAll().snapshotChanges().pipe((0,Pt.U)(e=>e.map(e=>Object.assign({key:e.payload.key},e.payload.val())))).subscribe(e=>{this.contacts=e}),this.contactService.getFavorites().snapshotChanges().pipe((0,Pt.U)(e=>e.map(e=>Object.assign({key:e.payload.key},e.payload.val())))).subscribe(e=>{this.favorites=e})}checkIfFavorite(e){return this.favorites.find(t=>t.name===e.name&&t.lastName===e.lastName&&t.value===e.value)?"favorite":"star"}deleteContact(e){return this.contactService.delete(e)}editContact(e){this.dialog.open(Qj,{data:e,panelClass:"matDialog-panelClass",restoreFocus:!1}).afterClosed().subscribe(e=>{e&&console.log(e)})}addToFavorites(e,t){this.contactService.addToFavorites(e,t),this.retrieveFavoritesAndContacts()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(DR),i.Y36(JM))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-directory"]],decls:8,vars:1,consts:[[1,"overview"],[1,"overviewContainer"],[1,"header"],[1,"favoriteCards"],["class","card",4,"ngFor","ngForOf"],[1,"card"],["svgIcon","trash",3,"click"],["svgIcon","pencil",3,"click"],[3,"svgIcon","click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"app-side-bar"),i.TgZ(2,"div",1),i.TgZ(3,"section",2),i.TgZ(4,"h2"),i._uU(5,"Directory"),i.qZA(),i.qZA(),i.TgZ(6,"div",3),i.YNc(7,yZ,7,3,"mat-card",4),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(7),i.Q6J("ngForOf",t.contacts))},directives:[Cj,le,gZ,GV],styles:[".favoriteCards[_ngcontent-%COMP%]{margin-left:24px;margin-right:24px;display:grid;grid-template-columns:1fr 1fr;grid-column-gap:24px;grid-row-gap:24px}.favoriteCards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-height:48px;display:flex;align-items:center;justify-content:space-between}.favoriteCards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding:4px;height:18px;width:18px;cursor:pointer}"]}),e})(),canActivate:[Zj]}];let bZ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[os.forRoot(vZ)],os]}),e})(),wZ=(()=>{class e{constructor(){this.title="addressio"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&i._UZ(0,"router-outlet")},directives:[Kr],styles:[""]}),e})();class CZ extends Fo.ZR{constructor(e,t){super(SZ(e),`Firebase Storage: ${t} (${SZ(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,CZ.prototype)}_codeEquals(e){return SZ(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function SZ(e){return"storage/"+e}function kZ(){return new CZ("unknown","An unknown error occurred, please check the error payload for server response.")}function TZ(){return new CZ("canceled","User canceled the upload/download.")}function EZ(){return new CZ("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function xZ(e){return new CZ("invalid-argument",e)}function IZ(){return new CZ("app-deleted","The Firebase app was deleted.")}function AZ(e){return new CZ("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function DZ(e,t){return new CZ("invalid-format","String does not match format '"+e+"': "+t)}function RZ(e){throw new CZ("internal-error","Internal error: "+e)}class OZ{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=OZ.makeFromUrl(e,t)}catch(i){return new OZ(e,"")}if(""===n.path)return n;throw new CZ("invalid-default-bucket","Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let n=null;const i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function r(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${s}/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:r},{regex:new RegExp(`^https?://${"firebasestorage.googleapis.com"===t?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/([A-Za-z0-9.\\-_]+)/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:r}];for(let a=0;a<o.length;a++){const t=o[a],i=t.regex.exec(e);if(i){let e=i[t.indices.path];e||(e=""),n=new OZ(i[t.indices.bucket],e),t.postModify(n);break}}if(null==n)throw function(e){return new CZ("invalid-url","Invalid URL '"+e+"'.")}(e);return n}}class PZ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function NZ(e){return"string"==typeof e||e instanceof String}function FZ(e){return LZ()&&e instanceof Blob}function LZ(){return"undefined"!=typeof Blob}function MZ(e,t,n,i){if(i<t)throw xZ(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw xZ(`Invalid value for '${e}'. Expected ${n} or less.`)}function VZ(e,t,n){let i=t;return null==n&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function UZ(e){const t=encodeURIComponent;let n="?";for(const i in e)e.hasOwnProperty(i)&&(n=n+(t(i)+"=")+t(e[i])+"&");return n=n.slice(0,-1),n}var qZ=(()=>(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(qZ||(qZ={})),qZ))();class BZ{constructor(e,t,n,i,r,s,o,a,l,c,u){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{const n=this.resolve_,i=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){i(s)}else if(null!==r){const e=kZ();e.serverResponse=r.getErrorText(),i(this.errorCallback_?this.errorCallback_(r,e):e)}else i(t.canceled?this.appDelete_?IZ():TZ():new CZ("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new jZ(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(...e){c||(c=!0,t.apply(null,e))}function h(t){r=setTimeout(()=>{r=null,e(p,l())},t)}function d(){s&&clearTimeout(s)}function p(e,...t){if(c)return void d();if(e)return d(),void u.call(null,e,...t);if(l()||o)return d(),void u.call(null,e,...t);let n;i<64&&(i*=2),1===a?(a=2,n=0):n=1e3*(i+Math.random()),h(n)}let f=!1;function m(e){f||(f=!0,d(),c||(null!==r?(e||(a=2),clearTimeout(r),h(0)):e||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}((e,t)=>{if(t)return void e(!1,new jZ(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{null!==this.progressCallback_&&this.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===qZ.NO_ERROR,r=n.getStatus();if(!t||this.isRetryStatusCode_(r)){const t=n.getErrorCode()===qZ.ABORT;return void e(!1,new jZ(!1,null,t))}const s=-1!==this.successCodes_.indexOf(r);e(!0,new jZ(s,n))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),i=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||i}}class jZ{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function ZZ(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function zZ(...e){const t=ZZ();if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(LZ())return new Blob(e);throw new CZ("unsupported-environment","This browser doesn't seem to support creating Blobs")}const GZ={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class HZ{constructor(e,t){this.data=e,this.contentType=t||null}}function YZ(e,t){switch(e){case GZ.RAW:return new HZ($Z(t));case GZ.BASE64:case GZ.BASE64URL:return new HZ(WZ(e,t));case GZ.DATA_URL:return new HZ(function(e){const t=new KZ(e);return t.base64?WZ(GZ.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw DZ(GZ.DATA_URL,"Malformed data URL.")}return $Z(t)}(t.rest)}(t),new KZ(t).contentType)}throw kZ()}function $Z(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(i=65536|(1023&i)<<10|1023&e.charCodeAt(++n),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function WZ(e,t){switch(e){case GZ.BASE64:{const n=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(n||i)throw DZ(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case GZ.BASE64URL:{const n=-1!==t.indexOf("+"),i=-1!==t.indexOf("/");if(n||i)throw DZ(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=atob(t)}catch(r){throw DZ(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class KZ{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw DZ(GZ.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;var i;null!=n&&(this.base64=(i=n).length>=";base64".length&&";base64"===i.substring(i.length-";base64".length),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}}class QZ{constructor(e,t){let n=0,i="";FZ(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(FZ(this.data_)){const s=(i=e,r=t,(n=this.data_).webkitSlice?n.webkitSlice(i,r):n.mozSlice?n.mozSlice(i,r):n.slice?n.slice(i,r):null);return null===s?null:new QZ(s)}var n,i,r;{const n=new Uint8Array(this.data_.buffer,e,t-e);return new QZ(n,!0)}}static getBlob(...e){if(LZ()){const t=e.map(e=>e instanceof QZ?e.data_:e);return new QZ(zZ.apply(null,t))}{const t=e.map(e=>NZ(e)?YZ(GZ.RAW,e).data:e.data_);let n=0;t.forEach(e=>{n+=e.byteLength});const i=new Uint8Array(n);let r=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)i[r++]=e[t]}),new QZ(i,!0)}}uploadData(){return this.data_}}function JZ(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}function XZ(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function ez(e,t){return t}class tz{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||ez}}let nz=null;function iz(){if(nz)return nz;const e=[];e.push(new tz("bucket")),e.push(new tz("generation")),e.push(new tz("metageneration")),e.push(new tz("name","fullPath",!0));const t=new tz("name");t.xform=function(e,t){return function(e){return!NZ(e)||e.length<2?e:XZ(e)}(t)},e.push(t);const n=new tz("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new tz("timeCreated")),e.push(new tz("updated")),e.push(new tz("md5Hash",null,!0)),e.push(new tz("cacheControl",null,!0)),e.push(new tz("contentDisposition",null,!0)),e.push(new tz("contentEncoding",null,!0)),e.push(new tz("contentLanguage",null,!0)),e.push(new tz("contentType",null,!0)),e.push(new tz("metadata","customMetadata",!0)),nz=e,nz}function rz(e,t,n){const i=JZ(t);return null===i?null:function(e,t,n){const i={type:"file"},r=n.length;for(let s=0;s<r;s++){const e=n[s];i[e.local]=e.xform(i,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=new OZ(e.bucket,e.fullPath);return t._makeStorageReference(n)}})}(i,e),i}(e,i,n)}function sz(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const i=t[r];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}class oz{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function az(e){if(!e)throw kZ()}function lz(e,t){return function(n,i){const r=rz(e,i,t);return az(null!==r),r}}function cz(e){return function(t,n){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new CZ("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new CZ("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new CZ("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new CZ("unauthorized","User does not have permission to access '"+e.path+"'."):n,i.serverResponse=n.serverResponse,i}}function uz(e){const t=cz(e);return function(n,i){let r=t(n,i);return 404===n.getStatus()&&(r=new CZ("object-not-found","Object '"+e.path+"' does not exist.")),r.serverResponse=i.serverResponse,r}}function hz(e,t,n){const i=VZ(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new oz(i,"GET",lz(e,n),r);return s.errorHandler=uz(t),s}function dz(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),i}class pz{constructor(e,t,n,i){this.current=e,this.total=t,this.finalized=!!n,this.metadata=i||null}}function fz(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(i){az(!1)}return az(!!n&&-1!==(t||["active"]).indexOf(n)),n}const mz={STATE_CHANGED:"state_changed"},gz={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _z(e){switch(e){case"running":case"pausing":case"canceling":return gz.RUNNING;case"paused":return gz.PAUSED;case"success":return gz.SUCCESS;case"canceled":return gz.CANCELED;case"error":default:return gz.ERROR}}class yz{constructor(e,t,n){if(function(e){return"function"==typeof e}(e)||null!=t||null!=n)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function vz(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class bz extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qZ.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qZ.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qZ.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,i){if(this.sent_)throw RZ("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw RZ("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw RZ("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw RZ("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw RZ("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function wz(){return new bz}class Cz{constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=iz(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{this._request=void 0,this._chunkMultiplier=1,e._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=e,this._transition("error"))},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals("canceled")?this.completeTransitions_():(this._error=e,this._transition("error"))},this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,n])=>{switch(this._state){case"running":e(t,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const n=function(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o=dz(t,i,r),a={name:o.fullPath},l=VZ(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=sz(o,n),h=new oz(l,"POST",function(e){let t;fz(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){az(!1)}return az(NZ(t)),t},e.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=u,h.errorHandler=cz(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,wz,e,t);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const i=function(e,t,n,i){const r=new oz(n,"POST",function(e){const t=fz(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(s){az(!1)}n||az(!1);const r=Number(n);return az(!isNaN(r)),new pz(r,i.size(),"final"===t)},e.maxUploadRetryTime);return r.headers={"X-Goog-Upload-Command":"query"},r.errorHandler=cz(t),r}(this._ref.storage,this._ref._location,e,this._blob),r=this._ref.storage._makeRequest(i,wz,t,n);this._request=r,r.getPromise().then(e=>{e=e,this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new pz(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((i,r)=>{let s;try{s=function(e,t,n,i,r,s,o,a){const l=new pz(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw new CZ("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;r>0&&(u=Math.min(u,r));const h=l.current,d={"X-Goog-Upload-Command":u===c?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},p=i.slice(h,h+u);if(null===p)throw EZ();const f=new oz(n,"POST",function(e,n){const r=fz(e,["active","final"]),o=l.current+u,a=i.size();let c;return c="final"===r?lz(t,s)(e,n):null,new pz(o,a,"final"===r,c)},t.maxUploadRetryTime);return f.headers=d,f.body=p.uploadData(),f.progressCallback=a||null,f.errorHandler=cz(e),f}(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(s,wz,i,r);this._request=o,o.getPromise().then(e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=hz(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(n,wz,e,t);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=function(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=dz(t,i,r),c=sz(l,n),u=QZ.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",i,"\r\n--"+a+"--");if(null===u)throw EZ();const h={name:l.fullPath},d=VZ(s,e.host,e._protocol),p=e.maxUploadRetryTime,f=new oz(d,"POST",lz(e,n),p);return f.urlParams=h,f.headers=o,f.body=u.uploadData(),f.errorHandler=cz(t),f}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,wz,e,t);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=TZ(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=_z(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,i){const r=new yz(t||void 0,n||void 0,i||void 0);return this._addObserver(r),()=>{this._removeObserver(r)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(_z(this._state)){case gz.SUCCESS:vz(this._resolve.bind(null,this.snapshot))();break;case gz.CANCELED:case gz.ERROR:vz(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(_z(this._state)){case gz.RUNNING:case gz.PAUSED:e.next&&vz(e.next.bind(e,this.snapshot))();break;case gz.SUCCESS:e.complete&&vz(e.complete.bind(e))();break;case gz.CANCELED:case gz.ERROR:e.error&&vz(e.error.bind(e,this._error))();break;default:e.error&&vz(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Sz{constructor(e,t){this._service=e,this._location=t instanceof OZ?t:OZ.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Sz(e,t)}get root(){const e=new OZ(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XZ(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new OZ(this._location.bucket,e);return new Sz(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw AZ(e)}}function kz(e,t,n){return Tz.apply(this,arguments)}function Tz(){return(Tz=(0,Ko.Z)(function*(e,t,n){const i={pageToken:n},r=yield Ez(e,i);t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield kz(e,t,r.nextPageToken))})).apply(this,arguments)}function Ez(e,t){null!=t&&"number"==typeof t.maxResults&&MZ("options.maxResults",1,1e3,t.maxResults);const n=t||{},i=function(e,t,n,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",n&&n.length>0&&(s.delimiter=n),i&&(s.pageToken=i),r&&(s.maxResults=r);const o=VZ(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new oz(o,"GET",function(e,t){return function(n,i){const r=function(e,t,n){const i=JZ(n);return null===i?null:function(e,t,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(const r of n.prefixes){const n=r.replace(/\/$/,""),s=e._makeStorageReference(new OZ(t,n));i.prefixes.push(s)}if(n.items)for(const r of n.items){const n=e._makeStorageReference(new OZ(t,r.name));i.items.push(n)}return i}(e,t,i)}(e,t,i);return az(null!==r),r}}(e,t.bucket),a);return l.urlParams=s,l.errorHandler=cz(t),l}(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(i,wz)}function xz(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),i=new OZ(e._location.bucket,n);return new Sz(e.storage,i)}function Iz(e,t){if(e instanceof Rz){const n=e;if(null==n._bucket)throw new CZ("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");const i=new Sz(n,n._bucket);return null!=t?Iz(i,t):i}return void 0!==t?xz(e,t):e}function Az(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Rz)return new Sz(e,t);throw xZ("To use ref(service, url), the first argument must be a Storage instance.")}return Iz(e,t)}function Dz(e,t){const n=null==t?void 0:t.storageBucket;return null==n?null:OZ.makeFromBucketSpec(n,e)}class Rz{constructor(e,t,n,i,r){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host="firebasestorage.googleapis.com",this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?OZ.makeFromBucketSpec(i,this._host):Dz(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?OZ.makeFromBucketSpec(this._url,e):Dz(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){MZ("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){MZ("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ko.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const e=yield t.getToken();if(null!==e)return e.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ko.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sz(this,e)}_makeRequest(e,t,n,i){if(this._deleted)return new PZ(IZ());{const r=function(e,t,n,i,r,s){const o=UZ(e.urlParams),a=e.url+o,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,i),new BZ(a,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r)}(e,this._appId,n,i,t,this._firebaseVersion);return this._requests.add(r),r.getPromise().then(()=>this._requests.delete(r),()=>this._requests.delete(r)),r}}makeRequestWithTokens(e,t){var n=this;return(0,Ko.Z)(function*(){const[i,r]=yield Promise.all([n._getAuthToken(),n._getAppCheckToken()]);return n._makeRequest(e,t,i,r).getPromise()})()}}function Oz(e,t){return Az(e=(0,Fo.m9)(e),t)}(0,Lo._registerComponent)(new Vo.wA("storage",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new Rz(n,i,r,t,Lo.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Lo.registerVersion)("@firebase/storage","0.9.4",""),(0,Lo.registerVersion)("@firebase/storage","0.9.4","esm2017");class Pz{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Nz{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Pz(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(t=>{if(e)return e(new Pz(t,this,this._ref))},t)}on(e,t,n,i){let r;return t&&(r="function"==typeof t?e=>t(new Pz(e,this,this._ref)):{next:t.next?e=>t.next(new Pz(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,r,n||void 0,i||void 0)}}class Fz{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Lz(e,this._service))}get items(){return this._delegate.items.map(e=>new Lz(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Lz{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return xz(e,t)}(this._delegate,e);return new Lz(t,this.storage)}get root(){return new Lz(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Lz(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Nz(function(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Cz(e,new QZ(t),n)}(e=(0,Fo.m9)(e),t,n)}(this._delegate,e,t),this)}putString(e,t=GZ.RAW,n){this._throwIfRoot("putString");const i=YZ(t,e),r=Object.assign({},n);return null==r.contentType&&null!=i.contentType&&(r.contentType=i.contentType),new Nz(new Cz(this._delegate,new QZ(i.data,!0),r),this)}listAll(){return function(e){return function(e){const t={prefixes:[],items:[]};return kz(e,t).then(()=>t)}(e=(0,Fo.m9)(e))}(this._delegate).then(e=>new Fz(e,this.storage))}list(e){return function(e,t){return Ez(e=(0,Fo.m9)(e),t)}(this._delegate,e||void 0).then(e=>new Fz(e,this.storage))}getMetadata(){return function(e){return function(e){e._throwIfRoot("getMetadata");const t=hz(e.storage,e._location,iz());return e.storage.makeRequestWithTokens(t,wz)}(e=(0,Fo.m9)(e))}(this._delegate)}updateMetadata(e){return function(e,t){return function(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,i){const r=VZ(t.fullServerUrl(),e.host,e._protocol),s=sz(n,i),o=e.maxOperationRetryTime,a=new oz(r,"PATCH",lz(e,i),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=uz(t),a}(e.storage,e._location,t,iz());return e.storage.makeRequestWithTokens(n,wz)}(e=(0,Fo.m9)(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return function(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const i=VZ(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new oz(i,"GET",function(e,t){return function(n,i){const r=rz(e,i,t);return az(null!==r),function(e,t,n,i){const r=JZ(t);if(null===r)return null;if(!NZ(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(t=>{const r=e.fullPath;return VZ("/b/"+o(e.bucket)+"/o/"+o(r),n,i)+UZ({alt:"media",token:t})})[0]}(r,i,e.host,e._protocol)}}(e,n),r);return s.errorHandler=uz(t),s}(e.storage,e._location,iz());return e.storage.makeRequestWithTokens(t,wz).then(e=>{if(null===e)throw new CZ("no-download-url","The given file does not have any download URLs.");return e})}(e=(0,Fo.m9)(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return function(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=VZ(t.fullServerUrl(),e.host,e._protocol),i=new oz(n,"DELETE",function(e,t){},e.maxOperationRetryTime);return i.successCodes=[200,204],i.errorHandler=uz(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,wz)}(e=(0,Fo.m9)(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw AZ(e)}}class Mz{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Vz(e))throw xZ("ref() expected a child path but got a URL, use refFromURL instead.");return new Lz(Oz(this._delegate,e),this)}refFromURL(e){if(!Vz(e))throw xZ("refFromURL() expected a full URL but got a child path, use ref() instead.");try{OZ.makeFromUrl(e,this._delegate.host)}catch(t){throw xZ("refFromUrl() expected a valid full URL but got an invalid one.")}return new Lz(Oz(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,n={}){!function(e,t,n,i={}){!function(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken="string"==typeof r?r:(0,Fo.Sg)(r,e.app.options.projectId))}(e,t,n,i)}(this._delegate,e,t,n)}}function Vz(e){return/^[A-Za-z]+:\/\//.test(e)}function Uz(e,{instanceIdentifier:t}){const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:t});return new Mz(n,i)}function qz(e){const t=function(e){return new bt.y(t=>{const n=e=>t.next(e);n(e.snapshot);const i=e.on("state_changed",n);return e.then(e=>{n(e),t.complete()},i=>{n(e.snapshot),(e=>{t.error(e)})(i)}),function(){i()}}).pipe(_k(0))}(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,Pt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function Bz(e){return{getDownloadURL:()=>(0,ut.of)(void 0).pipe(qo.fc,Ft(()=>e.getDownloadURL()),qo.iC),getMetadata:()=>(0,ut.of)(void 0).pipe(qo.fc,Ft(()=>e.getMetadata()),qo.iC),delete:()=>(0,ct.D)(e.delete()),child:t=>Bz(e.child(t)),updateMetadata:t=>(0,ct.D)(e.updateMetadata(t)),put:(t,n)=>qz(e.put(t,n)),putString:(t,n,i)=>qz(e.putString(t,n,i)),list:t=>(0,ct.D)(e.list(t)),listAll:()=>(0,ct.D)(e.listAll())}}!function(e){const t={TaskState:gz,TaskEvent:mz,StringFormat:GZ,Storage:Mz,Reference:Lz};e.INTERNAL.registerComponent(new Vo.wA("storage-compat",Uz,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.12")}(Wo.Z);const jz=new i.OlP("angularfire2.storageBucket"),Zz=new i.OlP("angularfire2.storage.maxUploadRetryTime"),zz=new i.OlP("angularfire2.storage.maxOperationRetryTime"),Gz=new i.OlP("angularfire2.storage.use-emulator");let Hz=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l,c){const u=(0,$o.on)(e,r,t);this.storage=(0,$o.cc)(`${u.name}.storage.${n}`,"AngularFireStorage",u.name,()=>{const e=r.runOutsideAngular(()=>u.storage(n||void 0)),t=l;return t&&e.useEmulator(...t),o&&e.setMaxUploadRetryTime(o),a&&e.setMaxOperationRetryTime(a),e},[o,a])}ref(e){return Bz(this.storage.ref(e))}refFromURL(e){return Bz(this.storage.refFromURL(e))}upload(e,t,n){return Bz(this.storage.ref(e)).put(t,n)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG($o.Dh),i.LFG($o.xv,8),i.LFG(jz,8),i.LFG(i.Lbi),i.LFG(i.R0b),i.LFG(qo.HU),i.LFG(Zz,8),i.LFG(zz,8),i.LFG(Gz,8),i.LFG(MS,8))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),Yz=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})(),$z=(()=>{class e{constructor(){VS.Z.registerVersion("angularfire",qo.q4.full,"gcs-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[Hz],imports:[Yz]}),e})(),Wz=(()=>{class e{constructor(e,t){this.domSanitizer=e,this.matIconRegistry=t,this.iconsPath="../assets/icons",this.icons=[{name:"address-book",path:"address-book.svg"},{name:"sign-out",path:"sign-out.svg"},{name:"trash",path:"trash.svg"},{name:"pencil",path:"pencil.svg"},{name:"user-add",path:"user-add.svg"},{name:"cross",path:"cross.svg"},{name:"star",path:"star.svg"},{name:"form",path:"form.svg"},{name:"favorite",path:"favorite.svg"},{name:"search",path:"search.svg"}],this.registerIcons()}registerIcons(){this.icons.forEach(e=>{this.matIconRegistry.addSvgIcon(e.name,this.setPath(this.iconsPath+"/"+e.path))})}setPath(e){return this.domSanitizer.bypassSecurityTrustResourceUrl(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(it),i.LFG(MV))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})();const Kz={apiKey:"AIzaSyAhZdDJc2LROq2GhplUxn65qnhzkTR1ewc",authDomain:"adresar-c7090.firebaseapp.com",projectId:"adresar-c7090",storageBucket:"adresar-c7090.appspot.com",messagingSenderId:"601641167187",appId:"1:601641167187:web:74c80a904cc8f8cdd759a6",measurementId:"G-D0PYH3DWX0"};let Qz=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e,bootstrap:[wZ]}),e.\u0275inj=i.cJS({providers:[uk,Se],imports:[[lt,bZ,Xx,$o.hO.initializeApp(Kz),YS,ck,$z,QM,PA,YA,Oo,XA,Wz,HV,RV,pq,jB,yj,_D,RR,GU,hq,EI,_Z,Lq]]}),e})();(0,i.G48)(),ot().bootstrapModule(Qz).catch(e=>console.error(e))},6304:function(e,t,n){"use strict";function i(e,t,n,i,r,s,o){try{var a=e[s](o),l=a.value}catch(c){return void n(c)}a.done?t(l):Promise.resolve(l).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var o=e.apply(t,n);function a(e){i(o,r,s,a,l,"next",e)}function l(e){i(o,r,s,a,l,"throw",e)}a(void 0)})}}n.d(t,{Z:function(){return r}})}},function(e){"use strict";e(e.s=4012)}]);